<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å·¥å‚ç‰ˆå¢å¼ºç•Œé¢ - é£Ÿå“æº¯æºç³»ç»Ÿ</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --primary: #1890FF;
            --success: #52C41A;
            --warning: #FAAD14;
            --danger: #FF4D4F;
            --button-height: 80px;
        }

        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            font-size: 18px;
        }

        .factory-container {
            max-width: 390px;
            margin: 0 auto;
            min-height: 100vh;
            background: white;
            position: relative;
        }

        .big-button {
            height: var(--button-height);
            font-size: 24px;
            font-weight: bold;
            border-radius: 16px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            border: none;
            cursor: pointer;
        }

        .big-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.2);
        }

        .big-button:active {
            transform: translateY(0);
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }

        .status-indicator {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 8px;
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: #52C41A;
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: bold;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .notification.show {
            opacity: 1;
        }

        .time-display {
            font-size: 16px;
            color: rgba(255,255,255,0.9);
        }

        /* ç¡®ä¿æ–‡å­—æ­£å¸¸æ¨ªå‘æ˜¾ç¤º */
        .status-card-text {
            writing-mode: horizontal-tb;
            text-orientation: mixed;
            direction: ltr;
        }
    </style>
</head>
<body>
    <div class="factory-container">
        <div id="factory-app"></div>
        <div id="notification" class="notification"></div>
    </div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // é€šçŸ¥ç»„ä»¶
        const showNotification = (message, type = 'success') => {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification show ${type}`;
            setTimeout(() => {
                notification.className = 'notification';
            }, 3000);
        };

        // å¤§æŒ‰é’®ç»„ä»¶
        const BigButton = ({ children, onClick, variant = 'primary', className = '', disabled = false }) => {
            const variantClasses = {
                primary: 'bg-[#1890FF] text-white',
                success: 'bg-[#52C41A] text-white',
                warning: 'bg-[#FAAD14] text-white',
                danger: 'bg-[#FF4D4F] text-white',
                scan: 'bg-gradient-to-r from-green-400 to-blue-500 text-white'
            };

            const handleClick = () => {
                if (!disabled && onClick) {
                    // è§¦è§‰åé¦ˆï¼ˆå¦‚æœæ”¯æŒï¼‰
                    if (navigator.vibrate) {
                        navigator.vibrate(50);
                    }
                    onClick();
                }
            };

            return (
                <button 
                    className={`big-button w-full flex flex-col items-center justify-center ${variantClasses[variant]} ${disabled ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer'} ${className}`}
                    onClick={handleClick}
                    disabled={disabled}
                >
                    {children}
                </button>
            );
        };

        // çŠ¶æ€å¡ç‰‡
        const StatusCard = ({ title, value, status, icon, onClick }) => {
            const statusColors = {
                good: '#52C41A',
                warning: '#FAAD14',
                error: '#FF4D4F'
            };

            return (
                <div 
                    className={`bg-white rounded-xl p-4 shadow-lg border-2 border-gray-100 ${onClick ? 'cursor-pointer hover:shadow-xl transition-shadow' : ''}`}
                    onClick={onClick}
                    style={{ writingMode: 'horizontal-tb' }}
                >
                    <div className="flex items-center justify-between">
                        <div className="flex-1">
                            <div className="flex items-center mb-2">
                                <span 
                                    className="status-indicator pulse" 
                                    style={{ backgroundColor: statusColors[status] }}
                                ></span>
                                <h3 className="text-base font-bold text-gray-800 whitespace-nowrap status-card-text">{title}</h3>
                            </div>
                            <p className="text-2xl font-bold text-gray-900 whitespace-nowrap status-card-text">{value}</p>
                        </div>
                        <div className="text-4xl ml-2">{icon}</div>
                    </div>
                </div>
            );
        };

        // å·¥å‚ç‰ˆå¢å¼ºç•Œé¢
        const FactoryApp = () => {
            const [currentUser, setCurrentUser] = useState('æå¸ˆå‚…');
            const [currentShift, setCurrentShift] = useState('æ—©ç­');
            const [todayTarget, setTodayTarget] = useState(200);
            const [todayCompleted, setTodayCompleted] = useState(127);
            const [quality, setQuality] = useState('è‰¯å¥½');
            const [currentTime, setCurrentTime] = useState(new Date());
            const [lastScanTime, setLastScanTime] = useState(null);

            // æ›´æ–°æ—¶é—´
            useEffect(() => {
                const timer = setInterval(() => {
                    setCurrentTime(new Date());
                }, 1000);
                return () => clearInterval(timer);
            }, []);

            // è¯­éŸ³æ’­æŠ¥åŠŸèƒ½
            const speak = (text) => {
                console.log(`è¯­éŸ³æ’­æŠ¥: ${text}`);
                showNotification(`ğŸ”Š ${text}`);
                // å®é™…é¡¹ç›®ä¸­å¯ä»¥ä½¿ç”¨ Web Speech API
                if ('speechSynthesis' in window) {
                    const utterance = new SpeechSynthesisUtterance(text);
                    utterance.lang = 'zh-CN';
                    speechSynthesis.speak(utterance);
                }
            };

            const handleScan = () => {
                speak('è¯·å¯¹å‡†äºŒç»´ç æ‰«æ');
                setLastScanTime(new Date());
                // æ¨¡æ‹Ÿæ‰«ç æˆåŠŸ
                setTimeout(() => {
                    setTodayCompleted(prev => prev + 1);
                    showNotification('âœ… æ‰«ç æˆåŠŸï¼äº§å“å·²è®°å½•');
                    speak('æ‰«ç æˆåŠŸ');
                }, 2000);
            };

            const handleDataEntry = () => {
                speak('è¿›å…¥æ•°æ®å½•å…¥');
                showNotification('ğŸ“ æ•°æ®å½•å…¥æ¨¡å¼');
            };

            const handleQualityCheck = () => {
                speak('å¼€å§‹è´¨é‡æ£€æŸ¥');
                showNotification('ğŸ” è´¨é‡æ£€æŸ¥æ¨¡å¼');
            };

            const handleHelp = () => {
                speak('æ­£åœ¨å‘¼å«ç®¡ç†å‘˜');
                showNotification('ğŸ†˜ ç®¡ç†å‘˜å·²æ”¶åˆ°æ±‚åŠ©ä¿¡æ¯');
            };

            const handleStatusClick = (type) => {
                if (type === 'device') {
                    showNotification('âš™ï¸ è®¾å¤‡çŠ¶æ€ï¼šè¿è¡Œæ­£å¸¸ï¼Œæ¸©åº¦25Â°C');
                } else if (type === 'quality') {
                    showNotification('âœ… è´¨é‡çŠ¶æ€ï¼šä»Šæ—¥åˆæ ¼ç‡98.5%');
                }
            };

            const completionRate = Math.round((todayCompleted / todayTarget) * 100);
            const timeString = currentTime.toLocaleTimeString('zh-CN', { 
                hour: '2-digit', 
                minute: '2-digit' 
            });

            return (
                <div className="min-h-screen bg-gradient-to-b from-blue-50 to-white">
                    {/* é¡¶éƒ¨çŠ¶æ€æ  */}
                    <div className="bg-[#1890FF] text-white p-4 text-center">
                        <h1 className="text-2xl font-bold">é£Ÿå“æº¯æºç³»ç»Ÿ</h1>
                        <div className="flex justify-between items-center mt-2">
                            <span className="text-lg">{currentUser} Â· {currentShift}</span>
                            <span className="time-display">{timeString}</span>
                        </div>
                    </div>

                    {/* ä¸»è¦å†…å®¹åŒºåŸŸ */}
                    <div className="p-4 space-y-6">
                        {/* ä»Šæ—¥ä»»åŠ¡è¿›åº¦ */}
                        <div className="bg-white rounded-xl p-6 shadow-lg">
                            <h2 className="text-xl font-bold text-gray-800 mb-4 text-center">ğŸ“Š ä»Šæ—¥ä»»åŠ¡</h2>
                            <div className="text-center">
                                <div className="text-4xl font-bold text-[#1890FF] mb-2">
                                    {todayCompleted}/{todayTarget}
                                </div>
                                <div className="text-lg text-gray-600 mb-4">å®Œæˆè¿›åº¦: {completionRate}%</div>
                                <div className="w-full bg-gray-200 rounded-full h-4">
                                    <div 
                                        className="bg-[#1890FF] h-4 rounded-full transition-all duration-500"
                                        style={{ width: `${completionRate}%` }}
                                    ></div>
                                </div>
                                {lastScanTime && (
                                    <div className="text-sm text-gray-500 mt-2">
                                        ä¸Šæ¬¡æ‰«ç : {lastScanTime.toLocaleTimeString('zh-CN')}
                                    </div>
                                )}
                            </div>
                        </div>

                        {/* çŠ¶æ€ç›‘æ§ */}
                        <div className="grid grid-cols-2 gap-4">
                            <StatusCard 
                                title="è®¾å¤‡çŠ¶æ€" 
                                value="æ­£å¸¸" 
                                status="good" 
                                icon="âš™ï¸"
                                onClick={() => handleStatusClick('device')}
                            />
                            <StatusCard 
                                title="è´¨é‡çŠ¶æ€" 
                                value={quality} 
                                status="good" 
                                icon="âœ…"
                                onClick={() => handleStatusClick('quality')}
                            />
                        </div>

                        {/* ä¸»è¦æ“ä½œæŒ‰é’® */}
                        <div className="space-y-4">
                            <BigButton variant="scan" onClick={handleScan}>
                                <div className="text-5xl mb-1">â–¦</div>
                                <div className="text-xl font-semibold">æ‰« ç </div>
                            </BigButton>

                            <div className="grid grid-cols-2 gap-4">
                                <BigButton variant="success" onClick={handleDataEntry}>
                                    <div className="text-3xl mb-1">ğŸ“</div>
                                    <div className="text-base font-semibold">å½•å…¥</div>
                                </BigButton>

                                <BigButton variant="warning" onClick={handleQualityCheck}>
                                    <div className="text-3xl mb-1">ğŸ”</div>
                                    <div className="text-base font-semibold">æ£€æŸ¥</div>
                                </BigButton>
                            </div>
                        </div>

                        {/* ç´§æ€¥æŒ‰é’® */}
                        <BigButton variant="danger" onClick={handleHelp}>
                            <div className="text-4xl mb-1">ğŸ†˜</div>
                            <div className="text-xl font-semibold">å‘¼å«ç®¡ç†å‘˜</div>
                            <div className="text-sm opacity-80">é‡åˆ°é—®é¢˜ç‚¹è¿™é‡Œ</div>
                        </BigButton>

                        {/* ç®€å•æç¤º */}
                        <div className="bg-yellow-50 border border-yellow-200 rounded-xl p-4 text-center">
                            <div className="text-3xl mb-2">ğŸ’¡</div>
                            <p className="text-lg font-medium text-gray-800">
                                æœ‰é—®é¢˜å°±ç‚¹"å‘¼å«ç®¡ç†å‘˜"
                            </p>
                        </div>
                    </div>
                </div>
            );
        };

        // æ¸²æŸ“åº”ç”¨
        ReactDOM.render(<FactoryApp />, document.getElementById('factory-app'));
    </script>
</body>
</html> 