<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI æ„å›¾è¯†åˆ«ç³»ç»Ÿ - ç™½å©çºªé£Ÿå“æº¯æº</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&family=Noto+Sans+SC:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    /* ============================================
       ç™½å©çºª Design System V4
       ============================================ */
    :root {
      --bg-base: #FAFAF8;
      --bg-surface: #FFFFFF;
      --bg-warm: #F5F3EF;
      --bg-muted: #EDEBE7;
      --text-primary: #1A1A1A;
      --text-secondary: #5C5C5C;
      --text-tertiary: #8A8A8A;
      --accent: #C45C26;
      --accent-hover: #A84D1F;
      --accent-light: #FDF8F5;
      --accent-glow: rgba(196, 92, 38, 0.15);
      --success: #2D6A4F;
      --success-light: #E8F5E9;
      --warning: #D4A574;
      --warning-light: #FFF8E1;
      --error: #BC4749;
      --error-light: #FFEBEE;
      --info: #4A90A4;
      --info-light: #E3F2FD;
      --border-subtle: rgba(0, 0, 0, 0.06);
      --border-medium: rgba(0, 0, 0, 0.1);
      --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.06);
      --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.08);
      --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.1);
      --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Noto Sans SC', sans-serif;
      --font-mono: 'JetBrains Mono', 'SF Mono', monospace;
      --ease-out: cubic-bezier(0.16, 1, 0.3, 1);
      --duration-fast: 150ms;
      --duration-normal: 250ms;
    }

    *, *::before, *::after { box-sizing: border-box; }
    html { scroll-behavior: smooth; -webkit-font-smoothing: antialiased; }
    body {
      margin: 0;
      padding: 0;
      font-family: var(--font-sans);
      font-size: 16px;
      line-height: 1.6;
      color: var(--text-primary);
      background: var(--bg-base);
    }

    /* Layout */
    .container { max-width: 1400px; margin: 0 auto; padding: 0 24px; }

    /* Header */
    .header {
      background: var(--bg-surface);
      border-bottom: 1px solid var(--border-subtle);
      padding: 16px 0;
      position: sticky;
      top: 0;
      z-index: 100;
    }
    .header-content { display: flex; align-items: center; justify-content: space-between; }
    .logo { display: flex; align-items: center; gap: 12px; }
    .logo-icon {
      width: 44px; height: 44px;
      background: linear-gradient(135deg, var(--accent), var(--accent-hover));
      border-radius: 12px;
      display: flex; align-items: center; justify-content: center;
      color: white; font-weight: 700; font-size: 18px;
    }
    .logo-text { font-size: 22px; font-weight: 600; }
    .logo-text span { color: var(--accent); }

    /* Tabs */
    .tabs {
      display: flex;
      gap: 8px;
      background: var(--bg-warm);
      padding: 4px;
      border-radius: 12px;
    }
    .tab {
      padding: 10px 20px;
      font-size: 14px;
      font-weight: 500;
      color: var(--text-secondary);
      background: transparent;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: all var(--duration-fast) var(--ease-out);
    }
    .tab:hover { color: var(--text-primary); }
    .tab.active {
      background: var(--bg-surface);
      color: var(--accent);
      box-shadow: var(--shadow-sm);
    }

    /* Main */
    main { padding: 32px 0 64px; }

    /* Section */
    .section {
      background: var(--bg-surface);
      border-radius: 16px;
      padding: 32px;
      margin-bottom: 24px;
      box-shadow: var(--shadow-sm);
    }
    .section-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 24px;
    }
    .section-title {
      font-size: 20px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .section-title::before {
      content: '';
      width: 4px;
      height: 24px;
      background: var(--accent);
      border-radius: 2px;
    }

    /* Stats Grid */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
      margin-bottom: 32px;
    }
    .stat-card {
      background: linear-gradient(135deg, var(--bg-warm), var(--bg-surface));
      border: 1px solid var(--border-subtle);
      border-radius: 12px;
      padding: 24px;
      text-align: center;
      transition: transform var(--duration-fast) var(--ease-out);
    }
    .stat-card:hover { transform: translateY(-4px); }
    .stat-value { font-size: 36px; font-weight: 700; color: var(--accent); }
    .stat-label { font-size: 14px; color: var(--text-secondary); margin-top: 4px; }

    /* Architecture Diagram */
    .architecture-diagram {
      background: var(--bg-warm);
      border-radius: 12px;
      padding: 32px;
      overflow-x: auto;
    }
    .arch-flow {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 16px;
      min-width: 900px;
    }
    .arch-node {
      background: var(--bg-surface);
      border: 2px solid var(--border-medium);
      border-radius: 12px;
      padding: 20px 24px;
      text-align: center;
      min-width: 160px;
      transition: all var(--duration-fast) var(--ease-out);
      cursor: pointer;
    }
    .arch-node:hover {
      border-color: var(--accent);
      box-shadow: 0 4px 20px var(--accent-glow);
      transform: translateY(-4px);
    }
    .arch-node.active {
      border-color: var(--accent);
      background: var(--accent-light);
    }
    .arch-node-num {
      width: 28px; height: 28px;
      background: var(--accent);
      color: white;
      border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      font-size: 14px; font-weight: 600;
      margin: 0 auto 8px;
    }
    .arch-node-title { font-size: 15px; font-weight: 600; color: var(--text-primary); }
    .arch-node-desc { font-size: 12px; color: var(--text-tertiary); margin-top: 4px; }
    .arch-arrow {
      color: var(--text-tertiary);
      font-size: 24px;
      flex-shrink: 0;
    }

    /* Demo Area */
    .demo-area { background: var(--bg-warm); border-radius: 12px; padding: 24px; }
    .demo-input-row { display: flex; gap: 12px; margin-bottom: 16px; }
    .demo-input {
      flex: 1;
      padding: 14px 20px;
      font-size: 16px;
      font-family: var(--font-sans);
      border: 2px solid var(--border-medium);
      border-radius: 12px;
      outline: none;
      transition: border-color var(--duration-fast);
    }
    .demo-input:focus { border-color: var(--accent); }
    .demo-btn {
      padding: 14px 28px;
      font-size: 16px;
      font-weight: 600;
      color: white;
      background: linear-gradient(135deg, var(--accent), var(--accent-hover));
      border: none;
      border-radius: 12px;
      cursor: pointer;
      transition: all var(--duration-fast);
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .demo-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 16px var(--accent-glow); }
    .demo-btn:disabled { opacity: 0.6; cursor: not-allowed; transform: none; }

    /* Case Buttons */
    .case-buttons { display: flex; flex-wrap: wrap; gap: 8px; }
    .case-btn {
      padding: 8px 16px;
      font-size: 13px;
      font-weight: 500;
      color: var(--text-secondary);
      background: var(--bg-surface);
      border: 1px solid var(--border-subtle);
      border-radius: 20px;
      cursor: pointer;
      transition: all var(--duration-fast);
    }
    .case-btn:hover { border-color: var(--accent); color: var(--accent); }
    .case-btn.active { background: var(--accent); color: white; border-color: var(--accent); }

    /* Result Cards */
    .result-area { margin-top: 24px; display: none; }
    .result-area.visible { display: block; animation: fadeIn 0.3s var(--ease-out); }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

    .result-card {
      background: var(--bg-surface);
      border: 1px solid var(--border-subtle);
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 16px;
    }
    .result-card-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 16px;
      padding-bottom: 12px;
      border-bottom: 1px solid var(--border-subtle);
    }
    .result-icon {
      width: 40px; height: 40px;
      border-radius: 10px;
      display: flex; align-items: center; justify-content: center;
      font-size: 18px;
    }
    .result-icon.success { background: var(--success-light); color: var(--success); }
    .result-icon.info { background: var(--info-light); color: var(--info); }
    .result-icon.warning { background: var(--warning-light); color: var(--warning); }
    .result-card-title { font-size: 16px; font-weight: 600; }
    .result-card-subtitle { font-size: 13px; color: var(--text-tertiary); }

    .result-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
    }
    .result-item { padding: 12px; background: var(--bg-warm); border-radius: 8px; }
    .result-item-label { font-size: 12px; color: var(--text-tertiary); margin-bottom: 4px; }
    .result-item-value { font-size: 14px; font-weight: 500; color: var(--text-primary); }
    .result-item-value.highlight { color: var(--accent); }

    /* Data Table Result */
    .result-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 14px;
    }
    .result-table th {
      text-align: left;
      padding: 12px;
      background: var(--bg-warm);
      color: var(--text-secondary);
      font-weight: 500;
      border-bottom: 1px solid var(--border-subtle);
    }
    .result-table td {
      padding: 12px;
      border-bottom: 1px solid var(--border-subtle);
    }
    .result-table tr:last-child td { border-bottom: none; }
    .result-table tr:hover td { background: var(--bg-warm); }

    /* Status Badge */
    .badge {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 4px 10px;
      font-size: 12px;
      font-weight: 500;
      border-radius: 12px;
    }
    .badge.success { background: var(--success-light); color: var(--success); }
    .badge.warning { background: var(--warning-light); color: #9A6700; }
    .badge.error { background: var(--error-light); color: var(--error); }
    .badge.info { background: var(--info-light); color: var(--info); }

    /* Intent Categories */
    .category-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 16px;
    }
    .category-card {
      background: var(--bg-surface);
      border: 1px solid var(--border-subtle);
      border-radius: 12px;
      overflow: hidden;
      transition: all var(--duration-fast);
    }
    .category-card:hover { border-color: var(--border-medium); box-shadow: var(--shadow-md); }
    .category-header {
      padding: 16px;
      background: var(--bg-warm);
      display: flex;
      align-items: center;
      justify-content: space-between;
      cursor: pointer;
    }
    .category-name {
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 600;
    }
    .category-icon {
      width: 32px; height: 32px;
      border-radius: 8px;
      display: flex; align-items: center; justify-content: center;
      font-size: 16px;
    }
    .category-count {
      font-size: 13px;
      color: var(--text-tertiary);
      background: var(--bg-surface);
      padding: 4px 12px;
      border-radius: 12px;
    }
    .category-content {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s var(--ease-out);
    }
    .category-card.expanded .category-content { max-height: 600px; }
    .category-card.expanded .category-expand { transform: rotate(180deg); }
    .intent-list { padding: 16px; }
    .intent-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 12px;
      border-radius: 8px;
      transition: background var(--duration-fast);
      cursor: pointer;
    }
    .intent-item:hover { background: var(--bg-warm); }
    .intent-name { font-size: 14px; }
    .intent-code { font-size: 11px; font-family: var(--font-mono); color: var(--text-tertiary); }

    /* Tools Grid */
    .tools-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 12px;
    }
    .tool-card {
      padding: 16px;
      background: var(--bg-warm);
      border-radius: 10px;
      border: 1px solid transparent;
      transition: all var(--duration-fast);
      cursor: pointer;
    }
    .tool-card:hover {
      background: var(--bg-surface);
      border-color: var(--accent);
      box-shadow: var(--shadow-sm);
    }
    .tool-name {
      font-size: 14px;
      font-weight: 500;
      font-family: var(--font-mono);
      color: var(--accent);
      margin-bottom: 4px;
    }
    .tool-desc { font-size: 13px; color: var(--text-secondary); }

    /* Process Steps */
    .process-steps { padding: 24px 0; }
    .process-step {
      display: flex;
      gap: 20px;
      padding: 20px;
      border-left: 3px solid var(--border-subtle);
      margin-left: 16px;
      position: relative;
      transition: all var(--duration-fast);
    }
    .process-step.active {
      border-left-color: var(--accent);
      background: var(--accent-light);
      border-radius: 0 12px 12px 0;
    }
    .process-step.completed { border-left-color: var(--success); }
    .process-step-num {
      position: absolute;
      left: -18px;
      width: 32px; height: 32px;
      background: var(--bg-surface);
      border: 3px solid var(--border-subtle);
      border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      font-size: 14px; font-weight: 600;
      color: var(--text-tertiary);
    }
    .process-step.active .process-step-num { border-color: var(--accent); color: var(--accent); background: var(--accent-light); }
    .process-step.completed .process-step-num { border-color: var(--success); color: white; background: var(--success); }
    .process-step-content { flex: 1; }
    .process-step-title { font-size: 16px; font-weight: 600; margin-bottom: 4px; }
    .process-step-desc { font-size: 14px; color: var(--text-secondary); }
    .process-step-data {
      margin-top: 12px;
      padding: 12px;
      background: var(--bg-surface);
      border-radius: 8px;
      font-family: var(--font-mono);
      font-size: 13px;
    }
    .process-step-data .key { color: var(--accent); }
    .process-step-data .value { color: var(--success); }

    /* Tab Content */
    .tab-content { display: none; }
    .tab-content.active { display: block; }

    /* Search */
    .search-box {
      position: relative;
      margin-bottom: 20px;
    }
    .search-input {
      width: 100%;
      padding: 12px 16px 12px 44px;
      font-size: 15px;
      border: 2px solid var(--border-subtle);
      border-radius: 10px;
      outline: none;
      transition: border-color var(--duration-fast);
    }
    .search-input:focus { border-color: var(--accent); }
    .search-icon {
      position: absolute;
      left: 14px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--text-tertiary);
    }

    /* Filter Tags */
    .filter-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 20px;
    }
    .filter-tag {
      padding: 6px 14px;
      font-size: 13px;
      background: var(--bg-warm);
      border: 1px solid var(--border-subtle);
      border-radius: 16px;
      cursor: pointer;
      transition: all var(--duration-fast);
    }
    .filter-tag:hover { border-color: var(--accent); }
    .filter-tag.active { background: var(--accent); color: white; border-color: var(--accent); }

    /* Responsive */
    @media (max-width: 768px) {
      .arch-flow { flex-direction: column; min-width: auto; }
      .arch-arrow { transform: rotate(90deg); }
      .demo-input-row { flex-direction: column; }
      .tabs { flex-wrap: wrap; justify-content: center; }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="container header-content">
      <div class="logo">
        <div class="logo-icon">AI</div>
        <div class="logo-text">ç™½å©çºª <span>æ„å›¾è¯†åˆ«ç³»ç»Ÿ</span></div>
      </div>
      <div class="tabs">
        <button class="tab active" onclick="switchTab('overview')">ç³»ç»Ÿæ¦‚è§ˆ</button>
        <button class="tab" onclick="switchTab('demo')">äº¤äº’æ¼”ç¤º</button>
        <button class="tab" onclick="switchTab('intents')">æ„å›¾åº“</button>
        <button class="tab" onclick="switchTab('tools')">å·¥å…·åº“</button>
      </div>
    </div>
  </header>

  <main>
    <div class="container">
      <!-- Tab: Overview -->
      <div id="tab-overview" class="tab-content active">
        <!-- Stats -->
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-value">137</div>
            <div class="stat-label">AI æ„å›¾é…ç½®</div>
          </div>
          <div class="stat-card">
            <div class="stat-value">122</div>
            <div class="stat-label">æ³¨å†Œå·¥å…·</div>
          </div>
          <div class="stat-card">
            <div class="stat-value">19</div>
            <div class="stat-label">æ„å›¾åˆ†ç±»</div>
          </div>
          <div class="stat-card">
            <div class="stat-value">6</div>
            <div class="stat-label">è¯†åˆ«å±‚çº§</div>
          </div>
          <div class="stat-card">
            <div class="stat-value">&lt;100ms</div>
            <div class="stat-label">å‘é‡åŒ¹é…å»¶è¿Ÿ</div>
          </div>
          <div class="stat-card">
            <div class="stat-value">4</div>
            <div class="stat-label">æ•æ„Ÿåº¦çº§åˆ«</div>
          </div>
        </div>

        <!-- Architecture -->
        <section class="section">
          <div class="section-header">
            <h2 class="section-title">ç³»ç»Ÿæ¶æ„</h2>
          </div>
          <div class="architecture-diagram">
            <div class="arch-flow">
              <div class="arch-node" onclick="highlightStep(1)">
                <div class="arch-node-num">1</div>
                <div class="arch-node-title">æŸ¥è¯¢é¢„å¤„ç†</div>
                <div class="arch-node-desc">æ—¶é—´å½’ä¸€åŒ– Â· å£è¯­æ ‡å‡†åŒ– Â· æŒ‡ä»£æ¶ˆè§£</div>
              </div>
              <div class="arch-arrow">â†’</div>
              <div class="arch-node" onclick="highlightStep(2)">
                <div class="arch-node-num">2</div>
                <div class="arch-node-title">æ„å›¾è¯†åˆ«</div>
                <div class="arch-node-desc">6å±‚åŒ¹é… Â· è¯­ä¹‰å‘é‡ Â· LLMå…œåº•</div>
              </div>
              <div class="arch-arrow">â†’</div>
              <div class="arch-node" onclick="highlightStep(3)">
                <div class="arch-node-num">3</div>
                <div class="arch-node-title">æ‰§è¡Œè·¯ç”±</div>
                <div class="arch-node-desc">å·¥å…·ç»‘å®š Â· å‚æ•°æå– Â· æƒé™æ ¡éªŒ</div>
              </div>
              <div class="arch-arrow">â†’</div>
              <div class="arch-node" onclick="highlightStep(4)">
                <div class="arch-node-num">4</div>
                <div class="arch-node-title">ç»“æœéªŒè¯</div>
                <div class="arch-node-desc">è§„åˆ™éªŒè¯ Â· è¯­ä¹‰éªŒè¯ Â· é‡è¯•ç­–ç•¥</div>
              </div>
              <div class="arch-arrow">â†’</div>
              <div class="arch-node" onclick="highlightStep(5)">
                <div class="arch-node-num">5</div>
                <div class="arch-node-title">è®°å¿†æ›´æ–°</div>
                <div class="arch-node-desc">å®ä½“æ§½ä½ Â· å¯¹è¯æ‘˜è¦ Â· ä¸Šä¸‹æ–‡è¿½è¸ª</div>
              </div>
            </div>
          </div>
        </section>

        <!-- Recognition Layers -->
        <section class="section">
          <div class="section-header">
            <h2 class="section-title">å…­å±‚æ„å›¾è¯†åˆ«</h2>
          </div>
          <div class="category-grid">
            <div class="result-card">
              <div class="result-card-header">
                <div class="result-icon info">1</div>
                <div>
                  <div class="result-card-title">ç²¾ç¡®åŒ¹é… (Exact)</div>
                  <div class="result-card-subtitle">intentCode å®Œå…¨åŒ¹é…</div>
                </div>
              </div>
              <p style="font-size:14px;color:var(--text-secondary);margin:0;">ç”¨æˆ·è¾“å…¥ä¸é¢„è®¾çš„ intentCode å®Œå…¨ä¸€è‡´æ—¶ç›´æ¥å‘½ä¸­ï¼Œé€šå¸¸ç”¨äºç³»ç»Ÿå†…éƒ¨è°ƒç”¨æˆ–å¿«æ·æŒ‡ä»¤ã€‚</p>
            </div>
            <div class="result-card">
              <div class="result-card-header">
                <div class="result-icon info">2</div>
                <div>
                  <div class="result-card-title">çŸ­è¯­åŒ¹é… (Phrase)</div>
                  <div class="result-card-subtitle">å…³é”®çŸ­è¯­è§¦å‘</div>
                </div>
              </div>
              <p style="font-size:14px;color:var(--text-secondary);margin:0;">åŸºäº keywords å…³é”®è¯åˆ—è¡¨åŒ¹é…ï¼Œå¦‚"æŸ¥åº“å­˜"ã€"è´¨æ£€ç»“æœ"ç­‰è§¦å‘è¯ï¼Œæ”¯æŒè´Ÿå‘å…³é”®è¯æƒ©ç½šã€‚</p>
            </div>
            <div class="result-card">
              <div class="result-card-header">
                <div class="result-icon info">3</div>
                <div>
                  <div class="result-card-title">è¯­ä¹‰åŒ¹é… (Semantic)</div>
                  <div class="result-card-subtitle">å‘é‡ç›¸ä¼¼åº¦è®¡ç®—</div>
                </div>
              </div>
              <p style="font-size:14px;color:var(--text-secondary);margin:0;">ä½¿ç”¨ Embedding å°†ç”¨æˆ·è¾“å…¥å’Œæ„å›¾æè¿°è½¬ä¸ºå‘é‡ï¼Œè®¡ç®—ä½™å¼¦ç›¸ä¼¼åº¦ï¼Œé˜ˆå€¼ 0.75 ä»¥ä¸Šå‘½ä¸­ã€‚</p>
            </div>
            <div class="result-card">
              <div class="result-card-header">
                <div class="result-icon info">4</div>
                <div>
                  <div class="result-card-title">å…³é”®è¯åŒ¹é… (Keyword)</div>
                  <div class="result-card-subtitle">æ¨¡ç³Šå…³é”®è¯æå–</div>
                </div>
              </div>
              <p style="font-size:14px;color:var(--text-secondary);margin:0;">åˆ†è¯åæå–å…³é”®è¯ï¼Œä¸æ„å›¾çš„ keywords åˆ—è¡¨è¿›è¡Œæ¨¡ç³ŠåŒ¹é…ï¼Œè®¡ç®—è¦†ç›–ç‡å¾—åˆ†ã€‚</p>
            </div>
            <div class="result-card">
              <div class="result-card-header">
                <div class="result-icon info">5</div>
                <div>
                  <div class="result-card-title">ä¸Šä¸‹æ–‡æ¨ç† (Context)</div>
                  <div class="result-card-subtitle">å¯¹è¯å†å²åˆ†æ</div>
                </div>
              </div>
              <p style="font-size:14px;color:var(--text-secondary);margin:0;">ç»“åˆå¯¹è¯å†å²å’Œå®ä½“æ§½ä½ï¼Œæ¨ç†ç”¨æˆ·å¯èƒ½çš„æ„å›¾ï¼Œå¦‚"ä¾›åº”å•†æ˜¯è°"åœ¨æ‰¹æ¬¡æŸ¥è¯¢åæ¨ç†ä¸ºä¾›åº”å•†æŸ¥è¯¢ã€‚</p>
            </div>
            <div class="result-card">
              <div class="result-card-header">
                <div class="result-icon warning">6</div>
                <div>
                  <div class="result-card-title">LLM å…œåº• (Fallback)</div>
                  <div class="result-card-subtitle">å¤§æ¨¡å‹ç†è§£</div>
                </div>
              </div>
              <p style="font-size:14px;color:var(--text-secondary);margin:0;">å‰5å±‚å‡æœªå‘½ä¸­æ—¶ï¼Œè°ƒç”¨ LLM è¿›è¡Œæ„å›¾ç†è§£ï¼Œä½¿ç”¨ Few-shot ç¤ºä¾‹æå‡å‡†ç¡®ç‡ã€‚</p>
            </div>
          </div>
        </section>

        <!-- Sensitivity Levels -->
        <section class="section">
          <div class="section-header">
            <h2 class="section-title">æ•æ„Ÿåº¦çº§åˆ«</h2>
          </div>
          <div class="result-grid" style="grid-template-columns: repeat(4, 1fr);">
            <div class="result-item">
              <div class="result-item-label">LOW</div>
              <div class="result-item-value">åªè¯»æŸ¥è¯¢</div>
              <div style="font-size:12px;color:var(--text-tertiary);margin-top:4px;">é…é¢æ¶ˆè€— 1ï¼Œæ— éœ€å®¡æ‰¹</div>
            </div>
            <div class="result-item">
              <div class="result-item-label">MEDIUM</div>
              <div class="result-item-value">æœ‰é™ä¿®æ”¹</div>
              <div style="font-size:12px;color:var(--text-tertiary);margin-top:4px;">é…é¢æ¶ˆè€— 2ï¼Œéœ€æƒé™</div>
            </div>
            <div class="result-item">
              <div class="result-item-label">HIGH</div>
              <div class="result-item-value">é‡è¦æ“ä½œ</div>
              <div style="font-size:12px;color:var(--text-tertiary);margin-top:4px;">é…é¢æ¶ˆè€— 2-3ï¼Œéœ€é«˜çº§æƒé™</div>
            </div>
            <div class="result-item">
              <div class="result-item-label">CRITICAL</div>
              <div class="result-item-value highlight">éœ€è¦å®¡æ‰¹</div>
              <div style="font-size:12px;color:var(--text-tertiary);margin-top:4px;">é…é¢æ¶ˆè€— 3-5ï¼Œéœ€å®¡æ‰¹é“¾</div>
            </div>
          </div>
        </section>
      </div>

      <!-- Tab: Demo -->
      <div id="tab-demo" class="tab-content">
        <section class="section">
          <div class="section-header">
            <h2 class="section-title">äº¤äº’å¼æ¼”ç¤º</h2>
          </div>

          <div class="demo-area">
            <div class="demo-input-row">
              <input type="text" class="demo-input" id="demoInput" placeholder="è¾“å…¥è‡ªç„¶è¯­è¨€æŸ¥è¯¢ï¼Œä¾‹å¦‚ï¼šè¿™æ‰¹çš„è´¨æ£€æƒ…å†µæ€ä¹ˆæ ·">
              <button class="demo-btn" id="demoBtn" onclick="runDemo()">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
                è¿è¡Œæ¼”ç¤º
              </button>
            </div>
            <div style="margin-bottom:12px;color:var(--text-secondary);font-size:14px;">é¢„è®¾æ¡ˆä¾‹ï¼š</div>
            <div class="case-buttons" id="caseButtons"></div>
          </div>

          <!-- Process Visualization -->
          <div class="process-steps" id="processSteps">
            <div class="process-step" data-step="1">
              <div class="process-step-num">1</div>
              <div class="process-step-content">
                <div class="process-step-title">æŸ¥è¯¢é¢„å¤„ç†</div>
                <div class="process-step-desc">æ—¶é—´å½’ä¸€åŒ–ã€å£è¯­æ ‡å‡†åŒ–ã€æŒ‡ä»£æ¶ˆè§£</div>
                <div class="process-step-data" id="step1Data" style="display:none;"></div>
              </div>
            </div>
            <div class="process-step" data-step="2">
              <div class="process-step-num">2</div>
              <div class="process-step-content">
                <div class="process-step-title">æ„å›¾è¯†åˆ«</div>
                <div class="process-step-desc">å…­å±‚åŒ¹é…ï¼Œè¿”å›æœ€é«˜ç½®ä¿¡åº¦æ„å›¾</div>
                <div class="process-step-data" id="step2Data" style="display:none;"></div>
              </div>
            </div>
            <div class="process-step" data-step="3">
              <div class="process-step-num">3</div>
              <div class="process-step-content">
                <div class="process-step-title">æ‰§è¡Œè·¯ç”±</div>
                <div class="process-step-desc">æ ¹æ®æ„å›¾ç»‘å®šçš„å·¥å…·æ‰§è¡ŒæŸ¥è¯¢</div>
                <div class="process-step-data" id="step3Data" style="display:none;"></div>
              </div>
            </div>
            <div class="process-step" data-step="4">
              <div class="process-step-num">4</div>
              <div class="process-step-content">
                <div class="process-step-title">ç»“æœéªŒè¯</div>
                <div class="process-step-desc">è§„åˆ™éªŒè¯ + è¯­ä¹‰éªŒè¯</div>
                <div class="process-step-data" id="step4Data" style="display:none;"></div>
              </div>
            </div>
            <div class="process-step" data-step="5">
              <div class="process-step-num">5</div>
              <div class="process-step-content">
                <div class="process-step-title">è®°å¿†æ›´æ–°</div>
                <div class="process-step-desc">æ›´æ–°å®ä½“æ§½ä½å’Œå¯¹è¯ä¸Šä¸‹æ–‡</div>
                <div class="process-step-data" id="step5Data" style="display:none;"></div>
              </div>
            </div>
          </div>

          <!-- Result Display -->
          <div class="result-area" id="resultArea">
            <div class="result-card" id="resultCard"></div>
          </div>
        </section>
      </div>

      <!-- Tab: Intents -->
      <div id="tab-intents" class="tab-content">
        <section class="section">
          <div class="section-header">
            <h2 class="section-title">æ„å›¾åº“ (137ä¸ªæ„å›¾)</h2>
          </div>

          <div class="search-box">
            <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.35-4.35"></path></svg>
            <input type="text" class="search-input" id="intentSearch" placeholder="æœç´¢æ„å›¾åç§°æˆ–ä»£ç ..." oninput="filterIntents()">
          </div>

          <div class="filter-tags" id="categoryFilters"></div>

          <div class="category-grid" id="intentCategories"></div>
        </section>
      </div>

      <!-- Tab: Tools -->
      <div id="tab-tools" class="tab-content">
        <section class="section">
          <div class="section-header">
            <h2 class="section-title">å·¥å…·åº“ (122ä¸ªå·¥å…·)</h2>
          </div>

          <div class="search-box">
            <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.35-4.35"></path></svg>
            <input type="text" class="search-input" id="toolSearch" placeholder="æœç´¢å·¥å…·åç§°..." oninput="filterTools()">
          </div>

          <div class="filter-tags" id="toolFilters"></div>

          <div class="tools-grid" id="toolsGrid"></div>
        </section>
      </div>
    </div>
  </main>

  <script>
    // ============================================
    // å®Œæ•´æ„å›¾æ•°æ® (19ä¸ªåˆ†ç±»ï¼Œ137ä¸ªæ„å›¾)
    // ============================================
    const intentCategories = {
      QUALITY: {
        name: "è´¨æ£€ç®¡ç†",
        icon: "âœ“",
        color: "#2D6A4F",
        intents: [
          { code: "QUALITY_CHECK_QUERY", name: "è´¨æ£€é¡¹æŸ¥è¯¢", sensitivity: "LOW", tool: "quality_check_query" },
          { code: "QUALITY_CHECK_EXECUTE", name: "æ‰§è¡Œè´¨æ£€", sensitivity: "MEDIUM", tool: "quality_check_update" },
          { code: "QUALITY_DISPOSITION_EVALUATE", name: "å¤„ç½®è¯„ä¼°", sensitivity: "MEDIUM", tool: null },
          { code: "QUALITY_DISPOSITION_EXECUTE", name: "æ‰§è¡Œå¤„ç½®", sensitivity: "HIGH", tool: "quality_result_submit" },
          { code: "QUALITY_STATS", name: "è´¨æ£€ç»Ÿè®¡", sensitivity: "LOW", tool: "quality_stats_query" },
          { code: "QUALITY_CRITICAL_ITEMS", name: "å…³é”®è´¨æ£€é¡¹", sensitivity: "LOW", tool: "quality_check_query" }
        ]
      },
      MATERIAL: {
        name: "åŸæ–™ç®¡ç†",
        icon: "ğŸ“¦",
        color: "#D4A574",
        intents: [
          { code: "MATERIAL_BATCH_QUERY", name: "åŸæ–™æ‰¹æ¬¡æŸ¥è¯¢", sensitivity: "LOW", tool: "material_batch_query" },
          { code: "MATERIAL_BATCH_USE", name: "ä½¿ç”¨åŸæ–™", sensitivity: "HIGH", tool: "material_batch_use" },
          { code: "MATERIAL_BATCH_RESERVE", name: "é¢„ç•™åŸæ–™", sensitivity: "MEDIUM", tool: "material_batch_reserve" },
          { code: "MATERIAL_BATCH_RELEASE", name: "é‡Šæ”¾é¢„ç•™", sensitivity: "MEDIUM", tool: "material_batch_release" },
          { code: "MATERIAL_BATCH_CONSUME", name: "æ¶ˆè€—é¢„ç•™", sensitivity: "HIGH", tool: "material_batch_consume" },
          { code: "MATERIAL_FIFO_RECOMMEND", name: "FIFOæ¨è", sensitivity: "LOW", tool: "material_fifo_recommend" },
          { code: "MATERIAL_EXPIRING_ALERT", name: "å³å°†è¿‡æœŸé¢„è­¦", sensitivity: "LOW", tool: "material_expiring_alert" },
          { code: "MATERIAL_LOW_STOCK_ALERT", name: "ä½åº“å­˜é¢„è­¦", sensitivity: "LOW", tool: "material_low_stock_alert" },
          { code: "MATERIAL_EXPIRED_QUERY", name: "å·²è¿‡æœŸæŸ¥è¯¢", sensitivity: "LOW", tool: "material_expired_query" },
          { code: "MATERIAL_ADJUST_QUANTITY", name: "è°ƒæ•´æ•°é‡", sensitivity: "HIGH", tool: "material_adjust_quantity" }
        ]
      },
      SHIPMENT: {
        name: "å‡ºè´§æº¯æº",
        icon: "ğŸšš",
        color: "#4A90A4",
        intents: [
          { code: "SHIPMENT_CREATE", name: "åˆ›å»ºå‡ºè´§", sensitivity: "HIGH", tool: "shipment_create" },
          { code: "SHIPMENT_QUERY", name: "æŸ¥è¯¢å‡ºè´§", sensitivity: "LOW", tool: "shipment_query" },
          { code: "SHIPMENT_UPDATE", name: "æ›´æ–°å‡ºè´§", sensitivity: "MEDIUM", tool: "shipment_update" },
          { code: "SHIPMENT_STATUS_UPDATE", name: "æ›´æ–°å‡ºè´§çŠ¶æ€", sensitivity: "MEDIUM", tool: "shipment_status_update" },
          { code: "SHIPMENT_STATS", name: "å‡ºè´§ç»Ÿè®¡", sensitivity: "LOW", tool: "shipment_stats_query" },
          { code: "SHIPMENT_BY_CUSTOMER", name: "å®¢æˆ·å‡ºè´§", sensitivity: "LOW", tool: "shipment_by_customer" },
          { code: "SHIPMENT_BY_DATE", name: "æ—¥æœŸå‡ºè´§", sensitivity: "LOW", tool: "shipment_by_date" },
          { code: "TRACE_BATCH", name: "æ‰¹æ¬¡æº¯æº", sensitivity: "LOW", tool: "trace_batch" },
          { code: "TRACE_FULL", name: "å®Œæ•´æº¯æº", sensitivity: "LOW", tool: "trace_full" },
          { code: "TRACE_PUBLIC", name: "å…¬å¼€æº¯æº", sensitivity: "LOW", tool: "trace_public" }
        ]
      },
      REPORT: {
        name: "æŠ¥è¡¨ç”Ÿæˆ",
        icon: "ğŸ“Š",
        color: "#8B5CF6",
        intents: [
          { code: "REPORT_DASHBOARD_OVERVIEW", name: "ä»ªè¡¨ç›˜æ€»è§ˆ", sensitivity: "LOW", tool: "report_dashboard_overview" },
          { code: "REPORT_PRODUCTION", name: "ç”Ÿäº§æŠ¥è¡¨", sensitivity: "LOW", tool: "report_production" },
          { code: "REPORT_QUALITY", name: "è´¨é‡æŠ¥è¡¨", sensitivity: "LOW", tool: "report_quality" },
          { code: "REPORT_INVENTORY", name: "åº“å­˜æŠ¥è¡¨", sensitivity: "LOW", tool: "report_inventory" },
          { code: "REPORT_FINANCE", name: "è´¢åŠ¡æŠ¥è¡¨", sensitivity: "MEDIUM", tool: "report_finance" },
          { code: "REPORT_EFFICIENCY", name: "æ•ˆç‡åˆ†ææŠ¥è¡¨", sensitivity: "LOW", tool: "report_efficiency" },
          { code: "REPORT_KPI", name: "KPIæŒ‡æ ‡æŠ¥è¡¨", sensitivity: "LOW", tool: "report_kpi" },
          { code: "REPORT_ANOMALY", name: "å¼‚å¸¸æŠ¥è¡¨", sensitivity: "MEDIUM", tool: "report_anomaly" },
          { code: "REPORT_TRENDS", name: "è¶‹åŠ¿æŠ¥è¡¨", sensitivity: "LOW", tool: "report_trends" }
        ]
      },
      ALERT: {
        name: "å‘Šè­¦ç®¡ç†",
        icon: "ğŸ””",
        color: "#EF4444",
        intents: [
          { code: "ALERT_LIST", name: "å‘Šè­¦åˆ—è¡¨", sensitivity: "LOW", tool: "alert_list" },
          { code: "ALERT_ACTIVE", name: "æ´»è·ƒå‘Šè­¦", sensitivity: "LOW", tool: "alert_active" },
          { code: "ALERT_STATS", name: "å‘Šè­¦ç»Ÿè®¡", sensitivity: "LOW", tool: "alert_stats" },
          { code: "ALERT_ACKNOWLEDGE", name: "ç¡®è®¤å‘Šè­¦", sensitivity: "MEDIUM", tool: "alert_acknowledge" },
          { code: "ALERT_RESOLVE", name: "è§£å†³å‘Šè­¦", sensitivity: "MEDIUM", tool: "alert_resolve" },
          { code: "ALERT_TRIAGE", name: "å‘Šè­¦åˆ†çº§", sensitivity: "LOW", tool: "alert_triage" },
          { code: "ALERT_DIAGNOSE", name: "å‘Šè­¦è¯Šæ–­", sensitivity: "MEDIUM", tool: "alert_diagnose" },
          { code: "ALERT_BY_EQUIPMENT", name: "æŒ‰è®¾å¤‡å‘Šè­¦", sensitivity: "LOW", tool: "alert_by_equipment" },
          { code: "ALERT_BY_LEVEL", name: "æŒ‰çº§åˆ«å‘Šè­¦", sensitivity: "LOW", tool: "alert_by_level" }
        ]
      },
      HR: {
        name: "è€ƒå‹¤ç®¡ç†",
        icon: "ğŸ‘¤",
        color: "#F59E0B",
        intents: [
          { code: "ATTENDANCE_STATUS", name: "æ‰“å¡çŠ¶æ€", sensitivity: "LOW", tool: "attendance_status" },
          { code: "ATTENDANCE_HISTORY", name: "è€ƒå‹¤å†å²", sensitivity: "LOW", tool: "attendance_history" },
          { code: "ATTENDANCE_STATS", name: "è€ƒå‹¤ç»Ÿè®¡", sensitivity: "LOW", tool: "attendance_stats" },
          { code: "ATTENDANCE_MONTHLY", name: "æœˆåº¦è€ƒå‹¤", sensitivity: "LOW", tool: "attendance_monthly" },
          { code: "ATTENDANCE_ANOMALY", name: "è€ƒå‹¤å¼‚å¸¸", sensitivity: "MEDIUM", tool: "attendance_anomaly" },
          { code: "ATTENDANCE_DEPARTMENT", name: "éƒ¨é—¨è€ƒå‹¤", sensitivity: "LOW", tool: "attendance_department" },
          { code: "ATTENDANCE_TODAY", name: "ä»Šæ—¥æ‰“å¡è®°å½•", sensitivity: "LOW", tool: "attendance_today" },
          { code: "CLOCK_IN", name: "ä¸Šç­æ‰“å¡", sensitivity: "MEDIUM", tool: "clock_in" },
          { code: "CLOCK_OUT", name: "ä¸‹ç­æ‰“å¡", sensitivity: "MEDIUM", tool: "clock_out" }
        ]
      },
      CRM: {
        name: "å®¢æˆ·ä¾›åº”å•†",
        icon: "ğŸ¤",
        color: "#06B6D4",
        intents: [
          { code: "CUSTOMER_LIST", name: "å®¢æˆ·åˆ—è¡¨", sensitivity: "LOW", tool: "customer_list" },
          { code: "CUSTOMER_SEARCH", name: "å®¢æˆ·æœç´¢", sensitivity: "LOW", tool: "customer_search" },
          { code: "CUSTOMER_STATS", name: "å®¢æˆ·ç»Ÿè®¡", sensitivity: "LOW", tool: "customer_stats" },
          { code: "CUSTOMER_BY_TYPE", name: "æŒ‰ç±»å‹å®¢æˆ·", sensitivity: "LOW", tool: "customer_by_type" },
          { code: "CUSTOMER_ACTIVE", name: "æ´»è·ƒå®¢æˆ·", sensitivity: "LOW", tool: "customer_active" },
          { code: "CUSTOMER_PURCHASE_HISTORY", name: "å®¢æˆ·è´­ä¹°å†å²", sensitivity: "LOW", tool: "customer_purchase_history" },
          { code: "SUPPLIER_LIST", name: "ä¾›åº”å•†åˆ—è¡¨", sensitivity: "LOW", tool: "supplier_list" },
          { code: "SUPPLIER_SEARCH", name: "ä¾›åº”å•†æœç´¢", sensitivity: "LOW", tool: "supplier_search" },
          { code: "SUPPLIER_EVALUATE", name: "ä¾›åº”å•†è¯„ä¼°", sensitivity: "MEDIUM", tool: "supplier_evaluate" },
          { code: "SUPPLIER_BY_CATEGORY", name: "æŒ‰ç±»åˆ«ä¾›åº”å•†", sensitivity: "LOW", tool: "supplier_by_category" },
          { code: "SUPPLIER_ACTIVE", name: "æ´»è·ƒä¾›åº”å•†", sensitivity: "LOW", tool: "supplier_active" },
          { code: "SUPPLIER_RANKING", name: "ä¾›åº”å•†æ’å", sensitivity: "LOW", tool: "supplier_ranking" }
        ]
      },
      EQUIPMENT: {
        name: "è®¾å¤‡ç®¡ç†",
        icon: "âš™ï¸",
        color: "#64748B",
        intents: [
          { code: "EQUIPMENT_LIST", name: "æŸ¥è¯¢è®¾å¤‡åˆ—è¡¨", sensitivity: "LOW", tool: "equipment_list" },
          { code: "EQUIPMENT_DETAIL", name: "æŸ¥è¯¢è®¾å¤‡è¯¦æƒ…", sensitivity: "LOW", tool: "equipment_detail" },
          { code: "EQUIPMENT_STATS", name: "è®¾å¤‡ç»Ÿè®¡", sensitivity: "LOW", tool: "equipment_stats" },
          { code: "EQUIPMENT_START", name: "å¯åŠ¨è®¾å¤‡", sensitivity: "MEDIUM", tool: "equipment_start" },
          { code: "EQUIPMENT_STOP", name: "åœæ­¢è®¾å¤‡", sensitivity: "MEDIUM", tool: "equipment_stop" },
          { code: "EQUIPMENT_STATUS_UPDATE", name: "æ›´æ–°è®¾å¤‡çŠ¶æ€", sensitivity: "MEDIUM", tool: "equipment_status_update" },
          { code: "EQUIPMENT_ALERT_LIST", name: "æŸ¥è¯¢è®¾å¤‡å‘Šè­¦", sensitivity: "LOW", tool: "equipment_alert_list" },
          { code: "EQUIPMENT_ALERT_ACKNOWLEDGE", name: "ç¡®è®¤è®¾å¤‡å‘Šè­¦", sensitivity: "MEDIUM", tool: "equipment_alert_acknowledge" },
          { code: "EQUIPMENT_ALERT_RESOLVE", name: "è§£å†³è®¾å¤‡å‘Šè­¦", sensitivity: "MEDIUM", tool: "equipment_alert_resolve" },
          { code: "EQUIPMENT_ALERT_STATS", name: "è®¾å¤‡å‘Šè­¦ç»Ÿè®¡", sensitivity: "LOW", tool: "equipment_alert_stats" }
        ]
      },
      PROCESSING: {
        name: "ç”Ÿäº§æ‰¹æ¬¡",
        icon: "ğŸ­",
        color: "#84CC16",
        intents: [
          { code: "PROCESSING_BATCH_CREATE", name: "åˆ›å»ºç”Ÿäº§æ‰¹æ¬¡", sensitivity: "HIGH", tool: "processing_batch_create" },
          { code: "PROCESSING_BATCH_LIST", name: "æŸ¥è¯¢æ‰¹æ¬¡åˆ—è¡¨", sensitivity: "LOW", tool: "processing_batch_list" },
          { code: "PROCESSING_BATCH_DETAIL", name: "æŸ¥è¯¢æ‰¹æ¬¡è¯¦æƒ…", sensitivity: "LOW", tool: "processing_batch_detail" },
          { code: "PROCESSING_BATCH_START", name: "å¼€å§‹ç”Ÿäº§æ‰¹æ¬¡", sensitivity: "HIGH", tool: "processing_batch_start" },
          { code: "PROCESSING_BATCH_PAUSE", name: "æš‚åœç”Ÿäº§æ‰¹æ¬¡", sensitivity: "HIGH", tool: "processing_batch_pause" },
          { code: "PROCESSING_BATCH_RESUME", name: "æ¢å¤ç”Ÿäº§æ‰¹æ¬¡", sensitivity: "HIGH", tool: "processing_batch_resume" },
          { code: "PROCESSING_BATCH_COMPLETE", name: "å®Œæˆç”Ÿäº§æ‰¹æ¬¡", sensitivity: "HIGH", tool: "processing_batch_complete" },
          { code: "PROCESSING_BATCH_CANCEL", name: "å–æ¶ˆç”Ÿäº§æ‰¹æ¬¡", sensitivity: "MEDIUM", tool: "processing_batch_cancel" },
          { code: "PROCESSING_WORKER_ASSIGN", name: "åˆ†é…å·¥äºº", sensitivity: "MEDIUM", tool: "processing_worker_assign" },
          { code: "PROCESSING_WORKER_CHECKOUT", name: "å·¥äººç­¾å‡º", sensitivity: "MEDIUM", tool: "processing_worker_checkout" }
        ]
      },
      SCALE: {
        name: "ç§¤è®¾å¤‡",
        icon: "âš–ï¸",
        color: "#A855F7",
        intents: [
          { code: "SCALE_ADD_MODEL", name: "æ·»åŠ ç§¤å‹å·", sensitivity: "MEDIUM", tool: null },
          { code: "SCALE_PROTOCOL_DETECT", name: "åè®®è‡ªåŠ¨è¯†åˆ«", sensitivity: "LOW", tool: "scale_protocol_detect" },
          { code: "SCALE_CONFIG_GENERATE", name: "AIç”Ÿæˆç§¤é…ç½®", sensitivity: "MEDIUM", tool: null },
          { code: "SCALE_TROUBLESHOOT", name: "ç§¤æ•…éšœæ’æŸ¥", sensitivity: "LOW", tool: null },
          { code: "SCALE_LIST_PROTOCOLS", name: "åˆ—å‡ºå¯ç”¨åè®®", sensitivity: "LOW", tool: null },
          { code: "SCALE_TEST_PARSE", name: "æµ‹è¯•æ•°æ®è§£æ", sensitivity: "LOW", tool: null },
          { code: "SCALE_SEARCH_MODEL", name: "æœç´¢ç§¤å‹å·", sensitivity: "LOW", tool: null },
          { code: "SCALE_MODEL_DETAIL", name: "æŸ¥çœ‹ç§¤è¯¦æƒ…", sensitivity: "LOW", tool: null },
          { code: "SCALE_ADD_DEVICE", name: "æ·»åŠ ç§¤è®¾å¤‡", sensitivity: "MEDIUM", tool: "scale_add_device" },
          { code: "SCALE_ADD_DEVICE_VISION", name: "å›¾ç‰‡è¯†åˆ«æ·»åŠ ç§¤", sensitivity: "MEDIUM", tool: "scale_add_device_vision" },
          { code: "SCALE_LIST_DEVICES", name: "åˆ—å‡ºç§¤è®¾å¤‡", sensitivity: "LOW", tool: "scale_list_devices" },
          { code: "SCALE_DEVICE_DETAIL", name: "æŸ¥çœ‹ç§¤è®¾å¤‡è¯¦æƒ…", sensitivity: "LOW", tool: "scale_device_detail" },
          { code: "SCALE_UPDATE_DEVICE", name: "æ›´æ–°ç§¤è®¾å¤‡", sensitivity: "MEDIUM", tool: "scale_update_device" },
          { code: "SCALE_DELETE_DEVICE", name: "åˆ é™¤ç§¤è®¾å¤‡", sensitivity: "HIGH", tool: "scale_delete_device" }
        ]
      },
      CAMERA: {
        name: "æ‘„åƒå¤´",
        icon: "ğŸ“¹",
        color: "#EC4899",
        intents: [
          { code: "CAMERA_ADD", name: "æ·»åŠ æ‘„åƒå¤´", sensitivity: "MEDIUM", tool: null },
          { code: "CAMERA_LIST", name: "æŸ¥çœ‹æ‘„åƒå¤´åˆ—è¡¨", sensitivity: "LOW", tool: null },
          { code: "CAMERA_DETAIL", name: "æ‘„åƒå¤´è¯¦æƒ…", sensitivity: "LOW", tool: null },
          { code: "CAMERA_CAPTURE", name: "æŠ“æ‹å›¾ç‰‡", sensitivity: "MEDIUM", tool: null },
          { code: "CAMERA_SUBSCRIBE", name: "è®¢é˜…æ‘„åƒå¤´å‘Šè­¦", sensitivity: "MEDIUM", tool: null },
          { code: "CAMERA_UNSUBSCRIBE", name: "å–æ¶ˆè®¢é˜…å‘Šè­¦", sensitivity: "MEDIUM", tool: null },
          { code: "CAMERA_EVENTS", name: "æŸ¥çœ‹å‘Šè­¦è®°å½•", sensitivity: "LOW", tool: null },
          { code: "CAMERA_STATUS", name: "æ‘„åƒå¤´çŠ¶æ€", sensitivity: "LOW", tool: null },
          { code: "CAMERA_STREAMS", name: "è·å–æµåœ°å€", sensitivity: "LOW", tool: null }
        ]
      },
      ANALYSIS: {
        name: "æ•°æ®åˆ†æ",
        icon: "ğŸ“ˆ",
        color: "#0EA5E9",
        intents: [
          { code: "COST_ANALYSIS", name: "æˆæœ¬åˆ†æ", sensitivity: "MEDIUM", tool: null },
          { code: "COST_QUERY", name: "æˆæœ¬æŸ¥è¯¢", sensitivity: "LOW", tool: null },
          { code: "QUALITY_ANALYSIS", name: "è´¨é‡åˆ†æ", sensitivity: "LOW", tool: null },
          { code: "PRODUCTION_ANALYSIS", name: "ç”Ÿäº§åˆ†æ", sensitivity: "LOW", tool: null },
          { code: "INVENTORY_ANALYSIS", name: "åº“å­˜åˆ†æ", sensitivity: "LOW", tool: null },
          { code: "INVENTORY_QUERY", name: "åº“å­˜æŸ¥è¯¢", sensitivity: "LOW", tool: null },
          { code: "TREND_PREDICTION", name: "è¶‹åŠ¿é¢„æµ‹", sensitivity: "MEDIUM", tool: null }
        ]
      },
      DATA_OP: {
        name: "æ•°æ®æ“ä½œ",
        icon: "âœï¸",
        color: "#F97316",
        intents: [
          { code: "BATCH_UPDATE", name: "æ‰¹é‡æ›´æ–°", sensitivity: "HIGH", tool: "batch_update" },
          { code: "BATCH_QUERY", name: "æ‰¹æ¬¡æŸ¥è¯¢", sensitivity: "LOW", tool: null },
          { code: "DATA_CORRECTION", name: "æ•°æ®ä¿®æ­£", sensitivity: "HIGH", tool: null },
          { code: "BATCH_DELETE", name: "æ‰¹é‡åˆ é™¤", sensitivity: "CRITICAL", tool: null },
          { code: "PLAN_UPDATE", name: "ç”Ÿäº§è®¡åˆ’æ›´æ–°", sensitivity: "HIGH", tool: "plan_update" },
          { code: "PRODUCT_UPDATE", name: "äº§å“æ›´æ–°", sensitivity: "HIGH", tool: "product_update" },
          { code: "MATERIAL_UPDATE", name: "åŸæ–™æ›´æ–°", sensitivity: "HIGH", tool: "material_update" },
          { code: "QUANTITY_ADJUST", name: "æ•°é‡è°ƒæ•´", sensitivity: "HIGH", tool: null }
        ]
      },
      FORM: {
        name: "è¡¨å•ç”Ÿæˆ",
        icon: "ğŸ“",
        color: "#14B8A6",
        intents: [
          { code: "FORM_GENERATION", name: "è¡¨å•ç”Ÿæˆ", sensitivity: "LOW", tool: "form_generation" },
          { code: "FORM_VALIDATION", name: "è¡¨å•æ ¡éªŒ", sensitivity: "LOW", tool: null },
          { code: "FORM_SUGGESTION", name: "è¡¨å•å»ºè®®", sensitivity: "LOW", tool: null }
        ]
      },
      SCHEDULE: {
        name: "æ’ç¨‹ä¼˜åŒ–",
        icon: "ğŸ“…",
        color: "#6366F1",
        intents: [
          { code: "SCHEDULE_OPTIMIZATION", name: "æ’ç¨‹ä¼˜åŒ–", sensitivity: "MEDIUM", tool: null },
          { code: "RESOURCE_ALLOCATION", name: "èµ„æºåˆ†é…", sensitivity: "MEDIUM", tool: null },
          { code: "CAPACITY_PLANNING", name: "äº§èƒ½è§„åˆ’", sensitivity: "MEDIUM", tool: null },
          { code: "URGENT_INSERT", name: "ç´§æ€¥æ’å•", sensitivity: "HIGH", tool: null }
        ]
      },
      SYSTEM: {
        name: "ç³»ç»Ÿç®¡ç†",
        icon: "ğŸ”§",
        color: "#78716C",
        intents: [
          { code: "SYSTEM_REPORT", name: "ç³»ç»ŸæŠ¥è¡¨", sensitivity: "LOW", tool: null },
          { code: "SYSTEM_CONFIG", name: "ç³»ç»Ÿé…ç½®", sensitivity: "CRITICAL", tool: null },
          { code: "USER_QUERY", name: "ç”¨æˆ·å’¨è¯¢", sensitivity: "LOW", tool: null },
          { code: "SCHEDULING_SET_AUTO", name: "æ’äº§å…¨è‡ªåŠ¨", sensitivity: "HIGH", tool: "scheduling_set_auto" },
          { code: "SCHEDULING_SET_MANUAL", name: "æ’äº§äººå·¥ç¡®è®¤", sensitivity: "HIGH", tool: "scheduling_set_manual" },
          { code: "SCHEDULING_SET_DISABLED", name: "ç¦ç”¨è‡ªåŠ¨æ’äº§", sensitivity: "HIGH", tool: "scheduling_set_disabled" },
          { code: "FACTORY_FEATURE_TOGGLE", name: "åŠŸèƒ½å¼€å…³", sensitivity: "HIGH", tool: "factory_feature_toggle" },
          { code: "FACTORY_NOTIFICATION_CONFIG", name: "é€šçŸ¥è®¾ç½®", sensitivity: "MEDIUM", tool: "factory_notification_config" }
        ]
      },
      USER: {
        name: "ç”¨æˆ·ç®¡ç†",
        icon: "ğŸ‘¥",
        color: "#DC2626",
        intents: [
          { code: "USER_CREATE", name: "åˆ›å»ºç”¨æˆ·", sensitivity: "HIGH", tool: "user_create" },
          { code: "USER_DISABLE", name: "ç¦ç”¨ç”¨æˆ·", sensitivity: "HIGH", tool: "user_disable" },
          { code: "USER_ROLE_ASSIGN", name: "è§’è‰²åˆ†é…", sensitivity: "CRITICAL", tool: "user_role_assign" }
        ]
      },
      CONFIG: {
        name: "é…ç½®ç®¡ç†",
        icon: "âš¡",
        color: "#EA580C",
        intents: [
          { code: "EQUIPMENT_MAINTENANCE", name: "è®¾å¤‡ç»´æŠ¤", sensitivity: "MEDIUM", tool: "equipment_maintenance" },
          { code: "CONVERSION_RATE_UPDATE", name: "è½¬æ¢ç‡é…ç½®", sensitivity: "MEDIUM", tool: "conversion_rate_update" },
          { code: "RULE_CONFIG", name: "è§„åˆ™é…ç½®", sensitivity: "HIGH", tool: "rule_config" }
        ]
      },
      META: {
        name: "æ„å›¾è‡ªæ‰©å±•",
        icon: "ğŸ§ ",
        color: "#7C3AED",
        intents: [
          { code: "INTENT_CREATE", name: "åˆ›å»ºAIæ„å›¾", sensitivity: "CRITICAL", tool: "create_new_intent" },
          { code: "INTENT_UPDATE", name: "æ›´æ–°AIæ„å›¾", sensitivity: "HIGH", tool: "update_intent" },
          { code: "INTENT_ANALYZE", name: "åˆ†ææ„å›¾ä½¿ç”¨", sensitivity: "LOW", tool: null }
        ]
      }
    };

    // å·¥å…·åˆ—è¡¨
    const toolsList = [
      { name: "quality_check_create", desc: "åˆ›å»ºè´¨æ£€é¡¹", category: "è´¨æ£€" },
      { name: "quality_check_query", desc: "æŸ¥è¯¢è´¨æ£€é¡¹", category: "è´¨æ£€" },
      { name: "quality_check_update", desc: "æ›´æ–°è´¨æ£€é¡¹", category: "è´¨æ£€" },
      { name: "quality_result_submit", desc: "æäº¤è´¨æ£€ç»“æœ", category: "è´¨æ£€" },
      { name: "quality_record_query", desc: "æŸ¥è¯¢è´¨æ£€è®°å½•", category: "è´¨æ£€" },
      { name: "quality_stats_query", desc: "æŸ¥è¯¢è´¨æ£€ç»Ÿè®¡", category: "è´¨æ£€" },
      { name: "material_batch_query", desc: "æŸ¥è¯¢åŸæ–™æ‰¹æ¬¡", category: "åŸæ–™" },
      { name: "material_batch_use", desc: "ä½¿ç”¨åŸæ–™", category: "åŸæ–™" },
      { name: "material_batch_reserve", desc: "é¢„ç•™åŸæ–™", category: "åŸæ–™" },
      { name: "material_batch_release", desc: "é‡Šæ”¾é¢„ç•™", category: "åŸæ–™" },
      { name: "material_batch_consume", desc: "æ¶ˆè€—é¢„ç•™", category: "åŸæ–™" },
      { name: "material_fifo_recommend", desc: "FIFOæ¨è", category: "åŸæ–™" },
      { name: "material_expiring_alert", desc: "å³å°†è¿‡æœŸé¢„è­¦", category: "åŸæ–™" },
      { name: "material_low_stock_alert", desc: "ä½åº“å­˜é¢„è­¦", category: "åŸæ–™" },
      { name: "material_expired_query", desc: "å·²è¿‡æœŸæŸ¥è¯¢", category: "åŸæ–™" },
      { name: "material_adjust_quantity", desc: "è°ƒæ•´æ•°é‡", category: "åŸæ–™" },
      { name: "shipment_create", desc: "åˆ›å»ºå‡ºè´§", category: "å‡ºè´§" },
      { name: "shipment_query", desc: "æŸ¥è¯¢å‡ºè´§", category: "å‡ºè´§" },
      { name: "shipment_update", desc: "æ›´æ–°å‡ºè´§", category: "å‡ºè´§" },
      { name: "shipment_status_update", desc: "æ›´æ–°å‡ºè´§çŠ¶æ€", category: "å‡ºè´§" },
      { name: "shipment_stats_query", desc: "å‡ºè´§ç»Ÿè®¡", category: "å‡ºè´§" },
      { name: "shipment_by_customer", desc: "æŒ‰å®¢æˆ·å‡ºè´§", category: "å‡ºè´§" },
      { name: "shipment_by_date", desc: "æŒ‰æ—¥æœŸå‡ºè´§", category: "å‡ºè´§" },
      { name: "shipment_cancel", desc: "å–æ¶ˆå‡ºè´§", category: "å‡ºè´§" },
      { name: "shipment_complete", desc: "å®Œæˆå‡ºè´§", category: "å‡ºè´§" },
      { name: "shipment_confirm", desc: "ç¡®è®¤å‡ºè´§", category: "å‡ºè´§" },
      { name: "trace_batch", desc: "æ‰¹æ¬¡æº¯æº", category: "æº¯æº" },
      { name: "trace_full", desc: "å®Œæ•´æº¯æº", category: "æº¯æº" },
      { name: "trace_public", desc: "å…¬å¼€æº¯æº", category: "æº¯æº" },
      { name: "report_dashboard_overview", desc: "ä»ªè¡¨ç›˜æ€»è§ˆ", category: "æŠ¥è¡¨" },
      { name: "report_production", desc: "ç”Ÿäº§æŠ¥è¡¨", category: "æŠ¥è¡¨" },
      { name: "report_quality", desc: "è´¨é‡æŠ¥è¡¨", category: "æŠ¥è¡¨" },
      { name: "report_inventory", desc: "åº“å­˜æŠ¥è¡¨", category: "æŠ¥è¡¨" },
      { name: "report_finance", desc: "è´¢åŠ¡æŠ¥è¡¨", category: "æŠ¥è¡¨" },
      { name: "report_efficiency", desc: "æ•ˆç‡åˆ†ææŠ¥è¡¨", category: "æŠ¥è¡¨" },
      { name: "report_kpi", desc: "KPIæŒ‡æ ‡æŠ¥è¡¨", category: "æŠ¥è¡¨" },
      { name: "report_anomaly", desc: "å¼‚å¸¸æŠ¥è¡¨", category: "æŠ¥è¡¨" },
      { name: "report_trends", desc: "è¶‹åŠ¿æŠ¥è¡¨", category: "æŠ¥è¡¨" },
      { name: "report_bom_cost", desc: "BOMæˆæœ¬æŠ¥è¡¨", category: "æŠ¥è¡¨" },
      { name: "report_cost_variance", desc: "æˆæœ¬å·®å¼‚æŠ¥è¡¨", category: "æŠ¥è¡¨" },
      { name: "report_oee", desc: "OEEæŠ¥è¡¨", category: "æŠ¥è¡¨" },
      { name: "alert_list", desc: "å‘Šè­¦åˆ—è¡¨", category: "å‘Šè­¦" },
      { name: "alert_active", desc: "æ´»è·ƒå‘Šè­¦", category: "å‘Šè­¦" },
      { name: "alert_stats", desc: "å‘Šè­¦ç»Ÿè®¡", category: "å‘Šè­¦" },
      { name: "alert_acknowledge", desc: "ç¡®è®¤å‘Šè­¦", category: "å‘Šè­¦" },
      { name: "alert_resolve", desc: "è§£å†³å‘Šè­¦", category: "å‘Šè­¦" },
      { name: "alert_triage", desc: "å‘Šè­¦åˆ†çº§", category: "å‘Šè­¦" },
      { name: "alert_diagnose", desc: "å‘Šè­¦è¯Šæ–­", category: "å‘Šè­¦" },
      { name: "alert_by_equipment", desc: "æŒ‰è®¾å¤‡å‘Šè­¦", category: "å‘Šè­¦" },
      { name: "alert_by_level", desc: "æŒ‰çº§åˆ«å‘Šè­¦", category: "å‘Šè­¦" },
      { name: "attendance_status", desc: "æ‰“å¡çŠ¶æ€", category: "è€ƒå‹¤" },
      { name: "attendance_history", desc: "è€ƒå‹¤å†å²", category: "è€ƒå‹¤" },
      { name: "attendance_stats", desc: "è€ƒå‹¤ç»Ÿè®¡", category: "è€ƒå‹¤" },
      { name: "attendance_monthly", desc: "æœˆåº¦è€ƒå‹¤", category: "è€ƒå‹¤" },
      { name: "attendance_anomaly", desc: "è€ƒå‹¤å¼‚å¸¸", category: "è€ƒå‹¤" },
      { name: "attendance_department", desc: "éƒ¨é—¨è€ƒå‹¤", category: "è€ƒå‹¤" },
      { name: "attendance_today", desc: "ä»Šæ—¥æ‰“å¡", category: "è€ƒå‹¤" },
      { name: "clock_in", desc: "ä¸Šç­æ‰“å¡", category: "è€ƒå‹¤" },
      { name: "clock_out", desc: "ä¸‹ç­æ‰“å¡", category: "è€ƒå‹¤" },
      { name: "customer_list", desc: "å®¢æˆ·åˆ—è¡¨", category: "CRM" },
      { name: "customer_search", desc: "å®¢æˆ·æœç´¢", category: "CRM" },
      { name: "customer_stats", desc: "å®¢æˆ·ç»Ÿè®¡", category: "CRM" },
      { name: "customer_by_type", desc: "æŒ‰ç±»å‹å®¢æˆ·", category: "CRM" },
      { name: "customer_active", desc: "æ´»è·ƒå®¢æˆ·", category: "CRM" },
      { name: "customer_purchase_history", desc: "å®¢æˆ·è´­ä¹°å†å²", category: "CRM" },
      { name: "supplier_list", desc: "ä¾›åº”å•†åˆ—è¡¨", category: "CRM" },
      { name: "supplier_search", desc: "ä¾›åº”å•†æœç´¢", category: "CRM" },
      { name: "supplier_evaluate", desc: "ä¾›åº”å•†è¯„ä¼°", category: "CRM" },
      { name: "supplier_by_category", desc: "æŒ‰ç±»åˆ«ä¾›åº”å•†", category: "CRM" },
      { name: "supplier_active", desc: "æ´»è·ƒä¾›åº”å•†", category: "CRM" },
      { name: "supplier_ranking", desc: "ä¾›åº”å•†æ’å", category: "CRM" },
      { name: "scale_add_device", desc: "æ·»åŠ ç§¤è®¾å¤‡", category: "ç§¤" },
      { name: "scale_add_device_vision", desc: "å›¾ç‰‡è¯†åˆ«æ·»åŠ ç§¤", category: "ç§¤" },
      { name: "scale_list_devices", desc: "åˆ—å‡ºç§¤è®¾å¤‡", category: "ç§¤" },
      { name: "scale_device_detail", desc: "ç§¤è®¾å¤‡è¯¦æƒ…", category: "ç§¤" },
      { name: "scale_update_device", desc: "æ›´æ–°ç§¤è®¾å¤‡", category: "ç§¤" },
      { name: "scale_delete_device", desc: "åˆ é™¤ç§¤è®¾å¤‡", category: "ç§¤" },
      { name: "scale_protocol_detect", desc: "åè®®è‡ªåŠ¨è¯†åˆ«", category: "ç§¤" },
      { name: "equipment_list", desc: "è®¾å¤‡åˆ—è¡¨", category: "è®¾å¤‡" },
      { name: "equipment_detail", desc: "è®¾å¤‡è¯¦æƒ…", category: "è®¾å¤‡" },
      { name: "equipment_stats", desc: "è®¾å¤‡ç»Ÿè®¡", category: "è®¾å¤‡" },
      { name: "equipment_start", desc: "å¯åŠ¨è®¾å¤‡", category: "è®¾å¤‡" },
      { name: "equipment_stop", desc: "åœæ­¢è®¾å¤‡", category: "è®¾å¤‡" },
      { name: "equipment_status_update", desc: "æ›´æ–°è®¾å¤‡çŠ¶æ€", category: "è®¾å¤‡" },
      { name: "equipment_alert_list", desc: "è®¾å¤‡å‘Šè­¦åˆ—è¡¨", category: "è®¾å¤‡" },
      { name: "equipment_alert_acknowledge", desc: "ç¡®è®¤è®¾å¤‡å‘Šè­¦", category: "è®¾å¤‡" },
      { name: "equipment_alert_resolve", desc: "è§£å†³è®¾å¤‡å‘Šè­¦", category: "è®¾å¤‡" },
      { name: "equipment_alert_stats", desc: "è®¾å¤‡å‘Šè­¦ç»Ÿè®¡", category: "è®¾å¤‡" },
      { name: "user_create", desc: "åˆ›å»ºç”¨æˆ·", category: "ç”¨æˆ·" },
      { name: "user_disable", desc: "ç¦ç”¨ç”¨æˆ·", category: "ç”¨æˆ·" },
      { name: "user_role_assign", desc: "è§’è‰²åˆ†é…", category: "ç”¨æˆ·" },
      { name: "scheduling_set_auto", desc: "æ’äº§å…¨è‡ªåŠ¨", category: "ç³»ç»Ÿ" },
      { name: "scheduling_set_manual", desc: "æ’äº§äººå·¥ç¡®è®¤", category: "ç³»ç»Ÿ" },
      { name: "scheduling_set_disabled", desc: "ç¦ç”¨è‡ªåŠ¨æ’äº§", category: "ç³»ç»Ÿ" },
      { name: "factory_feature_toggle", desc: "åŠŸèƒ½å¼€å…³", category: "ç³»ç»Ÿ" },
      { name: "factory_notification_config", desc: "é€šçŸ¥è®¾ç½®", category: "ç³»ç»Ÿ" },
      { name: "batch_update", desc: "æ‰¹é‡æ›´æ–°", category: "æ•°æ®" },
      { name: "plan_update", desc: "ç”Ÿäº§è®¡åˆ’æ›´æ–°", category: "æ•°æ®" },
      { name: "product_update", desc: "äº§å“æ›´æ–°", category: "æ•°æ®" },
      { name: "material_update", desc: "åŸæ–™æ›´æ–°", category: "æ•°æ®" },
      { name: "product_type_query", desc: "äº§å“ç±»å‹æŸ¥è¯¢", category: "æ•°æ®" },
      { name: "processing_batch_create", desc: "åˆ›å»ºç”Ÿäº§æ‰¹æ¬¡", category: "ç”Ÿäº§" },
      { name: "processing_batch_list", desc: "æ‰¹æ¬¡åˆ—è¡¨", category: "ç”Ÿäº§" },
      { name: "processing_batch_detail", desc: "æ‰¹æ¬¡è¯¦æƒ…", category: "ç”Ÿäº§" },
      { name: "processing_batch_start", desc: "å¼€å§‹ç”Ÿäº§", category: "ç”Ÿäº§" },
      { name: "processing_batch_pause", desc: "æš‚åœç”Ÿäº§", category: "ç”Ÿäº§" },
      { name: "processing_batch_resume", desc: "æ¢å¤ç”Ÿäº§", category: "ç”Ÿäº§" },
      { name: "processing_batch_complete", desc: "å®Œæˆç”Ÿäº§", category: "ç”Ÿäº§" },
      { name: "processing_batch_cancel", desc: "å–æ¶ˆç”Ÿäº§", category: "ç”Ÿäº§" },
      { name: "processing_batch_timeline", desc: "æ‰¹æ¬¡æ—¶é—´çº¿", category: "ç”Ÿäº§" },
      { name: "processing_batch_workers", desc: "æ‰¹æ¬¡å·¥äººåˆ—è¡¨", category: "ç”Ÿäº§" },
      { name: "processing_worker_assign", desc: "åˆ†é…å·¥äºº", category: "ç”Ÿäº§" },
      { name: "processing_worker_checkout", desc: "å·¥äººç­¾å‡º", category: "ç”Ÿäº§" },
      { name: "form_generation", desc: "è¡¨å•ç”Ÿæˆ", category: "è¡¨å•" },
      { name: "equipment_maintenance", desc: "è®¾å¤‡ç»´æŠ¤", category: "é…ç½®" },
      { name: "conversion_rate_update", desc: "è½¬æ¢ç‡é…ç½®", category: "é…ç½®" },
      { name: "rule_config", desc: "è§„åˆ™é…ç½®", category: "é…ç½®" },
      { name: "create_new_intent", desc: "åˆ›å»ºæ„å›¾", category: "æ„å›¾" },
      { name: "update_intent", desc: "æ›´æ–°æ„å›¾", category: "æ„å›¾" },
      { name: "test_intent_matching", desc: "æµ‹è¯•æ„å›¾åŒ¹é…", category: "æ„å›¾" },
      { name: "query_entity_schema", desc: "æŸ¥è¯¢Entity Schema", category: "æŸ¥è¯¢" },
      { name: "query_drools_rules", desc: "æŸ¥è¯¢Droolsè§„åˆ™", category: "æŸ¥è¯¢" },
      { name: "generate_handler_config", desc: "ç”ŸæˆHandleré…ç½®", category: "æŸ¥è¯¢" }
    ];

    // æ¼”ç¤ºæ¡ˆä¾‹
    const demoCases = [
      {
        name: "è´¨æ£€æŸ¥è¯¢",
        input: "è¿™æ‰¹çš„è´¨æ£€æƒ…å†µæ€ä¹ˆæ ·",
        context: "ä¸Šä¸€è½®æŸ¥è¯¢äº†æ‰¹æ¬¡ MB-2026-0115-001",
        result: {
          preprocessed: "MB-2026-0115-001 çš„è´¨æ£€ç»“æœ",
          changes: ["æŒ‡ä»£æ¶ˆè§£: è¿™æ‰¹ â†’ MB-2026-0115-001"],
          intent: { code: "QUALITY_STATS", name: "è´¨æ£€ç»Ÿè®¡", confidence: 0.92, layer: 3 },
          tool: "quality_stats_query",
          validation: { status: "VALID", checks: ["éç©ºæ£€æŸ¥ âœ“", "å®ä½“åŒ¹é… âœ“"] },
          memory: { slot: "BATCH", value: "MB-2026-0115-001" },
          data: {
            type: "quality",
            batchId: "MB-2026-0115-001",
            productName: "å†·å†»ä¸‰æ–‡é±¼ç‰‡",
            totalItems: 12,
            passedItems: 11,
            failedItems: 1,
            passRate: "91.7%",
            lastCheckTime: "2026-01-15 14:30",
            items: [
              { name: "å¤–è§‚æ£€æŸ¥", result: "åˆæ ¼", value: "è‰²æ³½æ­£å¸¸ï¼Œæ— å¼‚å‘³" },
              { name: "é‡é‡æ£€æµ‹", result: "åˆæ ¼", value: "502g (æ ‡å‡†500Â±10g)" },
              { name: "æ¸©åº¦æ£€æµ‹", result: "åˆæ ¼", value: "-18.2Â°C" },
              { name: "å¾®ç”Ÿç‰©æ£€æµ‹", result: "ä¸åˆæ ¼", value: "å¤§è‚ æ†èŒè¶…æ ‡" }
            ]
          }
        }
      },
      {
        name: "æ—¶é—´æŸ¥è¯¢",
        input: "æ˜¨å¤©å…¥åº“äº†å¤šå°‘åŸæ–™",
        context: "æ— ä¸Šä¸‹æ–‡",
        result: {
          preprocessed: "2026-01-15 å…¥åº“çš„åŸæ–™æ•°é‡",
          changes: ["æ—¶é—´å½’ä¸€åŒ–: æ˜¨å¤© â†’ 2026-01-15"],
          intent: { code: "MATERIAL_BATCH_QUERY", name: "åŸæ–™æ‰¹æ¬¡æŸ¥è¯¢", confidence: 0.88, layer: 4 },
          tool: "material_batch_query",
          validation: { status: "VALID", checks: ["éç©ºæ£€æŸ¥ âœ“", "æ—¶é—´éªŒè¯ âœ“"] },
          memory: { slot: "TIME_RANGE", value: "2026-01-15" },
          data: {
            type: "material_list",
            date: "2026-01-15",
            totalBatches: 8,
            totalWeight: "4,250 kg",
            batches: [
              { id: "MB-0115-001", name: "å†·å†»ä¸‰æ–‡é±¼", weight: "1,200 kg", supplier: "æŒªå¨æ¸”ä¸š", time: "08:30" },
              { id: "MB-0115-002", name: "å†·å†»è™¾ä»", weight: "800 kg", supplier: "å±±ä¸œæµ·é²œ", time: "09:15" },
              { id: "MB-0115-003", name: "ç”Ÿèš", weight: "500 kg", supplier: "å¹¿ä¸œæµ·äº§", time: "10:00" },
              { id: "MB-0115-004", name: "é³•é±¼ç‰‡", weight: "750 kg", supplier: "é’å²›å†·é“¾", time: "11:20" },
              { id: "MB-0115-005", name: "å¸¦å­", weight: "400 kg", supplier: "å¤§è¿æ°´äº§", time: "13:45" },
              { id: "MB-0115-006", name: "é¾™è™¾", weight: "300 kg", supplier: "æ¾³æ´²æµ·é²œ", time: "14:30" },
              { id: "MB-0115-007", name: "é‡‘æªé±¼", weight: "200 kg", supplier: "æ—¥æœ¬æ°´äº§", time: "15:00" },
              { id: "MB-0115-008", name: "å¢¨é±¼", weight: "100 kg", supplier: "ç¦å»ºæ¸”ä¸š", time: "16:20" }
            ]
          }
        }
      },
      {
        name: "å£è¯­æŸ¥è¯¢",
        input: "è´§åˆ°äº†æ²¡",
        context: "æ— ä¸Šä¸‹æ–‡",
        result: {
          preprocessed: "æŸ¥è¯¢å¾…å…¥åº“åŸæ–™çŠ¶æ€",
          changes: ["å£è¯­æ ‡å‡†åŒ–: è´§åˆ°äº†æ²¡ â†’ æŸ¥è¯¢å…¥åº“çŠ¶æ€"],
          intent: { code: "MATERIAL_BATCH_QUERY", name: "åŸæ–™æ‰¹æ¬¡æŸ¥è¯¢", confidence: 0.85, layer: 2 },
          tool: "material_batch_query",
          validation: { status: "VALID", checks: ["éç©ºæ£€æŸ¥ âœ“"] },
          memory: { slot: null, value: null },
          data: {
            type: "pending_inbound",
            summary: { total: 3, arrived: 2, pending: 1 },
            items: [
              { id: "PO-2026-0116-001", name: "å†·å†»é²ˆé±¼", status: "å·²åˆ°è´§", weight: "600 kg", eta: "å·²åˆ°è¾¾", supplier: "é’å²›å†·é“¾" },
              { id: "PO-2026-0116-002", name: "ç”Ÿèš", status: "å·²åˆ°è´§", weight: "400 kg", eta: "å·²åˆ°è¾¾", supplier: "å¹¿ä¸œæµ·äº§" },
              { id: "PO-2026-0116-003", name: "é¾™è™¾", status: "è¿è¾“ä¸­", weight: "500 kg", eta: "é¢„è®¡ 16:00", supplier: "æ¾³æ´²æµ·é²œ" }
            ]
          }
        }
      },
      {
        name: "å¤šè½®å¯¹è¯",
        input: "ä¾›åº”å•†æ˜¯è°",
        context: "ä¸Šä¸€è½®æŸ¥è¯¢äº†æ‰¹æ¬¡ MB-2026-0115-001 çš„è¯¦æƒ…",
        result: {
          preprocessed: "MB-2026-0115-001 çš„ä¾›åº”å•†ä¿¡æ¯",
          changes: ["ä¸Šä¸‹æ–‡æ³¨å…¥: ç»§æ‰¿æ‰¹æ¬¡å‚æ•°"],
          intent: { code: "SUPPLIER_SEARCH", name: "ä¾›åº”å•†æœç´¢", confidence: 0.87, layer: 5 },
          tool: "supplier_search",
          validation: { status: "VALID", checks: ["éç©ºæ£€æŸ¥ âœ“", "å®ä½“åŒ¹é… âœ“"] },
          memory: { slot: "SUPPLIER", value: "æŒªå¨æ¸”ä¸šæœ‰é™å…¬å¸" },
          data: {
            type: "supplier_detail",
            supplier: {
              id: "SUP-001",
              name: "æŒªå¨æ¸”ä¸šæœ‰é™å…¬å¸",
              shortName: "æŒªå¨æ¸”ä¸š",
              category: "æµ·äº§å“",
              level: "Açº§",
              contact: "å¼ ç»ç†",
              phone: "138****5678",
              address: "æŒªå¨å¥¥æ–¯é™†æ¸¯å£åŒº",
              rating: 4.8,
              totalOrders: 156,
              onTimeRate: "98.2%",
              qualityRate: "99.1%",
              cooperationYears: 3
            }
          }
        }
      },
      {
        name: "ç»Ÿè®¡æŠ¥è¡¨",
        input: "æœ¬æœˆçš„ç”Ÿäº§æ•ˆç‡æ€ä¹ˆæ ·",
        context: "æ— ä¸Šä¸‹æ–‡",
        result: {
          preprocessed: "2026å¹´1æœˆçš„ç”Ÿäº§æ•ˆç‡æŠ¥è¡¨",
          changes: ["æ—¶é—´å½’ä¸€åŒ–: æœ¬æœˆ â†’ 2026-01-01 è‡³ 2026-01-16"],
          intent: { code: "REPORT_EFFICIENCY", name: "æ•ˆç‡åˆ†ææŠ¥è¡¨", confidence: 0.91, layer: 3 },
          tool: "report_efficiency",
          validation: { status: "VALID", checks: ["éç©ºæ£€æŸ¥ âœ“"] },
          memory: { slot: "TIME_RANGE", value: "2026-01" },
          data: {
            type: "efficiency_report",
            period: "2026å¹´1æœˆ",
            oee: "87.5%",
            availability: "92.3%",
            performance: "95.1%",
            quality: "99.7%",
            trends: [
              { week: "ç¬¬1å‘¨", oee: "85.2%", production: "12,500 kg" },
              { week: "ç¬¬2å‘¨", oee: "88.1%", production: "13,200 kg" },
              { week: "ç¬¬3å‘¨(è¿›è¡Œä¸­)", oee: "89.2%", production: "6,800 kg" }
            ],
            topProducts: [
              { name: "å†·å†»ä¸‰æ–‡é±¼ç‰‡", output: "8,500 kg", efficiency: "91.2%" },
              { name: "å†·å†»è™¾ä»", output: "6,200 kg", efficiency: "88.5%" },
              { name: "ç”Ÿèš", output: "4,300 kg", efficiency: "86.3%" }
            ]
          }
        }
      },
      {
        name: "å‘Šè­¦å¤„ç†",
        input: "æœ‰ä»€ä¹ˆç´§æ€¥å‘Šè­¦éœ€è¦å¤„ç†",
        context: "æ— ä¸Šä¸‹æ–‡",
        result: {
          preprocessed: "æŸ¥è¯¢å½“å‰ç´§æ€¥çº§åˆ«çš„æ´»è·ƒå‘Šè­¦",
          changes: [],
          intent: { code: "ALERT_ACTIVE", name: "æ´»è·ƒå‘Šè­¦", confidence: 0.93, layer: 2 },
          tool: "alert_active",
          validation: { status: "VALID", checks: ["éç©ºæ£€æŸ¥ âœ“"] },
          memory: { slot: null, value: null },
          data: {
            type: "alert_list",
            summary: { critical: 1, high: 2, medium: 3, low: 5 },
            criticalAlerts: [
              {
                id: "ALT-2026-0116-001",
                level: "CRITICAL",
                title: "å†·åº“æ¸©åº¦å¼‚å¸¸",
                equipment: "åä¸œå†·åº“AåŒº",
                message: "æ¸©åº¦å‡è‡³ -12Â°Cï¼Œè¶…å‡ºå®‰å…¨é˜ˆå€¼ (-18Â±2Â°C)",
                time: "10åˆ†é’Ÿå‰",
                suggestion: "å»ºè®®ç«‹å³æ£€æŸ¥åˆ¶å†·è®¾å¤‡ï¼Œå¿…è¦æ—¶è½¬ç§»è´§ç‰©"
              }
            ],
            highAlerts: [
              { id: "ALT-2026-0116-002", level: "HIGH", title: "åŸæ–™å³å°†è¿‡æœŸ", message: "3æ‰¹åŸæ–™å°†åœ¨24å°æ—¶å†…è¿‡æœŸ", time: "30åˆ†é’Ÿå‰" },
              { id: "ALT-2026-0116-003", level: "HIGH", title: "è®¾å¤‡ç»´æŠ¤æé†’", message: "3å·ç”Ÿäº§çº¿éœ€è¦ä¾‹è¡Œç»´æŠ¤", time: "1å°æ—¶å‰" }
            ]
          }
        }
      }
    ];

    // ============================================
    // API Configuration
    // ============================================
    // ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼Œé€šè¿‡ Nginx ä»£ç†ï¼Œé¿å… CORS/æ··åˆå†…å®¹é—®é¢˜
    const API_BASE_URL = '';
    const API_DEMO_ENDPOINT = '/api/public/ai-demo/execute';
    let useLiveAPI = true; // é»˜è®¤ä½¿ç”¨çœŸå®API

    // ============================================
    // UI Functions
    // ============================================
    let currentTab = 'overview';
    let selectedCaseIndex = 0;
    let isRunning = false;

    function switchTab(tabId) {
      currentTab = tabId;
      document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
      document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
      document.querySelector(`.tab[onclick="switchTab('${tabId}')"]`).classList.add('active');
      document.getElementById(`tab-${tabId}`).classList.add('active');
    }

    function highlightStep(step) {
      document.querySelectorAll('.arch-node').forEach((node, i) => {
        node.classList.toggle('active', i === step - 1);
      });
    }

    // Render functions
    function renderCaseButtons() {
      const container = document.getElementById('caseButtons');
      container.innerHTML = demoCases.map((c, i) =>
        `<button class="case-btn ${i === 0 ? 'active' : ''}" onclick="selectCase(${i})">${c.name}</button>`
      ).join('');
    }

    function selectCase(index) {
      selectedCaseIndex = index;
      document.querySelectorAll('.case-btn').forEach((btn, i) => btn.classList.toggle('active', i === index));
      document.getElementById('demoInput').value = demoCases[index].input;
      resetProcessSteps();
    }

    function resetProcessSteps() {
      document.querySelectorAll('.process-step').forEach(step => {
        step.classList.remove('active', 'completed');
        step.querySelector('.process-step-data').style.display = 'none';
      });
      document.getElementById('resultArea').classList.remove('visible');
    }

    async function runDemo() {
      if (isRunning) return;
      isRunning = true;
      document.getElementById('demoBtn').disabled = true;
      resetProcessSteps();

      const userInput = document.getElementById('demoInput').value.trim();
      if (!userInput) {
        alert('è¯·è¾“å…¥æŸ¥è¯¢å†…å®¹');
        isRunning = false;
        document.getElementById('demoBtn').disabled = false;
        return;
      }

      const steps = document.querySelectorAll('.process-step');

      if (useLiveAPI) {
        // ä½¿ç”¨çœŸå® API
        try {
          await runLiveDemo(userInput, steps);
        } catch (error) {
          console.error('APIè°ƒç”¨å¤±è´¥ï¼Œä½¿ç”¨æ¼”ç¤ºæ¨¡å¼:', error);
          showAPIError('API è¿æ¥å¤±è´¥: ' + error.message);
        }
      } else {
        // ä½¿ç”¨é™æ€æ¼”ç¤ºæ•°æ®
        await runStaticDemo(steps);
      }

      isRunning = false;
      document.getElementById('demoBtn').disabled = false;
    }

    // çœŸå® API è°ƒç”¨
    async function runLiveDemo(userInput, steps) {
      // Step 1: é¢„å¤„ç†ï¼ˆæ˜¾ç¤ºç”¨æˆ·è¾“å…¥ï¼‰
      await animateStep(steps[0], `<span class="key">ç”¨æˆ·è¾“å…¥:</span> "${userInput}"<br><span class="key">çŠ¶æ€:</span> <span class="value">æ­£åœ¨è°ƒç”¨ AI æœåŠ¡...</span>`);

      // è°ƒç”¨çœŸå® API
      const response = await fetch(API_BASE_URL + API_DEMO_ENDPOINT, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ userInput: userInput })
      });

      if (!response.ok) {
        throw new Error(`HTTP ${response.status}`);
      }

      const apiResult = await response.json();
      const data = apiResult.data;

      if (!data) {
        throw new Error('API è¿”å›æ•°æ®ä¸ºç©º');
      }

      // Step 2: æ„å›¾è¯†åˆ«
      if (data.intentRecognized) {
        const confidence = data.confidence ? (data.confidence * 100).toFixed(0) : '?';
        const matchMethod = data.matchMethod || 'KEYWORD';
        const layer = matchMethod === 'REGEX' ? 1 : matchMethod === 'KEYWORD' ? 3 : matchMethod === 'SEMANTIC' ? 5 : 6;
        await animateStep(steps[1], `<span class="key">å‘½ä¸­å±‚:</span> ç¬¬${layer}å±‚ (${matchMethod})<br><span class="key">æ„å›¾:</span> <span class="value">${data.intentName || '-'}</span> (${data.intentCode || '-'})<br><span class="key">ç½®ä¿¡åº¦:</span> ${confidence}%`);
      } else {
        await animateStep(steps[1], `<span class="key">çŠ¶æ€:</span> <span class="value" style="color:var(--warning)">æœªè¯†åˆ«åˆ°åŒ¹é…æ„å›¾</span><br><span class="key">å»ºè®®:</span> å°è¯•æ›´å…·ä½“çš„æè¿°`);
      }

      // Step 3: æ‰§è¡Œè·¯ç”±
      const toolInfo = data.intentCode ? `å·¥å…·ç»‘å®š â†’ ${data.intentCode.toLowerCase().replace(/_/g, '_')}` : 'æ— å·¥å…·ç»‘å®š';
      await animateStep(steps[2], `<span class="key">æ•æ„Ÿåº¦:</span> ${data.sensitivityLevel || 'LOW'}<br><span class="key">è·¯ç”±:</span> <span class="value">${toolInfo}</span>`);

      // Step 4: ç»“æœéªŒè¯
      const statusIcon = data.status === 'COMPLETED' ? 'âœ“' : data.status === 'NO_PERMISSION' ? 'ğŸ”’' : 'âš ï¸';
      const statusColor = data.status === 'COMPLETED' ? 'var(--success)' : data.status === 'NO_PERMISSION' ? 'var(--warning)' : 'var(--error)';
      await animateStep(steps[3], `<span class="key">æ‰§è¡ŒçŠ¶æ€:</span> <span class="value" style="color:${statusColor}">${statusIcon} ${data.status || 'UNKNOWN'}</span><br><span class="key">æ¶ˆæ¯:</span> ${data.message || '-'}`);

      // Step 5: è®°å¿†æ›´æ–°
      await animateStep(steps[4], `<span class="key">ä¼šè¯ID:</span> ${data.sessionId || 'æ— '}<br><span class="key">è½®æ¬¡:</span> ${data.conversationRound || 1}`);

      // æ˜¾ç¤ºç»“æœ
      showAPIResult(data);
    }

    // é™æ€æ¼”ç¤ºæ¨¡å¼
    async function runStaticDemo(steps) {
      const caseData = demoCases[selectedCaseIndex];

      await animateStep(steps[0], `<span class="key">è¾“å…¥:</span> "${caseData.input}"<br><span class="key">è¾“å‡º:</span> <span class="value">"${caseData.result.preprocessed}"</span><br><span class="key">å˜æ›´:</span> ${caseData.result.changes.length > 0 ? caseData.result.changes.join(', ') : 'æ— '}`);
      await animateStep(steps[1], `<span class="key">å‘½ä¸­å±‚:</span> ç¬¬${caseData.result.intent.layer}å±‚<br><span class="key">æ„å›¾:</span> <span class="value">${caseData.result.intent.name}</span> (${caseData.result.intent.code})<br><span class="key">ç½®ä¿¡åº¦:</span> ${(caseData.result.intent.confidence * 100).toFixed(0)}%`);
      await animateStep(steps[2], `<span class="key">è·¯å¾„:</span> ç¡¬ç»‘å®š<br><span class="key">å·¥å…·:</span> <span class="value">${caseData.result.tool}</span>`);
      await animateStep(steps[3], `<span class="key">çŠ¶æ€:</span> <span class="value">${caseData.result.validation.status}</span><br><span class="key">æ£€æŸ¥:</span> ${caseData.result.validation.checks.join(', ')}`);
      await animateStep(steps[4], `<span class="key">æ§½ä½:</span> ${caseData.result.memory.slot || 'æ— æ›´æ–°'}<br><span class="key">å€¼:</span> <span class="value">${caseData.result.memory.value || '-'}</span>`);

      showResultCard(caseData.result.data);
    }

    // æ ¼å¼åŒ–ç»“æœæ•°æ®ä¸ºç”¨æˆ·å‹å¥½çš„å±•ç¤º
    function formatResultData(resultData, intentCode) {
      if (!resultData) return '';

      // è·å–å®é™…æ•°æ®æ•°ç»„ï¼ˆå¯èƒ½åœ¨ content æˆ– items å­—æ®µä¸­ï¼‰
      const items = resultData.content || resultData.items || (Array.isArray(resultData) ? resultData : null);

      // è´¨æ£€æ•°æ®æ ¼å¼åŒ–
      if (intentCode && intentCode.includes('QUALITY') ||
          (items && items.length > 0 && (items[0].qualityResult || items[0].passRate || items[0].qualityGrade))) {
        return formatQualityInspectionData(items || [resultData]);
      }

      // åŸæ–™åº“å­˜æ•°æ®æ ¼å¼åŒ–
      if (intentCode && intentCode.includes('MATERIAL') ||
          (items && items.length > 0 && (items[0].materialName || items[0].remainingQuantity || items[0].expiryDate))) {
        return formatMaterialData(items || [resultData]);
      }

      // æ‰¹æ¬¡æ•°æ®æ ¼å¼åŒ–
      if (intentCode && intentCode.includes('BATCH') ||
          (items && items.length > 0 && (items[0].batchNumber || items[0].productionDate))) {
        return formatBatchData(items || [resultData]);
      }

      // é»˜è®¤ï¼šæ ¼å¼åŒ– JSON
      return `<pre style="background:var(--bg-warm);padding:16px;border-radius:8px;overflow-x:auto;font-size:13px;font-family:var(--font-mono);white-space:pre-wrap;word-break:break-word;">${JSON.stringify(resultData, null, 2)}</pre>`;
    }

    // æ ¼å¼åŒ–è´¨æ£€æ•°æ®ä¸ºè¡¨æ ¼
    function formatQualityInspectionData(items) {
      if (!items || items.length === 0) {
        return '<div style="padding:16px;color:var(--text-secondary);text-align:center;">æš‚æ— è´¨æ£€è®°å½•</div>';
      }

      let html = `
        <div style="overflow-x:auto;">
          <table style="width:100%;border-collapse:collapse;font-size:14px;">
            <thead>
              <tr style="background:var(--bg-warm);border-bottom:2px solid var(--border);">
                <th style="padding:12px 16px;text-align:left;font-weight:600;">æ‰¹æ¬¡å·</th>
                <th style="padding:12px 16px;text-align:left;font-weight:600;">è´¨æ£€ç»“æœ</th>
                <th style="padding:12px 16px;text-align:center;font-weight:600;">åˆæ ¼ç‡</th>
                <th style="padding:12px 16px;text-align:center;font-weight:600;">è´¨é‡ç­‰çº§</th>
                <th style="padding:12px 16px;text-align:left;font-weight:600;">æ£€æµ‹æ—¶é—´</th>
              </tr>
            </thead>
            <tbody>`;

      items.forEach((item, index) => {
        const bgColor = index % 2 === 0 ? 'transparent' : 'var(--bg-warm)';
        const resultBadge = item.qualityResult === 'PASSED' || item.qualityResult === 'åˆæ ¼'
          ? '<span style="background:var(--success-light);color:var(--success);padding:4px 12px;border-radius:12px;font-size:12px;">âœ“ åˆæ ¼</span>'
          : '<span style="background:var(--error-light);color:var(--error);padding:4px 12px;border-radius:12px;font-size:12px;">âœ— ä¸åˆæ ¼</span>';
        const passRate = item.passRate != null ? `${(item.passRate * 100).toFixed(1)}%` : '-';
        const grade = item.qualityGrade || item.grade || '-';
        const time = item.inspectionDate || item.createdAt || '-';

        html += `
          <tr style="background:${bgColor};border-bottom:1px solid var(--border);">
            <td style="padding:12px 16px;font-family:var(--font-mono);font-size:13px;">${item.batchNumber || item.batchId || '-'}</td>
            <td style="padding:12px 16px;">${resultBadge}</td>
            <td style="padding:12px 16px;text-align:center;font-weight:500;color:${item.passRate >= 0.9 ? 'var(--success)' : 'var(--warning)'};">${passRate}</td>
            <td style="padding:12px 16px;text-align:center;"><span style="background:var(--info-light);color:var(--info);padding:4px 12px;border-radius:12px;font-size:12px;">${grade}</span></td>
            <td style="padding:12px 16px;color:var(--text-secondary);font-size:13px;">${time}</td>
          </tr>`;
      });

      html += `</tbody></table></div>`;

      // æ·»åŠ ç»Ÿè®¡æ‘˜è¦
      const total = items.length;
      const passed = items.filter(i => i.qualityResult === 'PASSED' || i.qualityResult === 'åˆæ ¼').length;
      html += `
        <div style="margin-top:16px;padding:12px 16px;background:var(--bg-warm);border-radius:8px;display:flex;gap:24px;font-size:13px;">
          <span>å…± <strong>${total}</strong> æ¡è®°å½•</span>
          <span>åˆæ ¼ <strong style="color:var(--success);">${passed}</strong> æ¡</span>
          <span>åˆæ ¼ç‡ <strong style="color:${passed/total >= 0.9 ? 'var(--success)' : 'var(--warning)'};">${((passed/total)*100).toFixed(1)}%</strong></span>
        </div>`;

      return html;
    }

    // æ ¼å¼åŒ–åŸæ–™æ•°æ®ä¸ºè¡¨æ ¼
    function formatMaterialData(items) {
      if (!items || items.length === 0) {
        return '<div style="padding:16px;color:var(--text-secondary);text-align:center;">æš‚æ— åŸæ–™è®°å½•</div>';
      }

      let html = `
        <div style="overflow-x:auto;">
          <table style="width:100%;border-collapse:collapse;font-size:14px;">
            <thead>
              <tr style="background:var(--bg-warm);border-bottom:2px solid var(--border);">
                <th style="padding:12px 16px;text-align:left;font-weight:600;">åŸæ–™åç§°</th>
                <th style="padding:12px 16px;text-align:right;font-weight:600;">å‰©ä½™æ•°é‡</th>
                <th style="padding:12px 16px;text-align:left;font-weight:600;">ä¾›åº”å•†</th>
                <th style="padding:12px 16px;text-align:center;font-weight:600;">è¿‡æœŸæ—¥æœŸ</th>
                <th style="padding:12px 16px;text-align:center;font-weight:600;">çŠ¶æ€</th>
              </tr>
            </thead>
            <tbody>`;

      items.forEach((item, index) => {
        const bgColor = index % 2 === 0 ? 'transparent' : 'var(--bg-warm)';
        const qty = item.remainingQuantity || item.quantity || item.stockQuantity || 0;
        const unit = item.unit || 'kg';
        const expiryDate = item.expiryDate || item.expireDate || '-';
        const isExpiringSoon = expiryDate !== '-' && new Date(expiryDate) <= new Date(Date.now() + 7*24*60*60*1000);
        const isLowStock = qty < 100;

        let statusBadge = '<span style="background:var(--success-light);color:var(--success);padding:4px 12px;border-radius:12px;font-size:12px;">æ­£å¸¸</span>';
        if (isExpiringSoon) {
          statusBadge = '<span style="background:var(--warning-light);color:var(--warning);padding:4px 12px;border-radius:12px;font-size:12px;">å³å°†è¿‡æœŸ</span>';
        } else if (isLowStock) {
          statusBadge = '<span style="background:var(--warning-light);color:var(--warning);padding:4px 12px;border-radius:12px;font-size:12px;">åº“å­˜åä½</span>';
        }

        html += `
          <tr style="background:${bgColor};border-bottom:1px solid var(--border);">
            <td style="padding:12px 16px;font-weight:500;">${item.materialName || item.name || '-'}</td>
            <td style="padding:12px 16px;text-align:right;font-family:var(--font-mono);">${qty.toLocaleString()} ${unit}</td>
            <td style="padding:12px 16px;color:var(--text-secondary);">${item.supplierName || item.supplier || '-'}</td>
            <td style="padding:12px 16px;text-align:center;color:${isExpiringSoon ? 'var(--warning)' : 'var(--text-secondary)'};">${expiryDate}</td>
            <td style="padding:12px 16px;text-align:center;">${statusBadge}</td>
          </tr>`;
      });

      html += `</tbody></table></div>`;

      return html;
    }

    // æ ¼å¼åŒ–æ‰¹æ¬¡æ•°æ®ä¸ºè¡¨æ ¼
    function formatBatchData(items) {
      if (!items || items.length === 0) {
        return '<div style="padding:16px;color:var(--text-secondary);text-align:center;">æš‚æ— æ‰¹æ¬¡è®°å½•</div>';
      }

      let html = `
        <div style="overflow-x:auto;">
          <table style="width:100%;border-collapse:collapse;font-size:14px;">
            <thead>
              <tr style="background:var(--bg-warm);border-bottom:2px solid var(--border);">
                <th style="padding:12px 16px;text-align:left;font-weight:600;">æ‰¹æ¬¡å·</th>
                <th style="padding:12px 16px;text-align:left;font-weight:600;">äº§å“åç§°</th>
                <th style="padding:12px 16px;text-align:right;font-weight:600;">æ•°é‡</th>
                <th style="padding:12px 16px;text-align:center;font-weight:600;">ç”Ÿäº§æ—¥æœŸ</th>
                <th style="padding:12px 16px;text-align:center;font-weight:600;">çŠ¶æ€</th>
              </tr>
            </thead>
            <tbody>`;

      items.forEach((item, index) => {
        const bgColor = index % 2 === 0 ? 'transparent' : 'var(--bg-warm)';
        const status = item.status || 'ACTIVE';
        const statusMap = {
          'ACTIVE': { label: 'ç”Ÿäº§ä¸­', color: 'var(--info)' },
          'COMPLETED': { label: 'å·²å®Œæˆ', color: 'var(--success)' },
          'PENDING': { label: 'å¾…å¤„ç†', color: 'var(--warning)' },
          'CANCELLED': { label: 'å·²å–æ¶ˆ', color: 'var(--text-secondary)' }
        };
        const statusInfo = statusMap[status] || { label: status, color: 'var(--text-secondary)' };

        html += `
          <tr style="background:${bgColor};border-bottom:1px solid var(--border);">
            <td style="padding:12px 16px;font-family:var(--font-mono);font-size:13px;">${item.batchNumber || '-'}</td>
            <td style="padding:12px 16px;font-weight:500;">${item.productName || item.materialName || '-'}</td>
            <td style="padding:12px 16px;text-align:right;font-family:var(--font-mono);">${(item.quantity || 0).toLocaleString()} ${item.unit || ''}</td>
            <td style="padding:12px 16px;text-align:center;color:var(--text-secondary);">${item.productionDate || item.createdAt || '-'}</td>
            <td style="padding:12px 16px;text-align:center;"><span style="background:color-mix(in srgb, ${statusInfo.color} 15%, transparent);color:${statusInfo.color};padding:4px 12px;border-radius:12px;font-size:12px;">${statusInfo.label}</span></td>
          </tr>`;
      });

      html += `</tbody></table></div>`;

      return html;
    }

    // æ˜¾ç¤º API è¿”å›ç»“æœ
    function showAPIResult(data) {
      const resultArea = document.getElementById('resultArea');
      const resultCard = document.getElementById('resultCard');
      let html = '';

      if (data.status === 'NEED_MORE_INFO' || data.status === 'NEED_CLARIFICATION') {
        // éœ€è¦æ›´å¤šä¿¡æ¯ - æ˜¾ç¤ºæ¾„æ¸…é—®é¢˜
        html = `
          <div class="result-card-header">
            <div class="result-icon info">ğŸ’¬</div>
            <div>
              <div class="result-card-title">éœ€è¦æ›´å¤šä¿¡æ¯</div>
              <div class="result-card-subtitle">è¯·è¡¥å……ä»¥ä¸‹ä¿¡æ¯ä»¥å®Œæˆæ“ä½œ</div>
            </div>
          </div>
          <div style="padding:16px;background:var(--info-light);border-radius:8px;margin-top:16px;border-left:4px solid var(--info);">
            <div style="font-size:15px;color:var(--text-primary);line-height:1.8;">${data.message || 'è¯·æä¾›æ›´å¤šä¿¡æ¯'}</div>
          </div>`;
        if (data.clarificationQuestions && data.clarificationQuestions.length > 0) {
          html += `
            <div style="margin-top:16px;">
              <div style="font-weight:600;margin-bottom:12px;color:var(--text-secondary);font-size:13px;">æ‚¨å¯ä»¥è¿™æ ·å›ç­”ï¼š</div>
              <ul style="margin:0;padding-left:20px;color:var(--text-primary);line-height:2;">
                ${data.clarificationQuestions.map(q => `<li>${q}</li>`).join('')}
              </ul>
            </div>`;
        }
      } else if (data.status === 'NO_PERMISSION') {
        // æƒé™æ‹’ç» - å†™å…¥æ“ä½œ
        html = `
          <div class="result-card-header">
            <div class="result-icon warning">ğŸ”’</div>
            <div>
              <div class="result-card-title">éœ€è¦æƒé™éªŒè¯</div>
              <div class="result-card-subtitle">${data.intentName || 'æœªçŸ¥æ“ä½œ'} Â· ${data.sensitivityLevel || 'MEDIUM'} æ•æ„Ÿåº¦</div>
            </div>
            <span class="badge warning">${data.sensitivityLevel || 'MEDIUM'}</span>
          </div>
          <div style="padding:16px;background:var(--warning-light);border-radius:8px;margin-top:16px;border-left:4px solid var(--warning);">
            <div style="white-space:pre-line;font-size:14px;color:var(--text-primary);line-height:1.8;">${data.message || 'è¯¥æ“ä½œéœ€è¦éªŒè¯æƒé™'}</div>
          </div>
          <div class="result-grid" style="margin-top:16px;">
            <div class="result-item"><div class="result-item-label">æ„å›¾ä»£ç </div><div class="result-item-value" style="font-family:var(--font-mono)">${data.intentCode || '-'}</div></div>
            <div class="result-item"><div class="result-item-label">åˆ†ç±»</div><div class="result-item-value">${data.intentCategory || '-'}</div></div>
            <div class="result-item"><div class="result-item-label">é…é¢æ¶ˆè€—</div><div class="result-item-value">${data.quotaCost || 0}</div></div>
            <div class="result-item"><div class="result-item-label">éœ€è¦å®¡æ‰¹</div><div class="result-item-value">${data.requiresApproval ? 'æ˜¯' : 'å¦'}</div></div>
          </div>`;
      } else if (data.status === 'COMPLETED' && data.resultData) {
        // æˆåŠŸæ‰§è¡Œ - æ˜¾ç¤ºæ ¼å¼åŒ–çš„ç»“æœæ•°æ®
        html = `
          <div class="result-card-header">
            <div class="result-icon success">âœ“</div>
            <div>
              <div class="result-card-title">${data.intentName || 'æŸ¥è¯¢ç»“æœ'}</div>
              <div class="result-card-subtitle">æ‰§è¡ŒæˆåŠŸ Â· ${data.intentCategory || 'æœªåˆ†ç±»'}</div>
            </div>
            <span class="badge success">æˆåŠŸ</span>
          </div>
          <div style="margin-top:16px;">
            ${formatResultData(data.resultData, data.intentCode)}
          </div>`;
      } else if (data.status === 'NOT_RECOGNIZED') {
        // æœªè¯†åˆ«æ„å›¾
        html = `
          <div class="result-card-header">
            <div class="result-icon info">â“</div>
            <div>
              <div class="result-card-title">æœªè¯†åˆ«åˆ°æ„å›¾</div>
              <div class="result-card-subtitle">è¯·å°è¯•æ›´å…·ä½“çš„æè¿°</div>
            </div>
          </div>
          <div style="padding:16px;background:var(--info-light);border-radius:8px;margin-top:16px;">
            <div style="font-size:14px;color:var(--text-secondary);">${data.message || 'ç³»ç»Ÿæ— æ³•ç†è§£æ‚¨çš„è¯·æ±‚ï¼Œè¯·å°è¯•ä»¥ä¸‹æ–¹å¼ï¼š'}</div>
            <ul style="margin-top:12px;padding-left:20px;color:var(--text-secondary);">
              <li>ä½¿ç”¨æ›´å…·ä½“çš„ä¸šåŠ¡æœ¯è¯­</li>
              <li>æ˜ç¡®æŒ‡å®šæ“ä½œå¯¹è±¡ï¼ˆå¦‚æ‰¹æ¬¡å·ã€äº§å“åï¼‰</li>
              <li>å°è¯•"æŸ¥è¯¢XXX"ã€"ç»Ÿè®¡XXX"ç­‰æ ¼å¼</li>
            </ul>
          </div>`;
      } else {
        // å…¶ä»–çŠ¶æ€
        html = `
          <div class="result-card-header">
            <div class="result-icon info">â„¹ï¸</div>
            <div>
              <div class="result-card-title">${data.intentName || 'AI å“åº”'}</div>
              <div class="result-card-subtitle">çŠ¶æ€: ${data.status || 'UNKNOWN'}</div>
            </div>
          </div>
          <div style="padding:16px;background:var(--bg-warm);border-radius:8px;margin-top:16px;">
            <div style="font-size:14px;">${data.message || 'æ“ä½œå·²å¤„ç†'}</div>
          </div>
          ${data.resultData ? `<pre style="margin-top:16px;background:var(--bg-muted);padding:16px;border-radius:8px;overflow-x:auto;font-size:12px;font-family:var(--font-mono);">${JSON.stringify(data.resultData, null, 2)}</pre>` : ''}`;
      }

      resultCard.innerHTML = html;
      resultArea.classList.add('visible');
    }

    // æ˜¾ç¤º API é”™è¯¯
    function showAPIError(message) {
      const resultArea = document.getElementById('resultArea');
      const resultCard = document.getElementById('resultCard');
      resultCard.innerHTML = `
        <div class="result-card-header">
          <div class="result-icon error">âœ—</div>
          <div>
            <div class="result-card-title">è¿æ¥å¤±è´¥</div>
            <div class="result-card-subtitle">æ— æ³•è¿æ¥åˆ° AI æœåŠ¡</div>
          </div>
        </div>
        <div style="padding:16px;background:var(--error-light);border-radius:8px;margin-top:16px;border-left:4px solid var(--error);">
          <div style="font-size:14px;color:var(--error);">${message}</div>
          <div style="margin-top:12px;font-size:13px;color:var(--text-secondary);">
            æç¤ºï¼šè¯·ç¡®ä¿åç«¯æœåŠ¡ (${API_BASE_URL}) å·²å¯åŠ¨å¹¶å¯è®¿é—®ã€‚
          </div>
        </div>`;
      resultArea.classList.add('visible');
    }

    async function animateStep(stepEl, html) {
      stepEl.classList.add('active');
      const dataEl = stepEl.querySelector('.process-step-data');
      dataEl.innerHTML = html;
      dataEl.style.display = 'block';
      await sleep(800);
      stepEl.classList.remove('active');
      stepEl.classList.add('completed');
    }

    function showResultCard(data) {
      const resultArea = document.getElementById('resultArea');
      const resultCard = document.getElementById('resultCard');

      let html = '';
      if (data.type === 'quality') {
        html = `
          <div class="result-card-header">
            <div class="result-icon success">âœ“</div>
            <div>
              <div class="result-card-title">è´¨æ£€ç»“æœ - ${data.batchId}</div>
              <div class="result-card-subtitle">${data.productName} Â· æœ€åæ£€æµ‹: ${data.lastCheckTime}</div>
            </div>
            <span class="badge ${data.passRate === '100%' ? 'success' : 'warning'}">${data.passRate} åˆæ ¼ç‡</span>
          </div>
          <div class="result-grid">
            <div class="result-item"><div class="result-item-label">æ£€æµ‹é¡¹ç›®</div><div class="result-item-value">${data.totalItems} é¡¹</div></div>
            <div class="result-item"><div class="result-item-label">åˆæ ¼é¡¹ç›®</div><div class="result-item-value highlight">${data.passedItems} é¡¹</div></div>
            <div class="result-item"><div class="result-item-label">ä¸åˆæ ¼é¡¹ç›®</div><div class="result-item-value" style="color:var(--error)">${data.failedItems} é¡¹</div></div>
          </div>
          <table class="result-table" style="margin-top:16px;">
            <thead><tr><th>æ£€æµ‹é¡¹</th><th>ç»“æœ</th><th>æ•°å€¼</th></tr></thead>
            <tbody>
              ${data.items.map(item => `<tr><td>${item.name}</td><td><span class="badge ${item.result === 'åˆæ ¼' ? 'success' : 'error'}">${item.result}</span></td><td>${item.value}</td></tr>`).join('')}
            </tbody>
          </table>`;
      } else if (data.type === 'material_list') {
        html = `
          <div class="result-card-header">
            <div class="result-icon info">ğŸ“¦</div>
            <div>
              <div class="result-card-title">${data.date} å…¥åº“è®°å½•</div>
              <div class="result-card-subtitle">å…± ${data.totalBatches} æ‰¹æ¬¡ï¼Œæ€»é‡é‡ ${data.totalWeight}</div>
            </div>
          </div>
          <table class="result-table">
            <thead><tr><th>æ‰¹æ¬¡å·</th><th>åŸæ–™åç§°</th><th>é‡é‡</th><th>ä¾›åº”å•†</th><th>å…¥åº“æ—¶é—´</th></tr></thead>
            <tbody>
              ${data.batches.map(b => `<tr><td style="font-family:var(--font-mono);color:var(--accent)">${b.id}</td><td>${b.name}</td><td>${b.weight}</td><td>${b.supplier}</td><td>${b.time}</td></tr>`).join('')}
            </tbody>
          </table>`;
      } else if (data.type === 'pending_inbound') {
        html = `
          <div class="result-card-header">
            <div class="result-icon info">ğŸšš</div>
            <div>
              <div class="result-card-title">å…¥åº“çŠ¶æ€</div>
              <div class="result-card-subtitle">å·²åˆ°è´§ ${data.summary.arrived} æ‰¹ï¼Œå¾…åˆ°è´§ ${data.summary.pending} æ‰¹</div>
            </div>
          </div>
          <table class="result-table">
            <thead><tr><th>è®¢å•å·</th><th>åŸæ–™</th><th>çŠ¶æ€</th><th>é‡é‡</th><th>é¢„è®¡åˆ°è¾¾</th><th>ä¾›åº”å•†</th></tr></thead>
            <tbody>
              ${data.items.map(item => `<tr><td style="font-family:var(--font-mono)">${item.id}</td><td>${item.name}</td><td><span class="badge ${item.status === 'å·²åˆ°è´§' ? 'success' : 'info'}">${item.status}</span></td><td>${item.weight}</td><td>${item.eta}</td><td>${item.supplier}</td></tr>`).join('')}
            </tbody>
          </table>`;
      } else if (data.type === 'supplier_detail') {
        const s = data.supplier;
        html = `
          <div class="result-card-header">
            <div class="result-icon success">ğŸ¤</div>
            <div>
              <div class="result-card-title">${s.name}</div>
              <div class="result-card-subtitle">${s.category} Â· ${s.level}ä¾›åº”å•† Â· åˆä½œ${s.cooperationYears}å¹´</div>
            </div>
            <span class="badge success">â­ ${s.rating}</span>
          </div>
          <div class="result-grid">
            <div class="result-item"><div class="result-item-label">è”ç³»äºº</div><div class="result-item-value">${s.contact}</div></div>
            <div class="result-item"><div class="result-item-label">ç”µè¯</div><div class="result-item-value">${s.phone}</div></div>
            <div class="result-item"><div class="result-item-label">ç´¯è®¡è®¢å•</div><div class="result-item-value highlight">${s.totalOrders} å•</div></div>
            <div class="result-item"><div class="result-item-label">å‡†æ—¶ç‡</div><div class="result-item-value">${s.onTimeRate}</div></div>
            <div class="result-item"><div class="result-item-label">è´¨é‡åˆæ ¼ç‡</div><div class="result-item-value">${s.qualityRate}</div></div>
            <div class="result-item"><div class="result-item-label">åœ°å€</div><div class="result-item-value">${s.address}</div></div>
          </div>`;
      } else if (data.type === 'efficiency_report') {
        html = `
          <div class="result-card-header">
            <div class="result-icon success">ğŸ“Š</div>
            <div>
              <div class="result-card-title">${data.period} ç”Ÿäº§æ•ˆç‡æŠ¥è¡¨</div>
              <div class="result-card-subtitle">OEE: ${data.oee}</div>
            </div>
          </div>
          <div class="result-grid">
            <div class="result-item"><div class="result-item-label">è®¾å¤‡å¯ç”¨ç‡</div><div class="result-item-value highlight">${data.availability}</div></div>
            <div class="result-item"><div class="result-item-label">æ€§èƒ½æ•ˆç‡</div><div class="result-item-value highlight">${data.performance}</div></div>
            <div class="result-item"><div class="result-item-label">è´¨é‡ç‡</div><div class="result-item-value highlight">${data.quality}</div></div>
          </div>
          <div style="margin-top:16px;"><strong>å‘¨è¶‹åŠ¿:</strong></div>
          <table class="result-table" style="margin-top:8px;">
            <thead><tr><th>å‘¨</th><th>OEE</th><th>äº§é‡</th></tr></thead>
            <tbody>${data.trends.map(t => `<tr><td>${t.week}</td><td>${t.oee}</td><td>${t.production}</td></tr>`).join('')}</tbody>
          </table>
          <div style="margin-top:16px;"><strong>äº§å“æ•ˆç‡ TOP3:</strong></div>
          <table class="result-table" style="margin-top:8px;">
            <thead><tr><th>äº§å“</th><th>äº§é‡</th><th>æ•ˆç‡</th></tr></thead>
            <tbody>${data.topProducts.map(p => `<tr><td>${p.name}</td><td>${p.output}</td><td>${p.efficiency}</td></tr>`).join('')}</tbody>
          </table>`;
      } else if (data.type === 'alert_list') {
        html = `
          <div class="result-card-header">
            <div class="result-icon warning">ğŸ””</div>
            <div>
              <div class="result-card-title">æ´»è·ƒå‘Šè­¦</div>
              <div class="result-card-subtitle">ç´§æ€¥ ${data.summary.critical} Â· é«˜ ${data.summary.high} Â· ä¸­ ${data.summary.medium} Â· ä½ ${data.summary.low}</div>
            </div>
          </div>
          ${data.criticalAlerts.map(a => `
            <div style="padding:16px;background:var(--error-light);border-radius:8px;margin-bottom:12px;border-left:4px solid var(--error);">
              <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
                <strong style="color:var(--error)">${a.title}</strong>
                <span class="badge error">${a.level}</span>
              </div>
              <div style="font-size:14px;color:var(--text-secondary);margin-bottom:8px;">${a.message}</div>
              <div style="font-size:13px;color:var(--text-tertiary);">è®¾å¤‡: ${a.equipment} Â· ${a.time}</div>
              <div style="margin-top:12px;padding:12px;background:white;border-radius:6px;font-size:13px;"><strong>å»ºè®®:</strong> ${a.suggestion}</div>
            </div>`).join('')}
          <div style="margin-top:8px;"><strong>é«˜ä¼˜å…ˆçº§å‘Šè­¦:</strong></div>
          ${data.highAlerts.map(a => `
            <div style="padding:12px;background:var(--warning-light);border-radius:8px;margin-top:8px;display:flex;justify-content:space-between;align-items:center;">
              <div><strong>${a.title}</strong><div style="font-size:13px;color:var(--text-secondary)">${a.message}</div></div>
              <span style="font-size:12px;color:var(--text-tertiary)">${a.time}</span>
            </div>`).join('')}`;
      }

      resultCard.innerHTML = html;
      resultArea.classList.add('visible');
    }

    // Intent Categories
    function renderIntentCategories() {
      const container = document.getElementById('intentCategories');
      const filters = document.getElementById('categoryFilters');

      // Render filters
      filters.innerHTML = `<span class="filter-tag active" onclick="filterByCategory('all')">å…¨éƒ¨</span>` +
        Object.entries(intentCategories).map(([key, cat]) =>
          `<span class="filter-tag" onclick="filterByCategory('${key}')">${cat.icon} ${cat.name}</span>`
        ).join('');

      // Render categories
      renderCategoryCards(Object.entries(intentCategories));
    }

    function renderCategoryCards(entries) {
      const container = document.getElementById('intentCategories');
      container.innerHTML = entries.map(([key, cat]) => `
        <div class="category-card" data-category="${key}">
          <div class="category-header" onclick="toggleCategory(this)">
            <div class="category-name">
              <span class="category-icon" style="background:${cat.color}20;color:${cat.color}">${cat.icon}</span>
              ${cat.name}
            </div>
            <div style="display:flex;align-items:center;gap:8px;">
              <span class="category-count">${cat.intents.length} ä¸ªæ„å›¾</span>
              <svg class="category-expand" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </div>
          </div>
          <div class="category-content">
            <div class="intent-list">
              ${cat.intents.map(intent => `
                <div class="intent-item">
                  <div>
                    <div class="intent-name">${intent.name}</div>
                    <div class="intent-code">${intent.code}</div>
                  </div>
                  <span class="badge ${intent.sensitivity === 'LOW' ? 'success' : intent.sensitivity === 'MEDIUM' ? 'info' : intent.sensitivity === 'HIGH' ? 'warning' : 'error'}">${intent.sensitivity}</span>
                </div>
              `).join('')}
            </div>
          </div>
        </div>
      `).join('');
    }

    function toggleCategory(header) {
      header.parentElement.classList.toggle('expanded');
    }

    function filterByCategory(category) {
      document.querySelectorAll('#categoryFilters .filter-tag').forEach(tag => tag.classList.remove('active'));
      event.target.classList.add('active');

      if (category === 'all') {
        renderCategoryCards(Object.entries(intentCategories));
      } else {
        renderCategoryCards([[category, intentCategories[category]]]);
      }
    }

    function filterIntents() {
      const query = document.getElementById('intentSearch').value.toLowerCase();
      if (!query) {
        renderCategoryCards(Object.entries(intentCategories));
        return;
      }

      const filtered = {};
      Object.entries(intentCategories).forEach(([key, cat]) => {
        const matchedIntents = cat.intents.filter(i =>
          i.name.toLowerCase().includes(query) || i.code.toLowerCase().includes(query)
        );
        if (matchedIntents.length > 0) {
          filtered[key] = { ...cat, intents: matchedIntents };
        }
      });
      renderCategoryCards(Object.entries(filtered));
    }

    // Tools
    function renderTools() {
      const container = document.getElementById('toolsGrid');
      const filters = document.getElementById('toolFilters');

      const categories = [...new Set(toolsList.map(t => t.category))];
      filters.innerHTML = `<span class="filter-tag active" onclick="filterTools('all')">å…¨éƒ¨ (${toolsList.length})</span>` +
        categories.map(cat => {
          const count = toolsList.filter(t => t.category === cat).length;
          return `<span class="filter-tag" onclick="filterTools('${cat}')">${cat} (${count})</span>`;
        }).join('');

      renderToolCards(toolsList);
    }

    function renderToolCards(tools) {
      const container = document.getElementById('toolsGrid');
      container.innerHTML = tools.map(tool => `
        <div class="tool-card">
          <div class="tool-name">${tool.name}</div>
          <div class="tool-desc">${tool.desc}</div>
        </div>
      `).join('');
    }

    function filterTools(category) {
      if (typeof category === 'string' && category !== 'all') {
        document.querySelectorAll('#toolFilters .filter-tag').forEach(tag => tag.classList.remove('active'));
        event.target.classList.add('active');
        renderToolCards(toolsList.filter(t => t.category === category));
      } else if (category === 'all') {
        document.querySelectorAll('#toolFilters .filter-tag').forEach(tag => tag.classList.remove('active'));
        event.target.classList.add('active');
        renderToolCards(toolsList);
      } else {
        // Search
        const query = document.getElementById('toolSearch').value.toLowerCase();
        if (!query) {
          renderToolCards(toolsList);
        } else {
          renderToolCards(toolsList.filter(t => t.name.includes(query) || t.desc.includes(query)));
        }
      }
    }

    function sleep(ms) { return new Promise(resolve => setTimeout(resolve, ms)); }

    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      renderCaseButtons();
      renderIntentCategories();
      renderTools();
      selectCase(0);

      document.getElementById('demoInput').addEventListener('keypress', e => {
        if (e.key === 'Enter') runDemo();
      });
    });
  </script>
</body>
</html>
