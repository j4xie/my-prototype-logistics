#!/bin/bash

# AI成本分析Mock数据测试脚本

echo "=========================================="
echo "AI成本分析测试 - Mock数据"
echo "=========================================="
echo ""

# Mock成本数据（模拟真实生产批次）
echo "📦 测试场景: 冷冻鱼片生产批次 FISH_2025_001"
echo ""

curl -X POST http://localhost:8085/api/ai/chat \
  -H "Content-Type: application/json" \
  -d @- << 'EOF' | python3 -m json.tool
{
  "message": "批次编号: FISH_2025_001\n产品名称: 冷冻鱼片\n生产数量: 500kg\n\n【成本汇总】\n总成本: ¥3,600\n单位成本: ¥7.20/kg\n\n【成本明细】\n原材料成本: ¥2,000 (占比55.6%)\n  - 鱼类原料: ¥1,800\n  - 辅料调味: ¥200\n\n人工成本: ¥1,200 (占比33.3%)\n  - 工作时长: 480分钟 (8小时)\n  - 参与工人: 5人\n  - 人均时薪: ¥30/小时\n\n设备成本: ¥400 (占比11.1%)\n  - 设备使用时长: 480分钟\n  - 设备折旧: ¥50/小时\n\n【生产指标】\n实际产量: 500kg\n良品数量: 480kg\n次品数量: 20kg\n良品率: 96%\n生产效率: 100kg/小时\n人均产能: 100kg/人\n\n【环境信息】\n工厂编号: F001\n生产日期: 2025-01-09\n班次: 早班",
  "user_id": "F001_batch_1"
}
EOF

echo ""
echo "=========================================="
echo "测试完成"
echo "=========================================="
