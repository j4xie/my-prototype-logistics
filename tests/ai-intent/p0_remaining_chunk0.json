{
  "testSuite": "AI Intent Recognition - P0 Remaining Cases",
  "version": "1.0.0",
  "phase": "Phase 2",
  "priority": "P0",
  "totalCases": 35,
  "generatedAt": "2026-01-16",
  "testCases": [
    {
      "id": "TC-P0-MATERIAL-005",
      "priority": "P0",
      "category": "MATERIAL",
      "intentCode": "MATERIAL_BATCH_QUERY",
      "testType": "QUERY",
      "description": "按材料类型筛选查询带鱼批次",
      "userInput": "查询所有带鱼类型的原料批次",
      "expectedIntent": {
        "intentCode": "MATERIAL_BATCH_QUERY",
        "confidence": 1,
        "matchMethod": "FUSION",
        "questionType": "OPERATIONAL_COMMAND"
      },
      "testDataSetup": {
        "sql": "INSERT INTO raw_material_types (id, created_at, updated_at, code, created_by, factory_id, is_active, name, unit, category) VALUES ('MT_FISH_006', NOW(), NOW(), 'MT_CODE_005', 1, 'F001', 1, '带鱼', 'kg', '鱼类'); INSERT INTO material_batches (id, created_at, updated_at, batch_number, created_by, factory_id, material_type_id, quantity_unit, inbound_date, receipt_quantity, reserved_quantity, status, used_quantity) VALUES ('MB_TEST_014', NOW(), NOW(), 'BATCH-20260116-014', 1, 'F001', 'MT_FISH_006', 'kg', '2026-01-16 00:00:00', 800.00, 0.00, 'AVAILABLE', 200.00);",
        "factoryId": "F001",
        "cleanup": "DELETE FROM material_batches WHERE id IN ('MB_TEST_014', 'MB_TEST_015'); DELETE FROM raw_material_types WHERE id = 'MT_FISH_006';"
      },
      "validation": {
        "responseAssertion": {
          "status": "COMPLETED",
          "intentRecognized": true,
          "dataNotNull": true,
          "intentCode": "MATERIAL_BATCH_QUERY"
        },
        "dataVerification": {
          "method": "DATABASE_COMPARE",
          "expectedFields": [
            "batchNumber",
            "materialName",
            "currentQuantity"
          ],
          "expectedCount": 2
        },
        "semanticCheck": {
          "enabled": true,
          "llmPrompt": "用户问题: 查询所有带鱼类型的原料批次\n系统返回: {响应内容}\n\n判断: 返回的数据是否包含了所有带鱼批次?返回JSON: {\"correct\": true/false, \"reason\": \"原因\"}"
        }
      },
      "expectedResponse": {
        "status": "COMPLETED",
        "messagePattern": "查询成功.*2.*批次"
      }
    },
    {
      "id": "TC-P0-MATERIAL-006",
      "priority": "P0",
      "category": "MATERIAL",
      "intentCode": "MATERIAL_BATCH_QUERY",
      "testType": "QUERY",
      "description": "按材料类型筛选查询草鱼批次(口语化)",
      "userInput": "还有多少草鱼",
      "expectedIntent": {
        "intentCode": "MATERIAL_BATCH_QUERY",
        "confidence": 0.9,
        "matchMethod": "COLLOQUIAL",
        "questionType": "INFORMATION_QUERY"
      },
      "testDataSetup": {
        "sql": "INSERT INTO raw_material_types (id, created_at, updated_at, code, created_by, factory_id, is_active, name, unit, category) VALUES ('MT_FISH_007', NOW(), NOW(), 'MT_CODE_006', 1, 'F001', 1, '草鱼', 'kg', '鱼类'); INSERT INTO material_batches (id, created_at, updated_at, batch_number, created_by, factory_id, material_type_id, quantity_unit, inbound_date, receipt_quantity, reserved_quantity, status, used_quantity) VALUES ('MB_TEST_016', NOW(), NOW(), 'BATCH-20260116-016', 1, 'F001', 'MT_FISH_007', 'kg', '2026-01-16 00:00:00', 500.00, 50.00, 'AVAILABLE', 150.00);",
        "factoryId": "F001",
        "cleanup": "DELETE FROM material_batches WHERE id = 'MB_TEST_016'; DELETE FROM raw_material_types WHERE id = 'MT_FISH_007';"
      },
      "validation": {
        "responseAssertion": {
          "status": "COMPLETED",
          "intentRecognized": true,
          "dataNotNull": true
        },
        "dataVerification": {
          "method": "CALCULATED_FIELD",
          "expectedFields": [
            "currentQuantity"
          ],
          "expectedCurrentQuantity": 300
        },
        "semanticCheck": {
          "enabled": true,
          "llmPrompt": "用户口语化询问: 还有多少草鱼\n系统返回: {响应内容}\n\n判断: 系统是否正确返回了草鱼的剩余库存?返回JSON: {\"correct\": true/false, \"reason\": \"原因\"}"
        }
      },
      "expectedResponse": {
        "status": "COMPLETED",
        "messagePattern": "草鱼.*300"
      }
    },
    {
      "id": "TC-P0-MATERIAL-007",
      "priority": "P0",
      "category": "MATERIAL",
      "intentCode": "MATERIAL_BATCH_QUERY",
      "testType": "QUERY",
      "description": "按材料类型筛选查询虾仁批次",
      "userInput": "查询虾仁原料",
      "expectedIntent": {
        "intentCode": "MATERIAL_BATCH_QUERY",
        "confidence": 1,
        "matchMethod": "FUSION",
        "questionType": "INFORMATION_QUERY"
      },
      "testDataSetup": {
        "sql": "INSERT INTO raw_material_types (id, created_at, updated_at, code, created_by, factory_id, is_active, name, unit, category) VALUES ('MT_SHRIMP_002', NOW(), NOW(), 'MT_CODE_007', 1, 'F001', 1, '虾仁', 'kg', '海鲜类'); INSERT INTO material_batches (id, created_at, updated_at, batch_number, created_by, factory_id, material_type_id, quantity_unit, inbound_date, receipt_quantity, reserved_quantity, status, used_quantity) VALUES ('MB_TEST_017', NOW(), NOW(), 'BATCH-20260116-017', 1, 'F001', 'MT_SHRIMP_002', 'kg', '2026-01-16 00:00:00', 400.00, 0.00, 'AVAILABLE', 0.00);",
        "factoryId": "F001",
        "cleanup": "DELETE FROM material_batches WHERE id IN ('MB_TEST_017', 'MB_TEST_018'); DELETE FROM raw_material_types WHERE id = 'MT_SHRIMP_002';"
      },
      "validation": {
        "responseAssertion": {
          "status": "COMPLETED",
          "intentRecognized": true,
          "dataNotNull": true
        },
        "dataVerification": {
          "method": "DATABASE_COMPARE",
          "expectedCount": 2,
          "expectedFields": [
            "materialName",
            "batchNumber"
          ]
        },
        "semanticCheck": {
          "enabled": true,
          "llmPrompt": "用户问题: 查询虾仁原料\n系统返回: {响应内容}\n\n判断: 是否返回了所有虾仁批次?返回JSON: {\"correct\": true/false, \"reason\": \"原因\"}"
        }
      },
      "expectedResponse": {
        "status": "COMPLETED",
        "messagePattern": "虾仁.*2.*批次"
      }
    },
    {
      "id": "TC-P0-MATERIAL-008",
      "priority": "P0",
      "category": "MATERIAL",
      "intentCode": "MATERIAL_BATCH_QUERY",
      "testType": "QUERY",
      "description": "按材料类型筛选查询鱿鱼批次",
      "userInput": "鱿鱼还有多少库存",
      "expectedIntent": {
        "intentCode": "MATERIAL_BATCH_QUERY",
        "confidence": 0.95,
        "matchMethod": "FUSION",
        "questionType": "INFORMATION_QUERY"
      },
      "testDataSetup": {
        "sql": "INSERT INTO raw_material_types (id, created_at, updated_at, code, created_by, factory_id, is_active, name, unit, category) VALUES ('MT_SQUID_002', NOW(), NOW(), 'MT_CODE_008', 1, 'F001', 1, '鱿鱼', 'kg', '海鲜类'); INSERT INTO material_batches (id, created_at, updated_at, batch_number, created_by, factory_id, material_type_id, quantity_unit, inbound_date, receipt_quantity, reserved_quantity, status, used_quantity) VALUES ('MB_TEST_019', NOW(), NOW(), 'BATCH-20260116-019', 1, 'F001', 'MT_SQUID_002', 'kg', '2026-01-16 00:00:00', 600.00, 100.00, 'AVAILABLE', 200.00);",
        "factoryId": "F001",
        "cleanup": "DELETE FROM material_batches WHERE id = 'MB_TEST_019'; DELETE FROM raw_material_types WHERE id = 'MT_SQUID_002';"
      },
      "validation": {
        "responseAssertion": {
          "status": "COMPLETED",
          "intentRecognized": true,
          "dataNotNull": true
        },
        "dataVerification": {
          "method": "CALCULATED_FIELD",
          "expectedCurrentQuantity": 300,
          "verifyFormula": "receiptQuantity - usedQuantity - reservedQuantity"
        },
        "semanticCheck": {
          "enabled": true,
          "llmPrompt": "用户问题: 鱿鱼还有多少库存\n系统返回: {响应内容}\n\n判断: 系统是否正确返回了鱿鱼的可用库存?返回JSON: {\"correct\": true/false, \"reason\": \"原因\"}"
        }
      },
      "expectedResponse": {
        "status": "COMPLETED",
        "messagePattern": "鱿鱼.*300"
      }
    },
    {
      "id": "TC-P0-MATERIAL-009",
      "priority": "P0",
      "category": "MATERIAL",
      "intentCode": "MATERIAL_BATCH_QUERY",
      "testType": "QUERY",
      "description": "按材料类型筛选查询扇贝批次(口语化)",
      "userInput": "扇贝的料还够不够",
      "expectedIntent": {
        "intentCode": "MATERIAL_BATCH_QUERY",
        "confidence": 0.85,
        "matchMethod": "COLLOQUIAL",
        "questionType": "INFORMATION_QUERY"
      },
      "testDataSetup": {
        "sql": "INSERT INTO raw_material_types (id, created_at, updated_at, code, created_by, factory_id, is_active, name, unit, category) VALUES ('MT_SCALLOP_002', NOW(), NOW(), 'MT_CODE_009', 1, 'F001', 1, '扇贝', 'kg', '贝类'); INSERT INTO material_batches (id, created_at, updated_at, batch_number, created_by, factory_id, material_type_id, quantity_unit, inbound_date, receipt_quantity, reserved_quantity, status, used_quantity) VALUES ('MB_TEST_020', NOW(), NOW(), 'BATCH-20260116-020', 1, 'F001', 'MT_SCALLOP_002', 'kg', '2026-01-15 00:00:00', 250.00, 0.00, 'AVAILABLE', 180.00);",
        "factoryId": "F001",
        "cleanup": "DELETE FROM material_batches WHERE id = 'MB_TEST_020'; DELETE FROM raw_material_types WHERE id = 'MT_SCALLOP_002';"
      },
      "validation": {
        "responseAssertion": {
          "status": "COMPLETED",
          "intentRecognized": true,
          "dataNotNull": true
        },
        "dataVerification": {
          "method": "CALCULATED_FIELD",
          "expectedCurrentQuantity": 70
        },
        "semanticCheck": {
          "enabled": true,
          "llmPrompt": "用户口语化询问: 扇贝的料还够不够\n系统返回: {响应内容}\n\n判断: 系统是否理解了库存查询意图并返回了扇贝剩余量?返回JSON: {\"correct\": true/false, \"reason\": \"原因\"}"
        }
      },
      "expectedResponse": {
        "status": "COMPLETED",
        "messagePattern": "扇贝.*70"
      }
    },
    {
      "id": "TC-P0-MATERIAL-010",
      "priority": "P0",
      "category": "MATERIAL",
      "intentCode": "MATERIAL_BATCH_QUERY",
      "testType": "QUERY",
      "description": "按状态筛选查询AVAILABLE批次",
      "userInput": "查询所有可用状态的原料批次",
      "expectedIntent": {
        "intentCode": "MATERIAL_BATCH_QUERY",
        "confidence": 1,
        "matchMethod": "FUSION",
        "questionType": "INFORMATION_QUERY"
      },
      "testDataSetup": {
        "sql": "INSERT INTO raw_material_types (id, created_at, updated_at, code, created_by, factory_id, is_active, name, unit, category) VALUES ('MT_STATUS_003', NOW(), NOW(), 'MT_CODE_010', 1, 'F001', 1, '测试材料', 'kg', '其他'); INSERT INTO material_batches (id, created_at, updated_at, batch_number, created_by, factory_id, material_type_id, quantity_unit, inbound_date, receipt_quantity, reserved_quantity, status, used_quantity) VALUES ('MB_TEST_021', NOW(), NOW(), 'BATCH-20260116-021', 1, 'F001', 'MT_STATUS_003', 'kg', '2026-01-16 00:00:00', 500.00, 0.00, 'AVAILABLE', 0.00);",
        "factoryId": "F001",
        "cleanup": "DELETE FROM material_batches WHERE id IN ('MB_TEST_021', 'MB_TEST_022', 'MB_TEST_023'); DELETE FROM raw_material_types WHERE id = 'MT_STATUS_003';"
      },
      "validation": {
        "responseAssertion": {
          "status": "COMPLETED",
          "intentRecognized": true,
          "dataNotNull": true
        },
        "dataVerification": {
          "method": "STATUS_FILTER",
          "expectedFields": [
            "status"
          ],
          "filterCondition": "status = 'AVAILABLE'",
          "expectedCount": 2
        },
        "semanticCheck": {
          "enabled": true,
          "llmPrompt": "用户问题: 查询所有可用状态的原料批次\n系统返回: {响应内容}\n\n判断: 系统是否只返回了状态为AVAILABLE的批次?返回JSON: {\"correct\": true/false, \"reason\": \"原因\"}"
        }
      },
      "expectedResponse": {
        "status": "COMPLETED",
        "messagePattern": "可用.*2.*批次"
      }
    },
    {
      "id": "TC-P0-MATERIAL-011",
      "priority": "P0",
      "category": "MATERIAL",
      "intentCode": "MATERIAL_BATCH_QUERY",
      "testType": "QUERY",
      "description": "按状态筛选查询RESERVED批次",
      "userInput": "查询预留状态的原料",
      "expectedIntent": {
        "intentCode": "MATERIAL_BATCH_QUERY",
        "confidence": 1,
        "matchMethod": "FUSION",
        "questionType": "INFORMATION_QUERY"
      },
      "testDataSetup": {
        "sql": "INSERT INTO raw_material_types (id, created_at, updated_at, code, created_by, factory_id, is_active, name, unit, category) VALUES ('MT_STATUS_004', NOW(), NOW(), 'MT_CODE_011', 1, 'F001', 1, '测试材料2', 'kg', '其他'); INSERT INTO material_batches (id, created_at, updated_at, batch_number, created_by, factory_id, material_type_id, quantity_unit, inbound_date, receipt_quantity, reserved_quantity, status, used_quantity) VALUES ('MB_TEST_024', NOW(), NOW(), 'BATCH-20260116-024', 1, 'F001', 'MT_STATUS_004', 'kg', '2026-01-16 00:00:00', 500.00, 200.00, 'RESERVED', 0.00);",
        "factoryId": "F001",
        "cleanup": "DELETE FROM material_batches WHERE id IN ('MB_TEST_024', 'MB_TEST_025'); DELETE FROM raw_material_types WHERE id = 'MT_STATUS_004';"
      },
      "validation": {
        "responseAssertion": {
          "status": "COMPLETED",
          "intentRecognized": true,
          "dataNotNull": true
        },
        "dataVerification": {
          "method": "STATUS_FILTER",
          "expectedFields": [
            "status",
            "reservedQuantity"
          ],
          "filterCondition": "status = 'RESERVED'",
          "expectedCount": 2
        },
        "semanticCheck": {
          "enabled": true,
          "llmPrompt": "用户问题: 查询预留状态的原料\n系统返回: {响应内容}\n\n判断: 系统是否只返回了预留状态的批次?返回JSON: {\"correct\": true/false, \"reason\": \"原因\"}"
        }
      },
      "expectedResponse": {
        "status": "COMPLETED",
        "messagePattern": "预留.*2.*批次"
      }
    },
    {
      "id": "TC-P0-MATERIAL-012",
      "priority": "P0",
      "category": "MATERIAL",
      "intentCode": "MATERIAL_BATCH_QUERY",
      "testType": "QUERY",
      "description": "按状态筛选查询USED批次(口语化)",
      "userInput": "看看哪些批次已经用完了",
      "expectedIntent": {
        "intentCode": "MATERIAL_BATCH_QUERY",
        "confidence": 0.9,
        "matchMethod": "COLLOQUIAL",
        "questionType": "INFORMATION_QUERY"
      },
      "testDataSetup": {
        "sql": "INSERT INTO raw_material_types (id, created_at, updated_at, code, created_by, factory_id, is_active, name, unit, category) VALUES ('MT_STATUS_005', NOW(), NOW(), 'MT_CODE_012', 1, 'F001', 1, '测试材料3', 'kg', '其他'); INSERT INTO material_batches (id, created_at, updated_at, batch_number, created_by, factory_id, material_type_id, quantity_unit, inbound_date, receipt_quantity, reserved_quantity, status, used_quantity) VALUES ('MB_TEST_026', NOW(), NOW(), 'BATCH-20260116-026', 1, 'F001', 'MT_STATUS_005', 'kg', '2026-01-16 00:00:00', 300.00, 0.00, 'DEPLETED', 300.00);",
        "factoryId": "F001",
        "cleanup": "DELETE FROM material_batches WHERE id IN ('MB_TEST_026', 'MB_TEST_027'); DELETE FROM raw_material_types WHERE id = 'MT_STATUS_005';"
      },
      "validation": {
        "responseAssertion": {
          "status": "COMPLETED",
          "intentRecognized": true,
          "dataNotNull": true
        },
        "dataVerification": {
          "method": "STATUS_FILTER",
          "filterCondition": "status = 'DEPLETED'",
          "expectedCount": 2
        },
        "semanticCheck": {
          "enabled": true,
          "llmPrompt": "用户口语化询问: 看看哪些批次已经用完了\n系统返回: {响应内容}\n\n判断: 系统是否理解了查询已用完批次的意图?返回JSON: {\"correct\": true/false, \"reason\": \"原因\"}"
        }
      },
      "expectedResponse": {
        "status": "COMPLETED",
        "messagePattern": "用完|耗尽|DEPLETED.*2"
      }
    },
    {
      "id": "TC-P0-MATERIAL-013",
      "priority": "P0",
      "category": "MATERIAL",
      "intentCode": "MATERIAL_BATCH_QUERY",
      "testType": "QUERY",
      "description": "按日期范围筛选-最近7天入库",
      "userInput": "查询最近7天入库的原料批次",
      "expectedIntent": {
        "intentCode": "MATERIAL_BATCH_QUERY",
        "confidence": 1,
        "matchMethod": "FUSION",
        "questionType": "INFORMATION_QUERY"
      },
      "testDataSetup": {
        "sql": "INSERT INTO raw_material_types (id, created_at, updated_at, code, created_by, factory_id, is_active, name, unit, category) VALUES ('MT_DATE_001', NOW(), NOW(), 'MT_CODE_013', 1, 'F001', 1, '测试材料4', 'kg', '其他'); INSERT INTO material_batches (id, created_at, updated_at, batch_number, created_by, factory_id, material_type_id, quantity_unit, inbound_date, receipt_quantity, reserved_quantity, status, used_quantity) VALUES ('MB_TEST_028', NOW(), NOW(), 'BATCH-20260116-028', 1, 'F001', 'MT_DATE_001', 'kg', DATE_SUB(CURDATE(), 500.00, 0.00, 'AVAILABLE', 0.00);",
        "factoryId": "F001",
        "cleanup": "DELETE FROM material_batches WHERE id IN ('MB_TEST_028', 'MB_TEST_029', 'MB_TEST_030'); DELETE FROM raw_material_types WHERE id = 'MT_DATE_001';"
      },
      "validation": {
        "responseAssertion": {
          "status": "COMPLETED",
          "intentRecognized": true,
          "dataNotNull": true
        },
        "dataVerification": {
          "method": "DATE_RANGE_FILTER",
          "expectedFields": [
            "inboundDate"
          ],
          "filterCondition": "inbound_date >= DATE_SUB(CURDATE(), INTERVAL 7 DAY)",
          "expectedCount": 2
        },
        "semanticCheck": {
          "enabled": true,
          "llmPrompt": "用户问题: 查询最近7天入库的原料批次\n系统返回: {响应内容}\n\n判断: 系统是否只返回了最近7天内入库的批次?返回JSON: {\"correct\": true/false, \"reason\": \"原因\"}"
        }
      },
      "expectedResponse": {
        "status": "COMPLETED",
        "messagePattern": "最近7天.*2.*批次"
      }
    },
    {
      "id": "TC-P0-MATERIAL-014",
      "priority": "P0",
      "category": "MATERIAL",
      "intentCode": "MATERIAL_BATCH_QUERY",
      "testType": "QUERY",
      "description": "按日期范围筛选-本月入库(口语化)",
      "userInput": "这个月进了什么货",
      "expectedIntent": {
        "intentCode": "MATERIAL_BATCH_QUERY",
        "confidence": 0.85,
        "matchMethod": "COLLOQUIAL",
        "questionType": "INFORMATION_QUERY"
      },
      "testDataSetup": {
        "sql": "INSERT INTO raw_material_types (id, created_at, updated_at, code, created_by, factory_id, is_active, name, unit, category) VALUES ('MT_DATE_002', NOW(), NOW(), 'MT_CODE_014', 1, 'F001', 1, '测试材料5', 'kg', '其他'); INSERT INTO material_batches (id, created_at, updated_at, batch_number, created_by, factory_id, material_type_id, quantity_unit, inbound_date, receipt_quantity, reserved_quantity, status, used_quantity) VALUES ('MB_TEST_031', NOW(), NOW(), 'BATCH-20260116-031', 1, 'F001', 'MT_DATE_002', 'kg', '2026-01-16 00:00:00', 600.00, 0.00, 'AVAILABLE', 0.00);",
        "factoryId": "F001",
        "cleanup": "DELETE FROM material_batches WHERE id IN ('MB_TEST_031', 'MB_TEST_032', 'MB_TEST_033'); DELETE FROM raw_material_types WHERE id = 'MT_DATE_002';"
      },
      "validation": {
        "responseAssertion": {
          "status": "COMPLETED",
          "intentRecognized": true,
          "dataNotNull": true
        },
        "dataVerification": {
          "method": "DATE_RANGE_FILTER",
          "expectedFields": [
            "inboundDate",
            "materialName"
          ],
          "filterCondition": "YEAR(inbound_date) = YEAR(CURDATE()) AND MONTH(inbound_date) = MONTH(CURDATE())",
          "expectedCount": 2
        },
        "semanticCheck": {
          "enabled": true,
          "llmPrompt": "用户口语化询问: 这个月进了什么货\n系统返回: {响应内容}\n\n判断: 系统是否理解了本月入库查询的意图?返回JSON: {\"correct\": true/false, \"reason\": \"原因\"}"
        }
      },
      "expectedResponse": {
        "status": "COMPLETED",
        "messagePattern": "本月|1月.*2.*批次"
      }
    },
    {
      "id": "TC-P0-MATERIAL-015",
      "priority": "P0",
      "category": "MATERIAL",
      "intentCode": "MATERIAL_BATCH_QUERY",
      "testType": "QUERY",
      "description": "按日期范围筛选-指定日期段",
      "userInput": "查询2026-01-10到2026-01-15之间入库的原料",
      "expectedIntent": {
        "intentCode": "MATERIAL_BATCH_QUERY",
        "confidence": 1,
        "matchMethod": "FUSION",
        "questionType": "INFORMATION_QUERY"
      },
      "testDataSetup": {
        "sql": "INSERT INTO raw_material_types (id, created_at, updated_at, code, created_by, factory_id, is_active, name, unit, category) VALUES ('MT_DATE_003', NOW(), NOW(), 'MT_CODE_015', 1, 'F001', 1, '测试材料6', 'kg', '其他'); INSERT INTO material_batches (id, created_at, updated_at, batch_number, created_by, factory_id, material_type_id, quantity_unit, inbound_date, receipt_quantity, reserved_quantity, status, used_quantity) VALUES ('MB_TEST_034', NOW(), NOW(), 'BATCH-20260116-034', 1, 'F001', 'MT_DATE_003', 'kg', '2026-01-11 00:00:00', 500.00, 0.00, 'AVAILABLE', 0.00);",
        "factoryId": "F001",
        "cleanup": "DELETE FROM material_batches WHERE id IN ('MB_TEST_034', 'MB_TEST_035', 'MB_TEST_036'); DELETE FROM raw_material_types WHERE id = 'MT_DATE_003';"
      },
      "validation": {
        "responseAssertion": {
          "status": "COMPLETED",
          "intentRecognized": true,
          "dataNotNull": true
        },
        "dataVerification": {
          "method": "DATE_RANGE_FILTER",
          "expectedFields": [
            "inboundDate"
          ],
          "filterCondition": "inbound_date BETWEEN '2026-01-10' AND '2026-01-15'",
          "expectedCount": 2
        },
        "semanticCheck": {
          "enabled": true,
          "llmPrompt": "用户问题: 查询2026-01-10到2026-01-15之间入库的原料\n系统返回: {响应内容}\n\n判断: 系统是否正确筛选了指定日期范围内的批次?返回JSON: {\"correct\": true/false, \"reason\": \"原因\"}"
        }
      },
      "expectedResponse": {
        "status": "COMPLETED",
        "messagePattern": "2026-01-1[01234].*2.*批次"
      }
    },
    {
      "id": "TC-P0-MATERIAL-016",
      "priority": "P0",
      "category": "MATERIAL",
      "intentCode": "MATERIAL_BATCH_QUERY",
      "testType": "QUERY",
      "description": "FIFO查询-最早入库批次",
      "userInput": "查询最早入库的可用批次",
      "expectedIntent": {
        "intentCode": "MATERIAL_BATCH_QUERY",
        "confidence": 1,
        "matchMethod": "FUSION",
        "questionType": "INFORMATION_QUERY"
      },
      "testDataSetup": {
        "sql": "INSERT INTO raw_material_types (id, created_at, updated_at, code, created_by, factory_id, is_active, name, unit, category) VALUES ('MT_FIFO_001', NOW(), NOW(), 'MT_CODE_016', 1, 'F001', 1, '测试FIFO', 'kg', '其他'); INSERT INTO material_batches (id, created_at, updated_at, batch_number, created_by, factory_id, material_type_id, quantity_unit, inbound_date, receipt_quantity, reserved_quantity, status, used_quantity) VALUES ('MB_TEST_037', NOW(), NOW(), 'BATCH-20260116-037', 1, 'F001', 'MT_FIFO_001', 'kg', '2026-01-05 00:00:00', 500.00, 0.00, 'AVAILABLE', 0.00);",
        "factoryId": "F001",
        "cleanup": "DELETE FROM material_batches WHERE id IN ('MB_TEST_037', 'MB_TEST_038', 'MB_TEST_039'); DELETE FROM raw_material_types WHERE id = 'MT_FIFO_001';"
      },
      "validation": {
        "responseAssertion": {
          "status": "COMPLETED",
          "intentRecognized": true,
          "dataNotNull": true
        },
        "dataVerification": {
          "method": "ORDER_VERIFICATION",
          "expectedFields": [
            "inboundDate",
            "batchNumber"
          ],
          "expectedOrder": "ASC",
          "expectedFirstBatchNumber": "BATCH-20260116-037"
        },
        "semanticCheck": {
          "enabled": true,
          "llmPrompt": "用户问题: 查询最早入库的可用批次\n系统返回: {响应内容}\n\n判断: 系统是否按入库日期升序返回批次,并且第一个是最早的?返回JSON: {\"correct\": true/false, \"reason\": \"原因\"}"
        }
      },
      "expectedResponse": {
        "status": "COMPLETED",
        "messagePattern": "最早.*2026-01-05"
      }
    },
    {
      "id": "TC-P0-MATERIAL-017",
      "priority": "P0",
      "category": "MATERIAL",
      "intentCode": "MATERIAL_BATCH_QUERY",
      "testType": "QUERY",
      "description": "FIFO查询-先进先出优先使用(口语化)",
      "userInput": "应该先用哪批料",
      "expectedIntent": {
        "intentCode": "MATERIAL_BATCH_QUERY",
        "confidence": 0.8,
        "matchMethod": "COLLOQUIAL",
        "questionType": "INFORMATION_QUERY"
      },
      "testDataSetup": {
        "sql": "INSERT INTO raw_material_types (id, created_at, updated_at, code, created_by, factory_id, is_active, name, unit, category) VALUES ('MT_FIFO_002', NOW(), NOW(), 'MT_CODE_017', 1, 'F001', 1, '测试FIFO2', 'kg', '其他'); INSERT INTO material_batches (id, created_at, updated_at, batch_number, created_by, factory_id, material_type_id, quantity_unit, inbound_date, receipt_quantity, reserved_quantity, status, used_quantity) VALUES ('MB_TEST_040', NOW(), NOW(), 'BATCH-20260116-040', 1, 'F001', 'MT_FIFO_002', 'kg', '2026-01-08 00:00:00', 300.00, 0.00, 'AVAILABLE', 0.00);",
        "factoryId": "F001",
        "cleanup": "DELETE FROM material_batches WHERE id IN ('MB_TEST_040', 'MB_TEST_041'); DELETE FROM raw_material_types WHERE id = 'MT_FIFO_002';"
      },
      "validation": {
        "responseAssertion": {
          "status": "COMPLETED",
          "intentRecognized": true,
          "dataNotNull": true
        },
        "dataVerification": {
          "method": "ORDER_VERIFICATION",
          "expectedOrder": "ASC",
          "expectedFirstBatchNumber": "BATCH-20260116-040"
        },
        "semanticCheck": {
          "enabled": true,
          "llmPrompt": "用户口语化询问: 应该先用哪批料\n系统返回: {响应内容}\n\n判断: 系统是否理解了FIFO原则并推荐最早入库的批次?返回JSON: {\"correct\": true/false, \"reason\": \"原因\"}"
        }
      },
      "expectedResponse": {
        "status": "COMPLETED",
        "messagePattern": "先用.*BATCH-20260116-040|最早.*2026-01-08"
      }
    },
    {
      "id": "TC-P0-MATERIAL-018",
      "priority": "P0",
      "category": "MATERIAL",
      "intentCode": "MATERIAL_BATCH_QUERY",
      "testType": "QUERY",
      "description": "即将过期查询-7天内过期",
      "userInput": "查询7天内即将过期的原料批次",
      "expectedIntent": {
        "intentCode": "MATERIAL_BATCH_QUERY",
        "confidence": 1,
        "matchMethod": "FUSION",
        "questionType": "INFORMATION_QUERY"
      },
      "testDataSetup": {
        "sql": "INSERT INTO raw_material_types (id, created_at, updated_at, code, created_by, factory_id, is_active, name, unit, category) VALUES ('MT_EXPIRE_001', NOW(), NOW(), 'MT_CODE_018', 1, 'F001', 1, '易过期材料', 'kg', '其他'); INSERT INTO material_batches (id, created_at, updated_at, batch_number, created_by, factory_id, material_type_id, quantity_unit, inbound_date, receipt_quantity, reserved_quantity, status, used_quantity, expire_date) VALUES ('MB_TEST_042', NOW(), NOW(), 'BATCH-20260116-042', 1, 'F001', 'MT_EXPIRE_001', 'kg', '2026-01-10 00:00:00', 400.00, 0.00, 'AVAILABLE', 0.00, DATE_ADD(CURDATE();",
        "factoryId": "F001",
        "cleanup": "DELETE FROM material_batches WHERE id IN ('MB_TEST_042', 'MB_TEST_043', 'MB_TEST_044'); DELETE FROM raw_material_types WHERE id = 'MT_EXPIRE_001';"
      },
      "validation": {
        "responseAssertion": {
          "status": "COMPLETED",
          "intentRecognized": true,
          "dataNotNull": true
        },
        "dataVerification": {
          "method": "DATE_RANGE_FILTER",
          "expectedFields": [
            "expireDate"
          ],
          "filterCondition": "expire_date <= DATE_ADD(CURDATE(), INTERVAL 7 DAY) AND expire_date >= CURDATE()",
          "expectedCount": 2
        },
        "semanticCheck": {
          "enabled": true,
          "llmPrompt": "用户问题: 查询7天内即将过期的原料批次\n系统返回: {响应内容}\n\n判断: 系统是否正确筛选出了7天内过期的批次?返回JSON: {\"correct\": true/false, \"reason\": \"原因\"}"
        }
      },
      "expectedResponse": {
        "status": "COMPLETED",
        "messagePattern": "即将过期.*2.*批次"
      }
    },
    {
      "id": "TC-P0-MATERIAL-019",
      "priority": "P0",
      "category": "MATERIAL",
      "intentCode": "MATERIAL_BATCH_QUERY",
      "testType": "QUERY",
      "description": "即将过期查询-快过期的料(口语化)",
      "userInput": "哪些料快过期了",
      "expectedIntent": {
        "intentCode": "MATERIAL_BATCH_QUERY",
        "confidence": 0.85,
        "matchMethod": "COLLOQUIAL",
        "questionType": "INFORMATION_QUERY"
      },
      "testDataSetup": {
        "sql": "INSERT INTO raw_material_types (id, created_at, updated_at, code, created_by, factory_id, is_active, name, unit, category) VALUES ('MT_EXPIRE_002', NOW(), NOW(), 'MT_CODE_019', 1, 'F001', 1, '易过期材料2', 'kg', '其他'); INSERT INTO material_batches (id, created_at, updated_at, batch_number, created_by, factory_id, material_type_id, quantity_unit, inbound_date, receipt_quantity, reserved_quantity, status, used_quantity, expire_date) VALUES ('MB_TEST_045', NOW(), NOW(), 'BATCH-20260116-045', 1, 'F001', 'MT_EXPIRE_002', 'kg', '2026-01-05 00:00:00', 250.00, 0.00, 'AVAILABLE', 0.00, DATE_ADD(CURDATE();",
        "factoryId": "F001",
        "cleanup": "DELETE FROM material_batches WHERE id IN ('MB_TEST_045', 'MB_TEST_046'); DELETE FROM raw_material_types WHERE id = 'MT_EXPIRE_002';"
      },
      "validation": {
        "responseAssertion": {
          "status": "COMPLETED",
          "intentRecognized": true,
          "dataNotNull": true
        },
        "dataVerification": {
          "method": "DATE_RANGE_FILTER",
          "filterCondition": "expire_date <= DATE_ADD(CURDATE(), INTERVAL 7 DAY)",
          "expectedCount": 2
        },
        "semanticCheck": {
          "enabled": true,
          "llmPrompt": "用户口语化询问: 哪些料快过期了\n系统返回: {响应内容}\n\n判断: 系统是否理解了过期预警的意图并返回了即将过期的批次?返回JSON: {\"correct\": true/false, \"reason\": \"原因\"}"
        }
      },
      "expectedResponse": {
        "status": "COMPLETED",
        "messagePattern": "过期.*2.*批次"
      }
    },
    {
      "id": "TC-P0-MATERIAL-020",
      "priority": "P0",
      "category": "MATERIAL",
      "intentCode": "MATERIAL_BATCH_QUERY",
      "testType": "QUERY",
      "description": "低库存预警-库存低于100kg",
      "userInput": "查询库存低于100公斤的原料批次",
      "expectedIntent": {
        "intentCode": "MATERIAL_BATCH_QUERY",
        "confidence": 1,
        "matchMethod": "FUSION",
        "questionType": "INFORMATION_QUERY"
      },
      "testDataSetup": {
        "sql": "INSERT INTO raw_material_types (id, created_at, updated_at, code, created_by, factory_id, is_active, name, unit, category) VALUES ('MT_LOW_003', NOW(), NOW(), 'MT_CODE_020', 1, 'F001', 1, '低库存材料', 'kg', '其他'); INSERT INTO material_batches (id, created_at, updated_at, batch_number, created_by, factory_id, material_type_id, quantity_unit, inbound_date, receipt_quantity, reserved_quantity, status, used_quantity) VALUES ('MB_TEST_047', NOW(), NOW(), 'BATCH-20260116-047', 1, 'F001', 'MT_LOW_003', 'kg', '2026-01-16 00:00:00', 150.00, 0.00, 'AVAILABLE', 80.00);",
        "factoryId": "F001",
        "cleanup": "DELETE FROM material_batches WHERE id IN ('MB_TEST_047', 'MB_TEST_048', 'MB_TEST_049'); DELETE FROM raw_material_types WHERE id = 'MT_LOW_003';"
      },
      "validation": {
        "responseAssertion": {
          "status": "COMPLETED",
          "intentRecognized": true,
          "dataNotNull": true
        },
        "dataVerification": {
          "method": "CONDITIONAL_FILTER",
          "expectedFields": [
            "currentQuantity"
          ],
          "filterCondition": "currentQuantity < 100",
          "expectedCount": 2
        },
        "semanticCheck": {
          "enabled": true,
          "llmPrompt": "用户问题: 查询库存低于100公斤的原料批次\n系统返回: {响应内容}\n\n判断: 系统是否正确筛选出了可用库存低于100kg的批次?返回JSON: {\"correct\": true/false, \"reason\": \"原因\"}"
        }
      },
      "expectedResponse": {
        "status": "COMPLETED",
        "messagePattern": "低于100.*2.*批次"
      }
    },
    {
      "id": "TC-P0-MATERIAL-021",
      "priority": "P0",
      "category": "MATERIAL",
      "intentCode": "MATERIAL_BATCH_QUERY",
      "testType": "QUERY",
      "description": "低库存预警-库存低于200kg",
      "userInput": "查询库存不足200公斤的批次",
      "expectedIntent": {
        "intentCode": "MATERIAL_BATCH_QUERY",
        "confidence": 1,
        "matchMethod": "FUSION",
        "questionType": "INFORMATION_QUERY"
      },
      "testDataSetup": {
        "sql": "INSERT INTO raw_material_types (id, created_at, updated_at, code, created_by, factory_id, is_active, name, unit, category) VALUES ('MT_LOW_004', NOW(), NOW(), 'MT_CODE_021', 1, 'F001', 1, '低库存材料2', 'kg', '其他'); INSERT INTO material_batches (id, created_at, updated_at, batch_number, created_by, factory_id, material_type_id, quantity_unit, inbound_date, receipt_quantity, reserved_quantity, status, used_quantity) VALUES ('MB_TEST_050', NOW(), NOW(), 'BATCH-20260116-050', 1, 'F001', 'MT_LOW_004', 'kg', '2026-01-16 00:00:00', 300.00, 0.00, 'AVAILABLE', 150.00);",
        "factoryId": "F001",
        "cleanup": "DELETE FROM material_batches WHERE id IN ('MB_TEST_050', 'MB_TEST_051', 'MB_TEST_052'); DELETE FROM raw_material_types WHERE id = 'MT_LOW_004';"
      },
      "validation": {
        "responseAssertion": {
          "status": "COMPLETED",
          "intentRecognized": true,
          "dataNotNull": true
        },
        "dataVerification": {
          "method": "CONDITIONAL_FILTER",
          "filterCondition": "currentQuantity < 200",
          "expectedCount": 2
        },
        "semanticCheck": {
          "enabled": true,
          "llmPrompt": "用户问题: 查询库存不足200公斤的批次\n系统返回: {响应内容}\n\n判断: 系统是否正确筛选出了可用库存低于200kg的批次?返回JSON: {\"correct\": true/false, \"reason\": \"原因\"}"
        }
      },
      "expectedResponse": {
        "status": "COMPLETED",
        "messagePattern": "不足200|低于200.*2"
      }
    },
    {
      "id": "TC-P0-MATERIAL-022",
      "priority": "P0",
      "category": "MATERIAL",
      "intentCode": "MATERIAL_BATCH_QUERY",
      "testType": "QUERY",
      "description": "低库存预警-快没料了(口语化)",
      "userInput": "哪些料快没了",
      "expectedIntent": {
        "intentCode": "MATERIAL_BATCH_QUERY",
        "confidence": 0.8,
        "matchMethod": "COLLOQUIAL",
        "questionType": "INFORMATION_QUERY"
      },
      "testDataSetup": {
        "sql": "INSERT INTO raw_material_types (id, created_at, updated_at, code, created_by, factory_id, is_active, name, unit, category) VALUES ('MT_LOW_005', NOW(), NOW(), 'MT_CODE_022', 1, 'F001', 1, '低库存材料3', 'kg', '其他'); INSERT INTO material_batches (id, created_at, updated_at, batch_number, created_by, factory_id, material_type_id, quantity_unit, inbound_date, receipt_quantity, reserved_quantity, status, used_quantity) VALUES ('MB_TEST_053', NOW(), NOW(), 'BATCH-20260116-053', 1, 'F001', 'MT_LOW_005', 'kg', '2026-01-16 00:00:00', 100.00, 0.00, 'AVAILABLE', 90.00);",
        "factoryId": "F001",
        "cleanup": "DELETE FROM material_batches WHERE id IN ('MB_TEST_053', 'MB_TEST_054'); DELETE FROM raw_material_types WHERE id = 'MT_LOW_005';"
      },
      "validation": {
        "responseAssertion": {
          "status": "COMPLETED",
          "intentRecognized": true,
          "dataNotNull": true
        },
        "dataVerification": {
          "method": "CONDITIONAL_FILTER",
          "filterCondition": "currentQuantity < 50",
          "expectedCount": 2
        },
        "semanticCheck": {
          "enabled": true,
          "llmPrompt": "用户口语化询问: 哪些料快没了\n系统返回: {响应内容}\n\n判断: 系统是否理解了低库存预警的意图?返回JSON: {\"correct\": true/false, \"reason\": \"原因\"}"
        }
      },
      "expectedResponse": {
        "status": "COMPLETED",
        "messagePattern": "快没|库存低|预警.*2"
      }
    },
    {
      "id": "TC-P0-MATERIAL-023",
      "priority": "P0",
      "category": "MATERIAL",
      "intentCode": "MATERIAL_BATCH_USE",
      "testType": "OPERATION",
      "description": "正常使用扣减-单批次使用",
      "userInput": "使用批次BATCH-20260116-055的虾仁200公斤",
      "expectedIntent": {
        "intentCode": "MATERIAL_BATCH_USE",
        "confidence": 1,
        "matchMethod": "FUSION",
        "questionType": "OPERATIONAL_COMMAND"
      },
      "testDataSetup": {
        "sql": "INSERT INTO raw_material_types (id, created_at, updated_at, code, created_by, factory_id, is_active, name, unit, category) VALUES ('MT_USE_001', NOW(), NOW(), 'MT_CODE_023', 1, 'F001', 1, '虾仁', 'kg', '海鲜类'); INSERT INTO material_batches (id, created_at, updated_at, batch_number, created_by, factory_id, material_type_id, quantity_unit, inbound_date, receipt_quantity, reserved_quantity, status, used_quantity) VALUES ('MB_TEST_055', NOW(), NOW(), 'BATCH-20260116-055', 1, 'F001', 'MT_USE_001', 'kg', '2026-01-16 00:00:00', 600.00, 0.00, 'AVAILABLE', 0.00);",
        "factoryId": "F001",
        "cleanup": "DELETE FROM material_batches WHERE id = 'MB_TEST_055'; DELETE FROM raw_material_types WHERE id = 'MT_USE_001';"
      },
      "validation": {
        "responseAssertion": {
          "status": "COMPLETED",
          "intentRecognized": true,
          "operationSuccess": true,
          "intentCode": "MATERIAL_BATCH_USE"
        },
        "operationVerification": {
          "type": "QUANTITY_DECREASE",
          "checkSql": "SELECT used_quantity FROM material_batches WHERE id = 'MB_TEST_055'",
          "expectedChange": 200,
          "expectedNewValue": 200
        },
        "semanticCheck": {
          "enabled": true,
          "llmPrompt": "用户请求: 使用批次BATCH-20260116-055的虾仁200公斤\n系统返回: {响应内容}\n\n判断: 系统是否成功执行了库存扣减?返回JSON: {\"correct\": true/false, \"reason\": \"原因\"}"
        }
      },
      "expectedResponse": {
        "status": "COMPLETED",
        "messagePattern": "使用成功|扣减成功"
      }
    },
    {
      "id": "TC-P0-MATERIAL-024",
      "priority": "P0",
      "category": "MATERIAL",
      "intentCode": "MATERIAL_BATCH_USE",
      "testType": "OPERATION",
      "description": "正常使用扣减-部分使用",
      "userInput": "用掉批次BATCH-20260116-056的鱿鱼150公斤",
      "expectedIntent": {
        "intentCode": "MATERIAL_BATCH_USE",
        "confidence": 1,
        "matchMethod": "FUSION",
        "questionType": "OPERATIONAL_COMMAND"
      },
      "testDataSetup": {
        "sql": "INSERT INTO raw_material_types (id, created_at, updated_at, code, created_by, factory_id, is_active, name, unit, category) VALUES ('MT_USE_002', NOW(), NOW(), 'MT_CODE_024', 1, 'F001', 1, '鱿鱼', 'kg', '海鲜类'); INSERT INTO material_batches (id, created_at, updated_at, batch_number, created_by, factory_id, material_type_id, quantity_unit, inbound_date, receipt_quantity, reserved_quantity, status, used_quantity) VALUES ('MB_TEST_056', NOW(), NOW(), 'BATCH-20260116-056', 1, 'F001', 'MT_USE_002', 'kg', '2026-01-16 00:00:00', 500.00, 0.00, 'AVAILABLE', 100.00);",
        "factoryId": "F001",
        "cleanup": "DELETE FROM material_batches WHERE id = 'MB_TEST_056'; DELETE FROM raw_material_types WHERE id = 'MT_USE_002';"
      },
      "validation": {
        "responseAssertion": {
          "status": "COMPLETED",
          "intentRecognized": true,
          "operationSuccess": true
        },
        "operationVerification": {
          "type": "QUANTITY_DECREASE",
          "checkSql": "SELECT used_quantity FROM material_batches WHERE id = 'MB_TEST_056'",
          "expectedChange": 150,
          "expectedNewValue": 250
        },
        "semanticCheck": {
          "enabled": true,
          "llmPrompt": "用户请求: 用掉批次BATCH-20260116-056的鱿鱼150公斤\n系统返回: {响应内容}\n\n判断: 系统是否成功累加了已用数量(从100到250)?返回JSON: {\"correct\": true/false, \"reason\": \"原因\"}"
        }
      },
      "expectedResponse": {
        "status": "COMPLETED",
        "messagePattern": "使用成功|扣减成功"
      }
    },
    {
      "id": "TC-P0-MATERIAL-025",
      "priority": "P0",
      "category": "MATERIAL",
      "intentCode": "MATERIAL_BATCH_USE",
      "testType": "OPERATION",
      "description": "正常使用扣减-口语化表达",
      "userInput": "从这批里拿50公斤",
      "expectedIntent": {
        "intentCode": "MATERIAL_BATCH_USE",
        "confidence": 0.75,
        "matchMethod": "COLLOQUIAL",
        "questionType": "OPERATIONAL_COMMAND"
      },
      "testDataSetup": {
        "sql": "INSERT INTO raw_material_types (id, created_at, updated_at, code, created_by, factory_id, is_active, name, unit, category) VALUES ('MT_USE_003', NOW(), NOW(), 'MT_CODE_025', 1, 'F001', 1, '测试材料', 'kg', '其他'); INSERT INTO material_batches (id, created_at, updated_at, batch_number, created_by, factory_id, material_type_id, quantity_unit, inbound_date, receipt_quantity, reserved_quantity, status, used_quantity) VALUES ('MB_TEST_057', NOW(), NOW(), 'BATCH-20260116-057', 1, 'F001', 'MT_USE_003', 'kg', '2026-01-16 00:00:00', 300.00, 0.00, 'AVAILABLE', 0.00);",
        "factoryId": "F001",
        "cleanup": "DELETE FROM material_batches WHERE id = 'MB_TEST_057'; DELETE FROM raw_material_types WHERE id = 'MT_USE_003';"
      },
      "validation": {
        "responseAssertion": {
          "status": "COMPLETED",
          "intentRecognized": true,
          "operationSuccess": true
        },
        "operationVerification": {
          "type": "QUANTITY_DECREASE",
          "checkSql": "SELECT used_quantity FROM material_batches WHERE id = 'MB_TEST_057'",
          "expectedNewValue": 50
        },
        "semanticCheck": {
          "enabled": true,
          "llmPrompt": "用户口语化请求: 从这批里拿50公斤\n系统返回: {响应内容}\n\n判断: 系统是否理解了使用原料的意图?返回JSON: {\"correct\": true/false, \"reason\": \"原因\"}"
        }
      },
      "expectedResponse": {
        "status": "COMPLETED",
        "messagePattern": "使用成功|扣减成功"
      }
    },
    {
      "id": "TC-P0-MATERIAL-026",
      "priority": "P0",
      "category": "MATERIAL",
      "intentCode": "MATERIAL_BATCH_USE",
      "testType": "OPERATION",
      "description": "超量使用拒绝-超出可用库存",
      "userInput": "使用批次BATCH-20260116-058的带鱼600公斤",
      "expectedIntent": {
        "intentCode": "MATERIAL_BATCH_USE",
        "confidence": 1,
        "matchMethod": "FUSION",
        "questionType": "OPERATIONAL_COMMAND"
      },
      "testDataSetup": {
        "sql": "INSERT INTO raw_material_types (id, created_at, updated_at, code, created_by, factory_id, is_active, name, unit, category) VALUES ('MT_USE_004', NOW(), NOW(), 'MT_CODE_026', 1, 'F001', 1, '带鱼', 'kg', '鱼类'); INSERT INTO material_batches (id, created_at, updated_at, batch_number, created_by, factory_id, material_type_id, quantity_unit, inbound_date, receipt_quantity, reserved_quantity, status, used_quantity) VALUES ('MB_TEST_058', NOW(), NOW(), 'BATCH-20260116-058', 1, 'F001', 'MT_USE_004', 'kg', '2026-01-16 00:00:00', 500.00, 0.00, 'AVAILABLE', 0.00);",
        "factoryId": "F001",
        "cleanup": "DELETE FROM material_batches WHERE id = 'MB_TEST_058'; DELETE FROM raw_material_types WHERE id = 'MT_USE_004';"
      },
      "validation": {
        "responseAssertion": {
          "status": "ERROR",
          "intentRecognized": true,
          "operationSuccess": false
        },
        "operationVerification": {
          "type": "NO_CHANGE",
          "checkSql": "SELECT used_quantity FROM material_batches WHERE id = 'MB_TEST_058'",
          "expectedNewValue": 0
        },
        "semanticCheck": {
          "enabled": true,
          "llmPrompt": "用户请求: 使用批次BATCH-20260116-058的带鱼600公斤(库存只有500公斤)\n系统返回: {响应内容}\n\n判断: 系统是否正确拒绝了超量使用并给出错误提示?返回JSON: {\"correct\": true/false, \"reason\": \"原因\"}"
        }
      },
      "expectedResponse": {
        "status": "ERROR",
        "messagePattern": "库存不足|超出可用数量|不足"
      }
    },
    {
      "id": "TC-P0-MATERIAL-027",
      "priority": "P0",
      "category": "MATERIAL",
      "intentCode": "MATERIAL_BATCH_USE",
      "testType": "OPERATION",
      "description": "超量使用拒绝-考虑预留量",
      "userInput": "使用批次BATCH-20260116-059的虾仁350公斤",
      "expectedIntent": {
        "intentCode": "MATERIAL_BATCH_USE",
        "confidence": 1,
        "matchMethod": "FUSION",
        "questionType": "OPERATIONAL_COMMAND"
      },
      "testDataSetup": {
        "sql": "INSERT INTO raw_material_types (id, created_at, updated_at, code, created_by, factory_id, is_active, name, unit, category) VALUES ('MT_USE_005', NOW(), NOW(), 'MT_CODE_027', 1, 'F001', 1, '虾仁', 'kg', '海鲜类'); INSERT INTO material_batches (id, created_at, updated_at, batch_number, created_by, factory_id, material_type_id, quantity_unit, inbound_date, receipt_quantity, reserved_quantity, status, used_quantity) VALUES ('MB_TEST_059', NOW(), NOW(), 'BATCH-20260116-059', 1, 'F001', 'MT_USE_005', 'kg', '2026-01-16 00:00:00', 500.00, 150.00, 'AVAILABLE', 50.00);",
        "factoryId": "F001",
        "cleanup": "DELETE FROM material_batches WHERE id = 'MB_TEST_059'; DELETE FROM raw_material_types WHERE id = 'MT_USE_005';"
      },
      "validation": {
        "responseAssertion": {
          "status": "ERROR",
          "intentRecognized": true,
          "operationSuccess": false
        },
        "operationVerification": {
          "type": "NO_CHANGE",
          "checkSql": "SELECT used_quantity FROM material_batches WHERE id = 'MB_TEST_059'",
          "expectedNewValue": 50
        },
        "semanticCheck": {
          "enabled": true,
          "llmPrompt": "用户请求: 使用批次BATCH-20260116-059的虾仁350公斤(总量500,已用50,预留150,可用仅300)\n系统返回: {响应内容}\n\n判断: 系统是否正确考虑了预留量并拒绝了操作?返回JSON: {\"correct\": true/false, \"reason\": \"原因\"}"
        }
      },
      "expectedResponse": {
        "status": "ERROR",
        "messagePattern": "库存不足|可用.*300|预留"
      }
    },
    {
      "id": "TC-P0-MATERIAL-028",
      "priority": "P0",
      "category": "MATERIAL",
      "intentCode": "MATERIAL_BATCH_USE",
      "testType": "OPERATION",
      "description": "批次全部使用-恰好用完",
      "userInput": "使用批次BATCH-20260116-060的扇贝300公斤",
      "expectedIntent": {
        "intentCode": "MATERIAL_BATCH_USE",
        "confidence": 1,
        "matchMethod": "FUSION",
        "questionType": "OPERATIONAL_COMMAND"
      },
      "testDataSetup": {
        "sql": "INSERT INTO raw_material_types (id, created_at, updated_at, code, created_by, factory_id, is_active, name, unit, category) VALUES ('MT_USE_006', NOW(), NOW(), 'MT_CODE_028', 1, 'F001', 1, '扇贝', 'kg', '贝类'); INSERT INTO material_batches (id, created_at, updated_at, batch_number, created_by, factory_id, material_type_id, quantity_unit, inbound_date, receipt_quantity, reserved_quantity, status, used_quantity) VALUES ('MB_TEST_060', NOW(), NOW(), 'BATCH-20260116-060', 1, 'F001', 'MT_USE_006', 'kg', '2026-01-16 00:00:00', 300.00, 0.00, 'AVAILABLE', 0.00);",
        "factoryId": "F001",
        "cleanup": "DELETE FROM material_batches WHERE id = 'MB_TEST_060'; DELETE FROM raw_material_types WHERE id = 'MT_USE_006';"
      },
      "validation": {
        "responseAssertion": {
          "status": "COMPLETED",
          "intentRecognized": true,
          "operationSuccess": true
        },
        "operationVerification": {
          "type": "STATUS_CHANGED",
          "checkSql": "SELECT used_quantity, status FROM material_batches WHERE id = 'MB_TEST_060'",
          "expectedNewValue": 300,
          "expectedStatus": "DEPLETED"
        },
        "semanticCheck": {
          "enabled": true,
          "llmPrompt": "用户请求: 使用批次BATCH-20260116-060的扇贝300公斤(恰好全部用完)\n系统返回: {响应内容}\n\n判断: 系统是否成功扣减并将状态更新为DEPLETED?返回JSON: {\"correct\": true/false, \"reason\": \"原因\"}"
        }
      },
      "expectedResponse": {
        "status": "COMPLETED",
        "messagePattern": "使用成功|已用完|DEPLETED"
      }
    },
    {
      "id": "TC-P0-MATERIAL-029",
      "priority": "P0",
      "category": "MATERIAL",
      "intentCode": "MATERIAL_BATCH_USE",
      "testType": "OPERATION",
      "description": "批次全部使用-口语化表达",
      "userInput": "这批全部用掉",
      "expectedIntent": {
        "intentCode": "MATERIAL_BATCH_USE",
        "confidence": 0.7,
        "matchMethod": "COLLOQUIAL",
        "questionType": "OPERATIONAL_COMMAND"
      },
      "testDataSetup": {
        "sql": "INSERT INTO raw_material_types (id, created_at, updated_at, code, created_by, factory_id, is_active, name, unit, category) VALUES ('MT_USE_007', NOW(), NOW(), 'MT_CODE_029', 1, 'F001', 1, '测试材料', 'kg', '其他'); INSERT INTO material_batches (id, created_at, updated_at, batch_number, created_by, factory_id, material_type_id, quantity_unit, inbound_date, receipt_quantity, reserved_quantity, status, used_quantity) VALUES ('MB_TEST_061', NOW(), NOW(), 'BATCH-20260116-061', 1, 'F001', 'MT_USE_007', 'kg', '2026-01-16 00:00:00', 250.00, 0.00, 'AVAILABLE', 50.00);",
        "factoryId": "F001",
        "cleanup": "DELETE FROM material_batches WHERE id = 'MB_TEST_061'; DELETE FROM raw_material_types WHERE id = 'MT_USE_007';"
      },
      "validation": {
        "responseAssertion": {
          "status": "COMPLETED",
          "intentRecognized": true,
          "operationSuccess": true
        },
        "operationVerification": {
          "type": "STATUS_CHANGED",
          "checkSql": "SELECT used_quantity, status FROM material_batches WHERE id = 'MB_TEST_061'",
          "expectedNewValue": 250,
          "expectedStatus": "DEPLETED"
        },
        "semanticCheck": {
          "enabled": true,
          "llmPrompt": "用户口语化请求: 这批全部用掉\n系统返回: {响应内容}\n\n判断: 系统是否理解了全部使用的意图并将剩余量全部扣减?返回JSON: {\"correct\": true/false, \"reason\": \"原因\"}"
        }
      },
      "expectedResponse": {
        "status": "COMPLETED",
        "messagePattern": "全部使用成功|已用完"
      }
    },
    {
      "id": "TC-P0-MATERIAL-030",
      "priority": "P0",
      "category": "MATERIAL",
      "intentCode": "MATERIAL_BATCH_USE",
      "testType": "OPERATION",
      "description": "多批次同时使用-场景1",
      "userInput": "使用批次BATCH-20260116-062的带鱼100公斤和批次BATCH-20260116-063的虾仁150公斤",
      "expectedIntent": {
        "intentCode": "MATERIAL_BATCH_USE",
        "confidence": 0.95,
        "matchMethod": "FUSION",
        "questionType": "OPERATIONAL_COMMAND"
      },
      "testDataSetup": {
        "sql": "INSERT INTO raw_material_types (id, created_at, updated_at, code, created_by, factory_id, is_active, name, unit, category) VALUES ('MT_USE_008', NOW(), NOW(), 'MT_CODE_030', 1, 'F001', 1, '带鱼', 'kg', '鱼类'); INSERT INTO material_batches (id, created_at, updated_at, batch_number, created_by, factory_id, material_type_id, quantity_unit, inbound_date, receipt_quantity, reserved_quantity, status, used_quantity) VALUES ('MB_TEST_062', NOW(), NOW(), 'BATCH-20260116-062', 1, 'F001', 'MT_USE_008', 'kg', '2026-01-16 00:00:00', 500.00, 0.00, 'AVAILABLE', 0.00);",
        "factoryId": "F001",
        "cleanup": "DELETE FROM material_batches WHERE id IN ('MB_TEST_062', 'MB_TEST_063'); DELETE FROM raw_material_types WHERE id IN ('MT_USE_008', 'MT_USE_009');"
      },
      "validation": {
        "responseAssertion": {
          "status": "COMPLETED",
          "intentRecognized": true,
          "operationSuccess": true
        },
        "operationVerification": {
          "type": "MULTI_BATCH_UPDATE",
          "checkSql": "SELECT id, used_quantity FROM material_batches WHERE id IN ('MB_TEST_062', 'MB_TEST_063') ORDER BY id",
          "expectedValues": [
            {
              "id": "MB_TEST_062",
              "used_quantity": 100
            },
            {
              "id": "MB_TEST_063",
              "used_quantity": 150
            }
          ]
        },
        "semanticCheck": {
          "enabled": true,
          "llmPrompt": "用户请求: 使用批次BATCH-20260116-062的带鱼100公斤和批次BATCH-20260116-063的虾仁150公斤\n系统返回: {响应内容}\n\n判断: 系统是否成功处理了多批次同时使用?返回JSON: {\"correct\": true/false, \"reason\": \"原因\"}"
        }
      },
      "expectedResponse": {
        "status": "COMPLETED",
        "messagePattern": "使用成功.*2.*批次"
      }
    },
    {
      "id": "TC-P0-MATERIAL-031",
      "priority": "P0",
      "category": "MATERIAL",
      "intentCode": "MATERIAL_BATCH_USE",
      "testType": "OPERATION",
      "description": "多批次同时使用-场景2",
      "userInput": "同时从BATCH-20260116-064取200kg和BATCH-20260116-065取180kg",
      "expectedIntent": {
        "intentCode": "MATERIAL_BATCH_USE",
        "confidence": 0.9,
        "matchMethod": "FUSION",
        "questionType": "OPERATIONAL_COMMAND"
      },
      "testDataSetup": {
        "sql": "INSERT INTO raw_material_types (id, created_at, updated_at, code, created_by, factory_id, is_active, name, unit, category) VALUES ('MT_USE_010', NOW(), NOW(), 'MT_CODE_031', 1, 'F001', 1, '测试材料', 'kg', '其他'); INSERT INTO material_batches (id, created_at, updated_at, batch_number, created_by, factory_id, material_type_id, quantity_unit, inbound_date, receipt_quantity, reserved_quantity, status, used_quantity) VALUES ('MB_TEST_064', NOW(), NOW(), 'BATCH-20260116-064', 1, 'F001', 'MT_USE_010', 'kg', '2026-01-16 00:00:00', 600.00, 0.00, 'AVAILABLE', 100.00);",
        "factoryId": "F001",
        "cleanup": "DELETE FROM material_batches WHERE id IN ('MB_TEST_064', 'MB_TEST_065'); DELETE FROM raw_material_types WHERE id = 'MT_USE_010';"
      },
      "validation": {
        "responseAssertion": {
          "status": "COMPLETED",
          "intentRecognized": true,
          "operationSuccess": true
        },
        "operationVerification": {
          "type": "MULTI_BATCH_UPDATE",
          "checkSql": "SELECT id, used_quantity FROM material_batches WHERE id IN ('MB_TEST_064', 'MB_TEST_065') ORDER BY id",
          "expectedValues": [
            {
              "id": "MB_TEST_064",
              "used_quantity": 300
            },
            {
              "id": "MB_TEST_065",
              "used_quantity": 260
            }
          ]
        },
        "semanticCheck": {
          "enabled": true,
          "llmPrompt": "用户请求: 同时从BATCH-20260116-064取200kg和BATCH-20260116-065取180kg\n系统返回: {响应内容}\n\n判断: 系统是否成功更新了两个批次的已用数量?返回JSON: {\"correct\": true/false, \"reason\": \"原因\"}"
        }
      },
      "expectedResponse": {
        "status": "COMPLETED",
        "messagePattern": "使用成功.*2.*批次"
      }
    },
    {
      "id": "TC-P0-MATERIAL-032",
      "priority": "P0",
      "category": "MATERIAL",
      "intentCode": "MATERIAL_BATCH_USE",
      "testType": "OPERATION",
      "description": "多批次同时使用-口语化",
      "userInput": "这两批各拿100公斤",
      "expectedIntent": {
        "intentCode": "MATERIAL_BATCH_USE",
        "confidence": 0.7,
        "matchMethod": "COLLOQUIAL",
        "questionType": "OPERATIONAL_COMMAND"
      },
      "testDataSetup": {
        "sql": "INSERT INTO raw_material_types (id, created_at, updated_at, code, created_by, factory_id, is_active, name, unit, category) VALUES ('MT_USE_011', NOW(), NOW(), 'MT_CODE_032', 1, 'F001', 1, '测试材料', 'kg', '其他'); INSERT INTO material_batches (id, created_at, updated_at, batch_number, created_by, factory_id, material_type_id, quantity_unit, inbound_date, receipt_quantity, reserved_quantity, status, used_quantity) VALUES ('MB_TEST_066', NOW(), NOW(), 'BATCH-20260116-066', 1, 'F001', 'MT_USE_011', 'kg', '2026-01-16 00:00:00', 400.00, 0.00, 'AVAILABLE', 0.00);",
        "factoryId": "F001",
        "cleanup": "DELETE FROM material_batches WHERE id IN ('MB_TEST_066', 'MB_TEST_067'); DELETE FROM raw_material_types WHERE id = 'MT_USE_011';"
      },
      "validation": {
        "responseAssertion": {
          "status": "COMPLETED",
          "intentRecognized": true,
          "operationSuccess": true
        },
        "operationVerification": {
          "type": "MULTI_BATCH_UPDATE",
          "checkSql": "SELECT id, used_quantity FROM material_batches WHERE id IN ('MB_TEST_066', 'MB_TEST_067') ORDER BY id",
          "expectedValues": [
            {
              "id": "MB_TEST_066",
              "used_quantity": 100
            },
            {
              "id": "MB_TEST_067",
              "used_quantity": 100
            }
          ]
        },
        "semanticCheck": {
          "enabled": true,
          "llmPrompt": "用户口语化请求: 这两批各拿100公斤\n系统返回: {响应内容}\n\n判断: 系统是否理解了从两批次中各取100kg的意图?返回JSON: {\"correct\": true/false, \"reason\": \"原因\"}"
        }
      },
      "expectedResponse": {
        "status": "COMPLETED",
        "messagePattern": "使用成功.*2.*批次.*各.*100"
      }
    },
    {
      "id": "TC-P0-MATERIAL-033",
      "priority": "P0",
      "category": "MATERIAL",
      "intentCode": "MATERIAL_BATCH_RESERVE",
      "testType": "OPERATION",
      "description": "预留原料-单批次预留",
      "userInput": "预留批次BATCH-20260116-068的带鱼200公斤",
      "expectedIntent": {
        "intentCode": "MATERIAL_BATCH_RESERVE",
        "confidence": 1,
        "matchMethod": "FUSION",
        "questionType": "OPERATIONAL_COMMAND"
      },
      "testDataSetup": {
        "sql": "INSERT INTO raw_material_types (id, created_at, updated_at, code, created_by, factory_id, is_active, name, unit, category) VALUES ('MT_RESERVE_001', NOW(), NOW(), 'MT_CODE_033', 1, 'F001', 1, '带鱼', 'kg', '鱼类'); INSERT INTO material_batches (id, created_at, updated_at, batch_number, created_by, factory_id, material_type_id, quantity_unit, inbound_date, receipt_quantity, reserved_quantity, status, used_quantity) VALUES ('MB_TEST_068', NOW(), NOW(), 'BATCH-20260116-068', 1, 'F001', 'MT_RESERVE_001', 'kg', '2026-01-16 00:00:00', 600.00, 0.00, 'AVAILABLE', 0.00);",
        "factoryId": "F001",
        "cleanup": "DELETE FROM material_batches WHERE id = 'MB_TEST_068'; DELETE FROM raw_material_types WHERE id = 'MT_RESERVE_001';"
      },
      "validation": {
        "responseAssertion": {
          "status": "COMPLETED",
          "intentRecognized": true,
          "operationSuccess": true,
          "intentCode": "MATERIAL_BATCH_RESERVE"
        },
        "operationVerification": {
          "type": "FIELD_UPDATED",
          "checkSql": "SELECT reserved_quantity, status FROM material_batches WHERE id = 'MB_TEST_068'",
          "expectedNewValue": 200,
          "expectedStatus": "RESERVED"
        },
        "semanticCheck": {
          "enabled": true,
          "llmPrompt": "用户请求: 预留批次BATCH-20260116-068的带鱼200公斤\n系统返回: {响应内容}\n\n判断: 系统是否成功预留了指定数量并更新了状态?返回JSON: {\"correct\": true/false, \"reason\": \"原因\"}"
        }
      },
      "expectedResponse": {
        "status": "COMPLETED",
        "messagePattern": "预留成功|200.*公斤"
      }
    },
    {
      "id": "TC-P0-MATERIAL-034",
      "priority": "P0",
      "category": "MATERIAL",
      "intentCode": "MATERIAL_BATCH_RESERVE",
      "testType": "OPERATION",
      "description": "预留原料-累加预留",
      "userInput": "再预留批次BATCH-20260116-069的虾仁150公斤",
      "expectedIntent": {
        "intentCode": "MATERIAL_BATCH_RESERVE",
        "confidence": 1,
        "matchMethod": "FUSION",
        "questionType": "OPERATIONAL_COMMAND"
      },
      "testDataSetup": {
        "sql": "INSERT INTO raw_material_types (id, created_at, updated_at, code, created_by, factory_id, is_active, name, unit, category) VALUES ('MT_RESERVE_002', NOW(), NOW(), 'MT_CODE_034', 1, 'F001', 1, '虾仁', 'kg', '海鲜类'); INSERT INTO material_batches (id, created_at, updated_at, batch_number, created_by, factory_id, material_type_id, quantity_unit, inbound_date, receipt_quantity, reserved_quantity, status, used_quantity) VALUES ('MB_TEST_069', NOW(), NOW(), 'BATCH-20260116-069', 1, 'F001', 'MT_RESERVE_002', 'kg', '2026-01-16 00:00:00', 500.00, 100.00, 'RESERVED', 0.00);",
        "factoryId": "F001",
        "cleanup": "DELETE FROM material_batches WHERE id = 'MB_TEST_069'; DELETE FROM raw_material_types WHERE id = 'MT_RESERVE_002';"
      },
      "validation": {
        "responseAssertion": {
          "status": "COMPLETED",
          "intentRecognized": true,
          "operationSuccess": true
        },
        "operationVerification": {
          "type": "FIELD_UPDATED",
          "checkSql": "SELECT reserved_quantity FROM material_batches WHERE id = 'MB_TEST_069'",
          "expectedNewValue": 250
        },
        "semanticCheck": {
          "enabled": true,
          "llmPrompt": "用户请求: 再预留批次BATCH-20260116-069的虾仁150公斤(原已预留100)\n系统返回: {响应内容}\n\n判断: 系统是否正确累加了预留数量(从100到250)?返回JSON: {\"correct\": true/false, \"reason\": \"原因\"}"
        }
      },
      "expectedResponse": {
        "status": "COMPLETED",
        "messagePattern": "预留成功|250.*公斤"
      }
    },
    {
      "id": "TC-P0-MATERIAL-035",
      "priority": "P0",
      "category": "MATERIAL",
      "intentCode": "MATERIAL_BATCH_RESERVE",
      "testType": "OPERATION",
      "description": "预留原料-口语化表达",
      "userInput": "留出这批的180公斤别动",
      "expectedIntent": {
        "intentCode": "MATERIAL_BATCH_RESERVE",
        "confidence": 0.75,
        "matchMethod": "COLLOQUIAL",
        "questionType": "OPERATIONAL_COMMAND"
      },
      "testDataSetup": {
        "sql": "INSERT INTO raw_material_types (id, created_at, updated_at, code, created_by, factory_id, is_active, name, unit, category) VALUES ('MT_RESERVE_003', NOW(), NOW(), 'MT_CODE_035', 1, 'F001', 1, '测试材料', 'kg', '其他'); INSERT INTO material_batches (id, created_at, updated_at, batch_number, created_by, factory_id, material_type_id, quantity_unit, inbound_date, receipt_quantity, reserved_quantity, status, used_quantity) VALUES ('MB_TEST_070', NOW(), NOW(), 'BATCH-20260116-070', 1, 'F001', 'MT_RESERVE_003', 'kg', '2026-01-16 00:00:00', 400.00, 0.00, 'AVAILABLE', 0.00);",
        "factoryId": "F001",
        "cleanup": "DELETE FROM material_batches WHERE id = 'MB_TEST_070'; DELETE FROM raw_material_types WHERE id = 'MT_RESERVE_003';"
      },
      "validation": {
        "responseAssertion": {
          "status": "COMPLETED",
          "intentRecognized": true,
          "operationSuccess": true
        },
        "operationVerification": {
          "type": "FIELD_UPDATED",
          "checkSql": "SELECT reserved_quantity, status FROM material_batches WHERE id = 'MB_TEST_070'",
          "expectedNewValue": 180,
          "expectedStatus": "RESERVED"
        },
        "semanticCheck": {
          "enabled": true,
          "llmPrompt": "用户口语化请求: 留出这批的180公斤别动\n系统返回: {响应内容}\n\n判断: 系统是否理解了预留的意图?返回JSON: {\"correct\": true/false, \"reason\": \"原因\"}"
        }
      },
      "expectedResponse": {
        "status": "COMPLETED",
        "messagePattern": "预留成功|180"
      }
    },
    {
      "id": "TC-P0-MATERIAL-036",
      "priority": "P0",
      "category": "MATERIAL",
      "intentCode": "MATERIAL_ADJUST_QUANTITY",
      "testType": "OPERATION",
      "description": "调整库存-增加数量",
      "userInput": "调整批次BATCH-20260116-071的库存,增加50公斤",
      "expectedIntent": {
        "intentCode": "MATERIAL_ADJUST_QUANTITY",
        "confidence": 1,
        "matchMethod": "FUSION",
        "questionType": "OPERATIONAL_COMMAND"
      },
      "testDataSetup": {
        "sql": "INSERT INTO raw_material_types (id, created_at, updated_at, code, created_by, factory_id, is_active, name, unit, category) VALUES ('MT_ADJUST_001', NOW(), NOW(), 'MT_CODE_036', 1, 'F001', 1, '测试材料', 'kg', '其他'); INSERT INTO material_batches (id, created_at, updated_at, batch_number, created_by, factory_id, material_type_id, quantity_unit, inbound_date, receipt_quantity, reserved_quantity, status, used_quantity) VALUES ('MB_TEST_071', NOW(), NOW(), 'BATCH-20260116-071', 1, 'F001', 'MT_ADJUST_001', 'kg', '2026-01-16 00:00:00', 300.00, 0.00, 'AVAILABLE', 0.00);",
        "factoryId": "F001",
        "cleanup": "DELETE FROM material_batches WHERE id = 'MB_TEST_071'; DELETE FROM raw_material_types WHERE id = 'MT_ADJUST_001';"
      },
      "validation": {
        "responseAssertion": {
          "status": "COMPLETED",
          "intentRecognized": true,
          "operationSuccess": true,
          "intentCode": "MATERIAL_ADJUST_QUANTITY"
        },
        "operationVerification": {
          "type": "QUANTITY_INCREASE",
          "checkSql": "SELECT receipt_quantity FROM material_batches WHERE id = 'MB_TEST_071'",
          "expectedChange": 50,
          "expectedNewValue": 350
        },
        "semanticCheck": {
          "enabled": true,
          "llmPrompt": "用户请求: 调整批次BATCH-20260116-071的库存,增加50公斤\n系统返回: {响应内容}\n\n判断: 系统是否成功增加了入库数量?返回JSON: {\"correct\": true/false, \"reason\": \"原因\"}"
        }
      },
      "expectedResponse": {
        "status": "COMPLETED",
        "messagePattern": "调整成功|增加.*50|350"
      }
    },
    {
      "id": "TC-P0-MATERIAL-037",
      "priority": "P0",
      "category": "MATERIAL",
      "intentCode": "MATERIAL_ADJUST_QUANTITY",
      "testType": "OPERATION",
      "description": "调整库存-减少数量",
      "userInput": "批次BATCH-20260116-072的库存减少80公斤",
      "expectedIntent": {
        "intentCode": "MATERIAL_ADJUST_QUANTITY",
        "confidence": 1,
        "matchMethod": "FUSION",
        "questionType": "OPERATIONAL_COMMAND"
      },
      "testDataSetup": {
        "sql": "INSERT INTO raw_material_types (id, created_at, updated_at, code, created_by, factory_id, is_active, name, unit, category) VALUES ('MT_ADJUST_002', NOW(), NOW(), 'MT_CODE_037', 1, 'F001', 1, '测试材料', 'kg', '其他'); INSERT INTO material_batches (id, created_at, updated_at, batch_number, created_by, factory_id, material_type_id, quantity_unit, inbound_date, receipt_quantity, reserved_quantity, status, used_quantity) VALUES ('MB_TEST_072', NOW(), NOW(), 'BATCH-20260116-072', 1, 'F001', 'MT_ADJUST_002', 'kg', '2026-01-16 00:00:00', 500.00, 0.00, 'AVAILABLE', 100.00);",
        "factoryId": "F001",
        "cleanup": "DELETE FROM material_batches WHERE id = 'MB_TEST_072'; DELETE FROM raw_material_types WHERE id = 'MT_ADJUST_002';"
      },
      "validation": {
        "responseAssertion": {
          "status": "COMPLETED",
          "intentRecognized": true,
          "operationSuccess": true
        },
        "operationVerification": {
          "type": "QUANTITY_DECREASE",
          "checkSql": "SELECT receipt_quantity FROM material_batches WHERE id = 'MB_TEST_072'",
          "expectedChange": -80,
          "expectedNewValue": 420
        },
        "semanticCheck": {
          "enabled": true,
          "llmPrompt": "用户请求: 批次BATCH-20260116-072的库存减少80公斤\n系统返回: {响应内容}\n\n判断: 系统是否成功减少了入库数量(从500到420)?返回JSON: {\"correct\": true/false, \"reason\": \"原因\"}"
        }
      },
      "expectedResponse": {
        "status": "COMPLETED",
        "messagePattern": "调整成功|减少.*80|420"
      }
    },
    {
      "id": "TC-P0-QUALITY-003",
      "priority": "P0",
      "category": "QUALITY",
      "intentCode": "QUALITY_CHECK_EXECUTE",
      "testType": "OPERATION",
      "description": "合格品质检-高合格率",
      "userInput": "对生产批次PB-20260116-101进行质检,抽检100个,合格98个",
      "expectedIntent": {
        "intentCode": "QUALITY_CHECK_EXECUTE",
        "confidence": 1,
        "matchMethod": "FUSION",
        "questionType": "OPERATIONAL_COMMAND"
      },
      "testDataSetup": {
        "sql": "INSERT INTO production_batches (id, created_at, updated_at, batch_number, factory_id, product_type_id, quantity, status, unit, product_name) VALUES (9101, NOW(), NOW(), 'PB-20260116-101', 'F001', 'PT_Q001', 1000.00, 'IN_PROGRESS', 'kg', '冷冻带鱼段');",
        "factoryId": "F001",
        "cleanup": "DELETE FROM quality_inspections WHERE production_batch_id = 9101; DELETE FROM production_batches WHERE id = 9101;"
      },
      "validation": {
        "responseAssertion": {
          "status": "COMPLETED",
          "intentRecognized": true,
          "operationSuccess": true
        },
        "operationVerification": {
          "type": "RECORD_CREATED",
          "checkSql": "SELECT COUNT(*) as count FROM quality_inspections WHERE production_batch_id = 9101",
          "expectedCount": 1
        },
        "dataVerification": {
          "method": "FIELD_VALUES",
          "checkSql": "SELECT sample_size, pass_count, pass_rate FROM quality_inspections WHERE production_batch_id = 9101 ORDER BY created_at DESC LIMIT 1",
          "expectedValues": {
            "sample_size": 100,
            "pass_count": 98,
            "pass_rate": 98
          }
        },
        "semanticCheck": {
          "enabled": true,
          "llmPrompt": "用户请求: 对生产批次PB-20260116-101进行质检,抽检100个,合格98个\n系统返回: {响应内容}\n\n判断: 系统是否成功创建了质检记录?返回JSON: {\"correct\": true/false, \"reason\": \"原因\"}"
        }
      },
      "expectedResponse": {
        "status": "COMPLETED",
        "messagePattern": "质检完成|合格率.*98"
      }
    },
    {
      "id": "TC-P0-QUALITY-004",
      "priority": "P0",
      "category": "QUALITY",
      "intentCode": "QUALITY_CHECK_EXECUTE",
      "testType": "OPERATION",
      "description": "合格品质检-标准合格率",
      "userInput": "检测批次PB-20260116-102,样本200个,通过190个",
      "expectedIntent": {
        "intentCode": "QUALITY_CHECK_EXECUTE",
        "confidence": 1,
        "matchMethod": "FUSION",
        "questionType": "OPERATIONAL_COMMAND"
      },
      "testDataSetup": {
        "sql": "INSERT INTO production_batches (id, created_at, updated_at, batch_number, factory_id, product_type_id, quantity, status, unit, product_name) VALUES (9102, NOW(), NOW(), 'PB-20260116-102', 'F001', 'PT_Q002', 800.00, 'IN_PROGRESS', 'kg', '冷冻虾仁');",
        "factoryId": "F001",
        "cleanup": "DELETE FROM quality_inspections WHERE production_batch_id = 9102; DELETE FROM production_batches WHERE id = 9102;"
      },
      "validation": {
        "responseAssertion": {
          "status": "COMPLETED",
          "intentRecognized": true,
          "operationSuccess": true
        },
        "operationVerification": {
          "type": "RECORD_CREATED",
          "checkSql": "SELECT COUNT(*) as count FROM quality_inspections WHERE production_batch_id = 9102",
          "expectedCount": 1
        },
        "dataVerification": {
          "method": "FIELD_VALUES",
          "expectedValues": {
            "sample_size": 200,
            "pass_count": 190,
            "pass_rate": 95
          }
        },
        "semanticCheck": {
          "enabled": true,
          "llmPrompt": "用户请求: 检测批次PB-20260116-102,样本200个,通过190个\n系统返回: {响应内容}\n\n判断: 系统是否正确计算了合格率95%?返回JSON: {\"correct\": true/false, \"reason\": \"原因\"}"
        }
      },
      "expectedResponse": {
        "status": "COMPLETED",
        "messagePattern": "质检完成|合格率.*95"
      }
    }
  ],
  "chunkInfo": {
    "chunkNumber": 1,
    "startIndex": 0,
    "chunkSize": 35
  }
}
