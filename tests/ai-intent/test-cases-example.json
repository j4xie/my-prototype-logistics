{
  "testSuite": {
    "name": "AI意图识别测试用例 - 示例",
    "version": "1.0.0",
    "description": "演示如何使用测试框架的示例测试用例",
    "author": "Claude",
    "createdAt": "2026-01-16"
  },
  "testCases": [
    {
      "id": "TC-P0-MATERIAL-001",
      "name": "查询单个批次详细信息",
      "priority": "P0",
      "category": "MATERIAL",
      "input": "查询批次B20240115001的详细信息",
      "setup": {
        "description": "插入测试批次数据",
        "sql": "INSERT INTO material_batches (id, batch_number, material_type_id, quantity, unit, factory_id, created_at, updated_at) VALUES (999901, 'B20240115001', 'MT001', 100.0, 'kg', 'F001', NOW(), NOW())"
      },
      "expected": {
        "success": true,
        "intentType": "MATERIAL_BATCH_QUERY",
        "minConfidence": 0.7
      },
      "validation": {
        "dataValidation": {
          "minCount": 1,
          "requiredFields": ["batchNumber", "materialTypeId", "quantity", "unit"]
        },
        "semanticCriteria": "返回的数据应该包含批次号B20240115001的完整信息，包括物料类型、数量、单位等字段",
        "operationValidation": {
          "sql": "SELECT COUNT(*) as count FROM material_batches WHERE batch_number = 'B20240115001'"
        }
      },
      "cleanup": {
        "description": "删除测试数据",
        "sql": "DELETE FROM material_batches WHERE id = 999901"
      }
    },
    {
      "id": "TC-P0-MATERIAL-002",
      "name": "查询物料类型的所有批次",
      "priority": "P0",
      "category": "MATERIAL",
      "input": "查询物料类型MT001的所有批次",
      "setup": {
        "description": "插入多个测试批次",
        "sql": "INSERT INTO material_batches (id, batch_number, material_type_id, quantity, unit, factory_id, created_at, updated_at) VALUES (999902, 'B20240115002', 'MT001', 50.0, 'kg', 'F001', NOW(), NOW()); INSERT INTO material_batches (id, batch_number, material_type_id, quantity, unit, factory_id, created_at, updated_at) VALUES (999903, 'B20240115003', 'MT001', 75.0, 'kg', 'F001', NOW(), NOW())"
      },
      "expected": {
        "success": true,
        "intentType": "MATERIAL_BATCH_QUERY",
        "minConfidence": 0.7
      },
      "validation": {
        "dataValidation": {
          "minCount": 2,
          "requiredFields": ["batchNumber", "materialTypeId", "quantity"]
        },
        "semanticCriteria": "返回的数据应该包含物料类型MT001的所有批次，至少2个批次"
      },
      "cleanup": {
        "sql": "DELETE FROM material_batches WHERE id IN (999902, 999903)"
      }
    },
    {
      "id": "TC-P1-MATERIAL-003",
      "name": "查询即将过期的批次",
      "priority": "P1",
      "category": "MATERIAL",
      "input": "帮我找出所有即将过期的批次",
      "setup": {
        "description": "插入即将过期的批次",
        "sql": "INSERT INTO material_batches (id, batch_number, material_type_id, quantity, unit, expiry_date, factory_id, created_at, updated_at) VALUES (999904, 'B20240115004', 'MT002', 30.0, 'kg', DATE_ADD(NOW(), INTERVAL 5 DAY), 'F001', NOW(), NOW()); INSERT INTO material_batches (id, batch_number, material_type_id, quantity, unit, expiry_date, factory_id, created_at, updated_at) VALUES (999905, 'B20240115005', 'MT002', 40.0, 'kg', DATE_ADD(NOW(), INTERVAL 3 DAY), 'F001', NOW(), NOW())"
      },
      "expected": {
        "success": true,
        "intentType": "MATERIAL_EXPIRY_QUERY",
        "minConfidence": 0.6
      },
      "validation": {
        "dataValidation": {
          "minCount": 2,
          "requiredFields": ["batchNumber", "expiryDate", "daysToExpiry"]
        },
        "semanticCriteria": "返回的数据应该包含即将过期的批次列表，并显示距离过期的天数"
      },
      "cleanup": {
        "sql": "DELETE FROM material_batches WHERE id IN (999904, 999905)"
      }
    },
    {
      "id": "TC-P0-INVENTORY-001",
      "name": "查询库存不足的物料",
      "priority": "P0",
      "category": "INVENTORY",
      "input": "哪些物料库存不足了",
      "setup": {
        "description": "插入低库存批次",
        "sql": "INSERT INTO material_batches (id, batch_number, material_type_id, quantity, unit, min_stock_level, factory_id, created_at, updated_at) VALUES (999906, 'B20240115006', 'MT003', 5.0, 'kg', 10.0, 'F001', NOW(), NOW()); INSERT INTO material_batches (id, batch_number, material_type_id, quantity, unit, min_stock_level, factory_id, created_at, updated_at) VALUES (999907, 'B20240115007', 'MT004', 3.0, 'kg', 15.0, 'F001', NOW(), NOW())"
      },
      "expected": {
        "success": true,
        "intentType": "INVENTORY_LOW_STOCK_QUERY",
        "minConfidence": 0.7
      },
      "validation": {
        "dataValidation": {
          "minCount": 1,
          "requiredFields": ["materialTypeId", "currentStock", "minStockLevel"]
        },
        "semanticCriteria": "返回的数据应该包含库存低于最低库存水平的物料列表"
      },
      "cleanup": {
        "sql": "DELETE FROM material_batches WHERE id IN (999906, 999907)"
      }
    },
    {
      "id": "TC-P2-CHITCHAT-001",
      "name": "闲聊意图识别",
      "priority": "P2",
      "category": "CHITCHAT",
      "input": "你好，今天天气怎么样",
      "setup": {
        "description": "无需准备数据"
      },
      "expected": {
        "success": true,
        "intentType": "CHITCHAT",
        "minConfidence": 0.8
      },
      "validation": {
        "semanticCriteria": "系统应该识别出这是闲聊，并给出友好的回应"
      },
      "cleanup": {
        "description": "无需清理"
      }
    }
  ],
  "metadata": {
    "totalTests": 5,
    "priorityDistribution": {
      "P0": 3,
      "P1": 1,
      "P2": 1
    },
    "categoryDistribution": {
      "MATERIAL": 3,
      "INVENTORY": 1,
      "CHITCHAT": 1
    }
  }
}
