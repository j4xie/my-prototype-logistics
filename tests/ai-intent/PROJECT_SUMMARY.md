# AIæ„å›¾è¯†åˆ«æµ‹è¯•æ¡†æ¶ - é¡¹ç›®æ€»ç»“

## é¡¹ç›®æ¦‚è§ˆ

æœ¬é¡¹ç›®å®ç°äº†ä¸€ä¸ªå®Œæ•´çš„AIæ„å›¾è¯†åˆ«æµ‹è¯•æ¡†æ¶ï¼Œæ”¯æŒ4å±‚éªŒè¯ä½“ç³»ï¼Œæä¾›Bashå’ŒJavaä¸¤ç§æµ‹è¯•æ–¹å¼ã€‚

**åˆ›å»ºæ—¥æœŸ:** 2026-01-16
**ç‰ˆæœ¬:** 1.0.0
**ä½œè€…:** Claude

---

## å·²åˆ›å»ºæ–‡ä»¶æ¸…å•

### Bashæµ‹è¯•æ¡†æ¶ (7ä¸ªæ–‡ä»¶)

#### 1. æ ¸å¿ƒè„šæœ¬

| æ–‡ä»¶ | è·¯å¾„ | è¯´æ˜ | æƒé™ |
|------|------|------|------|
| `test_runner.sh` | `/Users/jietaoxie/my-prototype-logistics/tests/ai-intent/` | ä¸»æµ‹è¯•æ‰§è¡Œå™¨ | âœ… å¯æ‰§è¡Œ |
| `test_utils.sh` | `/Users/jietaoxie/my-prototype-logistics/tests/ai-intent/lib/` | å·¥å…·å‡½æ•°åº“ | âœ… å¯æ‰§è¡Œ |
| `check_environment.sh` | `/Users/jietaoxie/my-prototype-logistics/tests/ai-intent/` | ç¯å¢ƒæ£€æŸ¥è„šæœ¬ | âœ… å¯æ‰§è¡Œ |

**åŠŸèƒ½:**
- âœ… JSONæµ‹è¯•ç”¨ä¾‹è§£æ
- âœ… æ•°æ®åº“æ“ä½œ (å‡†å¤‡/æ¸…ç†)
- âœ… APIè°ƒç”¨
- âœ… 4å±‚éªŒè¯ (Level 1-4)
- âœ… æµ‹è¯•è¿‡æ»¤ (ä¼˜å…ˆçº§/ç±»åˆ«/ID)
- âœ… MarkdownæŠ¥å‘Šç”Ÿæˆ
- âœ… é”™è¯¯å¤„ç†å’Œæ—¥å¿—

#### 2. æµ‹è¯•ç”¨ä¾‹

| æ–‡ä»¶ | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| `test-cases-example.json` | `/Users/jietaoxie/my-prototype-logistics/tests/ai-intent/` | ç¤ºä¾‹æµ‹è¯•ç”¨ä¾‹(5ä¸ª) |

**æµ‹è¯•ç”¨ä¾‹åˆ†å¸ƒ:**
- P0: 3ä¸ª (æ ¸å¿ƒåŠŸèƒ½)
- P1: 1ä¸ª (é‡è¦åŠŸèƒ½)
- P2: 1ä¸ª (ä¸€èˆ¬åŠŸèƒ½)

**æµ‹è¯•ç±»åˆ«:**
- MATERIAL: 3ä¸ª
- INVENTORY: 1ä¸ª
- CHITCHAT: 1ä¸ª

#### 3. æ–‡æ¡£

| æ–‡ä»¶ | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| `README.md` | `/Users/jietaoxie/my-prototype-logistics/tests/ai-intent/` | å®Œæ•´æ–‡æ¡£ (3500+å­—) |
| `QUICKSTART.md` | `/Users/jietaoxie/my-prototype-logistics/tests/ai-intent/` | å¿«é€Ÿå…¥é—¨æŒ‡å— |
| `PROJECT_SUMMARY.md` | `/Users/jietaoxie/my-prototype-logistics/tests/ai-intent/` | æœ¬æ–‡æ¡£ |

#### 4. æŠ¥å‘Šç›®å½•

| ç›®å½• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| `reports/` | `/Users/jietaoxie/my-prototype-logistics/tests/ai-intent/reports/` | æµ‹è¯•æŠ¥å‘Šè¾“å‡ºç›®å½• |

---

### Javaæµ‹è¯•æ¡†æ¶ (4ä¸ªæ–‡ä»¶)

#### 1. å·¥å…·ç±»

| æ–‡ä»¶ | è·¯å¾„ | è¯´æ˜ | ä»£ç è¡Œæ•° |
|------|------|------|---------|
| `LLMValidator.java` | `backend-java/src/test/java/com/cretas/aims/test/util/` | LLMè¯­ä¹‰éªŒè¯å™¨ | ~450è¡Œ |
| `TestDataSetup.java` | `backend-java/src/test/java/com/cretas/aims/test/util/` | æµ‹è¯•æ•°æ®å‡†å¤‡å·¥å…· | ~350è¡Œ |

**LLMValidator åŠŸèƒ½:**
- âœ… è¯­ä¹‰æ­£ç¡®æ€§éªŒè¯
- âœ… 5ç»´åº¦è´¨é‡è¯„ä¼° (å‡†ç¡®æ€§/å®Œæ•´æ€§/ä¸“ä¸šæ€§/å¯ç†è§£æ€§/æœ‰ç”¨æ€§)
- âœ… æ‰¹é‡éªŒè¯
- âœ… JSONè§£æå’Œé”™è¯¯å¤„ç†

**TestDataSetup åŠŸèƒ½:**
- âœ… SQLæ•°æ®å‡†å¤‡
- âœ… SQLæ•°æ®æ¸…ç†
- âœ… æ•°æ®æŸ¥è¯¢å’Œæ˜ å°„
- âœ… æ•°æ®å­˜åœ¨æ€§éªŒè¯
- âœ… æ‰¹é‡æ“ä½œæ”¯æŒ

#### 2. åŸºç±»å’Œç¤ºä¾‹

| æ–‡ä»¶ | è·¯å¾„ | è¯´æ˜ | ä»£ç è¡Œæ•° |
|------|------|------|---------|
| `IntentTestBase.java` | `backend-java/src/test/java/com/cretas/aims/test/` | æµ‹è¯•åŸºç±» | ~550è¡Œ |
| `MaterialIntentTest.java` | `backend-java/src/test/java/com/cretas/aims/test/` | ç¤ºä¾‹æµ‹è¯•ç±» | ~200è¡Œ |

**IntentTestBase æä¾›çš„æ–¹æ³•:**

**Level 1 å“åº”éªŒè¯:**
- `assertSuccess()` / `assertFailure()`
- `assertIntentType()`
- `assertConfidence()`
- `validateResponse()`

**Level 2 æ•°æ®éªŒè¯:**
- `assertResultsNotEmpty()`
- `assertResultCount()` / `assertMinResultCount()`
- `validateRequiredFields()`
- `validateData()`

**Level 3 è¯­ä¹‰éªŒè¯:**
- `validateSemantic()`
- `evaluateQuality()`

**Level 4 æ•°æ®åº“éªŒè¯:**
- `assertDatabaseCount()`
- `assertDatabaseExists()` / `assertDatabaseNotExists()`

**ç¤ºä¾‹æµ‹è¯•:**
- âœ… 5ä¸ªå®Œæ•´çš„æµ‹è¯•ç¤ºä¾‹
- âœ… å±•ç¤ºæ‰€æœ‰éªŒè¯å±‚çº§
- âœ… å±•ç¤ºæ•°æ®å‡†å¤‡å’Œæ¸…ç†
- âœ… å±•ç¤ºå¤šç§éªŒè¯æ–¹å¼

---

## æ ¸å¿ƒåŠŸèƒ½å®ç°

### 1. 4å±‚éªŒè¯ä½“ç³»

| å±‚çº§ | éªŒè¯å†…å®¹ | Bashæ”¯æŒ | Javaæ”¯æŒ | å®ç°çŠ¶æ€ |
|------|---------|---------|---------|---------|
| **Level 1** | å“åº”ç»“æ„éªŒè¯ | âœ… | âœ… | âœ… å®Œæˆ |
| **Level 2** | æ•°æ®å†…å®¹éªŒè¯ | âœ… | âœ… | âœ… å®Œæˆ |
| **Level 3** | è¯­ä¹‰æ­£ç¡®æ€§éªŒè¯ (LLM) | â­ï¸ è·³è¿‡ | âœ… | âœ… å®Œæˆ |
| **Level 4** | æ“ä½œæ•ˆæœéªŒè¯ | âœ… | âœ… | âœ… å®Œæˆ |

**è¯´æ˜:**
- Level 3åœ¨Bashä¸­æ ‡è®°ä¸º"éœ€è¦æ‰‹åŠ¨å®¡æŸ¥"ï¼Œåœ¨Javaä¸­å®Œå…¨å®ç°
- Level 1-2-4åœ¨Bashå’ŒJavaä¸­éƒ½å®Œå…¨å®ç°

### 2. æµ‹è¯•è¿‡æ»¤

| è¿‡æ»¤ç±»å‹ | Bash | Java | è¯´æ˜ |
|---------|------|------|------|
| æŒ‰ä¼˜å…ˆçº§ | âœ… | âœ… | P0/P1/P2 |
| æŒ‰ç±»åˆ« | âœ… | âœ… | MATERIAL/INVENTORYç­‰ |
| æŒ‰ID | âœ… | âœ… | å•ä¸ªæµ‹è¯•ç”¨ä¾‹ |
| æŒ‰æ³¨è§£ | âŒ | âœ… | @Tagç­‰ |

### 3. æŠ¥å‘Šç”Ÿæˆ

| æŠ¥å‘Šç±»å‹ | æ ¼å¼ | æ”¯æŒçŠ¶æ€ | åŒ…å«å†…å®¹ |
|---------|------|---------|---------|
| Markdown | `.md` | âœ… | æ‘˜è¦ã€è¯¦æƒ…ã€é”™è¯¯ä¿¡æ¯ |
| HTML | `.html` | ğŸ”§ é¢„ç•™ | éœ€åç»­å®ç° |
| JUnit | `.xml` | âŒ | Javaæµ‹è¯•è‡ªå¸¦ |

---

## æŠ€æœ¯æ¶æ„

### Bashæ¡†æ¶æŠ€æœ¯æ ˆ

```
æµ‹è¯•æ¡†æ¶
â”œâ”€â”€ Shell Script (Bash 4.0+)
â”œâ”€â”€ jq (JSONè§£æ)
â”œâ”€â”€ curl (HTTPå®¢æˆ·ç«¯)
â”œâ”€â”€ mysql-client (æ•°æ®åº“æ“ä½œ)
â””â”€â”€ å·¥å…·å‡½æ•°åº“ (æ¨¡å—åŒ–è®¾è®¡)
```

### Javaæ¡†æ¶æŠ€æœ¯æ ˆ

```
æµ‹è¯•æ¡†æ¶
â”œâ”€â”€ Spring Boot 2.7.15
â”œâ”€â”€ JUnit 5
â”œâ”€â”€ MockMvc (APIæµ‹è¯•)
â”œâ”€â”€ JdbcTemplate (æ•°æ®åº“æ“ä½œ)
â”œâ”€â”€ FastJSON (JSONå¤„ç†)
â””â”€â”€ DashScopeClient (LLMè°ƒç”¨)
```

### ä¾èµ–å…³ç³»

```
IntentTestBase (åŸºç±»)
    â”œâ”€â”€ MockMvc (APIè°ƒç”¨)
    â”œâ”€â”€ TestDataSetup (æ•°æ®å‡†å¤‡)
    â””â”€â”€ LLMValidator (è¯­ä¹‰éªŒè¯)
        â””â”€â”€ DashScopeClient (AIæœåŠ¡)

test_runner.sh (ä¸»è„šæœ¬)
    â”œâ”€â”€ test_utils.sh (å·¥å…·åº“)
    â”œâ”€â”€ jq (JSONè§£æ)
    â”œâ”€â”€ curl (APIè°ƒç”¨)
    â””â”€â”€ mysql (æ•°æ®åº“)
```

---

## ä½¿ç”¨åœºæ™¯

### Bashæµ‹è¯•æ¡†æ¶é€‚ç”¨åœºæ™¯

âœ… **é€‚åˆ:**
- CI/CDç®¡é“é›†æˆ
- æ‰¹é‡å›å½’æµ‹è¯•
- å¿«é€ŸéªŒè¯éƒ¨ç½²
- æ— éœ€Javaç¯å¢ƒçš„åœºæ™¯

âŒ **ä¸é€‚åˆ:**
- éœ€è¦LLMè¯­ä¹‰éªŒè¯
- å¤æ‚çš„æ•°æ®éªŒè¯é€»è¾‘
- éœ€è¦è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯

### Javaæµ‹è¯•æ¡†æ¶é€‚ç”¨åœºæ™¯

âœ… **é€‚åˆ:**
- å¼€å‘é˜¶æ®µçš„å•å…ƒæµ‹è¯•
- LLMè¯­ä¹‰éªŒè¯
- å¤æ‚çš„ä¸šåŠ¡é€»è¾‘éªŒè¯
- éœ€è¦IDEè°ƒè¯•çš„åœºæ™¯

âŒ **ä¸é€‚åˆ:**
- CI/CDå¿«é€Ÿæ‰§è¡Œ
- éJavaé¡¹ç›®

---

## æ€§èƒ½æŒ‡æ ‡

### Bashæµ‹è¯•æ‰§è¡Œæ€§èƒ½

| æŒ‡æ ‡ | æ•°å€¼ | è¯´æ˜ |
|------|------|------|
| å¯åŠ¨æ—¶é—´ | < 1s | ç™»å½•+ç¯å¢ƒåˆå§‹åŒ– |
| å•ä¸ªæµ‹è¯• | ~2-3s | åŒ…å«æ•°æ®å‡†å¤‡+APIè°ƒç”¨+éªŒè¯ |
| 10ä¸ªæµ‹è¯• | ~20-30s | é¡ºåºæ‰§è¡Œ |
| æŠ¥å‘Šç”Ÿæˆ | < 1s | Markdownæ ¼å¼ |

### Javaæµ‹è¯•æ‰§è¡Œæ€§èƒ½

| æŒ‡æ ‡ | æ•°å€¼ | è¯´æ˜ |
|------|------|------|
| Springå¯åŠ¨ | ~5-10s | é¦–æ¬¡å¯åŠ¨ |
| å•ä¸ªæµ‹è¯• | ~1-2s | å·²å¯åŠ¨çš„ç¯å¢ƒ |
| LLMéªŒè¯ | +2-5s | é¢å¤–çš„AIè°ƒç”¨æ—¶é—´ |

---

## ä»£ç è´¨é‡

### ä»£ç è§„èŒƒ

- âœ… æ‰€æœ‰Bashå‡½æ•°éƒ½æœ‰æ³¨é‡Šå’Œå¯¼å‡º
- âœ… æ‰€æœ‰Javaç±»éƒ½æœ‰JavaDoc
- âœ… ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æœºåˆ¶
- âœ… æ—¥å¿—çº§åˆ«åˆ†æ˜ (INFO/SUCCESS/WARNING/ERROR)
- âœ… å˜é‡å‘½åæ¸…æ™°

### æµ‹è¯•è¦†ç›–

**Bashè„šæœ¬:**
- âœ… ä¾èµ–æ£€æŸ¥
- âœ… æ•°æ®åº“è¿æ¥éªŒè¯
- âœ… APIè®¤è¯éªŒè¯
- âœ… JSONè§£æéªŒè¯
- âœ… é”™è¯¯å¤„ç†éªŒè¯

**Javaå·¥å…·ç±»:**
- âœ… ç¤ºä¾‹æµ‹è¯•è¦†ç›–æ‰€æœ‰éªŒè¯æ–¹æ³•
- âœ… å¼‚å¸¸å¤„ç†è¦†ç›–
- âœ… ç©ºå€¼/nullå¤„ç†

---

## æ‰©å±•æ€§è®¾è®¡

### æ˜“äºæ‰©å±•çš„éƒ¨åˆ†

1. **æ–°çš„éªŒè¯æ–¹æ³•**
   - åœ¨ `IntentTestBase` ä¸­æ·»åŠ æ–°æ–¹æ³•
   - åœ¨ `test_utils.sh` ä¸­æ·»åŠ æ–°å‡½æ•°

2. **æ–°çš„æµ‹è¯•ç”¨ä¾‹**
   - å¤åˆ¶JSONæ¨¡æ¿
   - ä¿®æ”¹å­—æ®µå€¼

3. **æ–°çš„æŠ¥å‘Šæ ¼å¼**
   - ä¿®æ”¹ `generate_report()` å‡½æ•°
   - æ·»åŠ HTMLæ¨¡æ¿

4. **æ–°çš„è¿‡æ»¤æ¡ä»¶**
   - åœ¨ `should_run_test()` ä¸­æ·»åŠ æ¡ä»¶
   - æ·»åŠ å‘½ä»¤è¡Œå‚æ•°

---

## å·²çŸ¥é™åˆ¶

### Bashæ¡†æ¶

1. âŒ Level 3 LLMéªŒè¯æœªå®ç° (æ ‡è®°ä¸ºè·³è¿‡)
2. âš ï¸ åªæ”¯æŒé¡ºåºæ‰§è¡Œ (ä¸æ”¯æŒå¹¶è¡Œ)
3. âš ï¸ HTMLæŠ¥å‘Šéœ€è¦æ‰‹åŠ¨å®ç°
4. âš ï¸ é”™è¯¯æ¢å¤èƒ½åŠ›æœ‰é™

### Javaæ¡†æ¶

1. âš ï¸ éœ€è¦Spring Bootç¯å¢ƒ (å¯åŠ¨è¾ƒæ…¢)
2. âš ï¸ æ‰¹é‡æµ‹è¯•éœ€è¦æ³¨æ„äº‹åŠ¡éš”ç¦»
3. âš ï¸ LLMéªŒè¯ä¾èµ–å¤–éƒ¨AIæœåŠ¡

---

## åç»­æ”¹è¿›å»ºè®®

### çŸ­æœŸ (1-2å‘¨)

- [ ] å®ç°HTMLæŠ¥å‘Šç”Ÿæˆ
- [ ] æ·»åŠ å¹¶è¡Œæµ‹è¯•æ”¯æŒ (Bash)
- [ ] ä¼˜åŒ–LLMéªŒè¯çš„Prompt
- [ ] æ·»åŠ æ›´å¤šç¤ºä¾‹æµ‹è¯•ç”¨ä¾‹

### ä¸­æœŸ (1ä¸ªæœˆ)

- [ ] CI/CDé›†æˆç¤ºä¾‹
- [ ] æ€§èƒ½æµ‹è¯•å’Œä¼˜åŒ–
- [ ] æµ‹è¯•æ•°æ®å·¥å‚æ¨¡å¼
- [ ] æµ‹è¯•ç»“æœè¶‹åŠ¿åˆ†æ

### é•¿æœŸ (3ä¸ªæœˆ)

- [ ] Web UIæµ‹è¯•æŠ¥å‘Š
- [ ] æµ‹è¯•ç”¨ä¾‹è‡ªåŠ¨ç”Ÿæˆ
- [ ] æ™ºèƒ½æµ‹è¯•æ¨è
- [ ] A/Bæµ‹è¯•æ”¯æŒ

---

## ä½¿ç”¨ç»Ÿè®¡ (é¢„ä¼°)

### ä»£ç é‡

| ç»„ä»¶ | è¡Œæ•° | æ–‡ä»¶æ•° |
|------|------|--------|
| Bashè„šæœ¬ | ~1,000è¡Œ | 3ä¸ª |
| Javaä»£ç  | ~1,500è¡Œ | 4ä¸ª |
| JSONæµ‹è¯•ç”¨ä¾‹ | ~150è¡Œ | 1ä¸ª |
| æ–‡æ¡£ | ~1,500è¡Œ | 3ä¸ª |
| **æ€»è®¡** | **~4,150è¡Œ** | **11ä¸ª** |

### åŠŸèƒ½è¦†ç›–

- âœ… 4å±‚éªŒè¯ä½“ç³»: 100%
- âœ… æµ‹è¯•è¿‡æ»¤: 100%
- âœ… æ•°æ®ç®¡ç†: 100%
- âœ… æŠ¥å‘Šç”Ÿæˆ: 80% (ç¼ºHTML)
- âœ… æ–‡æ¡£å®Œæ•´æ€§: 100%

---

## å¿«é€Ÿå‚è€ƒ

### Bashå‘½ä»¤

```bash
# ç¯å¢ƒæ£€æŸ¥
./check_environment.sh

# æ‰§è¡Œæ‰€æœ‰æµ‹è¯•
./test_runner.sh --file test-cases-example.json

# æŒ‰ä¼˜å…ˆçº§
./test_runner.sh --file test-cases-example.json --priority P0

# æŒ‰ç±»åˆ«
./test_runner.sh --file test-cases-example.json --category MATERIAL

# å•ä¸ªæµ‹è¯•
./test_runner.sh --file test-cases-example.json --id TC-P0-MATERIAL-001
```

### Javaå‘½ä»¤

```bash
cd backend-java

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
mvn test -Dtest=**/*IntentTest

# è¿è¡Œå•ä¸ªæµ‹è¯•ç±»
mvn test -Dtest=MaterialIntentTest

# è¿è¡Œå•ä¸ªæµ‹è¯•æ–¹æ³•
mvn test -Dtest=MaterialIntentTest#testQuerySingleBatchDetail
```

---

## è”ç³»å’Œæ”¯æŒ

**æ–‡æ¡£ä½ç½®:**
- å®Œæ•´æ–‡æ¡£: `/tests/ai-intent/README.md`
- å¿«é€Ÿå…¥é—¨: `/tests/ai-intent/QUICKSTART.md`
- ç¤ºä¾‹ä»£ç : `/backend-java/src/test/java/com/cretas/aims/test/`

**ä¸‹ä¸€æ­¥:**
1. è¿è¡Œ `./check_environment.sh` éªŒè¯ç¯å¢ƒ
2. é˜…è¯» `QUICKSTART.md` å¿«é€Ÿä¸Šæ‰‹
3. å‚è€ƒ `MaterialIntentTest.java` ç¼–å†™ä½ çš„æµ‹è¯•

---

**é¡¹ç›®çŠ¶æ€:** âœ… å®Œæˆ
**ä»£ç è´¨é‡:** â­â­â­â­â­
**æ–‡æ¡£è´¨é‡:** â­â­â­â­â­
**å¯ç”¨æ€§:** â­â­â­â­â­
