{
  "audit_date": "2026-02-10",
  "audit_version": "1.0.0",
  "summary": {
    "total_handlers": 16,
    "handler_categories": 15,
    "total_intent_codes_with_handlers": 116,
    "total_intent_codes_recognized": 186,
    "intents_without_handlers": 70,
    "coverage_percentage": 62.4,
    "smartbi_intents_no_java_handler": 30,
    "notes": "SmartBI intents (30) are handled by Python service at port 8083, not Java handlers. Excluding SmartBI, handler coverage is 116/156 = 74.4%. Many 'unhandled' intents are recognized via equivalent-intent groups and route to a handled sibling intent."
  },

  "execution_endpoint": {
    "single": "POST /api/mobile/{factoryId}/ai-intents/execute",
    "multi": "POST /api/mobile/{factoryId}/ai-intents/execute/multi",
    "stream": "POST /api/mobile/{factoryId}/ai-intents/execute/stream (SSE)",
    "controller": "AIIntentConfigController.java",
    "executor_service": "IntentExecutorServiceImpl.java",
    "routing_logic": "handlerMap.get(intent.getIntentCategory()) -> IntentHandler.handle(). Falls back to dynamic tool selection via ToolRouterService if no handler found."
  },

  "response_structure": {
    "class": "IntentExecuteResponse",
    "fields": {
      "intentRecognized": "Boolean - whether intent was identified",
      "intentCode": "String - matched intent code",
      "intentName": "String - human-readable intent name",
      "intentCategory": "String - category (ALERT, CRM, REPORT, etc.)",
      "sensitivityLevel": "String - LOW/MEDIUM/HIGH/CRITICAL",
      "confidence": "Double - 0.0-1.0 match confidence",
      "matchMethod": "String - KEYWORD/LLM/REGEX",
      "status": "String - COMPLETED/FAILED/PENDING_APPROVAL/PREVIEW/NEED_MORE_INFO/NOT_RECOGNIZED/VALIDATION_FAILED",
      "message": "String - status message",
      "formattedText": "String - natural language response summary",
      "resultData": "Object - execution result (varies by intent type)",
      "affectedEntities": "List<AffectedEntity> - entities modified",
      "requiresApproval": "Boolean",
      "suggestedActions": "List<SuggestedAction> - next step suggestions",
      "validationViolations": "List<Violation> - Drools rule violations",
      "sessionId": "String - for multi-turn conversations",
      "multiIntentResult": "Boolean - true for multi-intent execution",
      "subResults": "List<SingleIntentResponse> - per-intent results"
    }
  },

  "handlers_found": [
    {
      "name": "AlertIntentHandler",
      "file": "backend-java/src/main/java/com/cretas/aims/service/handler/AlertIntentHandler.java",
      "category": "ALERT",
      "is_stub": false,
      "intents_handled": [
        "ALERT_LIST",
        "ALERT_ACTIVE",
        "ALERT_STATS",
        "ALERT_ACKNOWLEDGE",
        "ALERT_RESOLVE",
        "ALERT_TRIAGE",
        "ALERT_DIAGNOSE",
        "ALERT_BY_EQUIPMENT",
        "ALERT_BY_LEVEL"
      ],
      "notes": "Fully functional. Uses EquipmentAlertsService for real DB queries."
    },
    {
      "name": "CRMIntentHandler",
      "file": "backend-java/src/main/java/com/cretas/aims/service/handler/CRMIntentHandler.java",
      "category": "CRM",
      "is_stub": false,
      "intents_handled": [
        "CUSTOMER_LIST",
        "CUSTOMER_SEARCH",
        "CUSTOMER_STATS",
        "CUSTOMER_BY_TYPE",
        "CUSTOMER_ACTIVE",
        "CUSTOMER_PURCHASE_HISTORY",
        "SUPPLIER_LIST",
        "SUPPLIER_SEARCH",
        "SUPPLIER_EVALUATE",
        "SUPPLIER_BY_CATEGORY",
        "SUPPLIER_ACTIVE",
        "SUPPLIER_RANKING"
      ],
      "notes": "Fully functional. Uses CustomerService and SupplierService."
    },
    {
      "name": "CameraIntentHandler",
      "file": "backend-java/src/main/java/com/cretas/aims/service/handler/CameraIntentHandler.java",
      "category": "CAMERA",
      "is_stub": false,
      "intents_handled": [
        "CAMERA_ADD",
        "CAMERA_LIST",
        "CAMERA_DETAIL",
        "CAMERA_CAPTURE",
        "CAMERA_SUBSCRIBE",
        "CAMERA_UNSUBSCRIBE",
        "CAMERA_EVENTS",
        "CAMERA_STATUS",
        "CAMERA_STREAMS",
        "CAMERA_TEST_CONNECTION",
        "CAMERA_SYNC"
      ],
      "notes": "Fully functional. Uses IsapiDeviceService for Hikvision ISAPI protocol integration."
    },
    {
      "name": "ConfigIntentHandler",
      "file": "backend-java/src/main/java/com/cretas/aims/service/handler/ConfigIntentHandler.java",
      "category": "CONFIG",
      "is_stub": false,
      "intents_handled": [
        "EQUIPMENT_MAINTENANCE",
        "CONVERSION_RATE_UPDATE",
        "RULE_CONFIG"
      ],
      "notes": "Fully functional. Uses EquipmentService and ConversionService."
    },
    {
      "name": "DataOperationIntentHandler",
      "file": "backend-java/src/main/java/com/cretas/aims/service/handler/DataOperationIntentHandler.java",
      "category": "DATA_OP",
      "is_stub": false,
      "intents_handled": [
        "PRODUCT_TYPE_QUERY",
        "BATCH_UPDATE",
        "DATA_CORRECTION",
        "BATCH_DELETE",
        "PRODUCT_UPDATE",
        "PLAN_UPDATE",
        "MATERIAL_UPDATE",
        "STATUS_CHANGE",
        "QUANTITY_ADJUST"
      ],
      "notes": "Fully functional with AI parsing + Drools validation. PRODUCT_TYPE_QUERY has dedicated handler; all others use generic AI-parsed entity update flow. Supports semantics mode."
    },
    {
      "name": "DecorationIntentHandler",
      "file": "backend-java/src/main/java/com/cretas/aims/service/handler/DecorationIntentHandler.java",
      "category": "DECORATION",
      "is_stub": false,
      "intents_handled": [
        "HOME_LAYOUT_UPDATE",
        "HOME_LAYOUT_GENERATE",
        "HOME_LAYOUT_SUGGEST"
      ],
      "notes": "Fully functional. Manages factory home page layout via AI generation."
    },
    {
      "name": "FormIntentHandler",
      "file": "backend-java/src/main/java/com/cretas/aims/service/handler/FormIntentHandler.java",
      "category": "FORM",
      "is_stub": false,
      "intents_handled": [
        "FORM_GENERATION",
        "FORM_MODIFICATION",
        "FORM_VALIDATION"
      ],
      "notes": "Fully functional. Uses DashScope LLM for form schema generation. Handles all FORM intents generically (no per-intent switch). Includes Drools rule validation."
    },
    {
      "name": "HRIntentHandler",
      "file": "backend-java/src/main/java/com/cretas/aims/service/handler/HRIntentHandler.java",
      "category": "HR",
      "is_stub": false,
      "intents_handled": [
        "ATTENDANCE_STATUS",
        "ATTENDANCE_HISTORY",
        "ATTENDANCE_STATS",
        "ATTENDANCE_MONTHLY",
        "ATTENDANCE_ANOMALY",
        "ATTENDANCE_DEPARTMENT",
        "ATTENDANCE_TODAY",
        "CLOCK_IN",
        "CLOCK_OUT"
      ],
      "notes": "Fully functional. Uses AttendanceService for real time clock and attendance queries."
    },
    {
      "name": "MaterialIntentHandler",
      "file": "backend-java/src/main/java/com/cretas/aims/service/handler/MaterialIntentHandler.java",
      "category": "MATERIAL",
      "is_stub": false,
      "intents_handled": [
        "MATERIAL_BATCH_QUERY",
        "MATERIAL_BATCH_USE",
        "MATERIAL_BATCH_RESERVE",
        "MATERIAL_BATCH_RELEASE",
        "MATERIAL_BATCH_CONSUME",
        "MATERIAL_FIFO_RECOMMEND",
        "MATERIAL_EXPIRING_ALERT",
        "MATERIAL_LOW_STOCK_ALERT",
        "MATERIAL_EXPIRED_QUERY",
        "MATERIAL_ADJUST_QUANTITY"
      ],
      "notes": "Fully functional. Uses MaterialBatchService for inventory operations."
    },
    {
      "name": "MetaIntentHandler",
      "file": "backend-java/src/main/java/com/cretas/aims/service/handler/MetaIntentHandler.java",
      "category": "META",
      "is_stub": false,
      "intents_handled": [
        "INTENT_CREATE",
        "INTENT_UPDATE",
        "INTENT_ANALYZE"
      ],
      "notes": "Fully functional. AI self-extension - can create/update intent configs. Uses AIIntentConfigRepository."
    },
    {
      "name": "PageDesignIntentHandler",
      "file": "backend-java/src/main/java/com/cretas/aims/service/handler/PageDesignIntentHandler.java",
      "category": "PAGE_DESIGN",
      "is_stub": false,
      "intents_handled": [
        "PAGE_GENERATE",
        "PAGE_COMPONENT_ADD",
        "PAGE_STYLE_UPDATE",
        "PAGE_DATA_BIND"
      ],
      "notes": "Fully functional. Low-code page design via AI. Uses LowcodePageConfigRepository."
    },
    {
      "name": "QualityIntentHandler",
      "file": "backend-java/src/main/java/com/cretas/aims/service/handler/QualityIntentHandler.java",
      "category": "QUALITY",
      "is_stub": false,
      "intents_handled": [
        "QUALITY_CHECK_QUERY",
        "QUALITY_CHECK_EXECUTE",
        "QUALITY_DISPOSITION_EVALUATE",
        "QUALITY_DISPOSITION_EXECUTE",
        "QUALITY_STATS",
        "QUALITY_CRITICAL_ITEMS"
      ],
      "notes": "Fully functional. Uses QualityInspectionService and QualityDispositionRuleService."
    },
    {
      "name": "ReportIntentHandler",
      "file": "backend-java/src/main/java/com/cretas/aims/service/handler/ReportIntentHandler.java",
      "category": "REPORT",
      "is_stub": false,
      "intents_handled": [
        "REPORT_DASHBOARD_OVERVIEW",
        "REPORT_PRODUCTION",
        "REPORT_QUALITY",
        "REPORT_INVENTORY",
        "REPORT_FINANCE",
        "REPORT_EFFICIENCY",
        "REPORT_KPI",
        "REPORT_ANOMALY",
        "REPORT_TRENDS",
        "COST_QUERY",
        "COST_TREND_ANALYSIS"
      ],
      "notes": "Fully functional. Uses ReportService for aggregated business reports."
    },
    {
      "name": "ScaleIntentHandler (router -> ScaleDeviceIntentHandler + ScaleProtocolIntentHandler + ScaleTroubleshootIntentHandler)",
      "file": "backend-java/src/main/java/com/cretas/aims/service/handler/ScaleIntentHandler.java",
      "category": "SCALE",
      "is_stub": false,
      "intents_handled": [
        "SCALE_ADD_DEVICE",
        "SCALE_ADD_DEVICE_VISION",
        "SCALE_LIST_DEVICES",
        "SCALE_DEVICE_DETAIL",
        "SCALE_UPDATE_DEVICE",
        "SCALE_DELETE_DEVICE",
        "SCALE_ADD_MODEL",
        "SCALE_PROTOCOL_DETECT",
        "SCALE_LIST_PROTOCOLS",
        "SCALE_TEST_PARSE",
        "SCALE_CONFIG_GENERATE",
        "SCALE_TROUBLESHOOT",
        "SCALE_CALIBRATE"
      ],
      "notes": "Fully functional. Main router delegates to 3 sub-handlers: ScaleDeviceIntentHandler, ScaleProtocolIntentHandler, ScaleTroubleshootIntentHandler. Supports semantics mode."
    },
    {
      "name": "ShipmentIntentHandler",
      "file": "backend-java/src/main/java/com/cretas/aims/service/handler/ShipmentIntentHandler.java",
      "category": "SHIPMENT",
      "is_stub": false,
      "intents_handled": [
        "SHIPMENT_CREATE",
        "SHIPMENT_QUERY",
        "SHIPMENT_UPDATE",
        "SHIPMENT_STATUS_UPDATE",
        "SHIPMENT_STATS",
        "SHIPMENT_BY_CUSTOMER",
        "SHIPMENT_BY_DATE",
        "TRACE_BATCH",
        "TRACE_FULL",
        "TRACE_PUBLIC"
      ],
      "notes": "Fully functional. Handles shipment CRUD and traceability queries."
    },
    {
      "name": "SystemIntentHandler",
      "file": "backend-java/src/main/java/com/cretas/aims/service/handler/SystemIntentHandler.java",
      "category": "SYSTEM",
      "is_stub": false,
      "intents_handled": [
        "SCHEDULING_SET_AUTO",
        "SCHEDULING_SET_MANUAL",
        "SCHEDULING_SET_DISABLED",
        "FACTORY_FEATURE_TOGGLE",
        "FACTORY_NOTIFICATION_CONFIG"
      ],
      "notes": "Fully functional. Uses FactorySettingsService for scheduling mode and feature toggles."
    },
    {
      "name": "UserIntentHandler",
      "file": "backend-java/src/main/java/com/cretas/aims/service/handler/UserIntentHandler.java",
      "category": "USER",
      "is_stub": false,
      "intents_handled": [
        "USER_CREATE",
        "USER_DISABLE",
        "USER_ROLE_ASSIGN"
      ],
      "notes": "Fully functional. Uses UserService for user management operations."
    }
  ],

  "intents_with_handlers": [
    "ALERT_LIST", "ALERT_ACTIVE", "ALERT_STATS", "ALERT_ACKNOWLEDGE", "ALERT_RESOLVE",
    "ALERT_TRIAGE", "ALERT_DIAGNOSE", "ALERT_BY_EQUIPMENT", "ALERT_BY_LEVEL",
    "CUSTOMER_LIST", "CUSTOMER_SEARCH", "CUSTOMER_STATS", "CUSTOMER_BY_TYPE",
    "CUSTOMER_ACTIVE", "CUSTOMER_PURCHASE_HISTORY",
    "SUPPLIER_LIST", "SUPPLIER_SEARCH", "SUPPLIER_EVALUATE", "SUPPLIER_BY_CATEGORY",
    "SUPPLIER_ACTIVE", "SUPPLIER_RANKING",
    "CAMERA_ADD", "CAMERA_LIST", "CAMERA_DETAIL", "CAMERA_CAPTURE",
    "CAMERA_SUBSCRIBE", "CAMERA_UNSUBSCRIBE", "CAMERA_EVENTS", "CAMERA_STATUS",
    "CAMERA_STREAMS", "CAMERA_TEST_CONNECTION", "CAMERA_SYNC",
    "EQUIPMENT_MAINTENANCE", "CONVERSION_RATE_UPDATE", "RULE_CONFIG",
    "PRODUCT_TYPE_QUERY", "BATCH_UPDATE", "DATA_CORRECTION", "BATCH_DELETE",
    "PRODUCT_UPDATE", "PLAN_UPDATE", "MATERIAL_UPDATE", "STATUS_CHANGE", "QUANTITY_ADJUST",
    "HOME_LAYOUT_UPDATE", "HOME_LAYOUT_GENERATE", "HOME_LAYOUT_SUGGEST",
    "FORM_GENERATION", "FORM_MODIFICATION", "FORM_VALIDATION",
    "ATTENDANCE_STATUS", "ATTENDANCE_HISTORY", "ATTENDANCE_STATS", "ATTENDANCE_MONTHLY",
    "ATTENDANCE_ANOMALY", "ATTENDANCE_DEPARTMENT", "ATTENDANCE_TODAY", "CLOCK_IN", "CLOCK_OUT",
    "MATERIAL_BATCH_QUERY", "MATERIAL_BATCH_USE", "MATERIAL_BATCH_RESERVE",
    "MATERIAL_BATCH_RELEASE", "MATERIAL_BATCH_CONSUME", "MATERIAL_FIFO_RECOMMEND",
    "MATERIAL_EXPIRING_ALERT", "MATERIAL_LOW_STOCK_ALERT", "MATERIAL_EXPIRED_QUERY",
    "MATERIAL_ADJUST_QUANTITY",
    "INTENT_CREATE", "INTENT_UPDATE", "INTENT_ANALYZE",
    "PAGE_GENERATE", "PAGE_COMPONENT_ADD", "PAGE_STYLE_UPDATE", "PAGE_DATA_BIND",
    "QUALITY_CHECK_QUERY", "QUALITY_CHECK_EXECUTE", "QUALITY_DISPOSITION_EVALUATE",
    "QUALITY_DISPOSITION_EXECUTE", "QUALITY_STATS", "QUALITY_CRITICAL_ITEMS",
    "REPORT_DASHBOARD_OVERVIEW", "REPORT_PRODUCTION", "REPORT_QUALITY", "REPORT_INVENTORY",
    "REPORT_FINANCE", "REPORT_EFFICIENCY", "REPORT_KPI", "REPORT_ANOMALY", "REPORT_TRENDS",
    "COST_QUERY", "COST_TREND_ANALYSIS",
    "SCALE_ADD_DEVICE", "SCALE_ADD_DEVICE_VISION", "SCALE_LIST_DEVICES", "SCALE_DEVICE_DETAIL",
    "SCALE_UPDATE_DEVICE", "SCALE_DELETE_DEVICE", "SCALE_ADD_MODEL", "SCALE_PROTOCOL_DETECT",
    "SCALE_LIST_PROTOCOLS", "SCALE_TEST_PARSE", "SCALE_CONFIG_GENERATE",
    "SCALE_TROUBLESHOOT", "SCALE_CALIBRATE",
    "SHIPMENT_CREATE", "SHIPMENT_QUERY", "SHIPMENT_UPDATE", "SHIPMENT_STATUS_UPDATE",
    "SHIPMENT_STATS", "SHIPMENT_BY_CUSTOMER", "SHIPMENT_BY_DATE",
    "TRACE_BATCH", "TRACE_FULL", "TRACE_PUBLIC",
    "SCHEDULING_SET_AUTO", "SCHEDULING_SET_MANUAL", "SCHEDULING_SET_DISABLED",
    "FACTORY_FEATURE_TOGGLE", "FACTORY_NOTIFICATION_CONFIG",
    "USER_CREATE", "USER_DISABLE", "USER_ROLE_ASSIGN"
  ],

  "intents_without_handlers": {
    "recognized_but_no_java_handler": {
      "description": "These intent codes are referenced in IntentKnowledgeBase phrase mappings and/or SQL configs but have NO handler switch case. Some may route to equivalent intents via EQUIVALENT_INTENTS mapping, and SmartBI intents are handled by the Python service.",

      "no_handler_no_equivalent": [
        {
          "intent": "CORRELATION_ANALYSIS",
          "category": "unknown",
          "source": "phrase_mapping",
          "notes": "Referenced in phrase mappings but no handler or category assignment found"
        },
        {
          "intent": "CUSTOMER_FEEDBACK",
          "category": "CRM",
          "source": "phrase_mapping",
          "notes": "Mapped in phrases but not in CRMIntentHandler switch. Would fall to CRM handler default case (FAILED)"
        },
        {
          "intent": "CUSTOMER_DELETE",
          "category": "CRM",
          "source": "phrase_mapping",
          "notes": "Mapped in phrases but not in CRMIntentHandler switch"
        },
        {
          "intent": "CUSTOMER_QUERY",
          "category": "CRM",
          "source": "equivalent_intents",
          "notes": "In equivalent group with CUSTOMER_LIST which IS handled. May still fail if directly matched."
        },
        {
          "intent": "CUSTOMER_RANKING",
          "category": "CRM",
          "source": "equivalent_intents",
          "notes": "In equivalent group but no switch case in CRMIntentHandler"
        },
        {
          "intent": "CUSTOMER_COMPARISON",
          "category": "CRM",
          "source": "equivalent_intents",
          "notes": "In equivalent group but no switch case"
        },
        {
          "intent": "SUPPLIER_QUERY",
          "category": "CRM",
          "source": "equivalent_intents",
          "notes": "In equivalent group with SUPPLIER_LIST but no dedicated switch case"
        },
        {
          "intent": "SUPPLIER_STATS",
          "category": "CRM",
          "source": "equivalent_intents",
          "notes": "In equivalent group but no switch case"
        },
        {
          "intent": "SUPPLIER_COMPARISON",
          "category": "CRM",
          "source": "equivalent_intents",
          "notes": "In equivalent group but no switch case"
        },
        {
          "intent": "SUPPLIER_DELETE",
          "category": "CRM",
          "source": "phrase_mapping",
          "notes": "Mapped in phrases but no switch case"
        },
        {
          "intent": "EQUIPMENT_STATUS",
          "category": "unknown",
          "source": "equivalent_intents",
          "notes": "In multiple equivalent groups. No handler with this exact code. Not in ConfigIntentHandler."
        },
        {
          "intent": "EQUIPMENT_STATUS_QUERY",
          "category": "unknown",
          "source": "phrase_mapping",
          "notes": "Heavily used in phrase mappings but not in any handler switch case"
        },
        {
          "intent": "EQUIPMENT_STATUS_UPDATE",
          "category": "unknown",
          "source": "phrase_mapping",
          "notes": "No handler switch case"
        },
        {
          "intent": "EQUIPMENT_STATS",
          "category": "unknown",
          "source": "phrase_mapping + equivalent_intents",
          "notes": "Very commonly mapped. No dedicated handler."
        },
        {
          "intent": "EQUIPMENT_LIST",
          "category": "unknown",
          "source": "phrase_mapping + equivalent_intents",
          "notes": "Very commonly mapped. No dedicated handler."
        },
        {
          "intent": "EQUIPMENT_START",
          "category": "unknown",
          "source": "phrase_mapping",
          "notes": "Equipment start/stop mapped but no handler"
        },
        {
          "intent": "EQUIPMENT_STOP",
          "category": "unknown",
          "source": "phrase_mapping",
          "notes": "Equipment start/stop mapped but no handler"
        },
        {
          "intent": "EQUIPMENT_DETAIL",
          "category": "unknown",
          "source": "phrase_mapping",
          "notes": "No handler"
        },
        {
          "intent": "EQUIPMENT_CONTROL",
          "category": "unknown",
          "source": "equivalent_intents",
          "notes": "No handler"
        },
        {
          "intent": "EQUIPMENT_QUERY",
          "category": "unknown",
          "source": "equivalent_intents",
          "notes": "No handler"
        },
        {
          "intent": "EQUIPMENT_ALERT_LIST",
          "category": "unknown",
          "source": "equivalent_intents",
          "notes": "In alert equivalent group but not in AlertIntentHandler switch (it has ALERT_BY_EQUIPMENT instead)"
        },
        {
          "intent": "EQUIPMENT_ALERT_STATS",
          "category": "unknown",
          "source": "phrase_mapping",
          "notes": "No handler"
        },
        {
          "intent": "EQUIPMENT_COMPARISON",
          "category": "unknown",
          "source": "phrase_mapping",
          "notes": "No handler"
        },
        {
          "intent": "PROCESSING_BATCH_DETAIL",
          "category": "unknown",
          "source": "equivalent_intents",
          "notes": "In batch query equivalent group but no handler"
        },
        {
          "intent": "PROCESSING_BATCH_CREATE",
          "category": "unknown",
          "source": "phrase_mapping",
          "notes": "No handler. Very common phrase mapping target."
        },
        {
          "intent": "PROCESSING_BATCH_LIST",
          "category": "unknown",
          "source": "phrase_mapping + equivalent_intents",
          "notes": "Very commonly mapped but no handler"
        },
        {
          "intent": "PROCESSING_BATCH_START",
          "category": "unknown",
          "source": "phrase_mapping",
          "notes": "No handler"
        },
        {
          "intent": "PROCESSING_BATCH_PAUSE",
          "category": "unknown",
          "source": "phrase_mapping",
          "notes": "No handler"
        },
        {
          "intent": "PROCESSING_BATCH_RESUME",
          "category": "unknown",
          "source": "phrase_mapping",
          "notes": "No handler"
        },
        {
          "intent": "PROCESSING_BATCH_CANCEL",
          "category": "unknown",
          "source": "phrase_mapping + equivalent_intents",
          "notes": "No handler"
        },
        {
          "intent": "PROCESSING_BATCH_COMPLETE",
          "category": "unknown",
          "source": "phrase_mapping",
          "notes": "No handler"
        },
        {
          "intent": "PROCESSING_BATCH_STOP",
          "category": "unknown",
          "source": "equivalent_intents",
          "notes": "No handler"
        },
        {
          "intent": "PROCESSING_BATCH_TIMELINE",
          "category": "unknown",
          "source": "equivalent_intents",
          "notes": "No handler"
        },
        {
          "intent": "PROCESSING_WORKER_ASSIGN",
          "category": "unknown",
          "source": "phrase_mapping",
          "notes": "No handler"
        },
        {
          "intent": "PRODUCTION_STATUS_QUERY",
          "category": "unknown",
          "source": "phrase_mapping + equivalent_intents",
          "notes": "Very commonly mapped but no handler"
        },
        {
          "intent": "PROCESSING_STATS",
          "category": "unknown",
          "source": "equivalent_intents",
          "notes": "No handler"
        },
        {
          "intent": "PROCESSING_RANKING",
          "category": "unknown",
          "source": "equivalent_intents",
          "notes": "No handler"
        },
        {
          "intent": "PROCESSING_COMPARISON",
          "category": "unknown",
          "source": "equivalent_intents",
          "notes": "No handler"
        },
        {
          "intent": "PROCESSING_MOM_ANALYSIS",
          "category": "unknown",
          "source": "equivalent_intents",
          "notes": "No handler"
        },
        {
          "intent": "PROCESSING_YOY_ANALYSIS",
          "category": "unknown",
          "source": "equivalent_intents",
          "notes": "No handler"
        },
        {
          "intent": "ORDER_LIST",
          "category": "unknown",
          "source": "phrase_mapping + equivalent_intents",
          "notes": "No handler for ORDER category at all"
        },
        {
          "intent": "ORDER_STATS",
          "category": "unknown",
          "source": "equivalent_intents",
          "notes": "No ORDER handler"
        },
        {
          "intent": "ORDER_CREATE",
          "category": "unknown",
          "source": "phrase_mapping",
          "notes": "No ORDER handler"
        },
        {
          "intent": "ORDER_CANCEL",
          "category": "unknown",
          "source": "equivalent_intents",
          "notes": "No ORDER handler"
        },
        {
          "intent": "ORDER_DELETE",
          "category": "unknown",
          "source": "equivalent_intents",
          "notes": "No ORDER handler"
        },
        {
          "intent": "ORDER_DETAIL",
          "category": "unknown",
          "source": "phrase_mapping",
          "notes": "No ORDER handler"
        },
        {
          "intent": "ORDER_STATUS",
          "category": "unknown",
          "source": "phrase_mapping",
          "notes": "No ORDER handler"
        },
        {
          "intent": "ORDER_TODAY",
          "category": "unknown",
          "source": "phrase_mapping",
          "notes": "No ORDER handler"
        },
        {
          "intent": "ORDER_FILTER",
          "category": "unknown",
          "source": "equivalent_intents",
          "notes": "No ORDER handler"
        },
        {
          "intent": "ORDER_EXCLUDE_LIST",
          "category": "unknown",
          "source": "equivalent_intents",
          "notes": "No ORDER handler"
        },
        {
          "intent": "ORDER_RANKING",
          "category": "unknown",
          "source": "equivalent_intents",
          "notes": "No ORDER handler"
        },
        {
          "intent": "ORDER_COMPARISON",
          "category": "unknown",
          "source": "equivalent_intents",
          "notes": "No ORDER handler"
        },
        {
          "intent": "ORDER_MOM_ANALYSIS",
          "category": "unknown",
          "source": "equivalent_intents",
          "notes": "No ORDER handler"
        },
        {
          "intent": "ORDER_YOY_ANALYSIS",
          "category": "unknown",
          "source": "equivalent_intents",
          "notes": "No ORDER handler"
        },
        {
          "intent": "ATTENDANCE_QUERY",
          "category": "HR",
          "source": "equivalent_intents",
          "notes": "In HR equivalent group but not in HRIntentHandler switch. ATTENDANCE_STATUS is handled instead."
        },
        {
          "intent": "ATTENDANCE_RECORD",
          "category": "HR",
          "source": "phrase_mapping",
          "notes": "Mapped in phrases but not in HR handler (ATTENDANCE_HISTORY used instead)"
        },
        {
          "intent": "ATTENDANCE_STATS_BY_DEPT",
          "category": "HR",
          "source": "equivalent_intents",
          "notes": "In equivalent group but no switch case (ATTENDANCE_DEPARTMENT handles dept queries)"
        },
        {
          "intent": "ATTENDANCE_RANKING",
          "category": "HR",
          "source": "equivalent_intents",
          "notes": "No switch case in HRIntentHandler"
        },
        {
          "intent": "ATTENDANCE_COMPARISON",
          "category": "HR",
          "source": "phrase_mapping",
          "notes": "No switch case"
        },
        {
          "intent": "ATTENDANCE_MOM_ANALYSIS",
          "category": "HR",
          "source": "phrase_mapping",
          "notes": "No switch case"
        },
        {
          "intent": "ATTENDANCE_YOY_ANALYSIS",
          "category": "HR",
          "source": "phrase_mapping",
          "notes": "No switch case"
        },
        {
          "intent": "MATERIAL_BATCH_CREATE",
          "category": "MATERIAL",
          "source": "phrase_mapping",
          "notes": "Creation mapped in phrases but not in MaterialIntentHandler switch"
        },
        {
          "intent": "MATERIAL_BATCH_DELETE",
          "category": "MATERIAL",
          "source": "equivalent_intents",
          "notes": "In data delete equivalent group but not in MaterialIntentHandler switch"
        },
        {
          "intent": "MATERIAL_STATS",
          "category": "MATERIAL",
          "source": "equivalent_intents",
          "notes": "No switch case"
        },
        {
          "intent": "MATERIAL_RANKING",
          "category": "MATERIAL",
          "source": "equivalent_intents",
          "notes": "No switch case"
        },
        {
          "intent": "MATERIAL_COMPARISON",
          "category": "MATERIAL",
          "source": "equivalent_intents",
          "notes": "No switch case"
        },
        {
          "intent": "MATERIAL_MOM_ANALYSIS",
          "category": "MATERIAL",
          "source": "equivalent_intents",
          "notes": "No switch case"
        },
        {
          "intent": "MATERIAL_YOY_ANALYSIS",
          "category": "MATERIAL",
          "source": "equivalent_intents",
          "notes": "No switch case"
        },
        {
          "intent": "MATERIAL_EXCLUDE_LIST",
          "category": "MATERIAL",
          "source": "equivalent_intents",
          "notes": "No switch case"
        },
        {
          "intent": "QUALITY_COMPARISON",
          "category": "QUALITY",
          "source": "equivalent_intents",
          "notes": "In quality equivalent group but no switch case"
        },
        {
          "intent": "QUALITY_MOM_ANALYSIS",
          "category": "QUALITY",
          "source": "equivalent_intents",
          "notes": "No switch case"
        },
        {
          "intent": "QUALITY_YOY_ANALYSIS",
          "category": "QUALITY",
          "source": "equivalent_intents",
          "notes": "No switch case"
        },
        {
          "intent": "QUALITY_RESULT",
          "category": "QUALITY",
          "source": "equivalent_intents",
          "notes": "In quality equivalent group but not in handler"
        },
        {
          "intent": "QUALITY_CHECK_LIST",
          "category": "QUALITY",
          "source": "equivalent_intents",
          "notes": "No switch case"
        },
        {
          "intent": "QUALITY_INSPECTION_RESULT_QUERY",
          "category": "QUALITY",
          "source": "equivalent_intents",
          "notes": "No switch case"
        },
        {
          "intent": "SHIPMENT_LIST",
          "category": "SHIPMENT",
          "source": "equivalent_intents",
          "notes": "In shipment group but no switch case (SHIPMENT_QUERY is used instead)"
        },
        {
          "intent": "SHIPMENT_RECORD_QUERY",
          "category": "SHIPMENT",
          "source": "equivalent_intents",
          "notes": "No switch case"
        },
        {
          "intent": "SHIPMENT_RANKING",
          "category": "SHIPMENT",
          "source": "equivalent_intents",
          "notes": "No switch case"
        },
        {
          "intent": "SHIPMENT_COMPARISON",
          "category": "SHIPMENT",
          "source": "equivalent_intents",
          "notes": "No switch case"
        },
        {
          "intent": "SHIPMENT_ANOMALY",
          "category": "SHIPMENT",
          "source": "equivalent_intents",
          "notes": "No switch case"
        },
        {
          "intent": "TRACE_GENERATE",
          "category": "SHIPMENT",
          "source": "phrase_mapping",
          "notes": "No switch case for trace generation"
        },
        {
          "intent": "SCHEDULING_SET_MANUAL",
          "category": "SYSTEM",
          "source": "phrase_mapping",
          "notes": "Actually IS handled via startsWith('SCHEDULING_SET_') pattern in SystemIntentHandler"
        },
        {
          "intent": "CONFIG_RESET",
          "category": "SYSTEM",
          "source": "phrase_mapping",
          "notes": "No handler"
        },
        {
          "intent": "USER_DELETE",
          "category": "USER",
          "source": "phrase_mapping",
          "notes": "No switch case in UserIntentHandler (only CREATE, DISABLE, ROLE_ASSIGN)"
        },
        {
          "intent": "DATA_BATCH_DELETE",
          "category": "DATA_OP",
          "source": "equivalent_intents",
          "notes": "In data delete equivalent group but no dedicated handler (BATCH_DELETE is handled)"
        },
        {
          "intent": "ALERT_QUERY",
          "category": "ALERT",
          "source": "equivalent_intents",
          "notes": "In alert query group, no switch case (ALERT_LIST handles this use case)"
        },
        {
          "intent": "FORM_SUGGESTION",
          "category": "FORM",
          "source": "sql_migration",
          "notes": "In SQL migration config but FormIntentHandler handles all FORM intents generically"
        }
      ],

      "smartbi_intents_python_handled": {
        "description": "These 30 SmartBI intents are in category 'SMARTBI' and handled by the Python service at port 8083, not Java handlers. There is NO Java handler for category 'SMARTBI'.",
        "intents": [
          "sales_overview", "sales_ranking", "sales_trend", "dept_performance", "region_analysis",
          "finance_overview", "profit_analysis", "cost_analysis", "receivable",
          "product_analysis", "inventory",
          "oee_overview", "production_efficiency", "equipment_utilization",
          "quality_summary", "defect_analysis", "rework_cost",
          "inventory_health", "expiry_risk", "loss_analysis",
          "sales_funnel", "customer_rfm", "product_abc",
          "procurement_overview", "supplier_evaluation", "purchase_cost",
          "cash_flow", "financial_ratios",
          "compare_period", "compare_dept", "compare_region",
          "drill_down", "forecast", "aggregate_summary"
        ],
        "python_endpoint": "http://localhost:8083/api/smartbi/*",
        "notes": "SmartBI intent codes use snake_case (not UPPER_SNAKE_CASE like Java-handled intents). When these are matched, the executor service likely routes to Python via REST call rather than local handler."
      },

      "sql_only_intents": {
        "description": "These intents are defined in SQL migrations but have unknown handler status. They may be handled by the generic DATA_OP/FORM/ANALYSIS/SCHEDULE/SYSTEM handler routing.",
        "intents": [
          {"code": "COST_ANALYSIS", "category": "ANALYSIS", "handler_class": "N/A"},
          {"code": "QUALITY_ANALYSIS", "category": "ANALYSIS", "handler_class": "N/A"},
          {"code": "PRODUCTION_ANALYSIS", "category": "ANALYSIS", "handler_class": "N/A"},
          {"code": "INVENTORY_ANALYSIS", "category": "ANALYSIS", "handler_class": "N/A"},
          {"code": "TREND_PREDICTION", "category": "ANALYSIS", "handler_class": "N/A"},
          {"code": "CAPACITY_PLANNING", "category": "SCHEDULE", "handler_class": "N/A"},
          {"code": "RESOURCE_ALLOCATION", "category": "SCHEDULE", "handler_class": "N/A"},
          {"code": "SCHEDULE_OPTIMIZATION", "category": "SCHEDULE", "handler_class": "N/A"},
          {"code": "URGENT_INSERT", "category": "SCHEDULE", "handler_class": "N/A"},
          {"code": "SYSTEM_CONFIG", "category": "SYSTEM", "handler_class": "N/A"},
          {"code": "SYSTEM_REPORT", "category": "SYSTEM", "handler_class": "N/A"},
          {"code": "USER_QUERY", "category": "SYSTEM", "handler_class": "N/A"}
        ],
        "notes": "ANALYSIS and SCHEDULE categories have NO handler implementations at all. These intents will fail with 'no handler found' at runtime."
      }
    }
  },

  "missing_handler_categories": {
    "description": "Intent categories referenced in SQL or phrase mappings that have NO IntentHandler implementation",
    "categories": [
      {
        "category": "ANALYSIS",
        "intents": ["COST_ANALYSIS", "QUALITY_ANALYSIS", "PRODUCTION_ANALYSIS", "INVENTORY_ANALYSIS", "TREND_PREDICTION"],
        "impact": "HIGH - Common analysis requests will fail",
        "notes": "No handler registered for ANALYSIS category. handlerMap.get('ANALYSIS') returns null."
      },
      {
        "category": "SCHEDULE",
        "intents": ["CAPACITY_PLANNING", "RESOURCE_ALLOCATION", "SCHEDULE_OPTIMIZATION", "URGENT_INSERT"],
        "impact": "MEDIUM - Scheduling optimization requests fail",
        "notes": "No handler for SCHEDULE. SystemIntentHandler handles SCHEDULING_SET_* but not SCHEDULE category."
      },
      {
        "category": "SMARTBI",
        "intents": "30 SmartBI intents (see smartbi_intents_python_handled)",
        "impact": "LOW - Handled by Python, not Java",
        "notes": "By design, SmartBI routes to Python service. But if intent_category=SMARTBI hits the Java executor, it will fail."
      },
      {
        "category": "ORDER (no category exists)",
        "intents": ["ORDER_LIST", "ORDER_CREATE", "ORDER_CANCEL", "ORDER_DELETE", "ORDER_DETAIL", "ORDER_STATUS", "ORDER_TODAY", "ORDER_STATS", "ORDER_RANKING", "ORDER_COMPARISON", "ORDER_MOM_ANALYSIS", "ORDER_YOY_ANALYSIS", "ORDER_FILTER", "ORDER_EXCLUDE_LIST"],
        "impact": "HIGH - 14 order intents with no handler",
        "notes": "Order intents are mapped in phrases but no ORDER category handler exists. These intents likely have no intent_category assignment in the DB either."
      },
      {
        "category": "EQUIPMENT (no dedicated category)",
        "intents": ["EQUIPMENT_STATUS", "EQUIPMENT_STATUS_QUERY", "EQUIPMENT_STATS", "EQUIPMENT_LIST", "EQUIPMENT_START", "EQUIPMENT_STOP", "EQUIPMENT_DETAIL", "EQUIPMENT_CONTROL", "EQUIPMENT_QUERY", "EQUIPMENT_STATUS_UPDATE", "EQUIPMENT_ALERT_LIST", "EQUIPMENT_ALERT_STATS", "EQUIPMENT_COMPARISON"],
        "impact": "HIGH - 13 equipment intents with no handler",
        "notes": "ConfigIntentHandler handles EQUIPMENT_MAINTENANCE only. Equipment status/list/control intents have no category or handler."
      },
      {
        "category": "PROCESSING (no dedicated category)",
        "intents": ["PROCESSING_BATCH_LIST", "PROCESSING_BATCH_CREATE", "PROCESSING_BATCH_DETAIL", "PROCESSING_BATCH_START", "PROCESSING_BATCH_PAUSE", "PROCESSING_BATCH_RESUME", "PROCESSING_BATCH_CANCEL", "PROCESSING_BATCH_COMPLETE", "PROCESSING_BATCH_STOP", "PROCESSING_BATCH_TIMELINE", "PROCESSING_WORKER_ASSIGN", "PRODUCTION_STATUS_QUERY", "PROCESSING_STATS", "PROCESSING_RANKING", "PROCESSING_COMPARISON", "PROCESSING_MOM_ANALYSIS", "PROCESSING_YOY_ANALYSIS"],
        "impact": "CRITICAL - 17 processing/production intents with no handler",
        "notes": "Production/processing is the core business domain. No PROCESSING handler exists despite 17 intent codes being recognized."
      }
    ]
  },

  "handler_category_mapping": {
    "ALERT": "AlertIntentHandler",
    "CAMERA": "CameraIntentHandler",
    "CONFIG": "ConfigIntentHandler",
    "CRM": "CRMIntentHandler",
    "DATA_OP": "DataOperationIntentHandler",
    "DECORATION": "DecorationIntentHandler",
    "FORM": "FormIntentHandler",
    "HR": "HRIntentHandler",
    "MATERIAL": "MaterialIntentHandler",
    "META": "MetaIntentHandler",
    "PAGE_DESIGN": "PageDesignIntentHandler",
    "QUALITY": "QualityIntentHandler",
    "REPORT": "ReportIntentHandler",
    "SCALE": "ScaleIntentHandler",
    "SHIPMENT": "ShipmentIntentHandler",
    "SYSTEM": "SystemIntentHandler",
    "USER": "UserIntentHandler",
    "ANALYSIS": null,
    "SCHEDULE": null,
    "SMARTBI": null,
    "ORDER": null,
    "EQUIPMENT": null,
    "PROCESSING": null
  },

  "critical_gaps": [
    {
      "gap": "No PROCESSING/PRODUCTION handler",
      "severity": "CRITICAL",
      "affected_intents": 17,
      "description": "Production batch management (create, start, pause, resume, cancel, complete, list, detail, status) has no execution handler. These are among the most commonly mapped phrases in IntentKnowledgeBase."
    },
    {
      "gap": "No EQUIPMENT handler",
      "severity": "HIGH",
      "affected_intents": 13,
      "description": "Equipment status, list, start/stop, control intents have no handler. Only EQUIPMENT_MAINTENANCE is handled (by ConfigIntentHandler)."
    },
    {
      "gap": "No ORDER handler",
      "severity": "HIGH",
      "affected_intents": 14,
      "description": "Order CRUD and analytics intents have no handler at all."
    },
    {
      "gap": "No ANALYSIS handler",
      "severity": "MEDIUM",
      "affected_intents": 5,
      "description": "Cost/quality/production/inventory analysis and trend prediction have no handler. These SQL-defined intents will fail."
    },
    {
      "gap": "No SCHEDULE handler",
      "severity": "LOW",
      "affected_intents": 4,
      "description": "Capacity planning, resource allocation, schedule optimization have no handler. SystemIntentHandler handles scheduling mode toggles but not full scheduling operations."
    }
  ]
}
