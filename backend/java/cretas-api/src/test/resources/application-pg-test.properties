# ==========================================
# PostgreSQL Test Configuration
# ==========================================
# 用于运行单元测试和集成测试

# ==========================================
# 测试数据库连接
# ==========================================
spring.datasource.driver-class-name=org.postgresql.Driver
spring.datasource.url=jdbc:postgresql://localhost:5432/cretas_test
spring.datasource.username=cretas_test
spring.datasource.password=test_password

# ==========================================
# Hibernate 配置
# ==========================================
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQL13Dialect
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQL13Dialect
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# ==========================================
# 测试专用配置
# ==========================================
spring.jpa.properties.hibernate.jdbc.batch_size=50
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# ==========================================
# Flyway 配置
# ==========================================
# 禁用 Flyway (测试时手动初始化)
spring.flyway.enabled=false

# ==========================================
# 日志级别
# ==========================================
logging.level.root=WARN
logging.level.com.cretas.aims=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# ==========================================
# JWT 配置 (测试用)
# ==========================================
cretas.jwt.secret=test-secret-key-for-unit-tests-only
cretas.jwt.expiration=3600000
cretas.jwt.refresh-expiration=86400000

# ==========================================
# DJL Embedding 配置 (测试时禁用)
# ==========================================
embedding.model-path=
embedding.enabled=false

# ==========================================
# DashScope 配置 (测试时禁用)
# ==========================================
dashscope.api-key=test-api-key
dashscope.enabled=false
