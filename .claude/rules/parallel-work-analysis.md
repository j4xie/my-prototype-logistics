# 并行工作分析规则

## 要求

每次制定计划时，**必须**在计划末尾添加「并行工作建议」章节，分析以下两点：

---

## 1. Subagent 并行（单 Chat 内）

分析当前任务是否可以在同一个 chat 中使用多个 subagent 并行工作：

| 适合并行 | 不适合并行 |
|----------|------------|
| 多个独立模块/文件的修改 | 任务有严格依赖顺序 |
| 探索不同代码区域 | 后续步骤依赖前一步结果 |
| 同时运行测试和代码审查 | 需要人工确认后才能继续 |

**输出格式**：
```
### Subagent 并行建议
- 可并行: ✅ / ❌
- 建议: [具体说明哪些任务可以同时进行]
```

---

## 2. 多 Chat 窗口并行（用户手动）

分析是否适合用户手动打开多个 Claude Code 窗口同时工作：

| 适合多窗口 | 不适合多窗口 |
|------------|--------------|
| 前后端完全独立开发 | 会修改相同文件 |
| 不同功能模块互不影响 | 有 git 冲突风险 |
| 文档编写 + 代码开发 | 需要共享上下文 |

**输出格式**：
```
### 多 Chat 并行建议
- 可并行: ✅ / ❌
- 建议: [说明如何分配任务到不同窗口，或为何不建议]
- 注意: [潜在的冲突风险]
```

---

## 示例

```markdown
## 并行工作建议

### Subagent 并行建议
- 可并行: ✅
- 建议: 可同时启动 3 个 agent 分别处理：
  1. 后端 API 修改
  2. 前端页面更新
  3. 单元测试编写

### 多 Chat 并行建议
- 可并行: ✅
- 建议: 可开两个窗口：
  - 窗口1: 处理后端 Java 代码
  - 窗口2: 处理前端 React Native 代码
- 注意: 避免同时修改 types/ 目录下的共享类型文件
```
