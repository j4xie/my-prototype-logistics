<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>企业工作台 - 中国牛产业数智云平台</title>
  <link rel="stylesheet" href="../../assets/css/variables.css">
  <link rel="stylesheet" href="../../assets/css/common.css">
  <link rel="stylesheet" href="../../assets/css/mobile.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mdi/font@7.2.96/css/materialdesignicons.min.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Microsoft YaHei', sans-serif;
      background: #F5F5F5;
      min-height: 100vh;
      padding-bottom: 30px;
    }

    /* 顶部导航 */
    .top-nav {
      background: white;
      padding: 48px 16px 16px;
      display: flex;
      align-items: center;
      gap: 12px;
      border-bottom: 1px solid #EEEEEE;
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .back-btn {
      color: #212121;
      font-size: 24px;
      text-decoration: none;
      display: flex;
      align-items: center;
      justify-content: center;
      width: 36px;
      height: 36px;
    }

    .nav-title {
      flex: 1;
      color: #212121;
      font-size: 18px;
      font-weight: 600;
    }

    /* 企业头部 */
    .enterprise-header {
      background: white;
      padding: 20px;
      margin-bottom: 12px;
    }

    .enterprise-row {
      display: flex;
      align-items: center;
      gap: 14px;
    }

    .enterprise-logo {
      width: 52px;
      height: 52px;
      border-radius: 10px;
      background: #E8F5E9;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 26px;
      color: #2E7D32;
    }

    .enterprise-info {
      flex: 1;
    }

    .enterprise-name {
      font-size: 17px;
      font-weight: 600;
      color: #212121;
      margin-bottom: 6px;
    }

    .enterprise-meta {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .meta-tag {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      font-size: 12px;
      padding: 3px 8px;
      border-radius: 4px;
      background: #E8F5E9;
      color: #2E7D32;
    }

    .meta-tag.warning {
      background: #FFF3E0;
      color: #E65100;
    }

    /* 统计卡片 */
    .stats-card {
      background: white;
      margin: 0 0 12px;
      padding: 20px;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
    }

    .stat-item {
      text-align: center;
      text-decoration: none;
      color: inherit;
      padding: 8px 0;
      position: relative;
    }

    .stat-item:not(:last-child)::after {
      content: '';
      position: absolute;
      right: 0;
      top: 50%;
      transform: translateY(-50%);
      width: 1px;
      height: 30px;
      background: #EEEEEE;
    }

    .stat-number {
      font-size: 26px;
      font-weight: 600;
      color: #212121;
      margin-bottom: 4px;
    }

    .stat-number.highlight {
      color: #2E7D32;
    }

    .stat-label {
      font-size: 13px;
      color: #757575;
    }

    /* 功能分组 */
    .section {
      background: white;
      margin-bottom: 12px;
    }

    .section-header {
      padding: 16px 20px 12px;
      font-size: 15px;
      font-weight: 600;
      color: #212121;
    }

    /* 功能列表 - 紧凑样式 */
    .func-list {
      padding: 0 12px 12px;
    }

    .func-row {
      display: flex;
      gap: 8px;
    }

    .func-item {
      flex: 1;
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 14px 12px;
      background: #FAFAFA;
      border-radius: 8px;
      text-decoration: none;
      color: inherit;
      transition: background 0.2s;
    }

    .func-item:active {
      background: #F0F0F0;
    }

    .func-icon {
      width: 36px;
      height: 36px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      flex-shrink: 0;
    }

    .func-icon.green { background: #E8F5E9; color: #2E7D32; }
    .func-icon.blue { background: #E3F2FD; color: #1565C0; }
    .func-icon.orange { background: #FFF3E0; color: #E65100; }
    .func-icon.purple { background: #F3E5F5; color: #7B1FA2; }
    .func-icon.teal { background: #E0F2F1; color: #00796B; }

    .func-text {
      flex: 1;
      min-width: 0;
    }

    .func-name {
      font-size: 14px;
      font-weight: 500;
      color: #212121;
    }

    .func-desc {
      font-size: 11px;
      color: #9E9E9E;
      margin-top: 2px;
    }

    .func-badge {
      background: #FF5722;
      color: white;
      font-size: 10px;
      min-width: 18px;
      height: 18px;
      border-radius: 9px;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0 5px;
    }

    /* 简洁网格 - 用于更多功能 */
    .grid-compact {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      padding: 8px 16px 16px;
      gap: 16px;
    }

    .grid-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      text-decoration: none;
      color: inherit;
    }

    .grid-icon {
      width: 44px;
      height: 44px;
      border-radius: 22px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      background: #F5F5F5;
      color: #616161;
      transition: all 0.2s;
    }

    .grid-item:active .grid-icon {
      transform: scale(0.95);
      background: #EEEEEE;
    }

    .grid-name {
      font-size: 12px;
      color: #616161;
    }

    /* 快捷入口横幅 */
    .quick-banner {
      display: flex;
      gap: 12px;
      padding: 0 16px;
      margin-bottom: 12px;
    }

    .quick-btn {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 14px;
      border-radius: 10px;
      text-decoration: none;
      color: white;
      font-size: 14px;
      font-weight: 500;
    }

    .quick-btn.primary {
      background: linear-gradient(135deg, #2E7D32 0%, #1B5E20 100%);
    }

    .quick-btn.secondary {
      background: linear-gradient(135deg, #1565C0 0%, #0D47A1 100%);
    }

    .quick-btn .mdi {
      font-size: 20px;
    }

    /* VIP横条 */
    .vip-bar {
      display: flex;
      align-items: center;
      gap: 12px;
      margin: 0 16px 12px;
      padding: 14px 16px;
      background: linear-gradient(135deg, #FFA726 0%, #FB8C00 100%);
      border-radius: 10px;
      color: white;
    }

    .vip-bar .mdi {
      font-size: 22px;
    }

    .vip-bar-text {
      flex: 1;
      font-size: 14px;
    }

    .vip-bar-btn {
      background: rgba(255,255,255,0.25);
      border: none;
      padding: 6px 14px;
      border-radius: 14px;
      color: white;
      font-size: 12px;
      font-weight: 500;
    }

    /* Toast */
    .toast {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(0, 0, 0, 0.75);
      color: white;
      padding: 12px 24px;
      border-radius: 8px;
      font-size: 14px;
      z-index: 1000;
      opacity: 0;
      transition: opacity 0.3s;
      pointer-events: none;
    }

    .toast.show {
      opacity: 1;
    }

    /* MDI 图标 */
    .mdi {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      vertical-align: middle;
      line-height: 1;
    }
  </style>
</head>

<body>
  <!-- 顶部导航 -->
  <div class="top-nav">
    <a href="center.html" class="back-btn"><i class="mdi mdi-arrow-left"></i></a>
    <div class="nav-title">企业工作台</div>
  </div>

  <!-- 企业头部 -->
  <div class="enterprise-header">
    <div class="enterprise-row">
      <div class="enterprise-logo"><i class="mdi mdi-office-building"></i></div>
      <div class="enterprise-info">
        <div class="enterprise-name" id="enterpriseName">我的企业</div>
        <div class="enterprise-meta">
          <span class="meta-tag" id="verifyTag"><i class="mdi mdi-check-circle"></i> 已认证</span>
        </div>
      </div>
    </div>
  </div>

  <!-- 数据统计 -->
  <div class="stats-card">
    <div class="stats-grid">
      <a href="my-publish.html" class="stat-item">
        <div class="stat-number" id="statPublish">0</div>
        <div class="stat-label">发布中</div>
      </a>
      <a href="orders.html" class="stat-item">
        <div class="stat-number highlight" id="statPending">0</div>
        <div class="stat-label">待处理</div>
      </a>
      <a href="inquiries.html" class="stat-item">
        <div class="stat-number" id="statInquiry">0</div>
        <div class="stat-label">询价</div>
      </a>
      <a href="deals.html" class="stat-item">
        <div class="stat-number" id="statDeal">0</div>
        <div class="stat-label">本月成交</div>
      </a>
    </div>
  </div>

  <!-- 快捷操作 -->
  <div class="quick-banner">
    <a href="../cattle/publish.html" class="quick-btn primary">
      <i class="mdi mdi-plus-circle"></i>
      <span>发布信息</span>
    </a>
    <a href="../trace/scan.html" class="quick-btn secondary">
      <i class="mdi mdi-qrcode-scan"></i>
      <span>扫码溯源</span>
    </a>
  </div>

  <!-- 业务管理 -->
  <div class="section">
    <div class="section-header">业务管理</div>
    <div class="func-list">
      <div class="func-row" style="margin-bottom: 8px;">
        <a href="my-publish.html" class="func-item">
          <div class="func-icon green"><i class="mdi mdi-clipboard-list"></i></div>
          <div class="func-text">
            <div class="func-name">我的发布</div>
            <div class="func-desc">管理发布的信息</div>
          </div>
        </a>
        <a href="orders.html" class="func-item">
          <div class="func-icon orange"><i class="mdi mdi-package-variant"></i></div>
          <div class="func-text">
            <div class="func-name">订单管理</div>
            <div class="func-desc">查看处理订单</div>
          </div>
          <span class="func-badge" id="orderBadge" style="display:none;">2</span>
        </a>
      </div>
      <div class="func-row">
        <a href="inquiries.html" class="func-item">
          <div class="func-icon blue"><i class="mdi mdi-message-text"></i></div>
          <div class="func-text">
            <div class="func-name">询价消息</div>
            <div class="func-desc">买家询价记录</div>
          </div>
          <span class="func-badge" id="inquiryBadge" style="display:none;">5</span>
        </a>
        <a href="deals.html" class="func-item">
          <div class="func-icon purple"><i class="mdi mdi-handshake"></i></div>
          <div class="func-text">
            <div class="func-name">交易记录</div>
            <div class="func-desc">历史成交订单</div>
          </div>
        </a>
      </div>
    </div>
  </div>

  <!-- 企业管理 -->
  <div class="section">
    <div class="section-header">企业管理</div>
    <div class="func-list">
      <div class="func-row" style="margin-bottom: 8px;">
        <a href="enterprise-info.html" class="func-item">
          <div class="func-icon green"><i class="mdi mdi-office-building"></i></div>
          <div class="func-text">
            <div class="func-name">企业信息</div>
            <div class="func-desc">编辑企业资料</div>
          </div>
        </a>
        <a href="staff.html" class="func-item">
          <div class="func-icon blue"><i class="mdi mdi-account-group"></i></div>
          <div class="func-text">
            <div class="func-name">员工管理</div>
            <div class="func-desc">子账号权限</div>
          </div>
        </a>
      </div>
      <div class="func-row">
        <a href="verify.html" class="func-item">
          <div class="func-icon orange"><i class="mdi mdi-shield-check"></i></div>
          <div class="func-text">
            <div class="func-name">认证管理</div>
            <div class="func-desc">资质认证</div>
          </div>
        </a>
        <a href="reports.html" class="func-item">
          <div class="func-icon teal"><i class="mdi mdi-chart-bar"></i></div>
          <div class="func-text">
            <div class="func-name">数据报表</div>
            <div class="func-desc">经营分析</div>
          </div>
        </a>
      </div>
    </div>
  </div>

  <!-- VIP横条 -->
  <div class="vip-bar" onclick="showVIP()">
    <i class="mdi mdi-crown"></i>
    <span class="vip-bar-text">开通VIP · 享更多曝光</span>
    <button class="vip-bar-btn">了解详情</button>
  </div>

  <!-- 更多功能 -->
  <div class="section">
    <div class="section-header">更多功能</div>
    <div class="grid-compact">
      <a href="favorites.html" class="grid-item">
        <div class="grid-icon"><i class="mdi mdi-heart"></i></div>
        <div class="grid-name">收藏</div>
      </a>
      <a href="contacts.html" class="grid-item">
        <div class="grid-icon"><i class="mdi mdi-account-box"></i></div>
        <div class="grid-name">联系人</div>
      </a>
      <a href="../trace/history.html" class="grid-item">
        <div class="grid-icon"><i class="mdi mdi-history"></i></div>
        <div class="grid-name">溯源记录</div>
      </a>
      <a href="../ai-rag/chat.html" class="grid-item">
        <div class="grid-icon"><i class="mdi mdi-robot"></i></div>
        <div class="grid-name">AI助手</div>
      </a>
      <a href="wallet.html" class="grid-item">
        <div class="grid-icon"><i class="mdi mdi-wallet"></i></div>
        <div class="grid-name">钱包</div>
      </a>
      <a href="invoice.html" class="grid-item">
        <div class="grid-icon"><i class="mdi mdi-receipt"></i></div>
        <div class="grid-name">发票</div>
      </a>
      <a href="contract.html" class="grid-item">
        <div class="grid-icon"><i class="mdi mdi-file-sign"></i></div>
        <div class="grid-name">合同</div>
      </a>
      <a href="settings.html" class="grid-item">
        <div class="grid-icon"><i class="mdi mdi-cog"></i></div>
        <div class="grid-name">设置</div>
      </a>
    </div>
  </div>

  <!-- Toast -->
  <div class="toast" id="toast"></div>

  <!-- JS -->
  <script src="../../assets/js/utils.js"></script>
  <script src="../../assets/js/stateManager.js"></script>
  <script src="../../assets/js/mockData.js"></script>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      loadData();
    });

    function loadData() {
      const user = globalState.get('user');
      if (!user) {
        window.location.href = '../auth/login.html';
        return;
      }

      // 企业名称
      document.getElementById('enterpriseName').textContent = user.enterpriseName || '我的企业';

      // 模拟数据
      document.getElementById('statPublish').textContent = Math.floor(Math.random() * 10) + 1;
      document.getElementById('statPending').textContent = Math.floor(Math.random() * 5);
      document.getElementById('statInquiry').textContent = Math.floor(Math.random() * 15);
      document.getElementById('statDeal').textContent = Math.floor(Math.random() * 8);

      // 徽章
      const pendingOrders = Math.floor(Math.random() * 3);
      if (pendingOrders > 0) {
        document.getElementById('orderBadge').textContent = pendingOrders;
        document.getElementById('orderBadge').style.display = 'flex';
      }

      const pendingInquiry = Math.floor(Math.random() * 6);
      if (pendingInquiry > 0) {
        document.getElementById('inquiryBadge').textContent = pendingInquiry;
        document.getElementById('inquiryBadge').style.display = 'flex';
      }
    }

    function showVIP() {
      showToast('VIP功能即将上线');
    }

    function showToast(msg) {
      const t = document.getElementById('toast');
      t.textContent = msg;
      t.classList.add('show');
      setTimeout(() => t.classList.remove('show'), 2000);
    }
  </script>
</body>

</html>
