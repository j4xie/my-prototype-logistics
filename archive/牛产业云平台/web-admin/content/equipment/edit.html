<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>编辑设备 - 牛产业云平台</title>
  <link rel="stylesheet" href="../../css/variables.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mdi/font@7.4.47/css/materialdesignicons.min.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      background: #f5f7fa;
      min-height: 100vh;
    }

    .admin-layout {
      display: flex;
      min-height: 100vh;
    }

    /* 侧边栏 */
    .sidebar {
      width: 280px;
      background: linear-gradient(180deg, #1a1a2e 0%, #16213e 100%);
      color: #fff;
      position: fixed;
      height: 100vh;
      overflow-y: auto;
      z-index: 100;
    }

    .sidebar-header {
      padding: 24px;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }

    .sidebar-logo {
      display: flex;
      align-items: center;
      gap: 12px;
      font-size: 20px;
      font-weight: 600;
    }

    .sidebar-logo i {
      font-size: 32px;
      color: var(--primary-color, #666fee);
    }

    .sidebar-nav {
      padding: 16px 0;
    }

    .nav-group {
      margin-bottom: 8px;
    }

    .nav-group-title {
      padding: 12px 24px;
      font-size: 12px;
      color: rgba(255,255,255,0.5);
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .nav-item {
      display: flex;
      align-items: center;
      padding: 14px 24px;
      color: rgba(255,255,255,0.8);
      text-decoration: none;
      transition: all 0.2s;
      cursor: pointer;
    }

    .nav-item:hover {
      background: rgba(255,255,255,0.1);
      color: #fff;
    }

    .nav-item.active {
      background: linear-gradient(90deg, var(--primary-color, #666fee), transparent);
      color: #fff;
      border-left: 3px solid var(--primary-color, #666fee);
    }

    .nav-item i {
      margin-right: 12px;
      font-size: 20px;
      width: 24px;
      text-align: center;
    }

    .nav-sub-menu {
      display: none;
      background: rgba(0,0,0,0.2);
    }

    .nav-sub-menu.open {
      display: block;
    }

    .nav-sub-item {
      display: block;
      padding: 12px 24px 12px 60px;
      color: rgba(255,255,255,0.6);
      text-decoration: none;
      transition: all 0.2s;
    }

    .nav-sub-item:hover,
    .nav-sub-item.active {
      color: #fff;
      background: rgba(255,255,255,0.05);
    }

    /* 主内容区 */
    .main-content {
      flex: 1;
      margin-left: 280px;
    }

    /* 顶部导航 */
    .top-header {
      background: #fff;
      height: 64px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 32px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      position: sticky;
      top: 0;
      z-index: 50;
    }

    .breadcrumb {
      display: flex;
      align-items: center;
      gap: 8px;
      color: #666;
    }

    .breadcrumb a {
      color: var(--primary-color, #666fee);
      text-decoration: none;
    }

    .header-actions {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .user-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--primary-color, #666fee), #8b5cf6);
      color: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
    }

    /* 页面内容 */
    .page-content {
      padding: 24px 32px;
    }

    .page-header {
      margin-bottom: 24px;
    }

    .back-link {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      color: #666;
      text-decoration: none;
      margin-bottom: 12px;
    }

    .back-link:hover {
      color: var(--primary-color, #666fee);
    }

    .page-title {
      font-size: 24px;
      font-weight: 600;
      color: #1a1a2e;
    }

    .page-subtitle {
      color: #666;
      margin-top: 4px;
    }

    /* 表单布局 */
    .form-layout {
      display: grid;
      grid-template-columns: 1fr 360px;
      gap: 24px;
    }

    .form-main {
      display: flex;
      flex-direction: column;
      gap: 24px;
    }

    .form-sidebar {
      display: flex;
      flex-direction: column;
      gap: 24px;
    }

    /* 卡片 */
    .card {
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.04);
      overflow: hidden;
    }

    .card-header {
      padding: 20px 24px;
      border-bottom: 1px solid #f0f0f0;
    }

    .card-title {
      font-size: 16px;
      font-weight: 600;
      color: #1a1a2e;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .card-title i {
      color: var(--primary-color, #666fee);
    }

    .card-body {
      padding: 24px;
    }

    /* 表单样式 */
    .form-group {
      margin-bottom: 20px;
    }

    .form-group:last-child {
      margin-bottom: 0;
    }

    .form-label {
      display: block;
      font-size: 14px;
      font-weight: 500;
      color: #333;
      margin-bottom: 8px;
    }

    .form-label .required {
      color: #ef4444;
      margin-left: 4px;
    }

    .form-input,
    .form-select,
    .form-textarea {
      width: 100%;
      padding: 12px 16px;
      border: 1px solid #e2e8f0;
      border-radius: 8px;
      font-size: 14px;
      outline: none;
      transition: all 0.2s;
    }

    .form-input:focus,
    .form-select:focus,
    .form-textarea:focus {
      border-color: var(--primary-color, #666fee);
      box-shadow: 0 0 0 3px rgba(102, 111, 238, 0.1);
    }

    .form-textarea {
      resize: vertical;
      min-height: 120px;
    }

    .form-row {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
    }

    .form-row-3 {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 16px;
    }

    .form-help {
      font-size: 12px;
      color: #999;
      margin-top: 6px;
    }

    /* 图片上传 */
    .image-upload {
      border: 2px dashed #e2e8f0;
      border-radius: 12px;
      padding: 32px;
      text-align: center;
      cursor: pointer;
      transition: all 0.2s;
    }

    .image-upload:hover {
      border-color: var(--primary-color, #666fee);
      background: #fafbfc;
    }

    .image-upload i {
      font-size: 48px;
      color: #ccc;
      margin-bottom: 12px;
    }

    .image-upload p {
      color: #666;
      margin-bottom: 8px;
    }

    .image-upload span {
      font-size: 12px;
      color: #999;
    }

    .image-list {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 12px;
      margin-top: 16px;
    }

    .image-item {
      aspect-ratio: 1;
      border-radius: 8px;
      background: #f0f0f0;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .image-item i {
      font-size: 32px;
      color: #999;
    }

    .image-item .remove-btn {
      position: absolute;
      top: -8px;
      right: -8px;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: #ef4444;
      color: #fff;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* 规格参数编辑 */
    .spec-editor {
      border: 1px solid #e2e8f0;
      border-radius: 8px;
      overflow: hidden;
    }

    .spec-row {
      display: grid;
      grid-template-columns: 1fr 1fr 40px;
      gap: 0;
      border-bottom: 1px solid #e2e8f0;
    }

    .spec-row:last-child {
      border-bottom: none;
    }

    .spec-row input {
      border: none;
      padding: 12px 16px;
      font-size: 14px;
      outline: none;
    }

    .spec-row input:first-child {
      border-right: 1px solid #e2e8f0;
      background: #fafbfc;
    }

    .spec-row button {
      border: none;
      background: transparent;
      color: #999;
      cursor: pointer;
      transition: color 0.2s;
    }

    .spec-row button:hover {
      color: #ef4444;
    }

    .add-spec-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 12px;
      background: #fafbfc;
      border: none;
      width: 100%;
      cursor: pointer;
      color: var(--primary-color, #666fee);
      font-size: 14px;
      transition: background 0.2s;
    }

    .add-spec-btn:hover {
      background: #f0f0f0;
    }

    /* 厂商选择 */
    .manufacturer-select {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
    }

    .manufacturer-option {
      border: 2px solid #e2e8f0;
      border-radius: 8px;
      padding: 16px;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .manufacturer-option:hover {
      border-color: var(--primary-color, #666fee);
    }

    .manufacturer-option.selected {
      border-color: var(--primary-color, #666fee);
      background: #eef2ff;
    }

    .manufacturer-option input {
      display: none;
    }

    .manufacturer-icon {
      width: 40px;
      height: 40px;
      border-radius: 8px;
      background: #f0f0f0;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #666;
    }

    .manufacturer-info h4 {
      font-size: 14px;
      font-weight: 500;
      color: #1a1a2e;
    }

    .manufacturer-info p {
      font-size: 12px;
      color: #999;
    }

    /* 开关 */
    .switch-group {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px 0;
      border-bottom: 1px solid #f0f0f0;
    }

    .switch-group:last-child {
      border-bottom: none;
    }

    .switch-info h4 {
      font-size: 14px;
      font-weight: 500;
      color: #333;
    }

    .switch-info p {
      font-size: 12px;
      color: #999;
      margin-top: 2px;
    }

    .switch {
      width: 48px;
      height: 28px;
      background: #e2e8f0;
      border-radius: 14px;
      position: relative;
      cursor: pointer;
      transition: background 0.2s;
    }

    .switch.active {
      background: var(--primary-color, #666fee);
    }

    .switch::after {
      content: '';
      position: absolute;
      width: 24px;
      height: 24px;
      background: #fff;
      border-radius: 50%;
      top: 2px;
      left: 2px;
      transition: left 0.2s;
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }

    .switch.active::after {
      left: 22px;
    }

    /* 保修设置 */
    .warranty-settings {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
    }

    /* 提交按钮 */
    .form-actions {
      display: flex;
      gap: 12px;
      padding: 24px;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.04);
    }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 12px 24px;
      border-radius: 8px;
      font-size: 14px;
      cursor: pointer;
      text-decoration: none;
      transition: all 0.2s;
      border: 1px solid #e2e8f0;
      background: #fff;
      color: #666;
    }

    .btn:hover {
      background: #f5f7fa;
    }

    .btn.primary {
      background: linear-gradient(135deg, var(--primary-color, #666fee), #8b5cf6);
      color: #fff;
      border: none;
      flex: 1;
    }

    .btn.primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(102, 111, 238, 0.4);
    }

    /* 维护周期 */
    .maintenance-cycle {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .maintenance-cycle input {
      width: 100px;
    }

    .maintenance-cycle span {
      color: #666;
    }

    /* 位置选择 */
    .location-selector {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 12px;
    }
  </style>
</head>
<body>
  <div class="admin-layout">
    <!-- 侧边栏 -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="sidebar-logo">
          <i class="mdi mdi-cow"></i>
          <span>牛产业云平台</span>
        </div>
      </div>
      <nav class="sidebar-nav">
        <div class="nav-group">
          <div class="nav-group-title">概览</div>
          <a href="../../dashboard.html" class="nav-item">
            <i class="mdi mdi-view-dashboard"></i>
            <span>工作台</span>
          </a>
        </div>

        <div class="nav-group">
          <div class="nav-group-title">内容管理</div>
          <div class="nav-item active" onclick="toggleSubMenu(this)">
            <i class="mdi mdi-cog"></i>
            <span>设备管理</span>
            <i class="mdi mdi-chevron-down" style="margin-left: auto;"></i>
          </div>
          <div class="nav-sub-menu open">
            <a href="list.html" class="nav-sub-item active">设备列表</a>
            <a href="review.html" class="nav-sub-item">设备审核</a>
          </div>
        </div>
      </nav>
    </aside>

    <!-- 主内容区 -->
    <main class="main-content">
      <!-- 顶部导航 -->
      <header class="top-header">
        <div class="breadcrumb">
          <a href="../../dashboard.html">首页</a>
          <i class="mdi mdi-chevron-right"></i>
          <a href="list.html">设备管理</a>
          <i class="mdi mdi-chevron-right"></i>
          <span id="pageAction">添加设备</span>
        </div>
        <div class="header-actions">
          <div class="user-avatar">管</div>
        </div>
      </header>

      <!-- 页面内容 -->
      <div class="page-content">
        <div class="page-header">
          <a href="list.html" class="back-link">
            <i class="mdi mdi-arrow-left"></i>
            返回列表
          </a>
          <h1 class="page-title" id="pageTitle">添加设备</h1>
          <p class="page-subtitle">填写设备基本信息和规格参数</p>
        </div>

        <form id="equipmentForm">
          <div class="form-layout">
            <!-- 主表单区 -->
            <div class="form-main">
              <!-- 基本信息 -->
              <div class="card">
                <div class="card-header">
                  <div class="card-title">
                    <i class="mdi mdi-information"></i>
                    基本信息
                  </div>
                </div>
                <div class="card-body">
                  <div class="form-row">
                    <div class="form-group">
                      <label class="form-label">设备名称 <span class="required">*</span></label>
                      <input type="text" class="form-input" name="name" placeholder="请输入设备名称" required>
                    </div>
                    <div class="form-group">
                      <label class="form-label">设备型号 <span class="required">*</span></label>
                      <input type="text" class="form-input" name="model" placeholder="请输入设备型号" required>
                    </div>
                  </div>

                  <div class="form-row">
                    <div class="form-group">
                      <label class="form-label">设备类型 <span class="required">*</span></label>
                      <select class="form-select" name="type" required>
                        <option value="">请选择设备类型</option>
                        <option value="breeding">养殖设备</option>
                        <option value="feeding">饲喂设备</option>
                        <option value="climate">环控设备</option>
                        <option value="detection">检测设备</option>
                        <option value="processing">加工设备</option>
                        <option value="transport">运输设备</option>
                      </select>
                    </div>
                    <div class="form-group">
                      <label class="form-label">设备编号</label>
                      <input type="text" class="form-input" name="code" placeholder="自动生成或手动输入">
                      <p class="form-help">留空将自动生成设备编号</p>
                    </div>
                  </div>

                  <div class="form-row">
                    <div class="form-group">
                      <label class="form-label">采购日期 <span class="required">*</span></label>
                      <input type="date" class="form-input" name="purchaseDate" required>
                    </div>
                    <div class="form-group">
                      <label class="form-label">采购金额</label>
                      <input type="number" class="form-input" name="purchasePrice" placeholder="请输入采购金额(元)">
                    </div>
                  </div>

                  <div class="form-group">
                    <label class="form-label">设备描述</label>
                    <textarea class="form-textarea" name="description" placeholder="请输入设备描述信息..."></textarea>
                  </div>
                </div>
              </div>

              <!-- 规格参数 -->
              <div class="card">
                <div class="card-header">
                  <div class="card-title">
                    <i class="mdi mdi-clipboard-list"></i>
                    规格参数
                  </div>
                </div>
                <div class="card-body">
                  <div class="spec-editor" id="specEditor">
                    <div class="spec-row">
                      <input type="text" placeholder="参数名称" value="额定功率">
                      <input type="text" placeholder="参数值" value="5.5 kW">
                      <button type="button" onclick="removeSpec(this)"><i class="mdi mdi-close"></i></button>
                    </div>
                    <div class="spec-row">
                      <input type="text" placeholder="参数名称" value="工作电压">
                      <input type="text" placeholder="参数值" value="380V / 50Hz">
                      <button type="button" onclick="removeSpec(this)"><i class="mdi mdi-close"></i></button>
                    </div>
                    <div class="spec-row">
                      <input type="text" placeholder="参数名称" value="外形尺寸">
                      <input type="text" placeholder="参数值" value="3200 × 1500 × 2100 mm">
                      <button type="button" onclick="removeSpec(this)"><i class="mdi mdi-close"></i></button>
                    </div>
                    <div class="spec-row">
                      <input type="text" placeholder="参数名称" value="整机重量">
                      <input type="text" placeholder="参数值" value="1850 kg">
                      <button type="button" onclick="removeSpec(this)"><i class="mdi mdi-close"></i></button>
                    </div>
                  </div>
                  <button type="button" class="add-spec-btn" onclick="addSpec()">
                    <i class="mdi mdi-plus"></i>
                    添加规格参数
                  </button>
                </div>
              </div>

              <!-- 设备图片 -->
              <div class="card">
                <div class="card-header">
                  <div class="card-title">
                    <i class="mdi mdi-image-multiple"></i>
                    设备图片
                  </div>
                </div>
                <div class="card-body">
                  <div class="image-upload" onclick="document.getElementById('imageInput').click()">
                    <i class="mdi mdi-cloud-upload"></i>
                    <p>点击或拖拽上传设备图片</p>
                    <span>支持 JPG、PNG 格式，单张不超过 5MB</span>
                    <input type="file" id="imageInput" accept="image/*" multiple hidden>
                  </div>
                  <div class="image-list" id="imageList">
                    <div class="image-item">
                      <i class="mdi mdi-image"></i>
                      <button class="remove-btn" type="button"><i class="mdi mdi-close"></i></button>
                    </div>
                    <div class="image-item">
                      <i class="mdi mdi-image"></i>
                      <button class="remove-btn" type="button"><i class="mdi mdi-close"></i></button>
                    </div>
                  </div>
                </div>
              </div>

              <!-- 位置信息 -->
              <div class="card">
                <div class="card-header">
                  <div class="card-title">
                    <i class="mdi mdi-map-marker"></i>
                    位置信息
                  </div>
                </div>
                <div class="card-body">
                  <div class="location-selector">
                    <div class="form-group">
                      <label class="form-label">所属养殖场 <span class="required">*</span></label>
                      <select class="form-select" name="farm" required>
                        <option value="">请选择</option>
                        <option value="1">1号养殖场</option>
                        <option value="2">2号养殖场</option>
                        <option value="3">3号养殖场</option>
                      </select>
                    </div>
                    <div class="form-group">
                      <label class="form-label">区域 <span class="required">*</span></label>
                      <select class="form-select" name="area" required>
                        <option value="">请选择</option>
                        <option value="A">A区</option>
                        <option value="B">B区</option>
                        <option value="C">C区</option>
                      </select>
                    </div>
                    <div class="form-group">
                      <label class="form-label">具体位置</label>
                      <input type="text" class="form-input" name="location" placeholder="如：1号牛舍">
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- 侧边栏 -->
            <div class="form-sidebar">
              <!-- 厂商选择 -->
              <div class="card">
                <div class="card-header">
                  <div class="card-title">
                    <i class="mdi mdi-domain"></i>
                    厂商信息
                  </div>
                </div>
                <div class="card-body">
                  <div class="manufacturer-select">
                    <label class="manufacturer-option selected">
                      <input type="radio" name="manufacturer" value="1" checked>
                      <div class="manufacturer-icon"><i class="mdi mdi-factory"></i></div>
                      <div class="manufacturer-info">
                        <h4>德国克拉斯</h4>
                        <p>CLAAS</p>
                      </div>
                    </label>
                    <label class="manufacturer-option">
                      <input type="radio" name="manufacturer" value="2">
                      <div class="manufacturer-icon"><i class="mdi mdi-factory"></i></div>
                      <div class="manufacturer-info">
                        <h4>约翰迪尔</h4>
                        <p>John Deere</p>
                      </div>
                    </label>
                    <label class="manufacturer-option">
                      <input type="radio" name="manufacturer" value="3">
                      <div class="manufacturer-icon"><i class="mdi mdi-factory"></i></div>
                      <div class="manufacturer-info">
                        <h4>国产雷沃</h4>
                        <p>Lovol</p>
                      </div>
                    </label>
                    <label class="manufacturer-option">
                      <input type="radio" name="manufacturer" value="4">
                      <div class="manufacturer-icon"><i class="mdi mdi-factory"></i></div>
                      <div class="manufacturer-info">
                        <h4>日本久保田</h4>
                        <p>Kubota</p>
                      </div>
                    </label>
                  </div>
                </div>
              </div>

              <!-- 保修设置 -->
              <div class="card">
                <div class="card-header">
                  <div class="card-title">
                    <i class="mdi mdi-shield-check"></i>
                    保修设置
                  </div>
                </div>
                <div class="card-body">
                  <div class="warranty-settings">
                    <div class="form-group">
                      <label class="form-label">保修期限</label>
                      <select class="form-select" name="warrantyPeriod">
                        <option value="12">1年</option>
                        <option value="24">2年</option>
                        <option value="36" selected>3年</option>
                        <option value="60">5年</option>
                      </select>
                    </div>
                    <div class="form-group">
                      <label class="form-label">保修到期日</label>
                      <input type="date" class="form-input" name="warrantyExpiry">
                    </div>
                  </div>
                  <div class="form-group" style="margin-top: 16px;">
                    <label class="form-label">保修条款</label>
                    <textarea class="form-textarea" name="warrantyTerms" placeholder="输入保修条款说明..." style="min-height: 80px;"></textarea>
                  </div>
                </div>
              </div>

              <!-- 维护设置 -->
              <div class="card">
                <div class="card-header">
                  <div class="card-title">
                    <i class="mdi mdi-wrench"></i>
                    维护设置
                  </div>
                </div>
                <div class="card-body">
                  <div class="form-group">
                    <label class="form-label">维护周期</label>
                    <div class="maintenance-cycle">
                      <input type="number" class="form-input" name="maintenanceCycle" value="90">
                      <span>天/次</span>
                    </div>
                  </div>
                  <div class="form-group">
                    <label class="form-label">上次维护日期</label>
                    <input type="date" class="form-input" name="lastMaintenance">
                  </div>
                  <div class="form-group">
                    <label class="form-label">下次维护提醒</label>
                    <input type="date" class="form-input" name="nextMaintenance">
                  </div>
                </div>
              </div>

              <!-- 其他设置 -->
              <div class="card">
                <div class="card-header">
                  <div class="card-title">
                    <i class="mdi mdi-cog"></i>
                    其他设置
                  </div>
                </div>
                <div class="card-body" style="padding: 8px 24px;">
                  <div class="switch-group">
                    <div class="switch-info">
                      <h4>启用状态</h4>
                      <p>设备是否投入使用</p>
                    </div>
                    <div class="switch active" onclick="toggleSwitch(this)"></div>
                  </div>
                  <div class="switch-group">
                    <div class="switch-info">
                      <h4>维护提醒</h4>
                      <p>到期前自动发送提醒</p>
                    </div>
                    <div class="switch active" onclick="toggleSwitch(this)"></div>
                  </div>
                  <div class="switch-group">
                    <div class="switch-info">
                      <h4>数据监控</h4>
                      <p>采集设备运行数据</p>
                    </div>
                    <div class="switch active" onclick="toggleSwitch(this)"></div>
                  </div>
                  <div class="switch-group">
                    <div class="switch-info">
                      <h4>故障报警</h4>
                      <p>故障时发送告警通知</p>
                    </div>
                    <div class="switch active" onclick="toggleSwitch(this)"></div>
                  </div>
                </div>
              </div>

              <!-- 提交按钮 -->
              <div class="form-actions">
                <button type="button" class="btn" onclick="saveDraft()">
                  <i class="mdi mdi-content-save-outline"></i>
                  保存草稿
                </button>
                <button type="submit" class="btn primary">
                  <i class="mdi mdi-check"></i>
                  提交保存
                </button>
              </div>
            </div>
          </div>
        </form>
      </div>
    </main>
  </div>

  <script>
    function toggleSubMenu(element) {
      const subMenu = element.nextElementSibling;
      if (subMenu && subMenu.classList.contains('nav-sub-menu')) {
        subMenu.classList.toggle('open');
      }
    }

    function toggleSwitch(element) {
      element.classList.toggle('active');
    }

    // 厂商选择
    document.querySelectorAll('.manufacturer-option').forEach(option => {
      option.addEventListener('click', function() {
        document.querySelectorAll('.manufacturer-option').forEach(o => o.classList.remove('selected'));
        this.classList.add('selected');
      });
    });

    // 添加规格参数
    function addSpec() {
      const editor = document.getElementById('specEditor');
      const row = document.createElement('div');
      row.className = 'spec-row';
      row.innerHTML = `
        <input type="text" placeholder="参数名称">
        <input type="text" placeholder="参数值">
        <button type="button" onclick="removeSpec(this)"><i class="mdi mdi-close"></i></button>
      `;
      editor.appendChild(row);
    }

    // 删除规格参数
    function removeSpec(btn) {
      btn.closest('.spec-row').remove();
    }

    // 保存草稿
    function saveDraft() {
      alert('草稿已保存！');
    }

    // 表单提交
    document.getElementById('equipmentForm').addEventListener('submit', function(e) {
      e.preventDefault();
      if (confirm('确定要提交设备信息吗？')) {
        alert('保存成功！');
        window.location.href = 'list.html';
      }
    });

    // 检查是否是编辑模式
    const urlParams = new URLSearchParams(window.location.search);
    const editId = urlParams.get('id');
    if (editId) {
      document.getElementById('pageTitle').textContent = '编辑设备';
      document.getElementById('pageAction').textContent = '编辑设备';
      // 加载设备数据...
    }
  </script>
</body>
</html>
