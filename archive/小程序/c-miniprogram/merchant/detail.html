<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>å•†å®¶è¯¦æƒ… - æº¯æºå•†åŸ</title>
  <!-- CSS -->
  <link rel="stylesheet" href="../../assets/css/variables.css">
  <link rel="stylesheet" href="../../assets/css/common.css">
  <link rel="stylesheet" href="../../assets/css/mobile.css">
  <style>
    /* å•†å®¶ç‰¹æœ‰æ ·å¼ */
    .merchant-header {
        background: var(--bg-white);
        padding: var(--spacing-lg);
        margin-bottom: var(--spacing-md);
        display: flex;
        align-items: center;
        gap: var(--spacing-md);
    }
    .merchant-logo {
        width: 60px;
        height: 60px;
        border-radius: var(--radius-md);
        background: var(--primary-gradient);
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 24px;
        font-weight: bold;
    }
    .merchant-info h1 {
        font-size: var(--font-size-lg);
        font-weight: bold;
        margin-bottom: var(--spacing-xs);
        color: var(--text-primary);
    }
    .merchant-meta {
        font-size: var(--font-size-xs);
        color: var(--text-tertiary);
    }
    
    .info-section {
        background: var(--bg-white);
        padding: var(--spacing-lg);
        margin-bottom: var(--spacing-md);
    }
    .section-title {
        font-size: var(--font-size-base);
        font-weight: bold;
        margin-bottom: var(--spacing-md);
        border-left: 3px solid var(--primary-color);
        padding-left: var(--spacing-sm);
        color: var(--text-primary);
    }
    .info-row {
        display: flex;
        justify-content: space-between;
        padding: var(--spacing-sm) 0;
        border-bottom: 1px solid var(--border-color-light);
    }
    .info-row:last-child {
        border-bottom: none;
    }
    .info-label {
        color: var(--text-tertiary);
        font-size: var(--font-size-sm);
    }
    .info-value {
        color: var(--text-primary);
        font-size: var(--font-size-sm);
        text-align: right;
    }
    
    /* äº§å“åˆ—è¡¨æ ·å¼ */
    .product-list {
        padding: 0 var(--spacing-md);
    }
    .product-card {
        background: var(--bg-white);
        border-radius: var(--radius-md);
        padding: var(--spacing-md);
        margin-bottom: var(--spacing-md);
        display: flex;
        gap: var(--spacing-md);
        box-shadow: var(--shadow-sm);
    }
    .product-img {
        width: 80px;
        height: 80px;
        object-fit: cover;
        border-radius: var(--radius-sm);
        background: var(--bg-gray);
    }
    .product-info {
        flex: 1;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
    }
    .product-name {
        font-size: var(--font-size-base);
        font-weight: bold;
        margin-bottom: var(--spacing-xs);
        color: var(--text-primary);
    }
    .product-price {
        color: var(--ecommerce-accent);
        font-weight: bold;
    }

    /* åº•éƒ¨æ“ä½œæ  */
    .bottom-action-bar {
      position: fixed;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 100%;
      max-width: 430px;
      background: var(--bg-white);
      border-top: 1px solid var(--border-color);
      padding: var(--spacing-md) var(--spacing-lg);
      display: flex;
      gap: var(--spacing-md);
      box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.05);
      z-index: var(--z-index-sticky);
      box-sizing: border-box;
    }

    .action-cart-btn {
      flex: 1;
      padding: var(--spacing-md);
      background: var(--primary-gradient);
      color: var(--text-inverse);
      border: none;
      border-radius: var(--radius-pill);
      font-size: var(--font-size-base);
      font-weight: var(--font-weight-semibold);
      cursor: pointer;
      transition: all var(--transition-base);
    }
    
    .mobile-content {
        padding-bottom: 80px;
    }
  </style>
</head>
<body>
  <div class="mobile-container">
    <div class="mobile-header">
      <div class="mobile-header-back" onclick="window.history.back()">â†</div>
      <div class="mobile-header-title">å•†å®¶è¯¦æƒ…</div>
      <div class="mobile-header-action"></div>
    </div>

    <div class="mobile-content">
      <!-- å•†å®¶å¤´éƒ¨ -->
      <div class="merchant-header">
        <div class="merchant-logo">å·¥</div>
        <div class="merchant-info">
          <h1 id="merchantName">åŠ è½½ä¸­...</h1>
          <div class="merchant-meta" id="merchantMeta">5å¹´è€åº— Â· å“è´¨ä¿è¯</div>
        </div>
      </div>

      <!-- åŸºæœ¬ä¿¡æ¯ -->
      <div class="info-section">
        <div class="section-title">åŸºæœ¬ä¿¡æ¯</div>
        <div class="info-row">
          <div class="info-label">å…¬å¸åç§°</div>
          <div class="info-value" id="companyName">-</div>
        </div>
        <div class="info-row">
          <div class="info-label">åœ°å€</div>
          <div class="info-value" id="merchantAddress">-</div>
        </div>
        <div class="info-row">
          <div class="info-label">æˆç«‹æ—¶é—´</div>
          <div class="info-value" id="establishDate">-</div>
        </div>
        <div class="info-row">
          <div class="info-label">ç»è¥èŒƒå›´</div>
          <div class="info-value">é€Ÿå†»é£Ÿå“ç”Ÿäº§ã€å†·é“¾ç‰©æµ</div>
        </div>
        <div class="info-row">
          <div class="info-label">èµ„è´¨è®¤è¯</div>
          <div class="info-value">ISO 9001, HACCP</div>
        </div>
      </div>

      <!-- å•†å®¶äº§å“ -->
      <div class="info-section" style="padding: 0; background: transparent;">
        <div class="section-title" style="margin: var(--spacing-md); background: var(--bg-white); padding: var(--spacing-md); border-radius: var(--radius-md);">çƒ­é”€äº§å“</div>
        <div class="product-list" id="productList">
          <!-- åŠ¨æ€ç”Ÿæˆ -->
        </div>
      </div>
    </div>
    
    <!-- åº•éƒ¨æ“ä½œæ  -->
    <div class="bottom-action-bar">
        <button class="action-cart-btn" onclick="contactService()">ğŸ§ è”ç³»å®¢æœ</button>
    </div>
  </div>

  <script src="../../assets/js/mockData.js"></script>
  <script src="../../assets/js/mockAPI.js"></script>
  <script src="../../assets/js/utils.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
        loadMerchantDetail();
    });

    function loadMerchantDetail() {
        // æ¨¡æ‹Ÿå•†å®¶æ•°æ®
        const merchant = {
            name: 'ç™½å©çºªé£Ÿå“æœ‰é™å…¬å¸',
            company: 'ç™½å©çºªé£Ÿå“æœ‰é™å…¬å¸',
            address: 'ä¸Šæµ·å¸‚æµ¦ä¸œæ–°åŒºé£Ÿå“å·¥ä¸šå›­åŒº',
            establishDate: '2019å¹´3æœˆ',
            products: MockDB.products.slice(0, 3) // å–å‰3ä¸ªäº§å“ä½œä¸ºç¤ºä¾‹
        };

        document.getElementById('merchantName').textContent = merchant.name;
        document.getElementById('companyName').textContent = merchant.company;
        document.getElementById('merchantAddress').textContent = merchant.address;
        document.getElementById('establishDate').textContent = merchant.establishDate;
        
        renderProducts(merchant.products);
    }

    function renderProducts(products) {
        const list = document.getElementById('productList');
        list.innerHTML = products.map(p => `
            <div class="product-card" onclick="window.location.href='../products/detail.html?id=${p.id}'">
                <img src="${p.images[0]}" class="product-img">
                <div class="product-info">
                    <div class="product-name">${p.name}</div>
                    <div class="product-price">Â¥${p.price.base}/${p.price.unit}</div>
                </div>
            </div>
        `).join('');
    }

    function contactService() {
        Utils.showToast('æ­£åœ¨è¿æ¥å®¢æœ...', 'info');
        setTimeout(() => {
          window.location.href = '../ai-rag/chat.html?type=supplier';
        }, 1000);
    }
  </script>
</body>
</html>
