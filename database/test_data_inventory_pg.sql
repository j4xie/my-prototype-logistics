-- ============================================================
-- 进销存测试数据 (PostgreSQL)
-- 依赖: P0-P4 DDL 脚本已执行, 已有 F001/F002/F003 工厂数据
-- ============================================================

BEGIN;

-- ============================================================
-- 1. 采购订单 (6笔, 2个月, 3种状态)
-- ============================================================

INSERT INTO purchase_orders (id, factory_id, order_number, supplier_id, purchase_type, order_date, expected_delivery_date, total_amount, tax_amount, status, created_by, approved_by, approved_at, remark, created_at, updated_at)
VALUES
  ('PO-F001-202501-001', 'F001', 'PO-202501-001', 'SUP-F001-001', 'DIRECT', '2025-01-05', '2025-01-10', 85000.00, 11050.00, 'COMPLETED', 7, 1, '2025-01-05 14:00:00', '1月第一批原料采购', NOW(), NOW()),
  ('PO-F001-202501-002', 'F001', 'PO-202501-002', 'SUP-F001-002', 'DIRECT', '2025-01-12', '2025-01-17', 62000.00, 8060.00, 'COMPLETED', 7, 1, '2025-01-12 10:00:00', '南海渔业1月补货', NOW(), NOW()),
  ('PO-F001-202501-003', 'F001', 'PO-202501-003', 'SUP-F001-001', 'URGENT', '2025-01-20', '2025-01-22', 28000.00, 3640.00, 'COMPLETED', 7, 1, '2025-01-20 09:00:00', '紧急补充鲍鱼库存', NOW(), NOW()),
  ('PO-F001-202502-001', 'F001', 'PO-202502-001', 'SUP-F001-001', 'DIRECT', '2025-02-03', '2025-02-08', 92000.00, 11960.00, 'COMPLETED', 7, 1, '2025-02-03 11:00:00', '2月常规采购', NOW(), NOW()),
  ('PO-F001-202502-002', 'F001', 'PO-202502-002', 'SUP-F001-002', 'DIRECT', '2025-02-15', '2025-02-20', 45000.00, 5850.00, 'PARTIAL_RECEIVED', 7, 1, '2025-02-15 15:00:00', '2月对虾采购-部分到货', NOW(), NOW()),
  ('PO-F001-202502-003', 'F001', 'PO-202502-003', 'SUP-F001-001', 'DIRECT', '2025-02-25', '2025-03-02', 38000.00, 4940.00, 'DRAFT', 7, NULL, NULL, '3月预采购-待审批', NOW(), NOW());

-- ============================================================
-- 2. 采购订单明细 (15行)
-- ============================================================

INSERT INTO purchase_order_items (purchase_order_id, material_type_id, material_name, quantity, unit, unit_price, tax_rate, received_quantity)
VALUES
  -- PO-202501-001: 带鱼20吨+黄花鱼15吨+对虾10吨
  ('PO-F001-202501-001', 'RMT-F001-001', '带鱼', 20000, 'kg', 18.00, 0.13, 20000),
  ('PO-F001-202501-001', 'RMT-F001-002', '黄花鱼', 15000, 'kg', 22.00, 0.13, 15000),
  ('PO-F001-202501-001', 'RMT-F001-003', '对虾', 10000, 'kg', 45.00, 0.13, 10000),
  -- PO-202501-002: 鱿鱼12吨+对虾8吨
  ('PO-F001-202501-002', 'RMT-F001-004', '鱿鱼', 12000, 'kg', 28.00, 0.13, 12000),
  ('PO-F001-202501-002', 'RMT-F001-003', '对虾', 8000, 'kg', 46.00, 0.13, 8000),
  -- PO-202501-003: 鲍鱼2吨(紧急)
  ('PO-F001-202501-003', 'RMT-F001-005', '鲍鱼', 2000, 'kg', 140.00, 0.13, 2000),
  -- PO-202502-001: 带鱼25吨+黄花鱼18吨+鱿鱼15吨
  ('PO-F001-202502-001', 'RMT-F001-001', '带鱼', 25000, 'kg', 18.50, 0.13, 25000),
  ('PO-F001-202502-001', 'RMT-F001-002', '黄花鱼', 18000, 'kg', 22.50, 0.13, 18000),
  ('PO-F001-202502-001', 'RMT-F001-004', '鱿鱼', 15000, 'kg', 28.00, 0.13, 15000),
  -- PO-202502-002: 对虾15吨(部分到货10吨)
  ('PO-F001-202502-002', 'RMT-F001-003', '对虾', 15000, 'kg', 45.00, 0.13, 10000),
  ('PO-F001-202502-002', 'RMT-F001-005', '鲍鱼', 1000, 'kg', 142.00, 0.13, 0),
  -- PO-202502-003: 草稿-带鱼15吨+黄花鱼10吨
  ('PO-F001-202502-003', 'RMT-F001-001', '带鱼', 15000, 'kg', 19.00, 0.13, 0),
  ('PO-F001-202502-003', 'RMT-F001-002', '黄花鱼', 10000, 'kg', 23.00, 0.13, 0);

-- ============================================================
-- 3. 收货记录 (5次)
-- ============================================================

INSERT INTO purchase_receive_records (id, factory_id, receive_number, purchase_order_id, supplier_id, receive_date, warehouse_id, received_by, status, total_amount, remark, created_at, updated_at)
VALUES
  ('RCV-F001-202501-001', 'F001', 'RCV-202501-001', 'PO-F001-202501-001', 'SUP-F001-001', '2025-01-10', NULL, 5, 'CONFIRMED', 85000.00, '全部到货验收通过', NOW(), NOW()),
  ('RCV-F001-202501-002', 'F001', 'RCV-202501-002', 'PO-F001-202501-002', 'SUP-F001-002', '2025-01-16', NULL, 5, 'CONFIRMED', 62000.00, '全部到货', NOW(), NOW()),
  ('RCV-F001-202501-003', 'F001', 'RCV-202501-003', 'PO-F001-202501-003', 'SUP-F001-001', '2025-01-21', NULL, 5, 'CONFIRMED', 28000.00, '紧急到货', NOW(), NOW()),
  ('RCV-F001-202502-001', 'F001', 'RCV-202502-001', 'PO-F001-202502-001', 'SUP-F001-001', '2025-02-07', NULL, 5, 'CONFIRMED', 92000.00, '2月常规到货', NOW(), NOW()),
  ('RCV-F001-202502-002', 'F001', 'RCV-202502-002', 'PO-F001-202502-002', 'SUP-F001-002', '2025-02-19', NULL, 5, 'CONFIRMED', 45000.00, '对虾部分到货10吨', NOW(), NOW());

-- ============================================================
-- 4. 收货明细 (12行)
-- ============================================================

INSERT INTO purchase_receive_items (receive_record_id, material_type_id, received_quantity, unit, unit_price, qc_result)
VALUES
  ('RCV-F001-202501-001', 'RMT-F001-001', 20000, 'kg', 18.00, 'PASS'),
  ('RCV-F001-202501-001', 'RMT-F001-002', 15000, 'kg', 22.00, 'PASS'),
  ('RCV-F001-202501-001', 'RMT-F001-003', 10000, 'kg', 45.00, 'PASS'),
  ('RCV-F001-202501-002', 'RMT-F001-004', 12000, 'kg', 28.00, 'PASS'),
  ('RCV-F001-202501-002', 'RMT-F001-003', 8000, 'kg', 46.00, 'PASS'),
  ('RCV-F001-202501-003', 'RMT-F001-005', 2000, 'kg', 140.00, 'PASS'),
  ('RCV-F001-202502-001', 'RMT-F001-001', 25000, 'kg', 18.50, 'PASS'),
  ('RCV-F001-202502-001', 'RMT-F001-002', 18000, 'kg', 22.50, 'PASS'),
  ('RCV-F001-202502-001', 'RMT-F001-004', 15000, 'kg', 28.00, 'PASS'),
  ('RCV-F001-202502-002', 'RMT-F001-003', 10000, 'kg', 45.00, 'PASS');

-- ============================================================
-- 5. 成品库存 (8批)
-- ============================================================

INSERT INTO finished_goods_batches (id, factory_id, batch_number, product_type_id, produced_quantity, shipped_quantity, reserved_quantity, unit, unit_price, production_date, expire_date, storage_location, status, created_at, updated_at)
VALUES
  ('FGB-F001-202501-001', 'F001', 'FGB-202501-001', 'PT-F001-001', 5000, 3000, 0, 'kg', 35.00, '2025-01-12', '2025-07-12', 'A区冷库-01', 'AVAILABLE', NOW(), NOW()),
  ('FGB-F001-202501-002', 'F001', 'FGB-202501-002', 'PT-F001-002', 3000, 2000, 0, 'kg', 68.00, '2025-01-14', '2025-07-14', 'A区冷库-02', 'AVAILABLE', NOW(), NOW()),
  ('FGB-F001-202501-003', 'F001', 'FGB-202501-003', 'PT-F001-003', 4000, 2500, 0, 'kg', 42.00, '2025-01-16', '2025-07-16', 'B区冷库-01', 'AVAILABLE', NOW(), NOW()),
  ('FGB-F001-202501-004', 'F001', 'FGB-202501-004', 'PT-F001-001', 6000, 4000, 500, 'kg', 35.50, '2025-01-25', '2025-07-25', 'A区冷库-01', 'AVAILABLE', NOW(), NOW()),
  ('FGB-F001-202502-001', 'F001', 'FGB-202502-001', 'PT-F001-001', 8000, 2000, 0, 'kg', 36.00, '2025-02-05', '2025-08-05', 'A区冷库-03', 'AVAILABLE', NOW(), NOW()),
  ('FGB-F001-202502-002', 'F001', 'FGB-202502-002', 'PT-F001-002', 5000, 1500, 0, 'kg', 69.00, '2025-02-08', '2025-08-08', 'A区冷库-02', 'AVAILABLE', NOW(), NOW()),
  ('FGB-F001-202502-003', 'F001', 'FGB-202502-003', 'PT-F001-003', 6000, 0, 1000, 'kg', 43.00, '2025-02-12', '2025-08-12', 'B区冷库-02', 'AVAILABLE', NOW(), NOW()),
  ('FGB-F001-202502-004', 'F001', 'FGB-202502-004', 'PT-F001-001', 7000, 0, 0, 'kg', 36.50, '2025-02-20', '2025-08-20', 'A区冷库-04', 'AVAILABLE', NOW(), NOW());

-- ============================================================
-- 6. 销售订单 (8笔, 面向盒马/永辉)
-- ============================================================

INSERT INTO sales_orders (id, factory_id, order_number, customer_id, order_date, required_delivery_date, delivery_address, total_amount, discount_amount, tax_amount, status, created_by, confirmed_at, remark, created_at, updated_at)
VALUES
  ('SO-F001-202501-001', 'F001', 'SO-202501-001', 'CUS-F001-001', '2025-01-13', '2025-01-15', '上海市浦东新区盒马鲜生仓库', 245000.00, 5000.00, 31200.00, 'COMPLETED', 8, '2025-01-13 16:00:00', '盒马1月首单', NOW(), NOW()),
  ('SO-F001-202501-002', 'F001', 'SO-202501-002', 'CUS-F001-002', '2025-01-16', '2025-01-19', '上海市闵行区永辉配送中心', 180000.00, 0, 23400.00, 'COMPLETED', 8, '2025-01-16 10:00:00', '永辉1月订单', NOW(), NOW()),
  ('SO-F001-202501-003', 'F001', 'SO-202501-003', 'CUS-F001-001', '2025-01-22', '2025-01-25', '上海市浦东新区盒马鲜生仓库', 320000.00, 10000.00, 40300.00, 'COMPLETED', 8, '2025-01-22 14:00:00', '盒马春节备货', NOW(), NOW()),
  ('SO-F001-202501-004', 'F001', 'SO-202501-004', 'CUS-F001-002', '2025-01-28', '2025-01-31', '上海市闵行区永辉配送中心', 150000.00, 3000.00, 19110.00, 'COMPLETED', 8, '2025-01-28 09:00:00', '永辉春节备货', NOW(), NOW()),
  ('SO-F001-202502-001', 'F001', 'SO-202502-001', 'CUS-F001-001', '2025-02-06', '2025-02-09', '上海市浦东新区盒马鲜生仓库', 198000.00, 0, 25740.00, 'COMPLETED', 8, '2025-02-06 11:00:00', '盒马2月常规', NOW(), NOW()),
  ('SO-F001-202502-002', 'F001', 'SO-202502-002', 'CUS-F001-002', '2025-02-10', '2025-02-13', '上海市闵行区永辉配送中心', 135000.00, 2000.00, 17290.00, 'PARTIAL_DELIVERED', 8, '2025-02-10 15:00:00', '永辉2月-部分发货', NOW(), NOW()),
  ('SO-F001-202502-003', 'F001', 'SO-202502-003', 'CUS-F001-001', '2025-02-18', '2025-02-21', '上海市浦东新区盒马鲜生仓库', 280000.00, 5000.00, 35750.00, 'CONFIRMED', 8, '2025-02-18 10:00:00', '盒马2月大单-已确认待发', NOW(), NOW()),
  ('SO-F001-202502-004', 'F001', 'SO-202502-004', 'CUS-F001-002', '2025-02-24', '2025-02-28', '上海市闵行区永辉配送中心', 95000.00, 0, 12350.00, 'DRAFT', 8, NULL, '永辉3月预订-草稿', NOW(), NOW());

-- ============================================================
-- 7. 销售订单明细 (20行)
-- ============================================================

INSERT INTO sales_order_items (sales_order_id, product_type_id, product_name, quantity, unit, unit_price, discount_rate, delivered_quantity)
VALUES
  -- SO-202501-001: 带鱼段3吨+大虾仁2吨
  ('SO-F001-202501-001', 'PT-F001-001', '带鱼段精品', 3000, 'kg', 35.00, 0, 3000),
  ('SO-F001-202501-001', 'PT-F001-002', '大虾仁', 2000, 'kg', 68.00, 0, 2000),
  ('SO-F001-202501-001', 'PT-F001-003', '鱿鱼圈', 1000, 'kg', 42.00, 0, 1000),
  -- SO-202501-002: 带鱼段2吨+鱿鱼圈2.5吨
  ('SO-F001-202501-002', 'PT-F001-001', '带鱼段精品', 2000, 'kg', 35.00, 0, 2000),
  ('SO-F001-202501-002', 'PT-F001-003', '鱿鱼圈', 2500, 'kg', 42.00, 0, 2500),
  -- SO-202501-003: 春节备货大单
  ('SO-F001-202501-003', 'PT-F001-001', '带鱼段精品', 4000, 'kg', 35.50, 0.02, 4000),
  ('SO-F001-202501-003', 'PT-F001-002', '大虾仁', 3000, 'kg', 69.00, 0.02, 3000),
  ('SO-F001-202501-003', 'PT-F001-003', '鱿鱼圈', 2000, 'kg', 43.00, 0, 2000),
  -- SO-202501-004: 永辉春节
  ('SO-F001-202501-004', 'PT-F001-001', '带鱼段精品', 2000, 'kg', 36.00, 0, 2000),
  ('SO-F001-202501-004', 'PT-F001-002', '大虾仁', 1500, 'kg', 68.00, 0, 1500),
  -- SO-202502-001: 盒马2月
  ('SO-F001-202502-001', 'PT-F001-001', '带鱼段精品', 2000, 'kg', 36.00, 0, 2000),
  ('SO-F001-202502-001', 'PT-F001-002', '大虾仁', 1500, 'kg', 69.00, 0, 1500),
  ('SO-F001-202502-001', 'PT-F001-003', '鱿鱼圈', 1000, 'kg', 43.00, 0, 1000),
  -- SO-202502-002: 永辉部分发货
  ('SO-F001-202502-002', 'PT-F001-001', '带鱼段精品', 1500, 'kg', 36.00, 0, 1000),
  ('SO-F001-202502-002', 'PT-F001-003', '鱿鱼圈', 2000, 'kg', 43.00, 0, 1000),
  -- SO-202502-003: 盒马大单-待发
  ('SO-F001-202502-003', 'PT-F001-001', '带鱼段精品', 3000, 'kg', 36.50, 0.02, 0),
  ('SO-F001-202502-003', 'PT-F001-002', '大虾仁', 2000, 'kg', 69.00, 0, 0),
  ('SO-F001-202502-003', 'PT-F001-003', '鱿鱼圈', 2000, 'kg', 43.00, 0, 0),
  -- SO-202502-004: 草稿
  ('SO-F001-202502-004', 'PT-F001-001', '带鱼段精品', 1500, 'kg', 36.50, 0, 0),
  ('SO-F001-202502-004', 'PT-F001-002', '大虾仁', 1000, 'kg', 69.00, 0, 0);

-- ============================================================
-- 8. 发货记录 (6次)
-- ============================================================

INSERT INTO sales_delivery_records (id, factory_id, delivery_number, sales_order_id, customer_id, delivery_date, delivery_address, logistics_company, tracking_number, status, shipped_by, total_amount, remark, created_at, updated_at)
VALUES
  ('DEL-F001-202501-001', 'F001', 'DEL-202501-001', 'SO-F001-202501-001', 'CUS-F001-001', '2025-01-14', '上海市浦东新区盒马鲜生仓库', '顺丰冷链', 'SF1001202501', 'DELIVERED', 5, 245000.00, NULL, NOW(), NOW()),
  ('DEL-F001-202501-002', 'F001', 'DEL-202501-002', 'SO-F001-202501-002', 'CUS-F001-002', '2025-01-18', '上海市闵行区永辉配送中心', '京东冷链', 'JD2002202501', 'DELIVERED', 5, 180000.00, NULL, NOW(), NOW()),
  ('DEL-F001-202501-003', 'F001', 'DEL-202501-003', 'SO-F001-202501-003', 'CUS-F001-001', '2025-01-24', '上海市浦东新区盒马鲜生仓库', '顺丰冷链', 'SF1003202501', 'DELIVERED', 5, 320000.00, '春节备货-优先配送', NOW(), NOW()),
  ('DEL-F001-202501-004', 'F001', 'DEL-202501-004', 'SO-F001-202501-004', 'CUS-F001-002', '2025-01-30', '上海市闵行区永辉配送中心', '京东冷链', 'JD2004202501', 'DELIVERED', 5, 150000.00, NULL, NOW(), NOW()),
  ('DEL-F001-202502-001', 'F001', 'DEL-202502-001', 'SO-F001-202502-001', 'CUS-F001-001', '2025-02-08', '上海市浦东新区盒马鲜生仓库', '顺丰冷链', 'SF1001202502', 'DELIVERED', 5, 198000.00, NULL, NOW(), NOW()),
  ('DEL-F001-202502-002', 'F001', 'DEL-202502-002', 'SO-F001-202502-002', 'CUS-F001-002', '2025-02-12', '上海市闵行区永辉配送中心', '京东冷链', 'JD2002202502', 'SHIPPED', 5, 79000.00, '第一批-部分发货', NOW(), NOW());

-- ============================================================
-- 9. 发货明细 (15行)
-- ============================================================

INSERT INTO sales_delivery_items (delivery_record_id, product_type_id, delivered_quantity, unit, unit_price, finished_goods_batch_id)
VALUES
  ('DEL-F001-202501-001', 'PT-F001-001', 3000, 'kg', 35.00, 'FGB-F001-202501-001'),
  ('DEL-F001-202501-001', 'PT-F001-002', 2000, 'kg', 68.00, 'FGB-F001-202501-002'),
  ('DEL-F001-202501-001', 'PT-F001-003', 1000, 'kg', 42.00, 'FGB-F001-202501-003'),
  ('DEL-F001-202501-002', 'PT-F001-001', 2000, 'kg', 35.00, 'FGB-F001-202501-001'),
  ('DEL-F001-202501-002', 'PT-F001-003', 2500, 'kg', 42.00, 'FGB-F001-202501-003'),
  ('DEL-F001-202501-003', 'PT-F001-001', 4000, 'kg', 35.50, 'FGB-F001-202501-004'),
  ('DEL-F001-202501-003', 'PT-F001-002', 3000, 'kg', 69.00, 'FGB-F001-202501-002'),
  ('DEL-F001-202501-003', 'PT-F001-003', 2000, 'kg', 43.00, 'FGB-F001-202501-003'),
  ('DEL-F001-202501-004', 'PT-F001-001', 2000, 'kg', 36.00, 'FGB-F001-202501-004'),
  ('DEL-F001-202501-004', 'PT-F001-002', 1500, 'kg', 68.00, 'FGB-F001-202501-002'),
  ('DEL-F001-202502-001', 'PT-F001-001', 2000, 'kg', 36.00, 'FGB-F001-202502-001'),
  ('DEL-F001-202502-001', 'PT-F001-002', 1500, 'kg', 69.00, 'FGB-F001-202502-002'),
  ('DEL-F001-202502-001', 'PT-F001-003', 1000, 'kg', 43.00, 'FGB-F001-202502-003'),
  ('DEL-F001-202502-002', 'PT-F001-001', 1000, 'kg', 36.00, 'FGB-F001-202502-001'),
  ('DEL-F001-202502-002', 'PT-F001-003', 1000, 'kg', 43.00, 'FGB-F001-202502-003');

-- ============================================================
-- 10. 调拨单 (3笔: F001→F002, F001→F003)
-- ============================================================

INSERT INTO internal_transfers (id, transfer_number, transfer_type, source_factory_id, target_factory_id, transfer_date, expected_arrival_date, total_amount, status, requested_by, requested_at, approved_by, approved_at, shipped_at, received_at, confirmed_at, remark, created_at, updated_at)
VALUES
  ('TRF-F001-202501-001', 'TRF-202501-001', 'HQ_TO_BRANCH', 'F001', 'F002', '2025-01-18', '2025-01-20', 125000.00, 'CONFIRMED', 1, '2025-01-18 09:00:00', 1, '2025-01-18 10:00:00', '2025-01-18 14:00:00', '2025-01-19 10:00:00', '2025-01-19 14:00:00', '一厂向二厂调拨带鱼段+大虾仁', NOW(), NOW()),
  ('TRF-F001-202502-001', 'TRF-202502-001', 'HQ_TO_BRANCH', 'F001', 'F003', '2025-02-10', '2025-02-12', 86000.00, 'SHIPPED', 1, '2025-02-10 09:00:00', 1, '2025-02-10 11:00:00', '2025-02-10 15:00:00', NULL, NULL, '一厂向三厂调拨-在途', NOW(), NOW()),
  ('TRF-F001-202502-002', 'TRF-202502-002', 'HQ_TO_BRANCH', 'F001', 'F002', '2025-02-20', '2025-02-22', 52000.00, 'APPROVED', 1, '2025-02-20 09:00:00', 1, '2025-02-20 14:00:00', NULL, NULL, NULL, '待发货', NOW(), NOW());

-- ============================================================
-- 11. 调拨明细 (8行)
-- ============================================================

INSERT INTO internal_transfer_items (transfer_id, item_type, material_type_id, product_type_id, quantity, received_quantity, unit, unit_price, source_batch_id, target_batch_id)
VALUES
  ('TRF-F001-202501-001', 'FINISHED_GOODS', NULL, 'PT-F001-001', 2000, 2000, 'kg', 35.00, 'FGB-F001-202501-001', NULL),
  ('TRF-F001-202501-001', 'FINISHED_GOODS', NULL, 'PT-F001-002', 1000, 1000, 'kg', 68.00, 'FGB-F001-202501-002', NULL),
  ('TRF-F001-202501-001', 'RAW_MATERIAL', 'RMT-F001-003', NULL, 500, 500, 'kg', 45.00, NULL, NULL),
  ('TRF-F001-202502-001', 'FINISHED_GOODS', NULL, 'PT-F001-001', 1000, 0, 'kg', 36.00, 'FGB-F001-202502-001', NULL),
  ('TRF-F001-202502-001', 'FINISHED_GOODS', NULL, 'PT-F001-003', 1000, 0, 'kg', 43.00, 'FGB-F001-202502-003', NULL),
  ('TRF-F001-202502-001', 'RAW_MATERIAL', 'RMT-F001-001', NULL, 500, 0, 'kg', 18.50, NULL, NULL),
  ('TRF-F001-202502-002', 'FINISHED_GOODS', NULL, 'PT-F001-002', 500, 0, 'kg', 69.00, 'FGB-F001-202502-002', NULL),
  ('TRF-F001-202502-002', 'RAW_MATERIAL', 'RMT-F001-004', NULL, 600, 0, 'kg', 28.00, NULL, NULL);

-- ============================================================
-- 12. 价格表 (2个: 采购+销售)
-- ============================================================

INSERT INTO price_lists (id, factory_id, name, price_type, effective_from, effective_to, is_active, created_by, remark, created_at, updated_at)
VALUES
  ('PL-F001-PURCHASE-2025', 'F001', '2025年原料采购价格表', 'PURCHASE_PRICE', '2025-01-01', '2025-12-31', true, 1, '年度采购基准价', NOW(), NOW()),
  ('PL-F001-SELLING-2025', 'F001', '2025年成品销售价格表', 'SELLING_PRICE', '2025-01-01', '2025-12-31', true, 1, '年度销售指导价', NOW(), NOW());

-- ============================================================
-- 13. 价格明细 (10行)
-- ============================================================

INSERT INTO price_list_items (price_list_id, material_type_id, product_type_id, item_name, unit, standard_price, min_price, max_price)
VALUES
  -- 采购价格表
  ('PL-F001-PURCHASE-2025', 'RMT-F001-001', NULL, '带鱼', 'kg', 18.50, 16.00, 22.00),
  ('PL-F001-PURCHASE-2025', 'RMT-F001-002', NULL, '黄花鱼', 'kg', 22.50, 20.00, 26.00),
  ('PL-F001-PURCHASE-2025', 'RMT-F001-003', NULL, '对虾', 'kg', 45.00, 40.00, 55.00),
  ('PL-F001-PURCHASE-2025', 'RMT-F001-004', NULL, '鱿鱼', 'kg', 28.00, 25.00, 32.00),
  ('PL-F001-PURCHASE-2025', 'RMT-F001-005', NULL, '鲍鱼', 'kg', 140.00, 120.00, 165.00),
  -- 销售价格表
  ('PL-F001-SELLING-2025', NULL, 'PT-F001-001', '带鱼段精品', 'kg', 36.00, 32.00, 42.00),
  ('PL-F001-SELLING-2025', NULL, 'PT-F001-002', '大虾仁', 'kg', 69.00, 62.00, 78.00),
  ('PL-F001-SELLING-2025', NULL, 'PT-F001-003', '鱿鱼圈', 'kg', 43.00, 38.00, 50.00);

-- ============================================================
-- 14. 应收应付交易 (16笔: 8应收+4收款+3应付+1付款)
-- ============================================================

INSERT INTO ar_ap_transactions (id, factory_id, transaction_number, transaction_type, counterparty_type, counterparty_id, counterparty_name, sales_order_id, purchase_order_id, amount, balance_after, payment_method, payment_reference, transaction_date, due_date, operated_by, remark, created_at, updated_at)
VALUES
  -- 应收挂账 (8笔, 对应8笔销售)
  ('ARAP-F001-AR-001', 'F001', 'AR-202501-001', 'AR_INVOICE', 'CUSTOMER', 'CUS-F001-001', '上海盒马鲜生', 'SO-F001-202501-001', NULL, 245000.00, 245000.00, NULL, NULL, '2025-01-14', '2025-02-14', 8, '盒马1月首单挂账', NOW(), NOW()),
  ('ARAP-F001-AR-002', 'F001', 'AR-202501-002', 'AR_INVOICE', 'CUSTOMER', 'CUS-F001-002', '永辉超市华东区', 'SO-F001-202501-002', NULL, 180000.00, 180000.00, NULL, NULL, '2025-01-18', '2025-02-18', 8, '永辉1月挂账', NOW(), NOW()),
  ('ARAP-F001-AR-003', 'F001', 'AR-202501-003', 'AR_INVOICE', 'CUSTOMER', 'CUS-F001-001', '上海盒马鲜生', 'SO-F001-202501-003', NULL, 320000.00, 565000.00, NULL, NULL, '2025-01-24', '2025-02-24', 8, '盒马春节备货挂账', NOW(), NOW()),
  ('ARAP-F001-AR-004', 'F001', 'AR-202501-004', 'AR_INVOICE', 'CUSTOMER', 'CUS-F001-002', '永辉超市华东区', 'SO-F001-202501-004', NULL, 150000.00, 330000.00, NULL, NULL, '2025-01-30', '2025-03-02', 8, '永辉春节挂账', NOW(), NOW()),
  ('ARAP-F001-AR-005', 'F001', 'AR-202502-001', 'AR_INVOICE', 'CUSTOMER', 'CUS-F001-001', '上海盒马鲜生', 'SO-F001-202502-001', NULL, 198000.00, 763000.00, NULL, NULL, '2025-02-08', '2025-03-08', 8, '盒马2月挂账', NOW(), NOW()),
  ('ARAP-F001-AR-006', 'F001', 'AR-202502-002', 'AR_INVOICE', 'CUSTOMER', 'CUS-F001-002', '永辉超市华东区', 'SO-F001-202502-002', NULL, 79000.00, 409000.00, NULL, NULL, '2025-02-12', '2025-03-12', 8, '永辉部分发货挂账', NOW(), NOW()),
  -- 客户回款 (4笔)
  ('ARAP-F001-AR-007', 'F001', 'AR-202502-003', 'AR_PAYMENT', 'CUSTOMER', 'CUS-F001-001', '上海盒马鲜生', NULL, NULL, 500000.00, 263000.00, 'BANK_TRANSFER', 'BOC-20250210-001', '2025-02-10', NULL, 8, '盒马1月+春节批量回款', NOW(), NOW()),
  ('ARAP-F001-AR-008', 'F001', 'AR-202502-004', 'AR_PAYMENT', 'CUSTOMER', 'CUS-F001-002', '永辉超市华东区', NULL, NULL, 250000.00, 159000.00, 'BANK_TRANSFER', 'CMB-20250215-001', '2025-02-15', NULL, 8, '永辉1月回款', NOW(), NOW()),
  ('ARAP-F001-AR-009', 'F001', 'AR-202502-005', 'AR_PAYMENT', 'CUSTOMER', 'CUS-F001-001', '上海盒马鲜生', NULL, NULL, 200000.00, 63000.00, 'BANK_TRANSFER', 'BOC-20250220-001', '2025-02-20', NULL, 8, '盒马2月回款', NOW(), NOW()),
  ('ARAP-F001-AR-010', 'F001', 'AR-202502-006', 'AR_PAYMENT', 'CUSTOMER', 'CUS-F001-002', '永辉超市华东区', NULL, NULL, 100000.00, 59000.00, 'WECHAT', 'WX-20250225-001', '2025-02-25', NULL, 8, '永辉微信付款', NOW(), NOW()),
  -- 应付挂账 (3笔, 对应采购)
  ('ARAP-F001-AP-001', 'F001', 'AP-202501-001', 'AP_INVOICE', 'SUPPLIER', 'SUP-F001-001', '东海水产批发', NULL, 'PO-F001-202501-001', 85000.00, 85000.00, NULL, NULL, '2025-01-10', '2025-02-10', 7, '1月东海采购应付', NOW(), NOW()),
  ('ARAP-F001-AP-002', 'F001', 'AP-202501-002', 'AP_INVOICE', 'SUPPLIER', 'SUP-F001-002', '南海渔业公司', NULL, 'PO-F001-202501-002', 62000.00, 62000.00, NULL, NULL, '2025-01-16', '2025-02-16', 7, '1月南海采购应付', NOW(), NOW()),
  ('ARAP-F001-AP-003', 'F001', 'AP-202502-001', 'AP_INVOICE', 'SUPPLIER', 'SUP-F001-001', '东海水产批发', NULL, 'PO-F001-202502-001', 92000.00, 177000.00, NULL, NULL, '2025-02-07', '2025-03-07', 7, '2月东海采购应付', NOW(), NOW()),
  -- 供应商付款 (1笔)
  ('ARAP-F001-AP-004', 'F001', 'AP-202502-002', 'AP_PAYMENT', 'SUPPLIER', 'SUP-F001-001', '东海水产批发', NULL, NULL, 85000.00, 92000.00, 'BANK_TRANSFER', 'ICBC-20250215-001', '2025-02-15', NULL, 7, '支付东海1月采购款', NOW(), NOW()),
  ('ARAP-F001-AP-005', 'F001', 'AP-202502-003', 'AP_PAYMENT', 'SUPPLIER', 'SUP-F001-002', '南海渔业公司', NULL, NULL, 62000.00, 0, 'BANK_TRANSFER', 'ICBC-20250220-001', '2025-02-20', NULL, 7, '支付南海1月采购款', NOW(), NOW()),
  ('ARAP-F001-AP-006', 'F001', 'AP-202502-004', 'AP_PAYMENT', 'SUPPLIER', 'SUP-F001-001', '东海水产批发', NULL, NULL, 50000.00, 42000.00, 'BANK_TRANSFER', 'ICBC-20250228-001', '2025-02-28', NULL, 7, '部分支付东海2月款', NOW(), NOW());

-- ============================================================
-- 15. POS 连接配置 (1条)
-- ============================================================

INSERT INTO pos_connections (id, factory_id, brand, connection_name, app_key, app_secret, access_token, refresh_token, token_expires_at, pos_store_id, is_active, last_sync_at, created_by, remark, created_at, updated_at)
VALUES
  ('POS-F001-KRY-001', 'F001', 'KERUYUN', '白垩纪-客如云POS', 'cretas_kry_appkey_demo', 'cretas_kry_secret_demo', 'demo_access_token_2025', 'demo_refresh_token_2025', '2025-12-31 23:59:59', 'KRY-STORE-F001', true, '2025-02-18 08:00:00', 1, '客如云收银系统对接-Demo', NOW(), NOW());

COMMIT;
