# 🔐 食品溯源系统 - 登录指南

## 📋 **系统概览**

食品溯源系统现已支持**双模式登录**，为不同用户群体提供专门优化的登录体验：

### 🏭 **工厂用户模式** (默认)
- **目标用户**：工厂操作员、质量管理员、生产管理员等
- **功能范围**：农业监控、加工管理、质量控制、溯源查询等业务功能
- **界面特色**：蓝色主题，专注业务操作

### 🛡️ **平台管理员模式**
- **目标用户**：SaaS平台运营管理员、超级管理员
- **功能范围**：多租户管理、工厂租户管理、订阅套餐管理、平台运营数据
- **界面特色**：紫色主题，专注平台管理

---

## 🎯 **快速登录指南**

### **方法一：在线访问**
- **开发环境**：http://localhost:3002/login
- **生产环境**：[部署URL]/login

### **方法二：项目本地启动**
```bash
cd web-app-next
npm run dev
# 访问 http://localhost:3000/login (端口号可能不同)
```

---

## 🔑 **默认账号信息**

### **平台超级管理员** (Level 0)
```
用户名: super_admin
密码: super123
权限: 平台所有权限，管理所有工厂租户
跳转: /platform (平台管理控制台)
```

### **系统管理员** (Level 1)
```
用户名: admin
密码: admin123
权限: 工厂内部系统管理
跳转: /admin/dashboard (管理后台)
```

### **普通用户** (Level 3)
```
用户名: user
密码: user123
权限: 基础查看和操作权限
跳转: /farming (工厂业务系统)
```

---

## 🎨 **界面功能特性**

### **智能模式切换**
- 顶部Tab栏可在"工厂用户登录"和"平台管理员"之间切换
- 实时显示对应模式的提示信息和默认账号
- 颜色主题跟随选择模式自动调整

### **便捷功能**
- ✅ **快速填充**：点击提示框内"快速填充"按钮自动填入默认账号密码
- 📋 **一键复制**：点击账号/密码旁的复制图标直接复制到剪贴板
- 👁️ **密码显示**：点击眼睛图标切换密码显示/隐藏
- 🔄 **智能跳转**：根据用户权限级别自动跳转到相应系统
- 📱 **响应式设计**：完美适配桌面和移动设备

### **用户体验优化**
- 🎭 **渐变UI设计**：现代化渐变色彩和卡片设计
- ⚡ **实时状态指示**：绿色脉冲点显示系统在线状态
- 🔐 **安全认证流程**：完整的表单验证和错误处理
- 📊 **版本信息显示**：底部显示系统版本和技术栈信息

---

## 🚀 **登录流程**

### **Step 1: 选择登录模式**
1. 打开登录页面
2. 根据您的角色选择相应的登录模式：
   - 工厂用户 → 选择"工厂用户登录" (蓝色)
   - 平台管理员 → 选择"平台管理员" (紫色)

### **Step 2: 填写登录信息**
1. 手动输入用户名和密码
2. **或者**点击提示框内的"快速填充"按钮自动填入默认账号

### **Step 3: 登录并跳转**
1. 点击登录按钮
2. 系统根据您的权限级别自动跳转：
   - **Level 0 (超级管理员)** → `/platform` 平台管理控制台
   - **Level 1 (系统管理员)** → `/admin/dashboard` 管理后台
   - **Level 3+ (普通用户)** → `/farming` 工厂业务系统

---

## 🏗️ **技术架构**

### **认证系统**
- **状态管理**：Zustand Store (useAuthStore)
- **Mock数据**：MSW (Mock Service Worker)
- **角色权限**：分层权限模型 (Level 0-4)
- **Token管理**：JWT + localStorage

### **UI组件库**
- **框架**：Next.js 15 + React 18
- **样式**：Tailwind CSS + Lucide Icons
- **组件**：自定义UI组件库
- **主题**：双色主题系统 (蓝色/紫色)

### **权限模型**
```typescript
interface UserRole {
  name: string;        // 角色名称
  level: number;       // 权限级别 (0=超级管理员, 1=系统管理员, 2=管理员, 3=操作员, 4=查看者)
  displayName: string; // 显示名称
}
```

---

## 🔧 **开发者信息**

### **文件结构**
```
web-app-next/src/
├── app/login/page.tsx           # 登录页面主组件
├── store/authStore.ts           # 认证状态管理
├── mocks/data/auth-data.ts      # Mock用户数据
├── mocks/handlers/auth.ts       # 认证API Mock handlers
└── types/auth.ts                # 认证相关类型定义
```

### **环境配置**
- **开发环境**：Mock API (MSW)
- **生产环境**：可切换真实API
- **端口配置**：3000 (默认) / 3002 (如3000被占用)

### **扩展指南**
- 添加新用户：修改 `mocks/data/auth-data.ts`
- 修改权限级别：更新 `UserRole.level`
- 自定义跳转逻辑：编辑 `app/login/page.tsx` 中的 `handleLogin`

---

## 📞 **技术支持**

### **常见问题**
1. **Q: 登录后跳转页面404？**
   A: 检查用户权限级别对应的路由是否存在

2. **Q: Mock数据不生效？**
   A: 确认MSW服务是否正常启动，检查浏览器开发者工具

3. **Q: 样式显示异常？**
   A: 清除浏览器缓存，确认Tailwind CSS编译正常

### **联系方式**
- **项目位置**：`/web-app-next`
- **配置文件**：`.env.local`
- **日志查看**：浏览器开发者工具 Console

---

**© 2025 食品溯源系统 | 多租户SaaS平台**
