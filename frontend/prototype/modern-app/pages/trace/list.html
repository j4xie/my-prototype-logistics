<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‰∫ßÂìÅÂàóË°® - È£üÂìÅÊ∫ØÊ∫êÁ≥ªÁªü</title>
    <link rel="stylesheet" href="../../styles/main.css">
    <style>
        .list-container {
            background: #f8f9fa;
            min-height: 100vh;
        }

        .list-wrapper {
            max-width: 390px;
            margin: 0 auto;
            padding-bottom: 20px;
        }

        .search-header {
            background: linear-gradient(135deg, #667eea, #764ba2);
            padding: 20px;
            color: white;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .back-button {
            position: absolute;
            top: 20px;
            left: 20px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .header-title {
            text-align: center;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
            padding-top: 20px;
        }

        .search-box {
            position: relative;
            margin-bottom: 15px;
        }

        .search-input {
            width: 100%;
            padding: 12px 20px 12px 45px;
            border: none;
            border-radius: 12px;
            font-size: 14px;
            background: rgba(255, 255, 255, 0.95);
            color: #333;
            box-sizing: border-box;
        }

        .search-icon {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #667eea;
            font-size: 16px;
        }

        .filter-tabs {
            display: flex;
            gap: 8px;
            overflow-x: auto;
            padding-bottom: 5px;
        }

        .filter-tab {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            padding: 8px 16px;
            color: white;
            font-size: 12px;
            white-space: nowrap;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .filter-tab.active {
            background: rgba(255, 255, 255, 0.9);
            color: #667eea;
        }

        .sort-section {
            background: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #f0f0f0;
        }

        .sort-title {
            font-size: 14px;
            color: #666;
        }

        .sort-options {
            display: flex;
            gap: 15px;
        }

        .sort-option {
            font-size: 14px;
            color: #999;
            cursor: pointer;
            padding: 5px 0;
            border-bottom: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .sort-option.active {
            color: #667eea;
            border-bottom-color: #667eea;
        }

        .product-grid {
            padding: 20px;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .product-card {
            background: white;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.15);
        }

        .product-image {
            height: 120px;
            background: linear-gradient(135deg, #f8f9ff, #e8f4fd);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            position: relative;
        }

        .product-badge {
            position: absolute;
            top: 8px;
            right: 8px;
            background: #2ed573;
            color: white;
            border-radius: 12px;
            padding: 4px 8px;
            font-size: 10px;
            font-weight: 600;
        }

        .product-info {
            padding: 15px;
        }

        .product-name {
            font-size: 16px;
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
            line-height: 1.3;
        }

        .product-origin {
            font-size: 12px;
            color: #667eea;
            margin-bottom: 8px;
        }

        .product-price {
            font-size: 14px;
            font-weight: 600;
            color: #ff4757;
            margin-bottom: 8px;
        }

        .product-stats {
            display: flex;
            justify-content: space-between;
            font-size: 11px;
            color: #999;
        }

        .category-section {
            background: white;
            margin: 20px;
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .category-title {
            font-size: 18px;
            font-weight: 600;
            color: #333;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .category-icon {
            margin-right: 10px;
            font-size: 20px;
        }

        .category-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
        }

        .category-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 15px 10px;
            border-radius: 12px;
            background: #f8f9fa;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .category-item:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
        }

        .category-item-icon {
            font-size: 24px;
            margin-bottom: 8px;
        }

        .category-item-text {
            font-size: 12px;
            font-weight: 500;
            text-align: center;
        }

        .category-item-count {
            font-size: 10px;
            opacity: 0.7;
            margin-top: 2px;
        }

        .stats-banner {
            background: linear-gradient(135deg, #2ed573, #1dd1a1);
            margin: 20px;
            border-radius: 16px;
            padding: 20px;
            color: white;
            text-align: center;
        }

        .stats-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }

        .stats-item {
            text-align: center;
        }

        .stats-number {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .stats-label {
            font-size: 12px;
            opacity: 0.9;
        }

        .load-more {
            text-align: center;
            padding: 20px;
        }

        .load-more-btn {
            background: white;
            border: 2px solid #667eea;
            border-radius: 12px;
            padding: 12px 24px;
            color: #667eea;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .load-more-btn:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
        }

        .loading {
            pointer-events: none;
            opacity: 0.6;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #666;
        }

        .empty-icon {
            font-size: 64px;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        .empty-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .empty-subtitle {
            font-size: 14px;
            line-height: 1.5;
        }

        @media (max-width: 480px) {
            .product-grid {
                grid-template-columns: 1fr;
                padding: 15px;
            }

            .category-grid {
                grid-template-columns: repeat(3, 1fr);
            }

            .sort-options {
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="list-container">
        <div class="list-wrapper">
            <!-- ÊêúÁ¥¢Â§¥ÈÉ® -->
            <div class="search-header">
                <button class="back-button" onclick="history.back()">
                    ‚Üê
                </button>

                <div class="header-title">ÂèØÊ∫ØÊ∫ê‰∫ßÂìÅ</div>

                <div class="search-box">
                    <input type="text" class="search-input" id="searchInput" placeholder="ÊêúÁ¥¢‰∫ßÂìÅÂêçÁß∞ÊàñÊ∫ØÊ∫êÁ†Å">
                    <div class="search-icon">üîç</div>
                </div>

                <div class="filter-tabs">
                    <div class="filter-tab active" onclick="filterCategory('all')">ÂÖ®ÈÉ®</div>
                    <div class="filter-tab" onclick="filterCategory('vegetable')">Ëî¨ËèúÁ±ª</div>
                    <div class="filter-tab" onclick="filterCategory('fruit')">Ê∞¥ÊûúÁ±ª</div>
                    <div class="filter-tab" onclick="filterCategory('meat')">ËÇâÁ±ª</div>
                    <div class="filter-tab" onclick="filterCategory('seafood')">Êµ∑È≤úÁ±ª</div>
                    <div class="filter-tab" onclick="filterCategory('grain')">Á≤ÆÈ£üÁ±ª</div>
                </div>
            </div>

            <!-- Êï∞ÊçÆÁªüËÆ° -->
            <div class="stats-banner">
                <div class="stats-title">Ê∫ØÊ∫êÊï∞ÊçÆÁªüËÆ°</div>
                <div class="stats-grid">
                    <div class="stats-item">
                        <div class="stats-number">12,456</div>
                        <div class="stats-label">ÂèØÊ∫ØÊ∫ê‰∫ßÂìÅ</div>
                    </div>
                    <div class="stats-item">
                        <div class="stats-number">3,789</div>
                        <div class="stats-label">ËÆ§ËØÅÂÜúÂú∫</div>
                    </div>
                    <div class="stats-item">
                        <div class="stats-number">98.7%</div>
                        <div class="stats-label">Ë¥®Ê£ÄÂêàÊ†ºÁéá</div>
                    </div>
                </div>
            </div>

            <!-- ‰∫ßÂìÅÂàÜÁ±ª -->
            <div class="category-section">
                <div class="category-title">
                    <span class="category-icon">üìÇ</span>
                    ‰∫ßÂìÅÂàÜÁ±ª
                </div>
                <div class="category-grid">
                    <div class="category-item" onclick="filterCategory('vegetable')">
                        <div class="category-item-icon">ü•¨</div>
                        <div class="category-item-text">Ëî¨ËèúÁ±ª</div>
                        <div class="category-item-count">2,145‰∏™</div>
                    </div>
                    <div class="category-item" onclick="filterCategory('fruit')">
                        <div class="category-item-icon">üçé</div>
                        <div class="category-item-text">Ê∞¥ÊûúÁ±ª</div>
                        <div class="category-item-count">1,856‰∏™</div>
                    </div>
                    <div class="category-item" onclick="filterCategory('meat')">
                        <div class="category-item-icon">ü•©</div>
                        <div class="category-item-text">ËÇâÁ±ª</div>
                        <div class="category-item-count">967‰∏™</div>
                    </div>
                    <div class="category-item" onclick="filterCategory('seafood')">
                        <div class="category-item-icon">üêü</div>
                        <div class="category-item-text">Êµ∑È≤úÁ±ª</div>
                        <div class="category-item-count">743‰∏™</div>
                    </div>
                    <div class="category-item" onclick="filterCategory('grain')">
                        <div class="category-item-icon">üåæ</div>
                        <div class="category-item-text">Á≤ÆÈ£üÁ±ª</div>
                        <div class="category-item-count">523‰∏™</div>
                    </div>
                    <div class="category-item" onclick="filterCategory('dairy')">
                        <div class="category-item-icon">ü•õ</div>
                        <div class="category-item-text">‰π≥Âà∂ÂìÅ</div>
                        <div class="category-item-count">412‰∏™</div>
                    </div>
                    <div class="category-item" onclick="filterCategory('beverage')">
                        <div class="category-item-icon">üßÉ</div>
                        <div class="category-item-text">È•ÆÂìÅÁ±ª</div>
                        <div class="category-item-count">289‰∏™</div>
                    </div>
                    <div class="category-item" onclick="filterCategory('processed')">
                        <div class="category-item-icon">üçû</div>
                        <div class="category-item-text">Âä†Â∑•ÂìÅ</div>
                        <div class="category-item-count">156‰∏™</div>
                    </div>
                </div>
            </div>

            <!-- ÊéíÂ∫èÈÄâÈ°π -->
            <div class="sort-section">
                <div class="sort-title">ÊéíÂ∫èÊñπÂºè</div>
                <div class="sort-options">
                    <div class="sort-option active" onclick="sortProducts('latest')">ÊúÄÊñ∞‰∏äÊû∂</div>
                    <div class="sort-option" onclick="sortProducts('popular')">ÁÉ≠Èó®‰∫ßÂìÅ</div>
                    <div class="sort-option" onclick="sortProducts('price')">‰ª∑Ê†ºÊéíÂ∫è</div>
                </div>
            </div>

            <!-- ‰∫ßÂìÅÁΩëÊ†º -->
            <div class="product-grid" id="productGrid">
                <!-- ‰∫ßÂìÅÂç°ÁâáÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÁîüÊàê -->
            </div>

            <!-- Âä†ËΩΩÊõ¥Â§ö -->
            <div class="load-more">
                <button class="load-more-btn" id="loadMoreBtn" onclick="loadMoreProducts()">
                    Âä†ËΩΩÊõ¥Â§ö‰∫ßÂìÅ
                </button>
            </div>
        </div>
    </div>

    <script>
        // Ê®°Êãü‰∫ßÂìÅÊï∞ÊçÆ
        const productData = [
            {
                id: 'ORG001',
                name: 'ÊúâÊú∫ÁôΩËèú',
                category: 'vegetable',
                origin: 'Â±±‰∏úÂØøÂÖâ',
                price: 'Ôø•8.50/Êñ§',
                icon: 'ü•¨',
                badge: 'ÊúâÊú∫',
                queries: 856,
                rating: 4.8
            },
            {
                id: 'MEAT002',
                name: '‰ºòË¥®ÁâõËÇâ',
                category: 'meat',
                origin: 'ÂÜÖËíôÂè§',
                price: 'Ôø•68.00/Êñ§',
                icon: 'ü•©',
                badge: 'ËçâÈ•≤',
                queries: 623,
                rating: 4.9
            },
            {
                id: 'FISH003',
                name: 'Ê∑±Êµ∑‰∏âÊñáÈ±º',
                category: 'seafood',
                origin: 'Êå™Â®ÅËøõÂè£',
                price: 'Ôø•128.00/Êñ§',
                icon: 'üêü',
                badge: 'ËøõÂè£',
                queries: 445,
                rating: 4.7
            },
            {
                id: 'APL001',
                name: 'ÊúâÊú∫ËãπÊûú',
                category: 'fruit',
                origin: 'ÈôïË•øÊ¥õÂ∑ù',
                price: 'Ôø•12.80/Êñ§',
                icon: 'üçé',
                badge: 'ÊúâÊú∫',
                queries: 734,
                rating: 4.6
            },
            {
                id: 'RICE003',
                name: '‰∫îÂ∏∏Â§ßÁ±≥',
                category: 'grain',
                origin: 'ÈªëÈæôÊ±ü‰∫îÂ∏∏',
                price: 'Ôø•15.60/Êñ§',
                icon: 'üåæ',
                badge: 'Âú∞Ê†á',
                queries: 512,
                rating: 4.8
            },
            {
                id: 'EGG002',
                name: 'Êï£ÂÖªÈ∏°Ëõã',
                category: 'meat',
                origin: 'Ê±üËãèÂè•ÂÆπ',
                price: 'Ôø•2.50/‰∏™',
                icon: 'ü•ö',
                badge: 'Êï£ÂÖª',
                queries: 389,
                rating: 4.5
            },
            {
                id: 'MILK001',
                name: 'ÊúâÊú∫Á∫ØÁâõÂ•∂',
                category: 'dairy',
                origin: 'Êñ∞ÁñÜÂ§©Â±±',
                price: 'Ôø•8.90/Áõí',
                icon: 'ü•õ',
                badge: 'ÊúâÊú∫',
                queries: 267,
                rating: 4.7
            },
            {
                id: 'TEA001',
                name: 'Èæô‰∫ïÁªøËå∂',
                category: 'beverage',
                origin: 'ÊµôÊ±üÊù≠Â∑û',
                price: 'Ôø•158.00/Êñ§',
                icon: 'üçµ',
                badge: 'Âú∞Ê†á',
                queries: 178,
                rating: 4.9
            }
        ];

        let currentFilter = 'all';
        let currentSort = 'latest';
        let displayedProducts = [];
        let loadedCount = 0;
        const productsPerPage = 6;

        // È°µÈù¢ÂàùÂßãÂåñ
        document.addEventListener('DOMContentLoaded', function() {
            loadProducts();
            setupSearch();
        });

        // Âä†ËΩΩ‰∫ßÂìÅ
        function loadProducts() {
            let filteredProducts = productData;

            // Â∫îÁî®ÂàÜÁ±ªËøáÊª§
            if (currentFilter !== 'all') {
                filteredProducts = productData.filter(product => product.category === currentFilter);
            }

            // Â∫îÁî®ÊéíÂ∫è
            switch (currentSort) {
                case 'popular':
                    filteredProducts.sort((a, b) => b.queries - a.queries);
                    break;
                case 'price':
                    filteredProducts.sort((a, b) => {
                        const priceA = parseFloat(a.price.replace(/[^\d.]/g, ''));
                        const priceB = parseFloat(b.price.replace(/[^\d.]/g, ''));
                        return priceA - priceB;
                    });
                    break;
                case 'latest':
                default:
                    // ‰øùÊåÅÂéüÈ°∫Â∫èÔºàÊ®°ÊãüÊúÄÊñ∞‰∏äÊû∂Ôºâ
                    break;
            }

            displayedProducts = filteredProducts;
            loadedCount = 0;

            // Ê∏ÖÁ©∫Áé∞Êúâ‰∫ßÂìÅ
            document.getElementById('productGrid').innerHTML = '';

            // Âä†ËΩΩÈ¶ñÊâπ‰∫ßÂìÅ
            loadMoreProducts();
        }

        // Âä†ËΩΩÊõ¥Â§ö‰∫ßÂìÅ
        function loadMoreProducts() {
            const productGrid = document.getElementById('productGrid');
            const loadMoreBtn = document.getElementById('loadMoreBtn');

            // ËÆæÁΩÆÂä†ËΩΩÁä∂ÊÄÅ
            loadMoreBtn.classList.add('loading');
            loadMoreBtn.textContent = 'Âä†ËΩΩ‰∏≠...';

            setTimeout(() => {
                const endIndex = Math.min(loadedCount + productsPerPage, displayedProducts.length);
                const newProducts = displayedProducts.slice(loadedCount, endIndex);

                newProducts.forEach(product => {
                    const productCard = createProductCard(product);
                    productGrid.appendChild(productCard);
                });

                loadedCount = endIndex;

                // Êõ¥Êñ∞Âä†ËΩΩÊåâÈíÆÁä∂ÊÄÅ
                loadMoreBtn.classList.remove('loading');

                if (loadedCount >= displayedProducts.length) {
                    loadMoreBtn.textContent = 'Â∑≤Âä†ËΩΩÂÖ®ÈÉ®‰∫ßÂìÅ';
                    loadMoreBtn.disabled = true;
                } else {
                    loadMoreBtn.textContent = `Âä†ËΩΩÊõ¥Â§ö‰∫ßÂìÅ (${displayedProducts.length - loadedCount}‰∏™)`;
                    loadMoreBtn.disabled = false;
                }

                // Ê£ÄÊü•ÊòØÂê¶ÈúÄË¶ÅÊòæÁ§∫Á©∫Áä∂ÊÄÅ
                if (displayedProducts.length === 0) {
                    showEmptyState();
                }
            }, 800);
        }

        // ÂàõÂª∫‰∫ßÂìÅÂç°Áâá
        function createProductCard(product) {
            const card = document.createElement('div');
            card.className = 'product-card';
            card.onclick = () => viewProduct(product.id);

            card.innerHTML = `
                <div class="product-image">
                    ${product.icon}
                    <div class="product-badge">${product.badge}</div>
                </div>
                <div class="product-info">
                    <div class="product-name">${product.name}</div>
                    <div class="product-origin">üìç ${product.origin}</div>
                    <div class="product-price">${product.price}</div>
                    <div class="product-stats">
                        <span>‚≠ê ${product.rating}</span>
                        <span>üëÅÔ∏è ${product.queries}</span>
                    </div>
                </div>
            `;

            return card;
        }

        // ÊòæÁ§∫Á©∫Áä∂ÊÄÅ
        function showEmptyState() {
            const productGrid = document.getElementById('productGrid');
            productGrid.innerHTML = `
                <div class="empty-state" style="grid-column: 1 / -1;">
                    <div class="empty-icon">üì¶</div>
                    <div class="empty-title">ÊöÇÊó†Áõ∏ÂÖ≥‰∫ßÂìÅ</div>
                    <div class="empty-subtitle">
                        ÂΩìÂâçÂàÜÁ±ª‰∏ãÊöÇÊó∂Ê≤°ÊúâÂèØÊ∫ØÊ∫êÁöÑ‰∫ßÂìÅ<br>
                        ËØ∑Â∞ùËØïÂÖ∂‰ªñÂàÜÁ±ªÊàñÊêúÁ¥¢ÂÖ≥ÈîÆËØç
                    </div>
                </div>
            `;

            document.getElementById('loadMoreBtn').style.display = 'none';
        }

        // ÂàÜÁ±ªËøáÊª§
        function filterCategory(category) {
            // Êõ¥Êñ∞ÊøÄÊ¥ªÁä∂ÊÄÅ
            document.querySelectorAll('.filter-tab').forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');

            currentFilter = category;
            loadProducts();
        }

        // ‰∫ßÂìÅÊéíÂ∫è
        function sortProducts(sortType) {
            // Êõ¥Êñ∞ÊøÄÊ¥ªÁä∂ÊÄÅ
            document.querySelectorAll('.sort-option').forEach(option => option.classList.remove('active'));
            event.target.classList.add('active');

            currentSort = sortType;
            loadProducts();
        }

        // ÊêúÁ¥¢ÂäüËÉΩ
        function setupSearch() {
            const searchInput = document.getElementById('searchInput');
            let searchTimeout;

            searchInput.addEventListener('input', function() {
                clearTimeout(searchTimeout);
                searchTimeout = setTimeout(() => {
                    const searchTerm = this.value.toLowerCase().trim();

                    if (searchTerm) {
                        const filtered = productData.filter(product =>
                            product.name.toLowerCase().includes(searchTerm) ||
                            product.id.toLowerCase().includes(searchTerm) ||
                            product.origin.toLowerCase().includes(searchTerm)
                        );

                        displayedProducts = filtered;
                        loadedCount = 0;
                        document.getElementById('productGrid').innerHTML = '';
                        loadMoreProducts();
                    } else {
                        loadProducts();
                    }
                }, 300);
            });
        }

        // Êü•Áúã‰∫ßÂìÅËØ¶ÊÉÖ
        function viewProduct(productId) {
            console.log('Êü•Áúã‰∫ßÂìÅËØ¶ÊÉÖ:', productId);
            window.location.href = `./detail.html?code=${encodeURIComponent(productId)}`;
        }

        // Ê®°ÊãüÊï∞ÊçÆÊõ¥Êñ∞
        function updateStats() {
            const statsNumbers = document.querySelectorAll('.stats-number');
            statsNumbers.forEach(element => {
                const originalValue = parseInt(element.textContent.replace(/,/g, ''));
                const increment = Math.floor(Math.random() * 10) + 1;
                const newValue = originalValue + increment;
                element.textContent = newValue.toLocaleString();
            });
        }

        // ÊØè30ÁßíÊõ¥Êñ∞‰∏ÄÊ¨°ÁªüËÆ°Êï∞ÊçÆ
        setInterval(updateStats, 30000);
    </script>
</body>
</html>
