<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äº§å“åˆ—è¡¨ - é£Ÿå“æº¯æºç³»ç»Ÿ</title>
    <link rel="stylesheet" href="../../styles/main.css">
    <style>
        .list-container {
            background: #f8f9fa;
            min-height: 100vh;
        }

        .list-wrapper {
            max-width: 390px;
            margin: 0 auto;
            padding-bottom: 20px;
        }

        .search-header {
            background: linear-gradient(135deg, #667eea, #764ba2);
            padding: 20px;
            color: white;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .back-button {
            position: absolute;
            top: 20px;
            left: 20px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .header-title {
            text-align: center;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
            padding-top: 20px;
        }

        .search-box {
            position: relative;
            margin-bottom: 15px;
        }

        .search-input {
            width: 100%;
            padding: 12px 20px 12px 45px;
            border: none;
            border-radius: 12px;
            font-size: 14px;
            background: rgba(255, 255, 255, 0.95);
            color: #333;
            box-sizing: border-box;
        }

        .search-icon {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #667eea;
            font-size: 16px;
        }

        .filter-tabs {
            display: flex;
            gap: 8px;
            overflow-x: auto;
            padding-bottom: 5px;
        }

        .filter-tab {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            padding: 8px 16px;
            color: white;
            font-size: 12px;
            white-space: nowrap;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .filter-tab.active {
            background: rgba(255, 255, 255, 0.9);
            color: #667eea;
        }

        .sort-section {
            background: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #f0f0f0;
        }

        .sort-title {
            font-size: 14px;
            color: #666;
        }

        .sort-options {
            display: flex;
            gap: 15px;
        }

        .sort-option {
            font-size: 14px;
            color: #999;
            cursor: pointer;
            padding: 5px 0;
            border-bottom: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .sort-option.active {
            color: #667eea;
            border-bottom-color: #667eea;
        }

        .product-grid {
            padding: 20px;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .product-card {
            background: white;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.15);
        }

        .product-image {
            height: 120px;
            background: linear-gradient(135deg, #f8f9ff, #e8f4fd);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            position: relative;
        }

        .product-badge {
            position: absolute;
            top: 8px;
            right: 8px;
            background: #2ed573;
            color: white;
            border-radius: 12px;
            padding: 4px 8px;
            font-size: 10px;
            font-weight: 600;
        }

        .product-info {
            padding: 15px;
        }

        .product-name {
            font-size: 16px;
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
            line-height: 1.3;
        }

        .product-origin {
            font-size: 12px;
            color: #667eea;
            margin-bottom: 8px;
        }

        .product-price {
            font-size: 14px;
            font-weight: 600;
            color: #ff4757;
            margin-bottom: 8px;
        }

        .product-stats {
            display: flex;
            justify-content: space-between;
            font-size: 11px;
            color: #999;
        }

        .category-section {
            background: white;
            margin: 20px;
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .category-title {
            font-size: 18px;
            font-weight: 600;
            color: #333;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .category-icon {
            margin-right: 10px;
            font-size: 20px;
        }

        .category-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
        }

        .category-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 15px 10px;
            border-radius: 12px;
            background: #f8f9fa;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .category-item:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
        }

        .category-item-icon {
            font-size: 24px;
            margin-bottom: 8px;
        }

        .category-item-text {
            font-size: 12px;
            font-weight: 500;
            text-align: center;
        }

        .category-item-count {
            font-size: 10px;
            opacity: 0.7;
            margin-top: 2px;
        }

        .stats-banner {
            background: linear-gradient(135deg, #2ed573, #1dd1a1);
            margin: 20px;
            border-radius: 16px;
            padding: 20px;
            color: white;
            text-align: center;
        }

        .stats-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }

        .stats-item {
            text-align: center;
        }

        .stats-number {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .stats-label {
            font-size: 12px;
            opacity: 0.9;
        }

        .load-more {
            text-align: center;
            padding: 20px;
        }

        .load-more-btn {
            background: white;
            border: 2px solid #667eea;
            border-radius: 12px;
            padding: 12px 24px;
            color: #667eea;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .load-more-btn:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
        }

        .loading {
            pointer-events: none;
            opacity: 0.6;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #666;
        }

        .empty-icon {
            font-size: 64px;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        .empty-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .empty-subtitle {
            font-size: 14px;
            line-height: 1.5;
        }

        @media (max-width: 480px) {
            .product-grid {
                grid-template-columns: 1fr;
                padding: 15px;
            }

            .category-grid {
                grid-template-columns: repeat(3, 1fr);
            }

            .sort-options {
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="list-container">
        <div class="list-wrapper">
            <!-- æœç´¢å¤´éƒ¨ -->
            <div class="search-header">
                <button class="back-button" onclick="history.back()">
                    â†
                </button>

                <div class="header-title">å¯æº¯æºäº§å“</div>

                <div class="search-box">
                    <input type="text" class="search-input" id="searchInput" placeholder="æœç´¢äº§å“åç§°æˆ–æº¯æºç ">
                    <div class="search-icon">ğŸ”</div>
                </div>

                <div class="filter-tabs">
                    <div class="filter-tab active" onclick="filterCategory('all')">å…¨éƒ¨</div>
                    <div class="filter-tab" onclick="filterCategory('vegetable')">è”¬èœç±»</div>
                    <div class="filter-tab" onclick="filterCategory('fruit')">æ°´æœç±»</div>
                    <div class="filter-tab" onclick="filterCategory('meat')">è‚‰ç±»</div>
                    <div class="filter-tab" onclick="filterCategory('seafood')">æµ·é²œç±»</div>
                    <div class="filter-tab" onclick="filterCategory('grain')">ç²®é£Ÿç±»</div>
                </div>
            </div>

            <!-- æ•°æ®ç»Ÿè®¡ -->
            <div class="stats-banner">
                <div class="stats-title">æº¯æºæ•°æ®ç»Ÿè®¡</div>
                <div class="stats-grid">
                    <div class="stats-item">
                        <div class="stats-number">12,456</div>
                        <div class="stats-label">å¯æº¯æºäº§å“</div>
                    </div>
                    <div class="stats-item">
                        <div class="stats-number">3,789</div>
                        <div class="stats-label">è®¤è¯å†œåœº</div>
                    </div>
                    <div class="stats-item">
                        <div class="stats-number">98.7%</div>
                        <div class="stats-label">è´¨æ£€åˆæ ¼ç‡</div>
                    </div>
                </div>
            </div>

            <!-- äº§å“åˆ†ç±» -->
            <div class="category-section">
                <div class="category-title">
                    <span class="category-icon">ğŸ“‚</span>
                    äº§å“åˆ†ç±»
                </div>
                <div class="category-grid">
                    <div class="category-item" onclick="filterCategory('vegetable')">
                        <div class="category-item-icon">ğŸ¥¬</div>
                        <div class="category-item-text">è”¬èœç±»</div>
                        <div class="category-item-count">2,145ä¸ª</div>
                    </div>
                    <div class="category-item" onclick="filterCategory('fruit')">
                        <div class="category-item-icon">ğŸ</div>
                        <div class="category-item-text">æ°´æœç±»</div>
                        <div class="category-item-count">1,856ä¸ª</div>
                    </div>
                    <div class="category-item" onclick="filterCategory('meat')">
                        <div class="category-item-icon">ğŸ¥©</div>
                        <div class="category-item-text">è‚‰ç±»</div>
                        <div class="category-item-count">967ä¸ª</div>
                    </div>
                    <div class="category-item" onclick="filterCategory('seafood')">
                        <div class="category-item-icon">ğŸŸ</div>
                        <div class="category-item-text">æµ·é²œç±»</div>
                        <div class="category-item-count">743ä¸ª</div>
                    </div>
                    <div class="category-item" onclick="filterCategory('grain')">
                        <div class="category-item-icon">ğŸŒ¾</div>
                        <div class="category-item-text">ç²®é£Ÿç±»</div>
                        <div class="category-item-count">523ä¸ª</div>
                    </div>
                    <div class="category-item" onclick="filterCategory('dairy')">
                        <div class="category-item-icon">ğŸ¥›</div>
                        <div class="category-item-text">ä¹³åˆ¶å“</div>
                        <div class="category-item-count">412ä¸ª</div>
                    </div>
                    <div class="category-item" onclick="filterCategory('beverage')">
                        <div class="category-item-icon">ğŸ§ƒ</div>
                        <div class="category-item-text">é¥®å“ç±»</div>
                        <div class="category-item-count">289ä¸ª</div>
                    </div>
                    <div class="category-item" onclick="filterCategory('processed')">
                        <div class="category-item-icon">ğŸ</div>
                        <div class="category-item-text">åŠ å·¥å“</div>
                        <div class="category-item-count">156ä¸ª</div>
                    </div>
                </div>
            </div>

            <!-- æ’åºé€‰é¡¹ -->
            <div class="sort-section">
                <div class="sort-title">æ’åºæ–¹å¼</div>
                <div class="sort-options">
                    <div class="sort-option active" onclick="sortProducts('latest')">æœ€æ–°ä¸Šæ¶</div>
                    <div class="sort-option" onclick="sortProducts('popular')">çƒ­é—¨äº§å“</div>
                    <div class="sort-option" onclick="sortProducts('price')">ä»·æ ¼æ’åº</div>
                </div>
            </div>

            <!-- äº§å“ç½‘æ ¼ -->
            <div class="product-grid" id="productGrid">
                <!-- äº§å“å¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>

            <!-- åŠ è½½æ›´å¤š -->
            <div class="load-more">
                <button class="load-more-btn" id="loadMoreBtn" onclick="loadMoreProducts()">
                    åŠ è½½æ›´å¤šäº§å“
                </button>
            </div>
        </div>
    </div>

    <script>
        // æ¨¡æ‹Ÿäº§å“æ•°æ®
        const productData = [
            {
                id: 'ORG001',
                name: 'æœ‰æœºç™½èœ',
                category: 'vegetable',
                origin: 'å±±ä¸œå¯¿å…‰',
                price: 'ï¿¥8.50/æ–¤',
                icon: 'ğŸ¥¬',
                badge: 'æœ‰æœº',
                queries: 856,
                rating: 4.8
            },
            {
                id: 'MEAT002',
                name: 'ä¼˜è´¨ç‰›è‚‰',
                category: 'meat',
                origin: 'å†…è’™å¤',
                price: 'ï¿¥68.00/æ–¤',
                icon: 'ğŸ¥©',
                badge: 'è‰é¥²',
                queries: 623,
                rating: 4.9
            },
            {
                id: 'FISH003',
                name: 'æ·±æµ·ä¸‰æ–‡é±¼',
                category: 'seafood',
                origin: 'æŒªå¨è¿›å£',
                price: 'ï¿¥128.00/æ–¤',
                icon: 'ğŸŸ',
                badge: 'è¿›å£',
                queries: 445,
                rating: 4.7
            },
            {
                id: 'APL001',
                name: 'æœ‰æœºè‹¹æœ',
                category: 'fruit',
                origin: 'é™•è¥¿æ´›å·',
                price: 'ï¿¥12.80/æ–¤',
                icon: 'ğŸ',
                badge: 'æœ‰æœº',
                queries: 734,
                rating: 4.6
            },
            {
                id: 'RICE003',
                name: 'äº”å¸¸å¤§ç±³',
                category: 'grain',
                origin: 'é»‘é¾™æ±Ÿäº”å¸¸',
                price: 'ï¿¥15.60/æ–¤',
                icon: 'ğŸŒ¾',
                badge: 'åœ°æ ‡',
                queries: 512,
                rating: 4.8
            },
            {
                id: 'EGG002',
                name: 'æ•£å…»é¸¡è›‹',
                category: 'meat',
                origin: 'æ±Ÿè‹å¥å®¹',
                price: 'ï¿¥2.50/ä¸ª',
                icon: 'ğŸ¥š',
                badge: 'æ•£å…»',
                queries: 389,
                rating: 4.5
            },
            {
                id: 'MILK001',
                name: 'æœ‰æœºçº¯ç‰›å¥¶',
                category: 'dairy',
                origin: 'æ–°ç–†å¤©å±±',
                price: 'ï¿¥8.90/ç›’',
                icon: 'ğŸ¥›',
                badge: 'æœ‰æœº',
                queries: 267,
                rating: 4.7
            },
            {
                id: 'TEA001',
                name: 'é¾™äº•ç»¿èŒ¶',
                category: 'beverage',
                origin: 'æµ™æ±Ÿæ­å·',
                price: 'ï¿¥158.00/æ–¤',
                icon: 'ğŸµ',
                badge: 'åœ°æ ‡',
                queries: 178,
                rating: 4.9
            }
        ];

        let currentFilter = 'all';
        let currentSort = 'latest';
        let displayedProducts = [];
        let loadedCount = 0;
        const productsPerPage = 6;

        // é¡µé¢åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            loadProducts();
            setupSearch();
        });

        // åŠ è½½äº§å“
        function loadProducts() {
            let filteredProducts = productData;

            // åº”ç”¨åˆ†ç±»è¿‡æ»¤
            if (currentFilter !== 'all') {
                filteredProducts = productData.filter(product => product.category === currentFilter);
            }

            // åº”ç”¨æ’åº
            switch (currentSort) {
                case 'popular':
                    filteredProducts.sort((a, b) => b.queries - a.queries);
                    break;
                case 'price':
                    filteredProducts.sort((a, b) => {
                        const priceA = parseFloat(a.price.replace(/[^\d.]/g, ''));
                        const priceB = parseFloat(b.price.replace(/[^\d.]/g, ''));
                        return priceA - priceB;
                    });
                    break;
                case 'latest':
                default:
                    // ä¿æŒåŸé¡ºåºï¼ˆæ¨¡æ‹Ÿæœ€æ–°ä¸Šæ¶ï¼‰
                    break;
            }

            displayedProducts = filteredProducts;
            loadedCount = 0;

            // æ¸…ç©ºç°æœ‰äº§å“
            document.getElementById('productGrid').innerHTML = '';

            // åŠ è½½é¦–æ‰¹äº§å“
            loadMoreProducts();
        }

        // åŠ è½½æ›´å¤šäº§å“
        function loadMoreProducts() {
            const productGrid = document.getElementById('productGrid');
            const loadMoreBtn = document.getElementById('loadMoreBtn');

            // è®¾ç½®åŠ è½½çŠ¶æ€
            loadMoreBtn.classList.add('loading');
            loadMoreBtn.textContent = 'åŠ è½½ä¸­...';

            setTimeout(() => {
                const endIndex = Math.min(loadedCount + productsPerPage, displayedProducts.length);
                const newProducts = displayedProducts.slice(loadedCount, endIndex);

                newProducts.forEach(product => {
                    const productCard = createProductCard(product);
                    productGrid.appendChild(productCard);
                });

                loadedCount = endIndex;

                // æ›´æ–°åŠ è½½æŒ‰é’®çŠ¶æ€
                loadMoreBtn.classList.remove('loading');

                if (loadedCount >= displayedProducts.length) {
                    loadMoreBtn.textContent = 'å·²åŠ è½½å…¨éƒ¨äº§å“';
                    loadMoreBtn.disabled = true;
                } else {
                    loadMoreBtn.textContent = `åŠ è½½æ›´å¤šäº§å“ (${displayedProducts.length - loadedCount}ä¸ª)`;
                    loadMoreBtn.disabled = false;
                }

                // æ£€æŸ¥æ˜¯å¦éœ€è¦æ˜¾ç¤ºç©ºçŠ¶æ€
                if (displayedProducts.length === 0) {
                    showEmptyState();
                }
            }, 800);
        }

        // åˆ›å»ºäº§å“å¡ç‰‡
        function createProductCard(product) {
            const card = document.createElement('div');
            card.className = 'product-card';
            card.onclick = () => viewProduct(product.id);

            card.innerHTML = `
                <div class="product-image">
                    ${product.icon}
                    <div class="product-badge">${product.badge}</div>
                </div>
                <div class="product-info">
                    <div class="product-name">${product.name}</div>
                    <div class="product-origin">ğŸ“ ${product.origin}</div>
                    <div class="product-price">${product.price}</div>
                    <div class="product-stats">
                        <span>â­ ${product.rating}</span>
                        <span>ğŸ‘ï¸ ${product.queries}</span>
                    </div>
                </div>
            `;

            return card;
        }

        // æ˜¾ç¤ºç©ºçŠ¶æ€
        function showEmptyState() {
            const productGrid = document.getElementById('productGrid');
            productGrid.innerHTML = `
                <div class="empty-state" style="grid-column: 1 / -1;">
                    <div class="empty-icon">ğŸ“¦</div>
                    <div class="empty-title">æš‚æ— ç›¸å…³äº§å“</div>
                    <div class="empty-subtitle">
                        å½“å‰åˆ†ç±»ä¸‹æš‚æ—¶æ²¡æœ‰å¯æº¯æºçš„äº§å“<br>
                        è¯·å°è¯•å…¶ä»–åˆ†ç±»æˆ–æœç´¢å…³é”®è¯
                    </div>
                </div>
            `;

            document.getElementById('loadMoreBtn').style.display = 'none';
        }

        // åˆ†ç±»è¿‡æ»¤
        function filterCategory(category) {
            // æ›´æ–°æ¿€æ´»çŠ¶æ€
            document.querySelectorAll('.filter-tab').forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');

            currentFilter = category;
            loadProducts();
        }

        // äº§å“æ’åº
        function sortProducts(sortType) {
            // æ›´æ–°æ¿€æ´»çŠ¶æ€
            document.querySelectorAll('.sort-option').forEach(option => option.classList.remove('active'));
            event.target.classList.add('active');

            currentSort = sortType;
            loadProducts();
        }

        // æœç´¢åŠŸèƒ½
        function setupSearch() {
            const searchInput = document.getElementById('searchInput');
            let searchTimeout;

            searchInput.addEventListener('input', function() {
                clearTimeout(searchTimeout);
                searchTimeout = setTimeout(() => {
                    const searchTerm = this.value.toLowerCase().trim();

                    if (searchTerm) {
                        const filtered = productData.filter(product =>
                            product.name.toLowerCase().includes(searchTerm) ||
                            product.id.toLowerCase().includes(searchTerm) ||
                            product.origin.toLowerCase().includes(searchTerm)
                        );

                        displayedProducts = filtered;
                        loadedCount = 0;
                        document.getElementById('productGrid').innerHTML = '';
                        loadMoreProducts();
                    } else {
                        loadProducts();
                    }
                }, 300);
            });
        }

        // æŸ¥çœ‹äº§å“è¯¦æƒ…
        function viewProduct(productId) {
            console.log('æŸ¥çœ‹äº§å“è¯¦æƒ…:', productId);
            window.location.href = `./detail.html?code=${encodeURIComponent(productId)}`;
        }

        // æ¨¡æ‹Ÿæ•°æ®æ›´æ–°
        function updateStats() {
            const statsNumbers = document.querySelectorAll('.stats-number');
            statsNumbers.forEach(element => {
                const originalValue = parseInt(element.textContent.replace(/,/g, ''));
                const increment = Math.floor(Math.random() * 10) + 1;
                const newValue = originalValue + increment;
                element.textContent = newValue.toLocaleString();
            });
        }

        // æ¯30ç§’æ›´æ–°ä¸€æ¬¡ç»Ÿè®¡æ•°æ®
        setInterval(updateStats, 30000);
    </script>
</body>
</html>
