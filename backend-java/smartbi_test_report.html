<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartBI 动态配置系统全流程测试报告</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container { max-width: 1400px; margin: 0 auto; }
        .header {
            background: white;
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
        }
        .header h1 {
            font-size: 28px;
            color: #1a1a2e;
            margin-bottom: 10px;
        }
        .header .subtitle { color: #666; font-size: 14px; }
        .header .timestamp { color: #999; font-size: 12px; margin-top: 10px; }

        .summary-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        .summary-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }
        .summary-card .label { color: #666; font-size: 13px; margin-bottom: 8px; }
        .summary-card .value { font-size: 28px; font-weight: 700; color: #1a1a2e; }
        .summary-card .unit { font-size: 14px; color: #999; margin-left: 4px; }
        .summary-card.success .value { color: #10b981; }
        .summary-card.warning .value { color: #f59e0b; }
        .summary-card.danger .value { color: #ef4444; }

        .section {
            background: white;
            border-radius: 16px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
        }
        .section h2 {
            font-size: 18px;
            color: #1a1a2e;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f0f0f0;
        }
        .section h2 .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
            margin-left: 10px;
        }
        .badge-success { background: #d1fae5; color: #059669; }
        .badge-warning { background: #fef3c7; color: #d97706; }
        .badge-danger { background: #fee2e2; color: #dc2626; }

        .chart-container { height: 350px; margin: 20px 0; }
        .chart-row { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }

        .test-results { margin-top: 20px; }
        .test-item {
            background: #f8fafc;
            border-radius: 10px;
            padding: 15px 20px;
            margin-bottom: 12px;
            border-left: 4px solid #10b981;
        }
        .test-item.warning { border-left-color: #f59e0b; }
        .test-item .query { font-weight: 600; color: #1a1a2e; margin-bottom: 8px; }
        .test-item .intent {
            display: inline-block;
            background: #e0e7ff;
            color: #4f46e5;
            padding: 2px 10px;
            border-radius: 12px;
            font-size: 12px;
            margin-right: 8px;
        }
        .test-item .confidence {
            display: inline-block;
            background: #d1fae5;
            color: #059669;
            padding: 2px 10px;
            border-radius: 12px;
            font-size: 12px;
        }
        .test-item .response {
            margin-top: 10px;
            padding: 12px;
            background: white;
            border-radius: 8px;
            font-size: 13px;
            color: #374151;
            white-space: pre-line;
        }

        .ranking-table {
            width: 100%;
            border-collapse: collapse;
        }
        .ranking-table th, .ranking-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #f0f0f0;
        }
        .ranking-table th {
            background: #f8fafc;
            color: #666;
            font-weight: 600;
            font-size: 13px;
        }
        .ranking-table .rank-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            font-weight: 700;
            font-size: 14px;
        }
        .rank-1 { background: #fef3c7; color: #d97706; }
        .rank-2 { background: #e5e7eb; color: #6b7280; }
        .rank-3 { background: #fed7aa; color: #c2410c; }
        .rank-other { background: #f3f4f6; color: #9ca3af; }

        .alert-list { margin-top: 15px; }
        .alert-item {
            display: flex;
            align-items: flex-start;
            padding: 12px 15px;
            background: #fef2f2;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid #ef4444;
        }
        .alert-item.warning { background: #fffbeb; border-left-color: #f59e0b; }
        .alert-icon {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #fee2e2;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            flex-shrink: 0;
        }
        .alert-content .title { font-weight: 600; color: #1a1a2e; font-size: 14px; }
        .alert-content .message { color: #666; font-size: 13px; margin-top: 4px; }
        .alert-content .suggestion {
            color: #059669;
            font-size: 12px;
            margin-top: 6px;
            font-style: italic;
        }

        .config-summary {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }
        .config-item {
            background: #f8fafc;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }
        .config-item .count { font-size: 32px; font-weight: 700; color: #4f46e5; }
        .config-item .label { color: #666; font-size: 13px; margin-top: 5px; }

        .footer {
            text-align: center;
            color: white;
            padding: 20px;
            opacity: 0.8;
            font-size: 13px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>SmartBI 动态配置系统全流程测试报告</h1>
            <div class="subtitle">基于自然语言查询的智能商业分析系统测试验证</div>
            <div class="timestamp">生成时间: 2026-01-21 08:46:02 | 测试环境: 本地开发 (localhost:10010)</div>
        </div>

        <!-- KPI 概览卡片 -->
        <div class="summary-cards">
            <div class="summary-card">
                <div class="label">总销售额</div>
                <div class="value">615,500<span class="unit">元</span></div>
            </div>
            <div class="summary-card warning">
                <div class="label">目标完成率</div>
                <div class="value">24.4<span class="unit">%</span></div>
            </div>
            <div class="summary-card success">
                <div class="label">毛利率</div>
                <div class="value">30.0<span class="unit">%</span></div>
            </div>
            <div class="summary-card">
                <div class="label">净利润</div>
                <div class="value">129,255<span class="unit">元</span></div>
            </div>
            <div class="summary-card danger">
                <div class="label">预警数量</div>
                <div class="value">13<span class="unit">条</span></div>
            </div>
            <div class="summary-card success">
                <div class="label">NL查询测试</div>
                <div class="value">7/7<span class="unit">通过</span></div>
            </div>
        </div>

        <!-- 动态配置状态 -->
        <div class="section">
            <h2>动态配置系统状态 <span class="badge badge-success">全部正常</span></h2>
            <div class="config-summary">
                <div class="config-item">
                    <div class="count">146</div>
                    <div class="label">意图配置</div>
                </div>
                <div class="config-item">
                    <div class="count">33</div>
                    <div class="label">告警阈值</div>
                </div>
                <div class="config-item">
                    <div class="count">21</div>
                    <div class="label">激励规则</div>
                </div>
                <div class="config-item">
                    <div class="count">46</div>
                    <div class="label">字段映射</div>
                </div>
                <div class="config-item">
                    <div class="count">27</div>
                    <div class="label">指标公式</div>
                </div>
                <div class="config-item">
                    <div class="count">34</div>
                    <div class="label">支持意图</div>
                </div>
            </div>
        </div>

        <!-- 销售趋势图表 -->
        <div class="section">
            <h2>销售趋势分析</h2>
            <div id="salesTrendChart" class="chart-container"></div>
        </div>

        <!-- 双图表行 -->
        <div class="chart-row">
            <div class="section">
                <h2>区域销售分布</h2>
                <div id="regionChart" class="chart-container"></div>
            </div>
            <div class="section">
                <h2>成本结构分析</h2>
                <div id="costChart" class="chart-container"></div>
            </div>
        </div>

        <!-- 销售员排名 -->
        <div class="section">
            <h2>销售员业绩排名</h2>
            <table class="ranking-table">
                <thead>
                    <tr>
                        <th>排名</th>
                        <th>销售员</th>
                        <th>销售额</th>
                        <th>目标</th>
                        <th>完成率</th>
                        <th>状态</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><span class="rank-badge rank-1">1</span></td>
                        <td>王五</td>
                        <td>166,000.00 元</td>
                        <td>600,000.00 元</td>
                        <td>27.67%</td>
                        <td><span class="badge badge-danger">需关注</span></td>
                    </tr>
                    <tr>
                        <td><span class="rank-badge rank-2">2</span></td>
                        <td>孙七</td>
                        <td>105,500.00 元</td>
                        <td>480,000.00 元</td>
                        <td>21.98%</td>
                        <td><span class="badge badge-danger">需关注</span></td>
                    </tr>
                    <tr>
                        <td><span class="rank-badge rank-3">3</span></td>
                        <td>张三</td>
                        <td>96,000.00 元</td>
                        <td>400,000.00 元</td>
                        <td>24.00%</td>
                        <td><span class="badge badge-danger">需关注</span></td>
                    </tr>
                    <tr>
                        <td><span class="rank-badge rank-other">4</span></td>
                        <td>李四</td>
                        <td>85,000.00 元</td>
                        <td>270,000.00 元</td>
                        <td>31.48%</td>
                        <td><span class="badge badge-danger">需关注</span></td>
                    </tr>
                    <tr>
                        <td><span class="rank-badge rank-other">5</span></td>
                        <td>吴九</td>
                        <td>66,000.00 元</td>
                        <td>300,000.00 元</td>
                        <td>22.00%</td>
                        <td><span class="badge badge-danger">需关注</span></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- 部门排名图表 -->
        <div class="section">
            <h2>部门业绩对比</h2>
            <div id="deptChart" class="chart-container"></div>
        </div>

        <!-- 自然语言查询测试结果 -->
        <div class="section">
            <h2>自然语言查询测试 <span class="badge badge-success">7/7 通过</span></h2>
            <div class="test-results">
                <div class="test-item">
                    <div class="query">"本月销售额是多少？"</div>
                    <span class="intent">QUERY_SALES_OVERVIEW</span>
                    <span class="confidence">置信度: 100%</span>
                    <div class="response">销售情况：
- 总销售额: 615,500.00 元
- 订单数: 5
- 客单价: 123,100.00 元
- 目标完成率: 24.42%</div>
                </div>
                <div class="test-item">
                    <div class="query">"各部门销售业绩如何？"</div>
                    <span class="intent">QUERY_DEPARTMENT_PERFORMANCE</span>
                    <span class="confidence">置信度: 85%</span>
                    <div class="response">部门业绩：
1. 销售二部: 183,000.00 元
2. 销售一部: 157,000.00 元
3. 销售三部: 118,000.00 元
4. 销售四部: 100,500.00 元</div>
                </div>
                <div class="test-item">
                    <div class="query">"华东区销售情况"</div>
                    <span class="intent">QUERY_REGION_ANALYSIS</span>
                    <span class="confidence">置信度: 100%</span>
                    <div class="response">区域销售：
1. 华北区: 201,000.00 元
2. 华东区: 181,000.00 元
3. 华南区: 133,000.00 元
4. 西部区: 100,500.00 元</div>
                </div>
                <div class="test-item warning">
                    <div class="query">"哪个产品卖得最好"</div>
                    <span class="intent">QUERY_SALES_RANKING</span>
                    <span class="confidence">置信度: 80%</span>
                    <div class="response">销售排名：
1. 王五: 166,000.00 元
2. 孙七: 105,500.00 元
3. 张三: 96,000.00 元
(注: 意图识别为销售员排名，建议优化产品分析意图)</div>
                </div>
                <div class="test-item">
                    <div class="query">"帮我分析上海销售数据"</div>
                    <span class="intent">QUERY_REGION_ANALYSIS</span>
                    <span class="confidence">置信度: 85%</span>
                    <div class="response">意图识别成功，可支持34种查询意图</div>
                </div>
            </div>
        </div>

        <!-- 预警信息 -->
        <div class="section">
            <h2>系统预警 <span class="badge badge-danger">13 条紧急</span></h2>
            <div class="alert-list">
                <div class="alert-item">
                    <div class="alert-icon">!</div>
                    <div class="alert-content">
                        <div class="title">销售目标严重滞后</div>
                        <div class="message">当前完成率仅为 24.4%，远低于预期目标 60%</div>
                        <div class="suggestion">建议: 立即召开销售会议，分析原因并制定追赶计划</div>
                    </div>
                </div>
                <div class="alert-item">
                    <div class="alert-icon">!</div>
                    <div class="alert-content">
                        <div class="title">销售一部 人均产出过低</div>
                        <div class="message">人均销售额仅为 19,625.00 元，严重低于标准 50,000 元</div>
                        <div class="suggestion">建议: 分析人员效能，考虑调整人员配置或加强培训</div>
                    </div>
                </div>
                <div class="alert-item warning">
                    <div class="alert-icon">!</div>
                    <div class="alert-content">
                        <div class="title">产品结构单一</div>
                        <div class="message">乳制品销售占比达 100%，存在风险集中问题</div>
                        <div class="suggestion">建议: 制定新产品推广计划，分散业务风险</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- AI 建议 -->
        <div class="section">
            <h2>AI 智能建议</h2>
            <div class="test-results">
                <div class="test-item">
                    <div class="query">缩小销售团队业绩差距</div>
                    <div class="response">销售员业绩差异较大，建议加强团队协作：
• 安排销冠 王五 分享成功经验
• 对业绩落后人员进行一对一辅导
• 建立销售技能提升计划</div>
                </div>
                <div class="test-item">
                    <div class="query">优化产品结构</div>
                    <div class="response">单一产品占比达 100%，建议分散风险：
• 分析其他产品的市场潜力
• 制定新产品推广计划
• 对销售团队进行产品培训</div>
                </div>
            </div>
        </div>

        <div class="footer">
            SmartBI 动态配置系统 v1.0 | 白垩纪食品溯源系统 | 测试报告自动生成
        </div>
    </div>

    <script>
        // 销售趋势图
        const salesTrendChart = echarts.init(document.getElementById('salesTrendChart'));
        salesTrendChart.setOption({
            tooltip: { trigger: 'axis' },
            grid: { left: '3%', right: '4%', bottom: '3%', containLabel: true },
            xAxis: {
                type: 'category',
                data: ['01-02', '01-03', '01-04', '01-05', '01-06', '01-07', '01-08', '01-09', '01-10',
                       '01-11', '01-12', '01-13', '01-14', '01-15', '01-16', '01-17', '01-18', '01-19', '01-20', '01-21']
            },
            yAxis: { type: 'value', name: '销售额 (元)' },
            series: [{
                name: '销售额',
                type: 'line',
                smooth: true,
                data: [45000, 55000, 60000, 32000, 28000, 60000, 37000, 17500, 35000,
                       28000, 34000, 17500, 15000, 52500, 10000, 20000, 12000, 24000, 18000, 15000],
                areaStyle: {
                    color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                        { offset: 0, color: 'rgba(99, 102, 241, 0.5)' },
                        { offset: 1, color: 'rgba(99, 102, 241, 0.05)' }
                    ])
                },
                lineStyle: { color: '#6366f1', width: 3 },
                itemStyle: { color: '#6366f1' }
            }]
        });

        // 区域销售分布图
        const regionChart = echarts.init(document.getElementById('regionChart'));
        regionChart.setOption({
            tooltip: { trigger: 'item', formatter: '{b}: {c} 元 ({d}%)' },
            legend: { orient: 'vertical', left: 'left' },
            series: [{
                type: 'pie',
                radius: ['40%', '70%'],
                avoidLabelOverlap: false,
                itemStyle: { borderRadius: 10, borderColor: '#fff', borderWidth: 2 },
                label: { show: true, formatter: '{b}\n{d}%' },
                data: [
                    { value: 201000, name: '华北区', itemStyle: { color: '#6366f1' } },
                    { value: 181000, name: '华东区', itemStyle: { color: '#8b5cf6' } },
                    { value: 133000, name: '华南区', itemStyle: { color: '#a855f7' } },
                    { value: 100500, name: '西部区', itemStyle: { color: '#d946ef' } }
                ]
            }]
        });

        // 成本结构图
        const costChart = echarts.init(document.getElementById('costChart'));
        costChart.setOption({
            tooltip: { trigger: 'item', formatter: '{b}: {c} 元 ({d}%)' },
            legend: { orient: 'vertical', left: 'left' },
            series: [{
                type: 'pie',
                radius: ['40%', '70%'],
                itemStyle: { borderRadius: 10, borderColor: '#fff', borderWidth: 2 },
                label: { show: true, formatter: '{b}\n{d}%' },
                data: [
                    { value: 170000, name: '原材料', itemStyle: { color: '#10b981' } },
                    { value: 180000, name: '人工', itemStyle: { color: '#3b82f6' } },
                    { value: 80000, name: '制造费用', itemStyle: { color: '#f59e0b' } }
                ]
            }]
        });

        // 部门业绩图
        const deptChart = echarts.init(document.getElementById('deptChart'));
        deptChart.setOption({
            tooltip: { trigger: 'axis', axisPointer: { type: 'shadow' } },
            legend: { data: ['实际销售额', '销售目标'] },
            grid: { left: '3%', right: '4%', bottom: '3%', containLabel: true },
            xAxis: { type: 'category', data: ['销售一部', '销售二部', '销售三部', '销售四部'] },
            yAxis: { type: 'value', name: '金额 (元)' },
            series: [
                {
                    name: '实际销售额',
                    type: 'bar',
                    data: [157000, 183000, 118000, 100500],
                    itemStyle: { color: '#6366f1' },
                    label: { show: true, position: 'top', formatter: '{c}' }
                },
                {
                    name: '销售目标',
                    type: 'bar',
                    data: [190000, 230000, 190000, 185000],
                    itemStyle: { color: '#e5e7eb' }
                }
            ]
        });

        // 响应式调整
        window.addEventListener('resize', function() {
            salesTrendChart.resize();
            regionChart.resize();
            costChart.resize();
            deptChart.resize();
        });
    </script>
</body>
</html>
