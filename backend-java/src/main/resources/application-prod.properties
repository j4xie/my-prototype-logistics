# ===================================
# 生产环境配置 (宝塔服务器)
# ===================================

# 应用配置
spring.application.name=Cretas Backend System
server.port=10010

# 数据库配置 (生产环境 - 新数据库 creats-test)
spring.datasource.url=jdbc:mysql://localhost:3306/creats-test?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=Asia/Shanghai
spring.datasource.username=creats-test
spring.datasource.password=R8mwtyFEDMDPBwC8
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# JPA配置 - 生产环境安全设置
# validate: 只验证表结构，不会修改
# none: 完全不检查和修改表结构
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.defer-datasource-initialization=false

# SQL初始化 - 生产环境禁用
spring.sql.init.mode=never

# 日志配置 - 生产环境精简
logging.level.root=WARN
logging.level.com.cretas.aims=INFO
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n

# 文件上传配置
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# Jackson 配置
spring.jackson.time-zone=GMT+8
spring.jackson.date-format=yyyy-MM-dd HH:mm:ss
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.serialization.fail-on-empty-beans=false

# JWT配置
cretas.jwt.secret=cretas-food-traceability-system-secret-key-2025-do-not-change-in-production
cretas.jwt.expiration=86400000
cretas.jwt.refresh-expiration=2592000000

# AI服务配置 (生产环境)
cretas.ai.service.url=http://localhost:8085
cretas.ai.service.timeout=120000
cretas.ai.service.connect-timeout=10000

# AI意图自动学习配置
cretas.ai.intent.auto-learn.enabled=true
cretas.ai.intent.auto-learn.confidence-threshold=0.9
cretas.ai.intent.auto-learn.max-keywords-per-intent=50

# ==========================================
# DJL Embedding 配置 (纯 Java 语义匹配)
# ==========================================
# 启用 DJL Embedding (必须为 true 才能启用语义匹配)
embedding.djl.enabled=true
# 模型路径 (生产环境路径)
embedding.model-path=/www/wwwroot/cretas/models/gte-base-zh

# 禁用Redis和Security自动配置
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.data.redis.RedisAutoConfiguration,org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration
