#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# æ£€æŸ¥ä»»åŠ¡è¿›åº¦
node scripts/check-progress-ticks.js

# è¿è¡Œæµ‹è¯•
npm test

# åŸæœ‰çš„lint-stagedæ£€æŸ¥
npx lint-staged

# ç¼–ç å®Œæ•´æ€§æ£€æŸ¥
echo "ğŸ” æ£€æŸ¥æ–‡ä»¶ç¼–ç å®Œæ•´æ€§..."
powershell -ExecutionPolicy Bypass -File "./scripts/utils/encoding-checker.ps1" -Verbose:$false

# æ£€æŸ¥æ˜¯å¦æœ‰ç¼–ç é—®é¢˜
if [ $? -ne 0 ]; then
    echo "âŒ å‘ç°ç¼–ç é—®é¢˜ï¼Œè¯·è¿è¡Œç¼–ç æ£€æŸ¥è„šæœ¬ä¿®å¤åå†æäº¤"
    echo "è¿è¡Œ: powershell -File './scripts/utils/encoding-checker.ps1' -Verbose"
    exit 1
fi

echo "âœ… ç¼–ç æ£€æŸ¥é€šè¿‡" 