<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>扫码溯源 - 溯源商城</title>

  <!-- CSS -->
  <link rel="stylesheet" href="../../assets/css/variables.css">
  <link rel="stylesheet" href="../../assets/css/common.css">
  <link rel="stylesheet" href="../../assets/css/mobile.css">

  <style>
    /* 继承全局 mobile.css 样式，无需额外修改，已通过 variables.css 适配黑金主题 */
  </style>
</head>
<body>
  <div class="mobile-container">
    <!-- 顶部导航栏 -->
    <div class="mobile-header">
      <div class="mobile-header-back" onclick="window.history.back()">←</div>
      <div class="mobile-header-title">扫码溯源</div>
      <div class="mobile-header-action" onclick="showHistory()">📜</div>
    </div>

    <!-- 扫描容器 -->
    <div class="mobile-scan-container">
        <!-- 扫描框 -->
        <div class="mobile-scan-frame">
          <!-- 四角标记 -->
          <div class="mobile-scan-corner top-left"></div>
          <div class="mobile-scan-corner top-right"></div>
          <div class="mobile-scan-corner bottom-left"></div>
          <div class="mobile-scan-corner bottom-right"></div>

          <!-- 扫描线 -->
          <div class="mobile-scan-line"></div>
        </div>
    </div>

    <!-- 操作按钮 -->
    <div class="mobile-actions">
        <div class="mobile-action-item" onclick="selectFromAlbum()">
            <div class="mobile-action-icon">🖼️</div>
            <div class="mobile-action-label">相册</div>
        </div>
        <div class="mobile-action-item" onclick="toggleFlashlight()">
            <div class="mobile-action-icon">💡</div>
            <div class="mobile-action-label">手电筒</div>
        </div>
        <div class="mobile-action-item" onclick="simulateScan()">
            <div class="mobile-action-icon">📷</div>
            <div class="mobile-action-label">模拟扫描</div>
        </div>
        <div class="mobile-action-item" onclick="showManualInputModal()">
            <div class="mobile-action-icon">⌨️</div>
            <div class="mobile-action-label">输码</div>
        </div>
    </div>

    <!-- 底部Tab导航 -->
    <div class="mobile-tabbar">
      <div class="tabbar-item" onclick="navigateTo('../home/home.html')">
        <div class="tabbar-icon">🏠</div>
        <div class="tabbar-label">首页</div>
      </div>
      <div class="tabbar-item" onclick="navigateTo('../products/list.html')">
        <div class="tabbar-icon">📦</div>
        <div class="tabbar-label">分类</div>
      </div>
      <div class="tabbar-item" onclick="navigateTo('../orders/list.html')">
        <div class="tabbar-icon">🧾</div>
        <div class="tabbar-label">订单</div>
      </div>
      <div class="tabbar-item" onclick="navigateTo('../profile/index.html')">
        <div class="tabbar-icon">👤</div>
        <div class="tabbar-label">我的</div>
      </div>
    </div>
  </div>

  <!-- 手动输入模态框 -->
  <!-- ... (保持原有模态框结构，样式会自动继承黑金主题) ... -->

  <!-- JavaScript -->
  <script src="../../assets/js/mockData.js"></script>
  <script src="../../assets/js/mockAPI.js"></script>
  <script src="../../assets/js/stateManager.js"></script>
  <script src="../../assets/js/utils.js"></script>

  <script>
    // ... (保留原有JS逻辑) ...
    function navigateTo(path) {
      window.location.href = path;
    }
    
    // 省略具体JS实现，复用原有逻辑
    async function simulateScan() {
        Utils.showToast('模拟扫描成功', 'success');
        setTimeout(() => {
            window.location.href = 'batch-info.html';
        }, 1000);
    }
  </script>
</body>
</html>
