<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ‰¹é‡ä¸Šä¸‹çº¿ - æº¯æºå•†åŸç®¡ç†åå°</title>
  <link rel="stylesheet" href="../../assets/css/variables.css?v=1765970711">
  <link rel="stylesheet" href="../../assets/css/common.css?v=1765970711">
  <link rel="stylesheet" href="../../assets/css/desktop.css?v=1765970920">
  <style>
    .filter-bar {
      background: var(--bg-white);
      padding: var(--spacing-lg);
      margin-bottom: var(--spacing-lg);
      border-radius: var(--radius-md);
      display: flex;
      gap: var(--spacing-md);
      align-items: flex-end;
    }
    .batch-actions {
      background: var(--bg-white);
      padding: var(--spacing-lg);
      margin-bottom: var(--spacing-lg);
      border-radius: var(--radius-md);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .selected-count {
      font-size: var(--font-size-sm);
      color: var(--text-secondary);
    }
    .selected-count strong {
      color: var(--primary-color);
      font-size: var(--font-size-lg);
    }
    .table-container {
      background: var(--bg-white);
      border-radius: var(--radius-md);
      overflow: hidden;
    }
  </style>
</head>
<body>
  <div class="desktop-container">
        <div class="desktop-sidebar">
      <div class="sidebar-header">
        <div class="sidebar-logo">ğŸ¢ ç™½å©çºªç®¡ç†åå°</div>
      </div>
      <nav class="sidebar-nav">
        <a href="../dashboard/overview.html" class="nav-item">
          <span class="icon">ğŸ“Š</span>
          <span class="text">æ§åˆ¶å°</span>
        </a>
        
        <div class="nav-group">
          <div class="nav-group-title" onclick="toggleSidebarGroup(this)">
            <div class="title-wrap">
                <span class="icon">ğŸ“¦</span>
                <span class="text">å•†å“ä¸è®¢å•</span>
            </div>
            <span class="arrow">â–¼</span>
          </div>
          <div class="nav-sub-menu">
            <a href="../product-management/list.html" class="nav-sub-item">å•†å“ç®¡ç†</a>
            <a href="../orders/list.html" class="nav-sub-item">è®¢å•ç®¡ç†</a>
            <a href="../traceability/batch-list.html" class="nav-sub-item">æº¯æºç®¡ç†</a>
          </div>
        </div>

        <div class="nav-group">
          <div class="nav-group-title" onclick="toggleSidebarGroup(this)">
            <div class="title-wrap">
                <span class="icon">ğŸª</span>
                <span class="text">è¿è¥ä¸å†…å®¹</span>
            </div>
            <span class="arrow">â–¼</span>
          </div>
          <div class="nav-sub-menu">
            <a href="../merchant/list.html" class="nav-sub-item">å•†æˆ·ç®¡ç†</a>
            <a href="../user-management/list.html" class="nav-sub-item">ç”¨æˆ·ç®¡ç†</a>
            <a href="../content-control/review-queue.html" class="nav-sub-item">å†…å®¹å®¡æ ¸</a>
            <a href="../traffic-ad/ad-slots.html" class="nav-sub-item">å¹¿å‘ŠæŠ•æ”¾</a>
          </div>
        </div>

        <div class="nav-group">
          <div class="nav-group-title" onclick="toggleSidebarGroup(this)">
            <div class="title-wrap">
                <span class="icon">ğŸ¤–</span>
                <span class="text">AIä¸è®¾ç½®</span>
            </div>
            <span class="arrow">â–¼</span>
          </div>
          <div class="nav-sub-menu">
            <a href="../ai-knowledge/knowledge-base.html" class="nav-sub-item">AIçŸ¥è¯†åº“</a>
            <a href="../analytics/traffic-stats.html" class="nav-sub-item">æ•°æ®åˆ†æ</a>
          </div>
        </div>
      </nav>
    </div>

    <div class="desktop-main">
      <div class="desktop-header">
        <div class="breadcrumb">
          <a href="../dashboard/overview.html">é¦–é¡µ</a>
          <span>/</span>
          <a href="list.html">äº§å“ç®¡ç†</a>
          <span>/</span>
          <span>æ‰¹é‡ä¸Šä¸‹çº¿</span>
        </div>
        <div class="header-actions">
          <button class="btn btn-default" onclick="window.history.back()">è¿”å›</button>
        </div>
      </div>

      <div class="desktop-content">
        <!-- ç­›é€‰æ  -->
        <div class="filter-bar">
          <div class="form-group" style="margin: 0;">
            <label class="form-label">å•†æˆ·</label>
            <select class="form-control">
              <option>å…¨éƒ¨å•†æˆ·</option>
              <option>ç™½å©çºªï¼ˆä¸Šæµ·ï¼‰é£Ÿå“æœ‰é™å…¬å¸</option>
              <option>æµ·æ´‹é£Ÿå“åŠ å·¥å‚</option>
            </select>
          </div>
          <div class="form-group" style="margin: 0;">
            <label class="form-label">åˆ†ç±»</label>
            <select class="form-control">
              <option>å…¨éƒ¨åˆ†ç±»</option>
              <option>æ°´äº§åŠ å·¥</option>
              <option>é€Ÿå†»é£Ÿå“</option>
            </select>
          </div>
          <div class="form-group" style="margin: 0;">
            <label class="form-label">çŠ¶æ€</label>
            <select class="form-control" onchange="filterByStatus(this.value)">
              <option value="all">å…¨éƒ¨</option>
              <option value="online">åœ¨å”®</option>
              <option value="offline">å·²ä¸‹æ¶</option>
            </select>
          </div>
          <div class="form-group" style="margin: 0;">
            <label class="form-label">æœç´¢</label>
            <input type="text" class="form-control" placeholder="äº§å“åç§°/ç¼–å·">
          </div>
          <button class="btn btn-primary">æœç´¢</button>
        </div>

        <!-- æ‰¹é‡æ“ä½œæ  -->
        <div class="batch-actions">
          <div class="selected-count">
            å·²é€‰æ‹© <strong id="selectedCount">0</strong> ä¸ªäº§å“
          </div>
          <div style="display: flex; gap: var(--spacing-sm);">
            <button class="btn btn-success" onclick="batchOnline()">æ‰¹é‡ä¸Šæ¶</button>
            <button class="btn btn-warning" onclick="batchOffline()">æ‰¹é‡ä¸‹æ¶</button>
            <button class="btn btn-default" onclick="clearSelection()">æ¸…ç©ºé€‰æ‹©</button>
          </div>
        </div>

        <!-- äº§å“åˆ—è¡¨ -->
        <div class="table-container">
          <table class="table">
            <thead>
              <tr>
                <th style="width: 50px;">
                  <input type="checkbox" id="selectAll" onchange="toggleSelectAll()">
                </th>
                <th>äº§å“ä¿¡æ¯</th>
                <th>æ‰€å±å•†æˆ·</th>
                <th>åˆ†ç±»</th>
                <th>ä»·æ ¼</th>
                <th>åº“å­˜</th>
                <th>çŠ¶æ€</th>
                <th>æ“ä½œ</th>
              </tr>
            </thead>
            <tbody id="productTable">
              <!-- äº§å“åˆ—è¡¨å°†ç”±JSæ¸²æŸ“ -->
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <script src="../../assets/js/utils.js?v=1765970711"></script>
  <script>
    const products = [
      { id: 1, name: 'é€Ÿå†»é±¼æ’', merchant: 'ç™½å©çºª', category: 'æ°´äº§åŠ å·¥', price: 28, stock: 8560, status: 'online' },
      { id: 2, name: 'æœ‰æœºè™¾ä»', merchant: 'ç™½å©çºª', category: 'æ°´äº§åŠ å·¥', price: 58, stock: 3200, status: 'online' },
      { id: 3, name: 'é€Ÿå†»é±¼ä¸¸', merchant: 'ç™½å©çºª', category: 'é€Ÿå†»é£Ÿå“', price: 22, stock: 6800, status: 'online' },
      { id: 4, name: 'å†·å†»æ‰‡è´', merchant: 'æµ·æ´‹é£Ÿå“', category: 'æ°´äº§åŠ å·¥', price: 45, stock: 2100, status: 'offline' },
      { id: 5, name: 'å†·å†»é±¿é±¼', merchant: 'æµ·æ´‹é£Ÿå“', category: 'æ°´äº§åŠ å·¥', price: 35, stock: 1500, status: 'online' },
      { id: 6, name: 'é€Ÿå†»èŸ¹æ£’', merchant: 'ç™½å©çºª', category: 'é€Ÿå†»é£Ÿå“', price: 18, stock: 9500, status: 'offline' },
      { id: 7, name: 'æœ‰æœºè”¬èœåŒ…', merchant: 'ç»¿è‰²å†œåœº', category: 'æœ‰æœºè”¬èœ', price: 25, stock: 4200, status: 'online' },
      { id: 8, name: 'å†·å†»ç‰›æ’', merchant: 'ç™½å©çºª', category: 'è‚‰ç±»åŠ å·¥', price: 88, stock: 560, status: 'online' }
    ];

    let selectedIds = [];

    function renderProducts(filter = 'all') {
      const tbody = document.getElementById('productTable');
      let filtered = products;

      if (filter !== 'all') {
        filtered = products.filter(p => p.status === filter);
      }

      tbody.innerHTML = filtered.map(product => {
        const statusClass = product.status === 'online' ? 'badge-success' : 'badge-default';
        const statusText = product.status === 'online' ? 'åœ¨å”®' : 'å·²ä¸‹æ¶';
        const actionText = product.status === 'online' ? 'ä¸‹æ¶' : 'ä¸Šæ¶';
        const actionFn = product.status === 'online' ? 'offlineProduct' : 'onlineProduct';

        return `
          <tr>
            <td><input type="checkbox" class="product-checkbox" value="${product.id}" onchange="updateSelection()"></td>
            <td>
              <div style="display: flex; align-items: center; gap: 12px;">
                <div style="width: 50px; height: 50px; background: var(--bg-gray); border-radius: 4px;"></div>
                <div>
                  <div style="font-weight: 600;">${product.name}</div>
                  <div style="font-size: 12px; color: var(--text-tertiary);">ID: ${product.id}</div>
                </div>
              </div>
            </td>
            <td>${product.merchant}</td>
            <td>${product.category}</td>
            <td>Â¥${product.price}</td>
            <td>${product.stock}</td>
            <td><span class="badge ${statusClass}">${statusText}</span></td>
            <td>
              <button class="btn btn-sm btn-link" onclick="${actionFn}(${product.id})">${actionText}</button>
            </td>
          </tr>
        `;
      }).join('');
    }

    function toggleSelectAll() {
      const checkboxes = document.querySelectorAll('.product-checkbox');
      const selectAll = document.getElementById('selectAll').checked;
      checkboxes.forEach(cb => cb.checked = selectAll);
      updateSelection();
    }

    function updateSelection() {
      const checkboxes = document.querySelectorAll('.product-checkbox:checked');
      selectedIds = Array.from(checkboxes).map(cb => parseInt(cb.value));
      document.getElementById('selectedCount').textContent = selectedIds.length;
    }

    function clearSelection() {
      document.querySelectorAll('.product-checkbox').forEach(cb => cb.checked = false);
      document.getElementById('selectAll').checked = false;
      updateSelection();
    }

    async function batchOnline() {
      if (selectedIds.length === 0) {
        Utils.showToast('è¯·å…ˆé€‰æ‹©äº§å“', 'error');
        return;
      }

      const confirmed = await Utils.confirm(`ç¡®è®¤ä¸Šæ¶é€‰ä¸­çš„ ${selectedIds.length} ä¸ªäº§å“ï¼Ÿ`, 'æ‰¹é‡ä¸Šæ¶');
      if (!confirmed) return;

      Utils.showLoading('å¤„ç†ä¸­...');
      await Utils.sleep(1500);
      Utils.hideLoading();
      Utils.showToast(`å·²æˆåŠŸä¸Šæ¶ ${selectedIds.length} ä¸ªäº§å“`, 'success');
      clearSelection();
    }

    async function batchOffline() {
      if (selectedIds.length === 0) {
        Utils.showToast('è¯·å…ˆé€‰æ‹©äº§å“', 'error');
        return;
      }

      const confirmed = await Utils.confirm(`ç¡®è®¤ä¸‹æ¶é€‰ä¸­çš„ ${selectedIds.length} ä¸ªäº§å“ï¼Ÿ`, 'æ‰¹é‡ä¸‹æ¶');
      if (!confirmed) return;

      Utils.showLoading('å¤„ç†ä¸­...');
      await Utils.sleep(1500);
      Utils.hideLoading();
      Utils.showToast(`å·²æˆåŠŸä¸‹æ¶ ${selectedIds.length} ä¸ªäº§å“`, 'success');
      clearSelection();
    }

    async function onlineProduct(id) {
      const confirmed = await Utils.confirm('ç¡®è®¤ä¸Šæ¶è¯¥äº§å“ï¼Ÿ', 'ä¸Šæ¶äº§å“');
      if (!confirmed) return;

      Utils.showLoading('å¤„ç†ä¸­...');
      await Utils.sleep(1000);
      Utils.hideLoading();
      Utils.showToast('å·²ä¸Šæ¶', 'success');
    }

    async function offlineProduct(id) {
      const confirmed = await Utils.confirm('ç¡®è®¤ä¸‹æ¶è¯¥äº§å“ï¼Ÿ', 'ä¸‹æ¶äº§å“');
      if (!confirmed) return;

      Utils.showLoading('å¤„ç†ä¸­...');
      await Utils.sleep(1000);
      Utils.hideLoading();
      Utils.showToast('å·²ä¸‹æ¶', 'success');
    }

    function filterByStatus(status) {
      renderProducts(status);
      clearSelection();
    }

    document.addEventListener('DOMContentLoaded', () => {
      renderProducts();
    });
  </script>
</body>
</html>
