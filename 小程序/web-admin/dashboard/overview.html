<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ€»è§ˆä»ªè¡¨æ¿ - ç™½å©çºªé£Ÿå“æº¯æºç®¡ç†åå°</title>

  <!-- CSS -->
  <link rel="stylesheet" href="../../assets/css/variables.css">
  <link rel="stylesheet" href="../../assets/css/common.css">
  <link rel="stylesheet" href="../../assets/css/desktop.css">

  <style>
    /* å…³é”®æŒ‡æ ‡å¡ç‰‡ */
    .metrics-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: var(--spacing-lg);
      margin-bottom: var(--spacing-2xl);
    }

    .metric-card {
      background: var(--bg-white);
      border-radius: var(--radius-lg);
      padding: var(--spacing-2xl);
      box-shadow: var(--shadow-sm);
      transition: all var(--transition-base);
      cursor: pointer;
    }

    .metric-card:hover {
      box-shadow: var(--shadow-md);
      transform: translateY(-2px);
    }

    .metric-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--spacing-lg);
    }

    .metric-icon {
      width: 48px;
      height: 48px;
      border-radius: var(--radius-md);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: var(--font-size-2xl);
    }

    .metric-icon.primary {
      background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
    }

    .metric-icon.success {
      background: rgba(82, 196, 26, 0.1);
    }

    .metric-icon.warning {
      background: rgba(250, 173, 20, 0.1);
    }

    .metric-icon.danger {
      background: rgba(245, 34, 45, 0.1);
    }

    .metric-trend {
      display: flex;
      align-items: center;
      gap: var(--spacing-xs);
      font-size: var(--font-size-sm);
    }

    .metric-trend.up {
      color: var(--success-color);
    }

    .metric-trend.down {
      color: var(--error-color);
    }

    .metric-value {
      font-size: var(--font-size-3xl);
      font-weight: var(--font-weight-bold);
      color: var(--text-primary);
      margin-bottom: var(--spacing-xs);
    }

    .metric-label {
      font-size: var(--font-size-base);
      color: var(--text-secondary);
    }

    /* å›¾è¡¨åŒºåŸŸ */
    .charts-section {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: var(--spacing-lg);
      margin-bottom: var(--spacing-2xl);
    }

    .chart-card {
      background: var(--bg-white);
      border-radius: var(--radius-lg);
      padding: var(--spacing-2xl);
      box-shadow: var(--shadow-sm);
    }

    .chart-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--spacing-2xl);
      padding-bottom: var(--spacing-md);
      border-bottom: 1px solid var(--border-color);
    }

    .chart-title {
      font-size: var(--font-size-lg);
      font-weight: var(--font-weight-bold);
      color: var(--text-primary);
    }

    .chart-filters {
      display: flex;
      gap: var(--spacing-sm);
    }

    .chart-filter-btn {
      padding: var(--spacing-xs) var(--spacing-md);
      background: var(--bg-gray);
      border: none;
      border-radius: var(--radius-md);
      font-size: var(--font-size-sm);
      color: var(--text-secondary);
      cursor: pointer;
      transition: all var(--transition-base);
    }

    .chart-filter-btn.active {
      background: var(--primary-color);
      color: var(--text-inverse);
    }

    .chart-placeholder {
      height: 300px;
      background: linear-gradient(180deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.02) 100%);
      border-radius: var(--radius-md);
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text-tertiary);
      font-size: var(--font-size-sm);
    }

    /* å¾…åŠäº‹é¡¹ */
    .todos-section {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--spacing-lg);
    }

    .todos-card {
      background: var(--bg-white);
      border-radius: var(--radius-lg);
      padding: var(--spacing-2xl);
      box-shadow: var(--shadow-sm);
    }

    .todos-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--spacing-lg);
    }

    .todos-title {
      font-size: var(--font-size-lg);
      font-weight: var(--font-weight-bold);
      color: var(--text-primary);
    }

    .todos-badge {
      padding: var(--spacing-xs) var(--spacing-md);
      background: var(--error-color);
      color: var(--text-inverse);
      border-radius: var(--radius-pill);
      font-size: var(--font-size-xs);
      font-weight: var(--font-weight-semibold);
    }

    .todo-item {
      padding: var(--spacing-md);
      border-bottom: 1px solid var(--border-color);
      cursor: pointer;
      transition: background var(--transition-base);
    }

    .todo-item:last-child {
      border-bottom: none;
    }

    .todo-item:hover {
      background: var(--bg-gray);
    }

    .todo-item-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--spacing-xs);
    }

    .todo-item-title {
      font-size: var(--font-size-base);
      font-weight: var(--font-weight-medium);
      color: var(--text-primary);
    }

    .todo-item-time {
      font-size: var(--font-size-xs);
      color: var(--text-tertiary);
    }

    .todo-item-desc {
      font-size: var(--font-size-sm);
      color: var(--text-secondary);
    }

    /* æ´»åŠ¨åˆ—è¡¨ */
    .activity-item {
      display: flex;
      gap: var(--spacing-md);
      padding: var(--spacing-md);
      border-bottom: 1px solid var(--border-color);
    }

    .activity-item:last-child {
      border-bottom: none;
    }

    .activity-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: var(--primary-gradient);
      color: var(--text-inverse);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: var(--font-weight-bold);
      flex-shrink: 0;
    }

    .activity-content {
      flex: 1;
    }

    .activity-text {
      font-size: var(--font-size-sm);
      color: var(--text-primary);
      margin-bottom: var(--spacing-xs);
    }

    .activity-time {
      font-size: var(--font-size-xs);
      color: var(--text-tertiary);
    }
  </style>
</head>
<body>
  <!-- æ¡Œé¢ç«¯å®¹å™¨ -->
  <div class="desktop-container">
    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
    <div class="desktop-header">
      <div class="desktop-header-left">
        <div class="desktop-logo">ğŸ± ç™½å©çºªé£Ÿå“æº¯æº</div>
      </div>
      <div class="desktop-header-center">
        <div class="desktop-search">
          <input type="text" placeholder="æœç´¢å•†æˆ·ã€äº§å“ã€è®¢å•..." class="desktop-search-input">
          <button class="desktop-search-btn"></button>
        </div>
      </div>
      <div class="desktop-header-right">
        <div class="desktop-header-icon" onclick="Utils.showToast('é€šçŸ¥åŠŸèƒ½å¼€å‘ä¸­', 'info')">
          <span>ğŸ””</span>
          <span class="desktop-header-badge">5</span>
        </div>
        <div class="desktop-header-icon" onclick="Utils.showToast('æ¶ˆæ¯åŠŸèƒ½å¼€å‘ä¸­', 'info')">
          <span>âœ‰ï¸</span>
          <span class="desktop-header-badge">12</span>
        </div>
        <div class="desktop-user-menu">
          <div class="desktop-user-avatar"></div>
          <div class="desktop-user-info">
            <div class="desktop-user-name">ç®¡ç†å‘˜</div>
            <div class="desktop-user-role">è¶…çº§ç®¡ç†å‘˜</div>
          </div>
        </div>
      </div>
    </div>

    <!-- ä¾§è¾¹æ  -->
    <div class="desktop-sidebar">
      <div class="desktop-menu">
        <div class="desktop-menu-item active">
          <span class="desktop-menu-icon"></span>
          <span class="desktop-menu-label">æ€»è§ˆ</span>
        </div>
        <div class="desktop-menu-item" onclick="navigateTo('../merchant/list.html')">
          <span class="desktop-menu-icon">ğŸ¢</span>
          <span class="desktop-menu-label">å•†æˆ·ç®¡ç†</span>
        </div>
        <div class="desktop-menu-item" onclick="navigateTo('../product-management/list.html')">
          <span class="desktop-menu-icon"></span>
          <span class="desktop-menu-label">äº§å“ç®¡ç†</span>
        </div>
        <div class="desktop-menu-item" onclick="navigateTo('../content-control/review-queue.html')">
          <span class="desktop-menu-icon"></span>
          <span class="desktop-menu-label">å†…å®¹æ§åˆ¶</span>
        </div>
        <div class="desktop-menu-item" onclick="Utils.showToast('æµé‡å¹¿å‘ŠåŠŸèƒ½å¼€å‘ä¸­', 'info')">
          <span class="desktop-menu-icon">ğŸ“¢</span>
          <span class="desktop-menu-label">æµé‡å¹¿å‘Š</span>
        </div>
        <div class="desktop-menu-item" onclick="navigateTo('../ai-knowledge/knowledge-base.html')">
          <span class="desktop-menu-icon"></span>
          <span class="desktop-menu-label">AIçŸ¥è¯†åº“</span>
        </div>
        <div class="desktop-menu-item" onclick="Utils.showToast('åˆ†æåŠŸèƒ½å¼€å‘ä¸­', 'info')">
          <span class="desktop-menu-icon">ğŸ“ˆ</span>
          <span class="desktop-menu-label">åˆ†æ</span>
        </div>
        <div class="desktop-menu-item" onclick="Utils.showToast('è®¾ç½®åŠŸèƒ½å¼€å‘ä¸­', 'info')">
          <span class="desktop-menu-icon"></span>
          <span class="desktop-menu-label">è®¾ç½®</span>
        </div>
      </div>
    </div>

    <!-- ä¸»å†…å®¹åŒº -->
    <div class="desktop-main">
      <div class="desktop-content">
        <!-- é¡µé¢æ ‡é¢˜ -->
        <div class="desktop-page-header">
          <div>
            <h1 class="desktop-page-title">æ€»è§ˆä»ªè¡¨æ¿</h1>
            <p class="desktop-page-subtitle">æ¬¢è¿å›æ¥ï¼Œè¿™æ˜¯ä»Šå¤©çš„æ•°æ®æ¦‚è§ˆ</p>
          </div>
          <div class="desktop-page-actions">
            <button class="btn btn-default" onclick="loadDashboardData()">ğŸ”„ åˆ·æ–°æ•°æ®</button>
            <button class="btn btn-primary" onclick="Utils.showToast('å¯¼å‡ºåŠŸèƒ½å¼€å‘ä¸­', 'info')">ğŸ“¥ å¯¼å‡ºæŠ¥è¡¨</button>
          </div>
        </div>

        <!-- å…³é”®æŒ‡æ ‡ -->
        <div class="metrics-grid">
          <div class="metric-card" onclick="navigateTo('../merchant/list.html')">
            <div class="metric-header">
              <div class="metric-icon primary">ğŸ¢</div>
              <div class="metric-trend up">
                <span>â†‘</span>
                <span>+12%</span>
              </div>
            </div>
            <div class="metric-value" id="merchantCount">156</div>
            <div class="metric-label">å…¥é©»å•†æˆ·</div>
          </div>

          <div class="metric-card" onclick="navigateTo('../product-management/list.html')">
            <div class="metric-header">
              <div class="metric-icon success"></div>
              <div class="metric-trend up">
                <span>â†‘</span>
                <span>+8%</span>
              </div>
            </div>
            <div class="metric-value" id="productCount">2,341</div>
            <div class="metric-label">åœ¨å”®äº§å“</div>
          </div>

          <div class="metric-card">
            <div class="metric-header">
              <div class="metric-icon warning"></div>
              <div class="metric-trend up">
                <span>â†‘</span>
                <span>+24%</span>
              </div>
            </div>
            <div class="metric-value" id="gmvTotal">Â¥1.2M</div>
            <div class="metric-label">æœ¬æœˆGMV</div>
          </div>

          <div class="metric-card">
            <div class="metric-header">
              <div class="metric-icon danger">ğŸ“‹</div>
              <div class="metric-trend down">
                <span>â†“</span>
                <span>-5%</span>
              </div>
            </div>
            <div class="metric-value" id="orderCount">8,567</div>
            <div class="metric-label">æœ¬æœˆè®¢å•</div>
          </div>
        </div>

        <!-- å›¾è¡¨ -->
        <div class="charts-section">
          <!-- è®¢å•è¶‹åŠ¿ -->
          <div class="chart-card">
            <div class="chart-header">
              <div class="chart-title">è®¢å•è¶‹åŠ¿</div>
              <div class="chart-filters">
                <button class="chart-filter-btn active">7å¤©</button>
                <button class="chart-filter-btn">30å¤©</button>
                <button class="chart-filter-btn">90å¤©</button>
              </div>
            </div>
            <div class="chart-placeholder">
              ğŸ“ˆ è®¢å•è¶‹åŠ¿å›¾ (æ¨¡æ‹Ÿå›¾è¡¨ - å®é™…åº”ä½¿ç”¨ Chart.js æˆ– ECharts)
            </div>
          </div>

          <!-- äº§å“åˆ†ç±»å æ¯” -->
          <div class="chart-card">
            <div class="chart-header">
              <div class="chart-title">äº§å“åˆ†ç±»å æ¯”</div>
            </div>
            <div class="chart-placeholder">
               é¥¼å›¾ (æ¨¡æ‹Ÿå›¾è¡¨ - å®é™…åº”ä½¿ç”¨ Chart.js æˆ– ECharts)
            </div>
          </div>
        </div>

        <!-- å¾…åŠäº‹é¡¹å’Œæœ€è¿‘æ´»åŠ¨ -->
        <div class="todos-section">
          <!-- å¾…åŠäº‹é¡¹ -->
          <div class="todos-card">
            <div class="todos-header">
              <div class="todos-title">å¾…åŠäº‹é¡¹</div>
              <div class="todos-badge">8</div>
            </div>
            <div id="todosContainer">
              <div class="todo-item" onclick="navigateTo('../merchant/review.html')">
                <div class="todo-item-header">
                  <div class="todo-item-title">å•†æˆ·å®¡æ ¸</div>
                  <div class="todo-item-time">2å°æ—¶å‰</div>
                </div>
                <div class="todo-item-desc">5ä¸ªå•†æˆ·å¾…å®¡æ ¸</div>
              </div>
              <div class="todo-item" onclick="navigateTo('../content-control/review-queue.html')">
                <div class="todo-item-header">
                  <div class="todo-item-title">å†…å®¹å®¡æ ¸</div>
                  <div class="todo-item-time">5å°æ—¶å‰</div>
                </div>
                <div class="todo-item-desc">12æ¡äº§å“æ–‡æ¡ˆå¾…å®¡æ ¸</div>
              </div>
              <div class="todo-item" onclick="navigateTo('../product-management/list.html')">
                <div class="todo-item-header">
                  <div class="todo-item-title">äº§å“ä¸Šæ¶</div>
                  <div class="todo-item-time">1å¤©å‰</div>
                </div>
                <div class="todo-item-desc">8ä¸ªæ–°äº§å“å¾…ä¸Šæ¶</div>
              </div>
              <div class="todo-item" onclick="Utils.showToast('ç³»ç»Ÿç»´æŠ¤åŠŸèƒ½å¼€å‘ä¸­', 'info')">
                <div class="todo-item-header">
                  <div class="todo-item-title">ç³»ç»Ÿç»´æŠ¤</div>
                  <div class="todo-item-time">2å¤©å‰</div>
                </div>
                <div class="todo-item-desc">å®šæœŸæ•°æ®å¤‡ä»½</div>
              </div>
            </div>
          </div>

          <!-- æœ€è¿‘æ´»åŠ¨ -->
          <div class="todos-card">
            <div class="todos-header">
              <div class="todos-title">æœ€è¿‘æ´»åŠ¨</div>
            </div>
            <div id="activityContainer">
              <div class="activity-item">
                <div class="activity-avatar">å¼ </div>
                <div class="activity-content">
                  <div class="activity-text"><strong>å¼ ä¸‰</strong> å®¡æ ¸é€šè¿‡äº†å•†æˆ· <strong>ä¸Šæµ·é¤é¥®æœ‰é™å…¬å¸</strong></div>
                  <div class="activity-time">10åˆ†é’Ÿå‰</div>
                </div>
              </div>
              <div class="activity-item">
                <div class="activity-avatar">æ</div>
                <div class="activity-content">
                  <div class="activity-text"><strong>æå››</strong> ä¸Šæ¶äº†äº§å“ <strong>é€Ÿå†»é±¼æ’</strong></div>
                  <div class="activity-time">1å°æ—¶å‰</div>
                </div>
              </div>
              <div class="activity-item">
                <div class="activity-avatar">ç‹</div>
                <div class="activity-content">
                  <div class="activity-text"><strong>ç‹äº”</strong> æ›´æ–°äº†çŸ¥è¯†åº“æ–‡æ¡£ <strong>æº¯æºæ“ä½œæŒ‡å—</strong></div>
                  <div class="activity-time">3å°æ—¶å‰</div>
                </div>
              </div>
              <div class="activity-item">
                <div class="activity-avatar">èµµ</div>
                <div class="activity-content">
                  <div class="activity-text"><strong>èµµå…­</strong> å¤„ç†äº†å†…å®¹å®¡æ ¸ <strong>12æ¡äº§å“æ–‡æ¡ˆ</strong></div>
                  <div class="activity-time">5å°æ—¶å‰</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- JavaScript -->
  <script src="../../assets/js/mockData.js"></script>
  <script src="../../assets/js/mockAPI.js"></script>
  <script src="../../assets/js/utils.js"></script>

  <script>
    // ==================== åˆå§‹åŒ– ====================
    document.addEventListener('DOMContentLoaded', () => {
      loadDashboardData();
    });

    // ==================== åŠ è½½ä»ªè¡¨æ¿æ•°æ® ====================
    async function loadDashboardData() {
      try {
        const result = await MockAPI.request('admin.dashboard.stats', {
          skipError: true
        });

        // æ›´æ–°å…³é”®æŒ‡æ ‡
        document.getElementById('merchantCount').textContent = result.data.merchants.total.toLocaleString();
        document.getElementById('productCount').textContent = result.data.products.total.toLocaleString();
        document.getElementById('gmvTotal').textContent = `Â¥${(result.data.orders.gmv / 1000000).toFixed(1)}M`;
        document.getElementById('orderCount').textContent = result.data.orders.total.toLocaleString();

        Utils.showToast('æ•°æ®å·²åˆ·æ–°', 'success');

      } catch (error) {
        console.error('åŠ è½½ä»ªè¡¨æ¿æ•°æ®å¤±è´¥:', error);
        Utils.showToast('åŠ è½½æ•°æ®å¤±è´¥', 'error');
      }
    }

    // ==================== å¯¼èˆªå‡½æ•° ====================
    function navigateTo(path) {
      window.location.href = path;
    }

    // ==================== å›¾è¡¨ç­›é€‰ ====================
    document.querySelectorAll('.chart-filter-btn').forEach(btn => {
      btn.addEventListener('click', (e) => {
        // ç§»é™¤æ‰€æœ‰æ¿€æ´»çŠ¶æ€
        e.target.parentElement.querySelectorAll('.chart-filter-btn').forEach(b => {
          b.classList.remove('active');
        });
        // æ¿€æ´»å½“å‰æŒ‰é’®
        e.target.classList.add('active');
        // é‡æ–°åŠ è½½å›¾è¡¨æ•°æ®
        Utils.showToast(`åˆ‡æ¢åˆ°${e.target.textContent}è§†å›¾`, 'info');
      });
    });
  </script>
</body>
</html>
