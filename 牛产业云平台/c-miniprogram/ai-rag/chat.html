<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>AIæ™ºèƒ½åŠ©æ‰‹ - ä¸­å›½ç‰›äº§ä¸šæ•°æ™ºäº‘å¹³å°</title>
  <link rel="stylesheet" href="../../assets/css/variables.css">
  <link rel="stylesheet" href="../../assets/css/common.css">
  <link rel="stylesheet" href="../../assets/css/mobile.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mdi/font@7.2.96/css/materialdesignicons.min.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Microsoft YaHei', sans-serif;
      background: #F5F5F5;
      min-height: 100vh;
      padding-bottom: 70px;
    }

    /* é¡¶éƒ¨Header */
    .header {
      background: linear-gradient(135deg, #1565C0 0%, #42A5F5 100%);
      padding: 48px 16px 16px;
      color: white;
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .header-bar {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .back-btn {
      font-size: 22px;
      text-decoration: none;
      color: white;
      padding: 4px;
    }

    .header-title {
      font-size: 17px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .header-title i {
      font-size: 20px;
    }

    .header-action {
      font-size: 20px;
      color: white;
      padding: 4px;
    }

    /* èŠå¤©åŒºåŸŸ */
    .chat-container {
      flex: 1;
      padding: 16px 16px 200px;
      overflow-y: auto;
    }

    /* AIä»‹ç»å¡ç‰‡ */
    .ai-intro {
      background: white;
      border-radius: 16px;
      padding: 20px;
      margin-bottom: 20px;
      text-align: center;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    }

    .ai-avatar {
      width: 72px;
      height: 72px;
      background: linear-gradient(135deg, #1565C0 0%, #42A5F5 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 12px;
    }

    .ai-avatar i {
      font-size: 36px;
      color: white;
    }

    .ai-name {
      font-size: 18px;
      font-weight: 600;
      color: #212121;
      margin-bottom: 4px;
    }

    .ai-badge {
      display: inline-block;
      padding: 2px 8px;
      background: linear-gradient(135deg, #1565C0 0%, #42A5F5 100%);
      border-radius: 10px;
      font-size: 11px;
      color: white;
      margin-bottom: 12px;
    }

    .ai-desc {
      font-size: 14px;
      color: #757575;
      line-height: 1.6;
    }

    /* å¿«æ·é—®é¢˜ */
    .quick-questions {
      margin-bottom: 20px;
    }

    .quick-title {
      font-size: 13px;
      color: #9E9E9E;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .quick-title i {
      font-size: 16px;
    }

    .quick-list {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }

    .quick-item {
      padding: 10px 14px;
      background: white;
      border: 1px solid #E0E0E0;
      border-radius: 20px;
      font-size: 13px;
      color: #424242;
      cursor: pointer;
      transition: all 0.2s;
    }

    .quick-item:active {
      background: #E3F2FD;
      border-color: #1565C0;
      color: #1565C0;
    }

    /* æ¶ˆæ¯åˆ—è¡¨ */
    .message-list {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .message {
      display: flex;
      gap: 10px;
      max-width: 85%;
    }

    .message.user {
      align-self: flex-end;
      flex-direction: row-reverse;
    }

    .message-avatar {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .message.ai .message-avatar {
      background: linear-gradient(135deg, #1565C0 0%, #42A5F5 100%);
      color: white;
    }

    .message.user .message-avatar {
      background: #4CAF50;
      color: white;
    }

    .message-avatar i {
      font-size: 18px;
    }

    .message-content {
      padding: 12px 16px;
      border-radius: 16px;
      font-size: 14px;
      line-height: 1.6;
    }

    .message.ai .message-content {
      background: white;
      color: #212121;
      border-bottom-left-radius: 4px;
    }

    .message.user .message-content {
      background: linear-gradient(135deg, #1565C0 0%, #42A5F5 100%);
      color: white;
      border-bottom-right-radius: 4px;
    }

    .message-time {
      font-size: 11px;
      color: #9E9E9E;
      margin-top: 4px;
      text-align: right;
    }

    .message.user .message-time {
      text-align: left;
    }

    /* æ‰“å­—æŒ‡ç¤ºå™¨ */
    .typing-indicator {
      display: none;
      align-items: center;
      gap: 10px;
      max-width: 85%;
    }

    .typing-indicator.show {
      display: flex;
    }

    .typing-dots {
      display: flex;
      gap: 4px;
      padding: 12px 16px;
      background: white;
      border-radius: 16px;
      border-bottom-left-radius: 4px;
    }

    .typing-dots span {
      width: 8px;
      height: 8px;
      background: #BDBDBD;
      border-radius: 50%;
      animation: typing 1.4s infinite;
    }

    .typing-dots span:nth-child(2) {
      animation-delay: 0.2s;
    }

    .typing-dots span:nth-child(3) {
      animation-delay: 0.4s;
    }

    @keyframes typing {
      0%, 60%, 100% {
        transform: translateY(0);
        background: #BDBDBD;
      }
      30% {
        transform: translateY(-8px);
        background: #1565C0;
      }
    }

    /* è¾“å…¥åŒºåŸŸ */
    .input-bar {
      position: fixed;
      bottom: 65px;
      left: 50%;
      transform: translateX(-50%);
      width: 100%;
      max-width: 428px;
      padding: 10px 16px 12px;
      background: white;
      box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.05);
      z-index: 100;
      box-sizing: border-box;
    }

    .input-wrapper {
      display: flex;
      align-items: flex-end;
      gap: 10px;
      background: #F5F5F5;
      border-radius: 24px;
      padding: 8px 8px 8px 16px;
    }

    .input-wrapper textarea {
      flex: 1;
      border: none;
      outline: none;
      background: transparent;
      font-size: 15px;
      color: #212121;
      resize: none;
      max-height: 100px;
      line-height: 1.4;
      padding: 6px 0;
    }

    .input-wrapper textarea::placeholder {
      color: #9E9E9E;
    }

    .send-btn {
      width: 40px;
      height: 40px;
      background: linear-gradient(135deg, #1565C0 0%, #42A5F5 100%);
      border: none;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      flex-shrink: 0;
    }

    .send-btn i {
      font-size: 20px;
      color: white;
    }

    .send-btn:disabled {
      background: #BDBDBD;
    }

    /* åŠŸèƒ½æŒ‰é’® */
    .action-buttons {
      display: flex;
      gap: 8px;
      margin-top: 10px;
    }

    .action-btn {
      flex: 1;
      padding: 10px 8px;
      background: #F5F5F5;
      border: none;
      border-radius: 8px;
      font-size: 12px;
      color: #616161;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 4px;
      cursor: pointer;
      min-height: 40px;
    }

    .action-btn i {
      font-size: 16px;
    }

    .action-btn:active {
      background: #E0E0E0;
    }

    /* Toast */
    .toast {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(0, 0, 0, 0.75);
      color: white;
      padding: 12px 24px;
      border-radius: 8px;
      font-size: 14px;
      z-index: 1000;
      opacity: 0;
      transition: opacity 0.3s;
      pointer-events: none;
    }

    .toast.show {
      opacity: 1;
    }

  </style>
</head>

<body>
  <!-- é¡¶éƒ¨Header -->
  <header class="header">
    <div class="header-bar">
      <a href="javascript:void(0)" class="back-btn" onclick="showChatHistory()"><i class="mdi mdi-history"></i></a>
      <span class="header-title"><i class="mdi mdi-robot"></i> AIæ™ºèƒ½åŠ©æ‰‹</span>
      <a href="javascript:void(0)" class="header-action" onclick="clearChat()"><i class="mdi mdi-delete-outline"></i></a>
    </div>
  </header>

  <!-- èŠå¤©åŒºåŸŸ -->
  <div class="chat-container" id="chatContainer">
    <!-- AIä»‹ç» -->
    <div class="ai-intro">
      <div class="ai-avatar">
        <i class="mdi mdi-robot"></i>
      </div>
      <div class="ai-name">ç‰›äº§ä¸šAIåŠ©æ‰‹</div>
      <div class="ai-badge">DeepSeek é©±åŠ¨</div>
      <div class="ai-desc">
        æ‚¨å¥½ï¼æˆ‘æ˜¯ç‰›äº§ä¸šæ™ºèƒ½åŠ©æ‰‹ï¼ŒåŸºäºDeepSeekå¤§æ¨¡å‹ï¼Œä¸“æ³¨äºç‰›äº§ä¸šé¢†åŸŸçŸ¥è¯†ã€‚
        æˆ‘å¯ä»¥å¸®æ‚¨è§£ç­”å…»æ®–ã€äº¤æ˜“ã€æº¯æºã€å¸‚åœºåˆ†æç­‰é—®é¢˜ã€‚
      </div>
    </div>

    <!-- å¿«æ·é—®é¢˜ -->
    <div class="quick-questions">
      <div class="quick-title"><i class="mdi mdi-lightbulb-outline"></i> çŒœä½ æƒ³é—®</div>
      <div class="quick-list">
        <div class="quick-item" onclick="askQuestion('æœ€è¿‘ç‰›è‚‰å¸‚åœºè¡Œæƒ…å¦‚ä½•ï¼Ÿ')">
          ç‰›è‚‰å¸‚åœºè¡Œæƒ…
        </div>
        <div class="quick-item" onclick="askQuestion('å¦‚ä½•æé«˜è‚‰ç‰›çš„å‡ºæ ç‡ï¼Ÿ')">
          æé«˜å‡ºæ ç‡
        </div>
        <div class="quick-item" onclick="askQuestion('ç‰›çš„å¸¸è§ç–¾ç—…å¦‚ä½•é¢„é˜²ï¼Ÿ')">
          ç–¾ç—…é¢„é˜²
        </div>
        <div class="quick-item" onclick="askQuestion('å¦‚ä½•è¿›è¡Œç‰›è‚‰æº¯æºï¼Ÿ')">
          æº¯æºæŸ¥è¯¢
        </div>
        <div class="quick-item" onclick="askQuestion('æ´»ç‰›è¿è¾“æœ‰å“ªäº›æ³¨æ„äº‹é¡¹ï¼Ÿ')">
          è¿è¾“æ³¨æ„äº‹é¡¹
        </div>
        <div class="quick-item" onclick="askQuestion('é¥²æ–™é…æ¯”çš„æœ€ä½³æ–¹æ¡ˆæ˜¯ä»€ä¹ˆï¼Ÿ')">
          é¥²æ–™é…æ¯”
        </div>
      </div>
    </div>

    <!-- æ¶ˆæ¯åˆ—è¡¨ -->
    <div class="message-list" id="messageList">
      <!-- æ¶ˆæ¯ä¼šåŠ¨æ€æ·»åŠ åˆ°è¿™é‡Œ -->
    </div>

    <!-- æ‰“å­—æŒ‡ç¤ºå™¨ -->
    <div class="typing-indicator" id="typingIndicator">
      <div class="message-avatar">
        <i class="mdi mdi-robot"></i>
      </div>
      <div class="typing-dots">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
  </div>

  <!-- è¾“å…¥åŒºåŸŸ -->
  <div class="input-bar">
    <div class="input-wrapper">
      <textarea id="messageInput" placeholder="è¾“å…¥æ‚¨çš„é—®é¢˜..." rows="1" oninput="autoResize(this)"></textarea>
      <button class="send-btn" id="sendBtn" onclick="sendMessage()">
        <i class="mdi mdi-send"></i>
      </button>
    </div>
    <div class="action-buttons">
      <button class="action-btn" onclick="voiceInput()">
        <i class="mdi mdi-microphone"></i> è¯­éŸ³
      </button>
      <button class="action-btn" onclick="showHistory()">
        <i class="mdi mdi-history"></i> å†å²
      </button>
      <button class="action-btn" onclick="generateReport()">
        <i class="mdi mdi-file-document"></i> æŠ¥å‘Š
      </button>
    </div>
  </div>

  <!-- åº•éƒ¨å¯¼èˆª -->
  <nav class="bottom-nav">
    <a href="../home/home.html" class="nav-item">
      <span class="nav-icon mdi mdi-home"></span>
      <span>é¦–é¡µ</span>
    </a>
    <a href="../cattle/publish.html" class="nav-item">
      <span class="nav-icon mdi mdi-plus-circle"></span>
      <span>å‘å¸ƒ</span>
    </a>
    <a href="chat.html" class="nav-item active">
      <span class="nav-icon mdi mdi-robot"></span>
      <span>AI</span>
    </a>
    <a href="../enterprise/messages.html" class="nav-item">
      <span class="nav-icon mdi mdi-bell"></span>
      <span>æ¶ˆæ¯</span>
    </a>
    <a href="../enterprise/center.html" class="nav-item">
      <span class="nav-icon mdi mdi-account"></span>
      <span>æˆ‘çš„</span>
    </a>
  </nav>

  <!-- Toast -->
  <div class="toast" id="toast"></div>

  <script>
    // æ¨¡æ‹ŸAIå›å¤
    const aiResponses = {
      'å¸‚åœºè¡Œæƒ…': 'æ ¹æ®æœ€æ–°å¸‚åœºæ•°æ®åˆ†æï¼Œå½“å‰æ´»ç‰›ä»·æ ¼æ•´ä½“ä¿æŒç¨³å®šï¼Œè‚²è‚¥ç‰›å‡ä»·çº¦18-20å…ƒ/æ–¤ã€‚\n\nğŸ“Š **å¸‚åœºè¶‹åŠ¿**\n- ä¸œåŒ—åœ°åŒºï¼šä»·æ ¼ç•¥æœ‰ä¸Šæ¶¨ï¼Œæ¶¨å¹…çº¦2%\n- ååŒ—åœ°åŒºï¼šä¾›éœ€å¹³è¡¡ï¼Œä»·æ ¼ç¨³å®š\n- è¥¿å—åœ°åŒºï¼šéœ€æ±‚å¢åŠ ï¼Œä»·æ ¼å°å¹…ä¸Šæ‰¬\n\nğŸ’¡ **å»ºè®®**\nè¿‘æœŸå¯å…³æ³¨ä¼˜è´¨è‚²è‚¥ç‰›çš„é‡‡è´­ï¼Œé¢„è®¡æ˜¥èŠ‚å‰ä»·æ ¼å°†æœ‰æ‰€ä¸Šæ¶¨ã€‚',
      'å‡ºæ ç‡': 'æé«˜è‚‰ç‰›å‡ºæ ç‡çš„å…³é”®æªæ–½ï¼š\n\nğŸ¥© **é¥²å…»ç®¡ç†**\n1. ç§‘å­¦é…æ¯”æ—¥ç²®ï¼Œä¿è¯è¥å…»å‡è¡¡\n2. åˆ†é˜¶æ®µè‚²è‚¥ï¼Œç²¾å‡†æ§åˆ¶æ–™è‚‰æ¯”\n3. å®šæœŸç§°é‡ï¼Œç›‘æ§ç”Ÿé•¿æ›²çº¿\n\nğŸ  **ç¯å¢ƒæ§åˆ¶**\n1. ä¿æŒåœˆèˆæ¸…æ´å¹²ç‡¥\n2. åˆç†å¯†åº¦ï¼Œå‡å°‘åº”æ¿€\n3. é€‚å®œæ¸©åº¦æ§åˆ¶ï¼ˆ15-20â„ƒæœ€ä½³ï¼‰\n\nğŸ’‰ **ç–«ç—…é˜²æ§**\n1. ä¸¥æ ¼æ‰§è¡Œå…ç–«ç¨‹åº\n2. å®šæœŸé©±è™«ï¼Œæ¯å­£åº¦ä¸€æ¬¡\n3. éš”ç¦»è§‚å¯Ÿæ–°è¿›ç‰›åª',
      'ç–¾ç—…é¢„é˜²': 'è‚‰ç‰›å¸¸è§ç–¾ç—…é¢„é˜²æŒ‡å—ï¼š\n\nâš ï¸ **é‡ç‚¹é˜²æ§ç–¾ç—…**\n1. **å£è¹„ç–«** - æ¯å¹´æ¥ç§2-3æ¬¡ç–«è‹—\n2. **å¸ƒç—…** - å®šæœŸæ£€æµ‹ï¼Œé˜³æ€§ç‰›æ·˜æ±°\n3. **ç‰›è‚ºç–«** - æ¥ç§èŒè‹—ï¼Œéš”ç¦»ç—…ç‰›\n\nğŸ›¡ï¸ **æ—¥å¸¸é˜²æŠ¤æªæ–½**\n- è¿›åœºæ¶ˆæ¯’ï¼Œè½¦è¾†/äººå‘˜å‡éœ€æ¶ˆæ¯’\n- ä¿æŒé¥®æ°´æ¸…æ´ï¼Œå®šæœŸæ¸…æ´—æ°´æ§½\n- è§‚å¯Ÿç‰›åªç²¾ç¥çŠ¶æ€ï¼Œæ—©å‘ç°æ—©æ²»ç–—\n\nğŸ“‹ **å…ç–«ç¨‹åºå»ºè®®**\næ˜¥å­£ï¼šå£è¹„ç–« + ç‰›è‚ºç–«\nç§‹å­£ï¼šå£è¹„ç–« + ç‚­ç–½',
      'æº¯æº': 'ç‰›è‚‰æº¯æºç³»ç»Ÿä½¿ç”¨æŒ‡å—ï¼š\n\nğŸ“± **æ‰«ç æº¯æº**\n1. æ‰“å¼€é¦–é¡µ"æº¯æºæŸ¥è¯¢"åŠŸèƒ½\n2. æ‰«æç‰›è‚‰åŒ…è£…ä¸Šçš„äºŒç»´ç \n3. æŸ¥çœ‹å®Œæ•´æº¯æºä¿¡æ¯\n\nğŸ“‹ **å¯æŸ¥è¯¢ä¿¡æ¯**\n- ğŸ„ å…»æ®–åœºä¿¡æ¯ï¼šå…»æ®–åœ°ç‚¹ã€é¥²å…»å‘¨æœŸ\n- ğŸ”ª å± å®°ä¿¡æ¯ï¼šå± å®°æ—¥æœŸã€æ£€ç–«è¯å·\n- ğŸšš ç‰©æµä¿¡æ¯ï¼šè¿è¾“è·¯çº¿ã€å†·é“¾è®°å½•\n- âœ… æ£€éªŒæŠ¥å‘Šï¼šè´¨æ£€ç»“æœã€ç­‰çº§è¯„å®š\n\nğŸ’¡ æ¯å¤´ç‰›éƒ½æœ‰å”¯ä¸€æº¯æºç ï¼Œç¡®ä¿ä»ç‰§åœºåˆ°é¤æ¡Œå…¨ç¨‹å¯è¿½æº¯ã€‚',
      'è¿è¾“': 'æ´»ç‰›è¿è¾“æ³¨æ„äº‹é¡¹ï¼š\n\nğŸšš **è¿è¾“å‰å‡†å¤‡**\n1. åœé£Ÿ6-12å°æ—¶ï¼Œåœæ°´2-3å°æ—¶\n2. æ£€æŸ¥å¥åº·çŠ¶å†µï¼Œç—…ç‰›ä¸å¾—è¿è¾“\n3. å‡†å¤‡æ£€ç–«è¯æ˜å’Œäº§åœ°è¯æ˜\n\nğŸ“¦ **è£…è½½è¦æ±‚**\n- å¯†åº¦æ§åˆ¶ï¼šæ¯å¤´ç‰›éœ€1.5-2å¹³æ–¹ç±³\n- åˆ†éš”è£…è½½ï¼šå…¬æ¯åˆ†å¼€ï¼Œå¤§å°åˆ†å¼€\n- é˜²æŠ¤æªæ–½ï¼šé“ºè®¾é˜²æ»‘å«æ–™\n\nğŸŒ¡ï¸ **é€”ä¸­ç®¡ç†**\n- å¤å­£è¿è¾“é€‰æ‹©å‡‰çˆ½æ—¶æ®µï¼ˆæ—©æ™šï¼‰\n- å†¬å­£æ³¨æ„ä¿æš–é˜²é£\n- æ¯4-6å°æ—¶æ£€æŸ¥ä¸€æ¬¡ç‰›åªçŠ¶æ€\n- é€”ä¸­å¯å°‘é‡é¥®æ°´ï¼Œç¦æ­¢å–‚æ–™',
      'é¥²æ–™': 'è‚‰ç‰›è‚²è‚¥æœŸé¥²æ–™é…æ¯”æ–¹æ¡ˆï¼š\n\nğŸ“Š **æ—¥ç²®é…æ–¹ï¼ˆè‚²è‚¥æœŸï¼‰**\n- ç‰ç±³ï¼š45-50%\n- è±†ç²•ï¼š15-18%\n- éº¸çš®ï¼š10-12%\n- é’è´®/å¹²è‰ï¼š20-25%\n- é¢„æ··æ–™ï¼š2-3%\n\nâ° **é¥²å–‚ç®¡ç†**\n- æ¯æ—¥é¥²å–‚2-3æ¬¡\n- ç²¾æ–™å®šé‡ï¼Œç²—æ–™è‡ªç”±é‡‡é£Ÿ\n- å¹²ç‰©è´¨æ‘„å…¥é‡çº¦ä¸ºä½“é‡çš„2.5-3%\n\nğŸ’¡ **ä¼˜åŒ–å»ºè®®**\n1. æ ¹æ®ç‰›åªä½“é‡è°ƒæ•´é…æ–¹\n2. æ·»åŠ ç˜¤èƒƒè°ƒæ§å‰‚æé«˜æ¶ˆåŒ–ç‡\n3. é€‚å½“æ·»åŠ è„‚è‚ªï¼ˆæ£‰ç±½ã€èœç±½é¥¼ï¼‰å¢åŠ èƒ½é‡'
    };

    function askQuestion(question) {
      document.getElementById('messageInput').value = question;
      sendMessage();
    }

    function sendMessage() {
      const input = document.getElementById('messageInput');
      const message = input.value.trim();

      if (!message) return;

      // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
      addMessage(message, 'user');
      input.value = '';
      autoResize(input);

      // æ˜¾ç¤ºæ‰“å­—æŒ‡ç¤ºå™¨
      showTyping();

      // æ¨¡æ‹ŸAIå›å¤å»¶è¿Ÿ
      setTimeout(() => {
        hideTyping();
        const response = getAIResponse(message);
        addMessage(response, 'ai');
        scrollToBottom();
      }, 1500);
    }

    function getAIResponse(message) {
      // ç®€å•å…³é”®è¯åŒ¹é…
      if (message.includes('è¡Œæƒ…') || message.includes('ä»·æ ¼') || message.includes('å¸‚åœº')) {
        return aiResponses['å¸‚åœºè¡Œæƒ…'];
      } else if (message.includes('å‡ºæ ') || message.includes('è‚²è‚¥') || message.includes('å¢é‡')) {
        return aiResponses['å‡ºæ ç‡'];
      } else if (message.includes('ç–¾ç—…') || message.includes('é¢„é˜²') || message.includes('ç–«è‹—')) {
        return aiResponses['ç–¾ç—…é¢„é˜²'];
      } else if (message.includes('æº¯æº') || message.includes('è¿½æº¯') || message.includes('æŸ¥è¯¢')) {
        return aiResponses['æº¯æº'];
      } else if (message.includes('è¿è¾“') || message.includes('ç‰©æµ') || message.includes('è£…è½¦')) {
        return aiResponses['è¿è¾“'];
      } else if (message.includes('é¥²æ–™') || message.includes('é…æ¯”') || message.includes('å–‚å…»')) {
        return aiResponses['é¥²æ–™'];
      } else {
        return 'æ„Ÿè°¢æ‚¨çš„æé—®ï¼\n\næˆ‘æ­£åœ¨å­¦ä¹ æ›´å¤šç‰›äº§ä¸šçŸ¥è¯†ã€‚é’ˆå¯¹æ‚¨çš„é—®é¢˜ï¼Œå»ºè®®ï¼š\n\n1. ğŸ“ è”ç³»å¹³å°å®¢æœè·å–ä¸“ä¸šè§£ç­”\n2. ğŸ“š æŸ¥é˜…å¹³å°å¸®åŠ©ä¸­å¿ƒ\n3. ğŸ’¬ åœ¨äº¤æµç¤¾åŒºä¸åŒè¡Œæ¢è®¨\n\nå¦‚æœ‰å…¶ä»–é—®é¢˜ï¼Œè¯·éšæ—¶æé—®ï¼';
      }
    }

    function addMessage(content, type) {
      const messageList = document.getElementById('messageList');
      const now = new Date();
      const time = now.getHours().toString().padStart(2, '0') + ':' +
                   now.getMinutes().toString().padStart(2, '0');

      const messageHtml = `
        <div class="message ${type}">
          <div class="message-avatar">
            <i class="mdi mdi-${type === 'ai' ? 'robot' : 'account'}"></i>
          </div>
          <div>
            <div class="message-content">${formatMessage(content)}</div>
            <div class="message-time">${time}</div>
          </div>
        </div>
      `;

      messageList.insertAdjacentHTML('beforeend', messageHtml);
      scrollToBottom();
    }

    function formatMessage(text) {
      // ç®€å•çš„Markdownæ ¼å¼åŒ–
      return text
        .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
        .replace(/\n/g, '<br>');
    }

    function showTyping() {
      document.getElementById('typingIndicator').classList.add('show');
      scrollToBottom();
    }

    function hideTyping() {
      document.getElementById('typingIndicator').classList.remove('show');
    }

    function scrollToBottom() {
      const container = document.getElementById('chatContainer');
      container.scrollTop = container.scrollHeight;
    }

    function autoResize(textarea) {
      textarea.style.height = 'auto';
      textarea.style.height = Math.min(textarea.scrollHeight, 100) + 'px';
    }

    function clearChat() {
      if (confirm('ç¡®å®šæ¸…ç©ºèŠå¤©è®°å½•å—ï¼Ÿ')) {
        document.getElementById('messageList').innerHTML = '';
        showToast('èŠå¤©è®°å½•å·²æ¸…ç©º');
      }
    }

    function voiceInput() {
      showToast('è¯­éŸ³è¾“å…¥åŠŸèƒ½å³å°†ä¸Šçº¿');
    }

    function showHistory() {
      showToast('å†å²è®°å½•åŠŸèƒ½å³å°†ä¸Šçº¿');
    }

    function showChatHistory() {
      // TODO: è·³è½¬åˆ°AIå¯¹è¯å†å²é¡µé¢
      showToast('AIå¯¹è¯å†å²åŠŸèƒ½å³å°†ä¸Šçº¿');
    }

    function generateReport() {
      showToast('AIæ­£åœ¨ç”Ÿæˆåˆ†ææŠ¥å‘Š...');
      setTimeout(() => {
        showToast('æŠ¥å‘Šå·²ç”Ÿæˆï¼Œå¯åœ¨ä¼ä¸šä¸­å¿ƒæŸ¥çœ‹');
      }, 2000);
    }

    function showToast(message) {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), 2000);
    }

    // å›è½¦å‘é€æ¶ˆæ¯
    document.getElementById('messageInput').addEventListener('keydown', function(e) {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        sendMessage();
      }
    });
  </script>
</body>

</html>
