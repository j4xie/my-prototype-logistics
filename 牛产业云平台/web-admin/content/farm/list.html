<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>养殖场管理 - 牛产业云平台</title>
  <link rel="stylesheet" href="../../css/variables.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mdi/font@7.4.47/css/materialdesignicons.min.css">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #f5f7fa; min-height: 100vh; }
    .admin-layout { display: flex; min-height: 100vh; }

    .sidebar { width: 280px; background: linear-gradient(180deg, #1a1a2e 0%, #16213e 100%); color: #fff; position: fixed; height: 100vh; overflow-y: auto; z-index: 100; }
    .sidebar-header { padding: 24px; border-bottom: 1px solid rgba(255,255,255,0.1); }
    .sidebar-logo { display: flex; align-items: center; gap: 12px; font-size: 20px; font-weight: 600; }
    .sidebar-logo i { font-size: 32px; color: var(--primary-color, #666fee); }
    .sidebar-nav { padding: 16px 0; }
    .nav-group { margin-bottom: 8px; }
    .nav-group-title { padding: 12px 24px; font-size: 12px; color: rgba(255,255,255,0.5); text-transform: uppercase; letter-spacing: 1px; }
    .nav-item { display: flex; align-items: center; padding: 14px 24px; color: rgba(255,255,255,0.8); text-decoration: none; transition: all 0.2s; cursor: pointer; }
    .nav-item:hover { background: rgba(255,255,255,0.1); color: #fff; }
    .nav-item.active { background: linear-gradient(90deg, var(--primary-color, #666fee), transparent); color: #fff; border-left: 3px solid var(--primary-color, #666fee); }
    .nav-item i { margin-right: 12px; font-size: 20px; width: 24px; text-align: center; }
    .nav-sub-menu { display: none; background: rgba(0,0,0,0.2); }
    .nav-sub-menu.open { display: block; }
    .nav-sub-item { display: block; padding: 12px 24px 12px 60px; color: rgba(255,255,255,0.6); text-decoration: none; transition: all 0.2s; }
    .nav-sub-item:hover, .nav-sub-item.active { color: #fff; background: rgba(255,255,255,0.05); }

    .main-content { flex: 1; margin-left: 280px; }
    .top-header { background: #fff; height: 64px; display: flex; align-items: center; justify-content: space-between; padding: 0 32px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 50; }
    .breadcrumb { display: flex; align-items: center; gap: 8px; color: #666; }
    .breadcrumb a { color: var(--primary-color, #666fee); text-decoration: none; }
    .header-actions { display: flex; align-items: center; gap: 16px; }
    .header-btn { width: 40px; height: 40px; border-radius: 50%; border: none; background: #f5f7fa; color: #666; cursor: pointer; display: flex; align-items: center; justify-content: center; position: relative; }
    .header-btn:hover { background: #e8eaed; }
    .header-btn .badge { position: absolute; top: 0; right: 0; width: 18px; height: 18px; background: #ff6b6b; color: #fff; border-radius: 50%; font-size: 11px; display: flex; align-items: center; justify-content: center; }
    .user-avatar { width: 40px; height: 40px; border-radius: 50%; background: linear-gradient(135deg, var(--primary-color, #666fee), #8b5cf6); color: #fff; display: flex; align-items: center; justify-content: center; font-weight: 600; }

    .page-content { padding: 24px 32px; }
    .page-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; }
    .page-title { font-size: 24px; font-weight: 600; color: #1a1a2e; }
    .page-subtitle { color: #666; margin-top: 4px; }
    .primary-btn { display: inline-flex; align-items: center; gap: 8px; padding: 12px 24px; background: linear-gradient(135deg, var(--primary-color, #666fee), #8b5cf6); color: #fff; border: none; border-radius: 8px; font-size: 14px; cursor: pointer; text-decoration: none; transition: all 0.2s; }
    .primary-btn:hover { transform: translateY(-1px); box-shadow: 0 4px 12px rgba(102, 111, 238, 0.4); }

    .stats-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-bottom: 24px; }
    .stat-card { background: #fff; border-radius: 12px; padding: 24px; display: flex; align-items: center; gap: 16px; box-shadow: 0 2px 8px rgba(0,0,0,0.04); }
    .stat-icon { width: 56px; height: 56px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 24px; }
    .stat-icon.green { background: linear-gradient(135deg, #10b981, #34d399); color: #fff; }
    .stat-icon.blue { background: linear-gradient(135deg, #3b82f6, #60a5fa); color: #fff; }
    .stat-icon.orange { background: linear-gradient(135deg, #f59e0b, #fbbf24); color: #fff; }
    .stat-icon.purple { background: linear-gradient(135deg, #8b5cf6, #a78bfa); color: #fff; }
    .stat-info h3 { font-size: 28px; font-weight: 700; color: #1a1a2e; }
    .stat-info p { color: #666; font-size: 14px; margin-top: 4px; }

    .filter-panel { background: #fff; border-radius: 12px; padding: 20px; margin-bottom: 24px; box-shadow: 0 2px 8px rgba(0,0,0,0.04); }
    .filter-row { display: grid; grid-template-columns: repeat(5, 1fr) auto; gap: 16px; align-items: end; }
    .filter-group { display: flex; flex-direction: column; gap: 8px; }
    .filter-group label { font-size: 13px; color: #666; font-weight: 500; }
    .filter-group input, .filter-group select { padding: 10px 12px; border: 1px solid #e2e8f0; border-radius: 8px; font-size: 14px; outline: none; }
    .filter-group input:focus, .filter-group select:focus { border-color: var(--primary-color, #666fee); }
    .filter-actions { display: flex; gap: 8px; }
    .filter-btn { padding: 10px 20px; border-radius: 8px; font-size: 14px; cursor: pointer; }
    .filter-btn.primary { background: var(--primary-color, #666fee); color: #fff; border: none; }
    .filter-btn.secondary { background: #fff; color: #666; border: 1px solid #e2e8f0; }

    .data-table-container { background: #fff; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.04); overflow: hidden; }
    .table-header { display: flex; justify-content: space-between; align-items: center; padding: 16px 20px; border-bottom: 1px solid #f0f0f0; }
    .table-title { font-size: 16px; font-weight: 600; color: #1a1a2e; }
    .table-actions { display: flex; gap: 8px; }
    .action-btn { padding: 8px 16px; border-radius: 6px; font-size: 13px; cursor: pointer; display: inline-flex; align-items: center; gap: 6px; border: 1px solid #e2e8f0; background: #fff; color: #666; }
    .action-btn:hover { background: #f5f7fa; }

    .data-table { width: 100%; border-collapse: collapse; }
    .data-table th, .data-table td { padding: 16px; text-align: left; border-bottom: 1px solid #f0f0f0; }
    .data-table th { background: #fafbfc; font-weight: 600; color: #666; font-size: 13px; }
    .data-table tr:hover { background: #fafbfc; }
    .data-table .checkbox { width: 18px; height: 18px; cursor: pointer; }

    .farm-info { display: flex; align-items: center; gap: 12px; }
    .farm-thumb { width: 48px; height: 48px; border-radius: 8px; background: linear-gradient(135deg, #10b981, #34d399); display: flex; align-items: center; justify-content: center; color: #fff; font-size: 20px; }
    .farm-name { font-weight: 500; color: #1a1a2e; }
    .farm-location { font-size: 12px; color: #999; margin-top: 2px; }

    .status-tag { display: inline-flex; align-items: center; gap: 4px; padding: 4px 12px; border-radius: 20px; font-size: 12px; }
    .status-tag.active { background: #dcfce7; color: #16a34a; }
    .status-tag.rectifying { background: #fef3c7; color: #d97706; }
    .status-tag.suspended { background: #fee2e2; color: #dc2626; }

    .cert-tags { display: flex; gap: 4px; flex-wrap: wrap; }
    .cert-tag { padding: 2px 8px; border-radius: 4px; font-size: 11px; background: #e0f2fe; color: #0284c7; }

    .capacity-bar { width: 120px; }
    .capacity-bar-bg { height: 8px; background: #e2e8f0; border-radius: 4px; overflow: hidden; }
    .capacity-bar-fill { height: 100%; border-radius: 4px; }
    .capacity-bar-fill.low { background: #10b981; }
    .capacity-bar-fill.medium { background: #f59e0b; }
    .capacity-bar-fill.high { background: #ef4444; }
    .capacity-text { font-size: 12px; color: #666; margin-top: 4px; }

    .row-actions { display: flex; gap: 4px; }
    .row-actions button { width: 32px; height: 32px; border: none; background: transparent; color: #666; border-radius: 6px; cursor: pointer; display: flex; align-items: center; justify-content: center; }
    .row-actions button:hover { background: #f0f0f0; color: var(--primary-color, #666fee); }
    .row-actions button.danger:hover { background: #fee2e2; color: #dc2626; }

    .pagination-bar { display: flex; justify-content: space-between; align-items: center; padding: 16px 20px; border-top: 1px solid #f0f0f0; }
    .pagination-info { color: #666; font-size: 14px; }
    .pagination { display: flex; gap: 4px; }
    .pagination button { padding: 8px 14px; border: 1px solid #e2e8f0; background: #fff; border-radius: 6px; cursor: pointer; font-size: 14px; }
    .pagination button:hover { border-color: var(--primary-color, #666fee); color: var(--primary-color, #666fee); }
    .pagination button.active { background: var(--primary-color, #666fee); color: #fff; border-color: var(--primary-color, #666fee); }
    .pagination button:disabled { opacity: 0.5; cursor: not-allowed; }

    .batch-actions { display: none; align-items: center; gap: 16px; padding: 12px 20px; background: #eef2ff; border-bottom: 1px solid #c7d2fe; }
    .batch-actions.show { display: flex; }
    .batch-actions span { color: var(--primary-color, #666fee); font-weight: 500; }
    .batch-actions .actions { display: flex; gap: 8px; }
    .batch-btn { padding: 6px 12px; border-radius: 6px; font-size: 13px; cursor: pointer; border: 1px solid var(--primary-color, #666fee); background: #fff; color: var(--primary-color, #666fee); }
    .batch-btn.danger { border-color: #dc2626; color: #dc2626; }
  </style>
</head>
<body>
  <div class="admin-layout">
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="sidebar-logo">
          <i class="mdi mdi-cow"></i>
          <span>牛产业云平台</span>
        </div>
      </div>
      <nav class="sidebar-nav">
        <div class="nav-group">
          <div class="nav-group-title">概览</div>
          <a href="../../dashboard.html" class="nav-item">
            <i class="mdi mdi-view-dashboard"></i>
            <span>工作台</span>
          </a>
        </div>
        <div class="nav-group">
          <div class="nav-group-title">内容管理</div>
          <div class="nav-item" onclick="toggleSubMenu(this)">
            <i class="mdi mdi-cow"></i>
            <span>活牛管理</span>
            <i class="mdi mdi-chevron-down" style="margin-left: auto;"></i>
          </div>
          <div class="nav-sub-menu">
            <a href="../cattle/list.html" class="nav-sub-item">活牛列表</a>
            <a href="../cattle/review.html" class="nav-sub-item">内容审核</a>
          </div>
          <div class="nav-item" onclick="toggleSubMenu(this)">
            <i class="mdi mdi-dna"></i>
            <span>育种种牛</span>
            <i class="mdi mdi-chevron-down" style="margin-left: auto;"></i>
          </div>
          <div class="nav-sub-menu">
            <a href="../breeding/list.html" class="nav-sub-item">种牛列表</a>
          </div>
          <div class="nav-item" onclick="toggleSubMenu(this)">
            <i class="mdi mdi-food-steak"></i>
            <span>牛肉产品</span>
            <i class="mdi mdi-chevron-down" style="margin-left: auto;"></i>
          </div>
          <div class="nav-sub-menu">
            <a href="../beef/list.html" class="nav-sub-item">产品列表</a>
          </div>
          <div class="nav-item" onclick="toggleSubMenu(this)">
            <i class="mdi mdi-corn"></i>
            <span>饲料产品</span>
            <i class="mdi mdi-chevron-down" style="margin-left: auto;"></i>
          </div>
          <div class="nav-sub-menu">
            <a href="../feed/list.html" class="nav-sub-item">产品列表</a>
          </div>
          <div class="nav-item" onclick="toggleSubMenu(this)">
            <i class="mdi mdi-cog"></i>
            <span>设备管理</span>
            <i class="mdi mdi-chevron-down" style="margin-left: auto;"></i>
          </div>
          <div class="nav-sub-menu">
            <a href="../equipment/list.html" class="nav-sub-item">设备列表</a>
          </div>
          <div class="nav-item active" onclick="toggleSubMenu(this)">
            <i class="mdi mdi-barn"></i>
            <span>养殖场</span>
            <i class="mdi mdi-chevron-down" style="margin-left: auto;"></i>
          </div>
          <div class="nav-sub-menu open">
            <a href="list.html" class="nav-sub-item active">养殖场列表</a>
            <a href="review.html" class="nav-sub-item">内容审核</a>
          </div>
          <div class="nav-item" onclick="toggleSubMenu(this)">
            <i class="mdi mdi-factory"></i>
            <span>屠宰场</span>
            <i class="mdi mdi-chevron-down" style="margin-left: auto;"></i>
          </div>
          <div class="nav-sub-menu">
            <a href="../slaughter/list.html" class="nav-sub-item">屠宰场列表</a>
          </div>
        </div>
        <div class="nav-group">
          <div class="nav-group-title">系统设置</div>
          <a href="../settings/category.html" class="nav-item">
            <i class="mdi mdi-shape"></i>
            <span>分类管理</span>
          </a>
          <a href="../settings/users.html" class="nav-item">
            <i class="mdi mdi-account-group"></i>
            <span>用户管理</span>
          </a>
        </div>
      </nav>
    </aside>

    <main class="main-content">
      <header class="top-header">
        <div class="breadcrumb">
          <a href="../../dashboard.html">首页</a>
          <i class="mdi mdi-chevron-right"></i>
          <span>内容管理</span>
          <i class="mdi mdi-chevron-right"></i>
          <span>养殖场管理</span>
        </div>
        <div class="header-actions">
          <button class="header-btn"><i class="mdi mdi-magnify"></i></button>
          <button class="header-btn">
            <i class="mdi mdi-bell-outline"></i>
            <span class="badge">3</span>
          </button>
          <div class="user-avatar">管</div>
        </div>
      </header>

      <div class="page-content">
        <div class="page-header">
          <div>
            <h1 class="page-title">养殖场管理</h1>
            <p class="page-subtitle">管理平台上所有合作养殖场信息</p>
          </div>
          <a href="edit.html" class="primary-btn">
            <i class="mdi mdi-plus"></i>
            添加养殖场
          </a>
        </div>

        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon green"><i class="mdi mdi-barn"></i></div>
            <div class="stat-info">
              <h3>68</h3>
              <p>合作养殖场</p>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon blue"><i class="mdi mdi-cow"></i></div>
            <div class="stat-info">
              <h3>125,680</h3>
              <p>总存栏量</p>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon orange"><i class="mdi mdi-certificate"></i></div>
            <div class="stat-info">
              <h3>45</h3>
              <p>有机认证</p>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon purple"><i class="mdi mdi-map-marker-radius"></i></div>
            <div class="stat-info">
              <h3>12</h3>
              <p>覆盖省份</p>
            </div>
          </div>
        </div>

        <div class="filter-panel">
          <div class="filter-row">
            <div class="filter-group">
              <label>关键词搜索</label>
              <input type="text" placeholder="养殖场名称/编号">
            </div>
            <div class="filter-group">
              <label>所在省份</label>
              <select>
                <option value="">全部省份</option>
                <option value="shandong">山东省</option>
                <option value="henan">河南省</option>
                <option value="hebei">河北省</option>
                <option value="neimeng">内蒙古</option>
                <option value="xinjiang">新疆</option>
              </select>
            </div>
            <div class="filter-group">
              <label>运营状态</label>
              <select>
                <option value="">全部状态</option>
                <option value="active">正常运营</option>
                <option value="rectifying">整改中</option>
                <option value="suspended">暂停营业</option>
              </select>
            </div>
            <div class="filter-group">
              <label>认证资质</label>
              <select>
                <option value="">全部认证</option>
                <option value="organic">有机认证</option>
                <option value="green">绿色食品</option>
                <option value="harmless">无公害</option>
              </select>
            </div>
            <div class="filter-group">
              <label>存栏规模</label>
              <select>
                <option value="">全部规模</option>
                <option value="small">小型 (&lt;500头)</option>
                <option value="medium">中型 (500-2000头)</option>
                <option value="large">大型 (&gt;2000头)</option>
              </select>
            </div>
            <div class="filter-actions">
              <button class="filter-btn primary"><i class="mdi mdi-magnify"></i> 搜索</button>
              <button class="filter-btn secondary">重置</button>
            </div>
          </div>
        </div>

        <div class="data-table-container">
          <div class="table-header">
            <div class="table-title">养殖场列表</div>
            <div class="table-actions">
              <button class="action-btn"><i class="mdi mdi-download"></i> 导出</button>
              <button class="action-btn"><i class="mdi mdi-map"></i> 地图视图</button>
              <button class="action-btn"><i class="mdi mdi-refresh"></i> 刷新</button>
            </div>
          </div>

          <div class="batch-actions" id="batchActions">
            <span>已选择 <b id="selectedCount">0</b> 项</span>
            <div class="actions">
              <button class="batch-btn">批量认证</button>
              <button class="batch-btn danger">批量下线</button>
            </div>
          </div>

          <table class="data-table">
            <thead>
              <tr>
                <th width="40"><input type="checkbox" class="checkbox" id="selectAll" onchange="toggleSelectAll()"></th>
                <th>养殖场信息</th>
                <th>负责人</th>
                <th>存栏情况</th>
                <th>认证资质</th>
                <th>运营状态</th>
                <th>入驻时间</th>
                <th width="120">操作</th>
              </tr>
            </thead>
            <tbody id="tableBody"></tbody>
          </table>

          <div class="pagination-bar">
            <div class="pagination-info">共 <strong>68</strong> 条记录，每页 <strong>10</strong> 条</div>
            <div class="pagination">
              <button disabled><i class="mdi mdi-chevron-left"></i></button>
              <button class="active">1</button>
              <button>2</button>
              <button>3</button>
              <button>4</button>
              <button>...</button>
              <button>7</button>
              <button><i class="mdi mdi-chevron-right"></i></button>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <script>
    function toggleSubMenu(el) { const sub = el.nextElementSibling; if (sub?.classList.contains('nav-sub-menu')) sub.classList.toggle('open'); }

    const mockData = [
      { id: 'F001', name: '济南鑫牧养殖场', location: '山东省济南市历城区', manager: '张建国', phone: '138****8888', current: 2350, capacity: 3000, certs: ['organic', 'green'], status: 'active', joinDate: '2022-03-15' },
      { id: 'F002', name: '菏泽金牛牧业', location: '山东省菏泽市牡丹区', manager: '李明华', phone: '139****6666', current: 1680, capacity: 2000, certs: ['harmless'], status: 'active', joinDate: '2022-05-20' },
      { id: 'F003', name: '呼伦贝尔草原牧场', location: '内蒙古呼伦贝尔市', manager: '巴图', phone: '137****5555', current: 4200, capacity: 5000, certs: ['organic', 'green', 'harmless'], status: 'active', joinDate: '2021-08-10' },
      { id: 'F004', name: '新疆天山牧场', location: '新疆伊犁哈萨克自治州', manager: '阿里木', phone: '136****4444', current: 3100, capacity: 4000, certs: ['organic'], status: 'active', joinDate: '2022-01-18' },
      { id: 'F005', name: '河南中原养殖基地', location: '河南省郑州市中牟县', manager: '王大伟', phone: '135****3333', current: 890, capacity: 1500, certs: ['green'], status: 'rectifying', joinDate: '2023-02-28' },
      { id: 'F006', name: '河北坝上牧场', location: '河北省张家口市张北县', manager: '刘志强', phone: '134****2222', current: 1950, capacity: 2500, certs: ['harmless'], status: 'active', joinDate: '2022-07-05' },
      { id: 'F007', name: '青海高原牧业', location: '青海省海西蒙古族藏族自治州', manager: '扎西', phone: '133****1111', current: 2800, capacity: 3500, certs: ['organic', 'green'], status: 'active', joinDate: '2021-11-22' },
      { id: 'F008', name: '甘肃祁连山牧场', location: '甘肃省武威市', manager: '马文龙', phone: '132****9999', current: 0, capacity: 2000, certs: [], status: 'suspended', joinDate: '2023-05-10' }
    ];

    const certMap = { organic: '有机认证', green: '绿色食品', harmless: '无公害' };
    const statusMap = { active: { text: '正常运营', class: 'active' }, rectifying: { text: '整改中', class: 'rectifying' }, suspended: { text: '暂停营业', class: 'suspended' } };

    function renderTable() {
      document.getElementById('tableBody').innerHTML = mockData.map(item => {
        const percent = Math.round((item.current / item.capacity) * 100);
        const barClass = percent < 50 ? 'low' : percent < 80 ? 'medium' : 'high';
        return `
        <tr>
          <td><input type="checkbox" class="checkbox row-checkbox" value="${item.id}" onchange="updateSelection()"></td>
          <td>
            <div class="farm-info">
              <div class="farm-thumb"><i class="mdi mdi-barn"></i></div>
              <div>
                <div class="farm-name">${item.name}</div>
                <div class="farm-location"><i class="mdi mdi-map-marker"></i> ${item.location}</div>
              </div>
            </div>
          </td>
          <td>
            <div>${item.manager}</div>
            <div style="font-size: 12px; color: #999;">${item.phone}</div>
          </td>
          <td>
            <div class="capacity-bar">
              <div class="capacity-bar-bg"><div class="capacity-bar-fill ${barClass}" style="width: ${percent}%"></div></div>
              <div class="capacity-text">${item.current} / ${item.capacity} 头 (${percent}%)</div>
            </div>
          </td>
          <td>
            <div class="cert-tags">
              ${item.certs.map(c => `<span class="cert-tag">${certMap[c]}</span>`).join('') || '<span style="color:#999">-</span>'}
            </div>
          </td>
          <td><span class="status-tag ${statusMap[item.status].class}"><i class="mdi mdi-${item.status === 'active' ? 'check-circle' : item.status === 'rectifying' ? 'alert-circle' : 'close-circle'}"></i> ${statusMap[item.status].text}</span></td>
          <td>${item.joinDate}</td>
          <td>
            <div class="row-actions">
              <button title="查看" onclick="location.href='detail.html?id=${item.id}'"><i class="mdi mdi-eye"></i></button>
              <button title="编辑" onclick="location.href='edit.html?id=${item.id}'"><i class="mdi mdi-pencil"></i></button>
              <button class="danger" title="删除" onclick="deleteItem('${item.id}')"><i class="mdi mdi-delete"></i></button>
            </div>
          </td>
        </tr>
      `}).join('');
    }

    function toggleSelectAll() {
      const checked = document.getElementById('selectAll').checked;
      document.querySelectorAll('.row-checkbox').forEach(cb => cb.checked = checked);
      updateSelection();
    }

    function updateSelection() {
      const checked = document.querySelectorAll('.row-checkbox:checked').length;
      document.getElementById('batchActions').classList.toggle('show', checked > 0);
      document.getElementById('selectedCount').textContent = checked;
    }

    function deleteItem(id) { if (confirm(`确定删除养殖场 ${id}？`)) alert('删除成功'); }

    renderTable();
  </script>
</body>
</html>
