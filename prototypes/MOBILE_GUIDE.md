# 📱 移动端原型图使用指南

## 🎯 概述

白垩纪食品溯源系统原型已全面优化为**移动端优先**设计，完美适配手机屏幕（375px-428px），并添加了类似Figma的页面流程图功能。

---

## 📐 设备规格

### 支持的手机尺寸
- ✅ iPhone SE (375px)
- ✅ iPhone 12/13/14 (390px)
- ✅ iPhone 14 Plus/Pro Max (428px)
- ✅ Android主流机型 (360px-428px)

### 推荐查看方式

**方法1: 手机浏览器直接打开（最佳）**
```
1. 将prototypes文件夹传到手机
2. 用浏览器打开 index.html
3. 添加到主屏幕（类似APP体验）
```

**方法2: 电脑浏览器模拟（推荐用于演示）**
```
1. 打开Chrome浏览器
2. 按F12打开开发者工具
3. 点击"Toggle device toolbar"图标（Ctrl+Shift+M）
4. 选择设备: iPhone 14 Pro (390x844)
5. 打开 index.html
```

**方法3: 本地服务器 + 手机访问**
```bash
# 电脑上启动服务器
cd prototypes
python3 -m http.server 8080

# 手机浏览器访问（确保同一WiFi）
http://[电脑IP]:8080
# 例如: http://192.168.1.100:8080
```

---

## 🗺️ 页面流程图功能（Figma风格）

### 功能亮点

1. **每个页面左下角的流程按钮**
   - 位置：固定在左下角
   - 图标：🗺️
   - 功能：点击查看当前页面的跳转流程

2. **流程图弹窗**
   - 显示当前页面位置（蓝色高亮）
   - 显示上一步页面
   - 显示下一步可能的操作
   - 标注触发条件（如"点击登录按钮"）
   - 点击任意页面可直接跳转

3. **完整流程图**
   - 入口：主导航页面的"🗺️ 查看完整页面流程图"按钮
   - 展示整个系统8大模块的完整流程
   - 模块分组展示
   - 所有页面可点击跳转

### 使用示例

#### 示例1: 查看登录流程
```
1. 打开 pages/auth/login.html
2. 点击左下角 🗺️ 按钮
3. 看到流程图:
   [主导航]
      ↓
   [登录页] ← 当前位置
      ↓ 登录成功
   [生产概览]
      或
   [注册第一步] ← 点击"立即注册"
```

#### 示例2: 查看批次管理流程
```
1. 打开 pages/batch/list.html
2. 点击左下角 🗺️ 按钮
3. 看到流程图:
   [批次列表] ← 当前位置
      ↓ 点击批次卡片
   [批次详情]
      ↓ 可跳转到
   • 批次时间线
   • 成本详情
   • 创建质检
```

---

## 🎨 移动端设计特点

### 1. 布局优化

**单列布局**
- 所有卡片、列表改为单列垂直排列
- 移除多列网格布局
- 优化垂直滚动体验

**触摸友好**
- 所有按钮最小高度44px（Apple HIG标准）
- 卡片、选项卡等可点击区域增大
- 间距适当增加，避免误触

**字体优化**
- 基础字体16px（防止iOS自动缩放）
- 标题字体18-24px
- 辅助文字13-14px

### 2. 导航优化

**顶部导航栏**
- 简化为：返回按钮 + 页面标题 + 用户头像
- 高度56px，固定顶部
- 去除复杂的菜单项

**底部Tab栏**
- 5个核心模块：概览、批次、质检、设备、成本
- 当前页面高亮
- 图标+文字双重提示
- 高度56px，固定底部

**流程图按钮**
- 左下角固定浮动按钮
- 图标：🗺️
- 大小：56x56px
- 不遮挡内容

**FAB按钮**（如创建批次）
- 右下角固定浮动按钮
- 图标：+
- 大小：56x56px
- 位于底部Tab栏上方

### 3. 交互优化

**点击反馈**
- 移除hover效果（移动端无hover）
- 使用:active状态（按下时缩放0.98）
- 添加触觉反馈样式

**手势支持**
- 支持横向滚动（筛选标签）
- 支持下拉刷新（列表）
- 支持长按操作（卡片）

**加载优化**
- GPU加速（transform: translate3d）
- 减少重绘（will-change）
- 平滑滚动（-webkit-overflow-scrolling: touch）

### 4. 安全区域适配

**iPhone X+刘海屏支持**
```css
padding-top: env(safe-area-inset-top);
padding-bottom: env(safe-area-inset-bottom);
```

- 顶部导航避开刘海
- 底部导航避开Home Indicator
- 内容区域自动适配

---

## 🚀 快速浏览指南

### 新手路线（5分钟）

```
1. [主导航] index.html
   ↓
2. 点击 "🗺️ 查看完整页面流程图"
   ↓
3. [完整流程图] flow-map.html
   - 浏览8大模块流程
   - 点击任意页面节点跳转
   ↓
4. [登录页] pages/auth/login.html
   - 点击左下角 🗺️ 查看登录流程
   - 点击"登 录"跳转到生产概览
   ↓
5. [批次列表] pages/batch/list.html
   - 查看6种批次状态
   - 点击左下角 🗺️ 查看批次流程
   - 使用底部Tab导航切换模块
```

### 深度体验路线（15分钟）

```
[主导航] index.html
    ↓
[完整流程图] flow-map.html
    ↓
认证流程体验:
    [登录] → [生产概览]
    [注册第一步] → [注册第二步] → [激活]
    ↓
批次管理核心流程:
    [批次列表] → [批次详情] → [批次时间线]
    [批次列表] → [创建批次]
    ↓
质检流程:
    [质检列表] → [创建质检] → [质检详情]
    ↓
员工流程:
    [员工打卡] → [打卡历史] → [工时统计]
    ↓
设备流程:
    [设备列表] → [实时监控] → [设备告警]
    ↓
成本流程:
    [成本仪表板] → [批次成本] → [AI分析]
```

---

## 💡 使用技巧

### 1. 流程图功能

**查看当前页面流程**
- 点击左下角 🗺️ 按钮
- 查看"上一步"、"当前位置"、"下一步"
- 点击流程图中的页面直接跳转

**查看完整系统流程**
- 主导航 → "查看完整页面流程图"
- 或直接打开 flow-map.html
- 按模块浏览所有页面流程

### 2. 底部导航

**快速切换模块**
- 点击底部Tab栏图标
- 5个核心模块一键到达：
  - 📊 概览
  - 📦 批次
  - ✅ 质检
  - ⚙️ 设备
  - 💰 成本

### 3. 状态识别

**批次状态颜色**
- 🔵 蓝色 = 计划中
- 🟡 黄色 = 进行中
- 🟣 紫色 = 质检中
- 🟢 绿色 = 已完成
- 🔴 红色 = 已失败
- 🟠 橙色 = 已暂停

### 4. 手势操作

**横向滑动**
- 筛选标签横向滑动查看更多

**点击**
- 卡片点击查看详情
- 按钮点击执行操作

**长按**（部分页面）
- 长按卡片显示更多选项

---

## 📊 页面完成度

### 高保真页面（完整设计）

✅ **index.html** - 主导航（移动端优化）
✅ **flow-map.html** - 完整流程图
✅ **pages/auth/login.html** - 登录页（移动端深度优化）
✅ **pages/batch/list.html** - 批次列表（移动端深度优化）

### 框架页面（包含流程图）

✅ 所有33个功能页面
- 已添加移动端CSS
- 已添加流程图功能
- 已添加流程数据定义

---

## 🎨 设计规范

### 尺寸标准

```
视口宽度: 375px-428px
页面头部: 56px
底部导航: 56px
触摸区域最小: 44px
卡片间距: 12-16px
内容边距: 16px
```

### 字体标准

```
基础字体: 16px
小字体: 13-14px
标题: 18-24px
按钮: 15-17px
```

### 颜色系统

```
主色: #1890ff (科技蓝)
成功: #52c41a
警告: #faad14
错误: #f5222d
状态: 6种批次状态色
```

---

## 🔍 核心页面说明

### 1. 主导航页 (index.html)

**特点**:
- 卡片式垂直列表
- 显示8大模块
- 统计数据（8模块、34页面）
- 流程图入口按钮

**移动端优化**:
- 最大宽度428px
- 单列布局
- 大按钮（44px+）

### 2. 完整流程图 (flow-map.html)

**特点**:
- 展示整个系统流程
- 模块分组（8个模块）
- 页面节点可点击
- 流程连线标注

**移动端优化**:
- 垂直滚动查看
- 节点大小适中
- 触摸友好

### 3. 登录页 (pages/auth/login.html)

**特点**:
- 美观的渐变背景
- 大输入框（48px）
- 大登录按钮（52px）
- 支持生物识别

**移动端优化**:
- 字体16px（防iOS缩放）
- 返回按钮44x44px圆形
- 触摸反馈（:active效果）

**流程**:
- 点击🗺️ 查看登录流程
- 登录成功 → 生产概览
- 点击注册 → 注册第一步

### 4. 批次列表 (pages/batch/list.html)

**特点**:
- 单列卡片布局
- 6种状态示例
- 横向滚动筛选标签
- 底部Tab导航
- FAB创建按钮

**移动端优化**:
- 简化的顶部导航
- 搜索框100%宽度
- 卡片触摸反馈
- 底部导航56px

**流程**:
- 点击🗺️ 查看批次流程
- 点击卡片 → 批次详情
- 点击+ → 创建批次
- 底部Tab → 切换模块

---

## 📋 流程图数据结构

系统已定义所有页面的跳转关系，包括：

### 认证模块流程
```
主导航
  → 登录
    → 生产概览
  → 注册第一步
    → 注册第二步
      → 激活
```

### 批次管理流程
```
批次列表
  → 批次详情
    → 批次时间线
    → 成本详情
    → 创建质检
  → 创建批次
    → 批次列表
```

### 质检管理流程
```
质检列表
  → 创建质检
    → 质检详情
  → 质检统计
```

### 其他模块流程
- 员工管理：打卡 → 历史 → 统计 → 工作记录
- 设备监控：列表 → 详情/监控 → 告警
- 成本分析：仪表板 → 批次成本 → AI分析/趋势
- 溯源查询：消费者/企业/监管端查询、码生成

---

## 🎯 测试检查清单

### 布局测试
- [ ] 在375px宽度下完美显示
- [ ] 在428px宽度下完美显示
- [ ] 横屏模式正常显示
- [ ] 无横向滚动条（筛选标签除外）

### 交互测试
- [ ] 所有按钮可点击（≥44px）
- [ ] 卡片点击有反馈（缩放效果）
- [ ] 底部Tab导航工作正常
- [ ] 流程图按钮可点击

### 流程图测试
- [ ] 点击🗺️显示流程图弹窗
- [ ] 流程图显示正确的上下步
- [ ] 流程图中的页面可点击跳转
- [ ] 关闭按钮工作正常

### 跳转测试
- [ ] 所有链接可正常跳转
- [ ] 返回按钮工作正常
- [ ] 底部Tab跳转正常

---

## 🎉 亮点功能

### 1. Figma风格流程标注

就像在Figma中查看Prototype流程一样，每个页面都有：
- ✅ 流程图入口（左下角🗺️按钮）
- ✅ 上一步页面
- ✅ 当前位置高亮
- ✅ 下一步操作
- ✅ 触发条件标注
- ✅ 可点击跳转

### 2. 完整流程总览

`flow-map.html` 提供了整个系统的鸟瞰图：
- 8大模块流程
- 所有页面关系
- 模块间跳转
- 视觉化流程连线

### 3. 底部Tab导航

固定底部的5个核心模块入口：
- 📊 生产概览
- 📦 批次管理
- ✅ 质检管理
- ⚙️ 设备监控
- 💰 成本分析

### 4. 多层级返回

- 左上角返回按钮（返回上级）
- 底部Tab导航（模块切换）
- 流程图导航（流程跳转）

---

## 📱 实际使用场景

### 场景1: 产品演示

```
1. 打开主导航（index.html）
2. 点击"查看完整流程图"
3. 展示整个系统架构
4. 点击登录页节点进入
5. 演示登录流程
6. 进入批次列表演示核心功能
7. 用流程图按钮展示页面关系
```

### 场景2: 用户测试

```
1. 给测试用户手机
2. 让用户从登录开始
3. 观察用户如何使用流程图
4. 收集用户对跳转逻辑的反馈
5. 记录用户操作路径
```

### 场景3: 团队评审

```
1. 大屏幕投影（手机模拟模式）
2. 从完整流程图开始
3. 逐模块演示功能
4. 用流程图展示页面关系
5. 讨论交互逻辑
```

---

## 🛠️ 技术实现

### 文件结构
```
prototypes/
├── index.html (移动端优化)
├── flow-map.html (完整流程图)
├── assets/
│   ├── css/
│   │   ├── common.css (通用样式)
│   │   └── mobile.css (移动端样式) ✨
│   └── js/
│       └── flow-navigator.js (流程图逻辑) ✨
└── pages/ (33个页面，已全部添加移动端支持)
```

### 核心技术

**移动端适配**
- viewport设置：`maximum-scale=1.0, user-scalable=no`
- 字体防缩放：16px基础字体
- 触摸优化：44px最小触摸区域
- GPU加速：transform: translate3d

**流程图系统**
- 页面流程数据库（PAGE_FLOWS对象）
- 动态流程图渲染
- 模态框交互
- 页面跳转逻辑

---

## ❓ 常见问题

**Q: 为什么有些页面简单有些详细？**
A: 登录页和批次列表是完整高保真设计，其他页面是框架+流程图。可根据需要深化。

**Q: 流程图按钮在哪里？**
A: 左下角固定的🗺️按钮，点击即可查看当前页面流程。

**Q: 如何查看完整流程？**
A: 主导航页 → "查看完整页面流程图" 或直接打开 flow-map.html

**Q: 底部导航栏为什么是5个？**
A: 选择了最核心的5个模块，符合移动端设计最佳实践（3-5个Tab）

**Q: 可以在真实手机上查看吗？**
A: 可以！把prototypes文件夹传到手机，用浏览器打开index.html即可

---

## 🔧 进一步定制

### 修改主色调
编辑 `assets/css/mobile.css`:
```css
:root {
    --primary-color: #YOUR_COLOR;
}
```

### 添加新页面流程
编辑 `assets/js/flow-navigator.js`:
```javascript
PAGE_FLOWS['pages/your/page.html'] = {
    current: '页面名称',
    module: '所属模块',
    prev: [...],
    next: [...]
};
```

### 调整手机尺寸
编辑 `assets/css/mobile.css`:
```css
:root {
    --mobile-max-width: 你的宽度px;
}
```

---

## 📞 帮助与支持

**遇到问题？**
- 查看 README.md 详细文档
- 查看 flow-map.html 了解整体流程
- 检查浏览器开发者工具Console
- 确认已引入mobile.css和flow-navigator.js

**需要优化？**
- 所有HTML/CSS代码开源可修改
- 流程数据在flow-navigator.js中可扩展
- 样式在mobile.css中可调整

---

**祝您使用愉快！** 📱✨

*最后更新: 2025-01-05*
*版本: v2.0 Mobile*
