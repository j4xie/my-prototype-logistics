# 🔐 白垩纪食品溯源系统 - 账号权限最终说明

**更新时间**: 2025-10-06
**系统版本**: v1.0
**统一密码**: `123456`

---

## 📊 账号总览

| # | 账号 | 密码 | 角色 | 生产管理界面 | 主要职责 |
|---|------|------|------|-------------|----------|
| 1 | platform_admin | 123456 | 平台管理员 | 👁️ 只读 | 平台监控、工厂审核 |
| 2 | super_admin | 123456 | 超级工厂管理员 | ✅ 完全权限 | 工厂运营、生产计划 |
| 3 | dept_admin | 123456 | 加工部门管理员 | ✅ 完全权限 | 部门管理、生产计划 |
| 4 | operator1 | 123456 | 加工部员工 | ❌ 不访问 | 打卡签到、工作报告 |

---

## 👤 详细权限说明

### 1️⃣ 平台管理员 (platform_admin) - 只读监控 👁️

**账号信息**:
```
用户名: platform_admin
密码: 123456
类型: 平台级账号
```

**生产管理界面权限**:
- ✅ **可以访问** (查看监控)
- ✅ 查看所有工厂的生产计划
- ✅ 查看生产统计数据
- ✅ 查看原料库存
- ✅ 导出数据
- ❌ **不能创建**生产计划 (按钮隐藏)
- ❌ **不能修改**任何数据 (所有操作按钮禁用)
- ❌ **不能删除**计划

**界面显示特征**:
- 右下角显示 "👁️ 只读模式" (不显示"创建生产计划"按钮)
- 计划卡片底部显示 "👁️ 平台管理员只读模式 - 无法修改数据"
- 所有"开始生产"、"完成生产"等按钮不显示

**使用场景**:
- 平台运营查看各工厂生产情况
- 跨工厂生产数据对比
- 平台级数据统计分析

---

### 2️⃣ 超级工厂管理员 (super_admin) - 完全权限 ⭐

**账号信息**:
```
用户名: super_admin
密码: 123456
类型: 工厂账号
部门: 管理部
```

**生产管理界面权限**:
- ✅ **完全权限**
- ✅ 创建生产计划
- ✅ 开始生产
- ✅ 记录原料消耗
- ✅ 完成生产
- ✅ 记录成品出货
- ✅ 修改计划
- ✅ 删除计划
- ✅ 管理产品类型和商家

**界面显示特征**:
- 右下角显示 "➕ 创建生产计划" FAB按钮
- 所有操作按钮正常显示
- 可以执行所有操作

**使用场景**:
- 工厂日常运营管理
- 生产计划制定
- 资源调配
- 测试所有功能

**推荐**: ⭐⭐⭐ 日常测试使用此账号

---

### 3️⃣ 加工部门管理员 (dept_admin) - 完全权限

**账号信息**:
```
用户名: dept_admin
密码: 123456
类型: 工厂账号
部门: 加工部
```

**生产管理界面权限**:
- ✅ **完全权限** (目前与超级管理员相同)
- ✅ 创建生产计划
- ✅ 开始生产
- ✅ 记录原料消耗
- ✅ 完成生产
- ✅ 记录成品出货
- ✅ 管理本部门员工

**与超级管理员的区别**:
- **目前**: 无区别 (因为只实现了加工部功能)
- **未来**: 当实现其他部门(物流、质检)后:
  - ✅ 只能访问加工部数据
  - ❌ 不能访问其他部门数据
  - ❌ 不能修改全局设置

**界面显示特征**:
- 与超级管理员相同
- 所有操作按钮正常显示

**使用场景**:
- 加工部日常管理
- 部门级生产计划制定
- 部门数据管理

---

### 4️⃣ 加工部员工 (operator1) - 打卡+工作报告

**账号信息**:
```
用户名: operator1
密码: 123456
类型: 工厂账号
部门: 加工部
```

**生产管理界面权限**:
- ❌ **不访问生产管理界面**
- 说明: 员工职责是执行任务,不是制定计划

**员工的主要功能** (专用界面):

1. **⏰ 打卡签到** (TimeClockScreen)
   - 上班打卡
   - 下班打卡
   - 查看打卡记录
   - 统计工作时长

2. **📝 工作报告** (WorkReportScreen)
   - 填写每日工作内容
   - 上传工作照片
   - 记录完成的任务
   - 提交工作总结

3. **🏭 加工记录** (ProcessingRecordScreen)
   - 扫描批次二维码
   - 记录加工数据
   - 更新批次状态
   - 报告问题

**访问路径**:
```
登录 → 首页
  ↓
底部Tab: "打卡" ⏰
  ↓
打卡签到界面

或

底部Tab: "工作" 📝
  ↓
工作报告界面
```

**使用场景**:
- 每日上下班打卡
- 报告工作情况
- 记录生产数据
- 执行生产任务

---

## 🎯 生产管理界面访问总结

### ✅ 可以访问 (2+1个)

| 账号 | 权限类型 | 可以创建 | 可以修改 | 可以查看 |
|------|---------|---------|---------|---------|
| super_admin | ✅ 完全权限 | ✅ 是 | ✅ 是 | ✅ 是 |
| dept_admin | ✅ 完全权限 | ✅ 是 | ✅ 是 | ✅ 是 |
| platform_admin | 👁️ 只读 | ❌ 否 | ❌ 否 | ✅ 是 |

### ❌ 不访问 (1个)

| 账号 | 说明 | 使用界面 |
|------|------|---------|
| operator1 | 员工职责是执行,不是制定计划 | 打卡签到、工作报告、加工记录 |

---

## 📱 访问路径

### 管理员访问 (super_admin / dept_admin):

```
1. 登录 (super_admin 或 dept_admin)
2. 首页 → 底部"管理"Tab
3. 管理中心 → "生产配置"分组
4. 点击 "生产计划管理" (📋 + NEW标签)
5. ✅ 进入生产计划管理界面
```

### 平台管理员访问 (platform_admin):

```
1. 登录 (platform_admin)
2. 平台管理页 → 工厂列表
3. 选择工厂 → 查看生产计划
4. 👁️ 只读模式 (不能修改)
```

### 员工不访问 (operator1):

```
1. 登录 (operator1)
2. 首页 → 底部"打卡"Tab ⏰
3. ✅ 打卡签到界面

或

首页 → 底部"工作"Tab 📝
✅ 工作报告界面
```

---

## 🔧 权限实现方式

### 前端权限控制:

```typescript
// ProductionPlanManagementScreen.tsx

const userType = user?.userType || 'factory';
const roleCode = user?.roleCode;

// 平台管理员只读
const isReadOnly = userType === 'platform';

// 可以创建计划的角色
const canCreatePlan = ['factory_super_admin', 'department_admin'].includes(roleCode)
                      && !isReadOnly;

// UI控制
{canCreatePlan && <FAB label="创建生产计划" />}
{isReadOnly && <Card>👁️ 只读模式</Card>}
{!isReadOnly && <Button>开始生产</Button>}
```

---

## 📊 角色对比表

| 功能 | 平台管理员 | 超级工厂管理员 | 部门管理员 | 员工 |
|-----|-----------|--------------|-----------|------|
| 访问生产管理界面 | ✅ 可以 | ✅ 可以 | ✅ 可以 | ❌ 不访问 |
| 查看生产计划 | ✅ 是 | ✅ 是 | ✅ 是 | - |
| 创建生产计划 | ❌ 否 | ✅ 是 | ✅ 是 | - |
| 开始/完成生产 | ❌ 否 | ✅ 是 | ✅ 是 | - |
| 记录原料消耗 | ❌ 否 | ✅ 是 | ✅ 是 | - |
| 打卡签到 | ❌ 否 | ❌ 否 | ❌ 否 | ✅ 是 |
| 工作报告 | ❌ 否 | ❌ 否 | ❌ 否 | ✅ 是 |

---

## 💡 使用建议

### 推荐测试账号:

1. **测试生产管理**: `super_admin` / `123456`
2. **测试部门管理**: `dept_admin` / `123456`
3. **测试只读权限**: `platform_admin` / `123456`
4. **测试员工功能**: `operator1` / `123456` (打卡+工作报告)

---

## ✅ 权限配置完成!

- ✅ 平台管理员: 只读权限已实现
- ✅ 超级管理员: 完全权限已实现
- ✅ 部门管理员: 完全权限已实现
- ✅ 员工: 职责已明确 (打卡+工作报告)

**所有权限配置已完成并测试通过!** 🎉
