# 工厂管理员 (Factory Admin) 原型功能说明文档

> 最后更新：2025-12-27
> 版本：v1.1

---

## 目录

1. [角色概述](#1-角色概述)
2. [导航架构](#2-导航架构)
3. [功能模块详解](#3-功能模块详解)
4. [页面清单](#4-页面清单)
5. [功能边界说明](#5-功能边界说明)
6. [数据流与交互](#6-数据流与交互)

---

## 1. 角色概述

### 1.1 角色定义

**工厂管理员 (Factory Super Admin)** 是单个工厂的最高管理权限角色，负责：
- 全面监控工厂生产运营状态
- 管理工厂内部组织架构和人员
- 查看和分析各类业务数据报表
- 使用 AI 智能分析辅助决策

### 1.2 权限范围

| 权限类别 | 权限说明 |
|---------|---------|
| 数据查看 | 可查看本工厂所有生产、质检、设备、人员数据 |
| 数据操作 | 可创建/编辑/删除本工厂的生产计划、批次、员工信息 |
| 系统配置 | 可配置本工厂的部门、产品类型、原料类型、通知设置 |
| AI 分析 | 可使用 AI 成本分析、数据报表、智能对话功能 |
| 告警处理 | 可查看和处理本工厂的所有告警信息 |

### 1.3 与其他角色的关系

```
平台管理员 (Platform Admin)
    │
    ├── 工厂超级管理员 (Factory Super Admin) ← 本文档
    │       │
    │       ├── 部门管理员 (Department Admin)
    │       │       │
    │       │       └── 普通员工 (Employee)
    │       │
    │       └── 质检员 (QC Inspector)
    │
    └── 其他工厂管理员...
```

---

## 2. 导航架构

### 2.1 底部导航栏 (Tab Bar)

工厂管理员端采用 **4 Tab** 底部导航结构：

| Tab | 名称 | 入口页面 | 功能简述 |
|-----|------|---------|---------|
| 1 | 首页 | `index.html` | 今日概览、快捷操作入口 |
| 2 | AI分析 | `ai.html` | AI 智能分析中心 |
| 3 | 管理 | `management.html` | 工厂管理功能集合 |
| 4 | 我的 | `profile.html` | 个人设置与账户 |

### 2.2 页面层级结构

```
index.html (首页)
├── today-production.html (今日产量详情)
├── today-batches.html (今日批次列表)
│   └── production-batch-detail.html (批次详情)
├── material-batch.html (原材料批次)
├── ai-alerts.html (告警中心)
├── create-plan.html (新建生产计划)
├── ai-report.html (数据报表)
│   └── report-detail.html (报表详情)
├── employee-list.html (人员管理)
└── system-settings.html (系统设置)

ai.html (AI分析中心)
├── ai-cost.html (AI成本分析)
│   └── ai-chat.html?context=cost (AI对话)
├── ai-report.html (数据报表)
│   └── ai-chat.html?context=report (AI对话)
├── material-batch.html (原材料批次)
└── quality-analysis.html (质检分析)

management.html (管理中心)
├── employee-list.html (员工管理)
├── equipment-list.html (设备管理)
│   └── equipment-detail.html (设备详情)
├── product-detail.html (产品类型)
├── material-batch.html (原料类型)
├── supplier-detail.html (供应商详情)
└── system-settings.html (系统设置)

profile.html (我的)
├── personal-info.html (个人信息)
├── change-password.html (修改密码)
├── notification-settings.html (通知设置)
├── help-center.html (帮助中心)
├── about.html (关于我们)
└── state-demo.html (状态展示演示)
```

---

## 3. 功能模块详解

### 3.1 首页模块 (index.html)

**功能概述**：工厂管理员的主控面板，展示今日关键指标和快捷入口。

**包含内容**：

| 区块 | 功能 | 说明 |
|------|------|------|
| 欢迎区 | 显示当前用户和日期 | 个性化问候 |
| AI 智能卡片 | AI 分析概览 | 展示今日效率、良品率、单位成本、平均周期 |
| 今日概览 | 4 个统计卡片 | 今日产量、今日批次、原料批次、今日告警 |
| 快捷操作 | 4 个功能入口 | 新建计划、数据报表、人员管理、系统配置 |

**交互说明**：
- 点击 AI 卡片 → 进入 AI 分析中心
- 点击统计卡片 → 进入对应详情页
- 点击快捷操作 → 进入对应功能页

---

### 3.2 AI 分析中心 (ai.html)

**功能概述**：AI 智能分析的统一入口，提供多维度分析能力。

**核心功能**：

#### 3.2.1 快速分析入口 (2×2 网格)

| 入口 | 功能 | 跳转页面 |
|------|------|---------|
| 按产品分析 | 各产品成本对比 | `ai-cost.html?dimension=product` |
| 按时间分析 | 成本趋势变化 | `ai-cost.html?dimension=time` |
| 按部门分析 | 部门成本占比 | `ai-cost.html?dimension=department` |
| 按批次分析 | 批次成本明细 | `ai-cost.html?dimension=batch` |

#### 3.2.2 分析功能列表

| 功能 | 说明 | 页面 |
|------|------|------|
| AI 成本分析 | 智能成本核算与优化建议 | `ai-cost.html` |
| 数据报表 | 生产、库存、质量等多维报表 | `ai-report.html` |
| 原材料批次 | 批次追溯、库存管理、FIFO | `material-batch.html` |
| 质检分析 | 质检记录、合格率趋势、异常预警 | `quality-analysis.html` |

---

### 3.3 AI 成本分析 (ai-cost.html)

**功能概述**：基于 AI 的成本分析工具，支持多维度筛选和智能建议。

**页面结构**：

```
┌─────────────────────────────────────┐
│  维度选择器 (4个下拉选择)            │
│  ┌──────────┐  ┌──────────┐        │
│  │ 产品 ▼   │  │ 时间 ▼   │        │
│  └──────────┘  └──────────┘        │
│  ┌──────────┐  ┌──────────┐        │
│  │ 部门 ▼   │  │ 批次 ▼   │        │
│  └──────────┘  └──────────┘        │
├─────────────────────────────────────┤
│  AI 洞察卡片                        │
│  "[AI] 本周总成本 ¥28,500..."       │
├─────────────────────────────────────┤
│  成本趋势图 (柱状图)                 │
├─────────────────────────────────────┤
│  产品成本对比 (横向进度条)           │
├─────────────────────────────────────┤
│  部门成本占比 (饼图+图例)            │
├─────────────────────────────────────┤
│  成本明细列表                        │
├─────────────────────────────────────┤
│  [固定底栏] AI 对话入口              │
│  "今日剩余 AI 对话次数：8/10 次"     │
└─────────────────────────────────────┘
```

**维度选项**：

| 维度 | 选项 |
|------|------|
| 产品 | 全部产品、带鱼片、鲈鱼片、黄鱼片 |
| 时间 | 今日、本周、本月、自定义日期 |
| 部门 | 全部部门、生产部、仓储部、质检部 |
| 批次 | 全部批次、具体批次号... |

---

### 3.4 数据报表 (ai-report.html)

**功能概述**：多类型数据报表，支持维度筛选和趋势分析。

**报表类型 (Tab)**：

| Tab | 报表类型 | 包含内容 |
|-----|---------|---------|
| 生产报表 | 产量、批次、效率 | 生产趋势图、周产量、完成批次 |
| 库存报表 | 原料、成品库存 | 库存水位、预警信息 |
| 质量报表 | 质检数据、合格率 | 合格率趋势、异常分布 |
| 财务报表 | 成本、收入、利润 | 成本结构、利润分析 |

**维度筛选**：
同 AI 成本分析，支持产品、时间、部门、批次 4 个维度筛选。

---

### 3.5 AI 对话 (ai-chat.html)

**功能概述**：与 AI 进行深度对话，获取分析洞察和建议。

**功能特性**：

| 特性 | 说明 |
|------|------|
| 次数限制 | 每日 10 次对话配额 |
| 上下文感知 | 根据来源页面提供相关分析 |
| 快捷问题 | 预设常见问题标签 |
| 反馈机制 | 对 AI 回复进行"有帮助/需改进"评价 |
| 复制功能 | 可复制 AI 回复内容 |

**对话能力**：
- 成本趋势分析与优化建议
- 产品成本对比分析
- 部门成本占比分析
- 具体问题深度解答

---

### 3.6 告警中心 (ai-alerts.html)

**功能概述**：统一的告警管理和处理界面。

**告警分类**：

| 分类 | 示例 | 优先级 |
|------|------|--------|
| 全部 | 所有告警 | - |
| 生产 | 生产进度延迟、设备异常 | 高 |
| 质量 | 合格率下降、质检不合格 | 高 |
| 设备 | 设备故障、维护到期 | 中 |
| 库存 | 原料不足、库存积压 | 中 |
| 人员 | 考勤异常、人员不足 | 低 |

---

### 3.7 管理中心 (management.html)

**功能概述**：工厂管理功能的集合入口。

**管理功能 (3×3 网格)**：

| 功能 | 说明 | 页面 |
|------|------|------|
| 员工管理 | 添加/编辑/删除员工 | `employee-list.html` |
| 部门管理 | 组织架构设置 | 待实现 |
| 设备管理 | 设备信息与维护 | `equipment-list.html` |
| 产品类型 | 产品分类与规格 | `product-detail.html` |
| 原料类型 | 原料分类管理 | `material-batch.html` |
| 考勤记录 | 员工考勤查看 | 待实现 |
| 权限设置 | 角色权限分配 | 待实现 |
| 系统设置 | 工厂基础配置 | `system-settings.html` |
| 操作日志 | 系统操作记录 | 待实现 |

---

### 3.8 系统设置 (system-settings.html)

**功能概述**：工厂系统配置界面。

**设置分类**：

| 分类 | 设置项 |
|------|--------|
| 基础设置 | 工厂信息、部门管理、产品类型 |
| 通知设置 | 推送通知开关、邮件通知开关 |
| 安全设置 | 修改密码、权限管理、操作日志 |
| 其他 | 关于系统 (版本 1.0.0) |

---

### 3.9 个人中心 (profile.html)

**功能概述**：用户个人设置与账户管理。

**功能列表**：

| 功能 | 状态 | 说明 | 页面 |
|------|------|------|------|
| 个人信息 | ✅ 完成 | 编辑个人资料 | `personal-info.html` |
| 修改密码 | ✅ 完成 | 修改登录密码 | `change-password.html` |
| 通知设置 | ✅ 完成 | 推送通知偏好 | `notification-settings.html` |
| 帮助中心 | ✅ 完成 | 使用帮助、FAQ、联系客服 | `help-center.html` |
| 关于我们 | ✅ 完成 | 应用版本、公司信息、法律条款 | `about.html` |
| 状态展示演示 | ✅ 完成 | UI 组件演示页 | `state-demo.html` |
| 退出登录 | ✅ 完成 | 退出当前账户 | - |

---

## 4. 页面清单

### 4.1 完整页面列表

| 文件名 | 页面名称 | 类型 | 状态 |
|--------|---------|------|------|
| `index.html` | 首页 | Tab页 | ✅ 完成 |
| `ai.html` | AI 分析中心 | Tab页 | ✅ 完成 |
| `management.html` | 管理中心 | Tab页 | ✅ 完成 |
| `profile.html` | 我的 | Tab页 | ✅ 完成 |
| `ai-cost.html` | AI 成本分析 | 子页面 | ✅ 完成 |
| `ai-report.html` | 数据报表 | 子页面 | ✅ 完成 |
| `ai-alerts.html` | 告警中心 | 子页面 | ✅ 完成 |
| `ai-chat.html` | AI 对话 | 子页面 | ✅ 完成 |
| `today-production.html` | 今日产量 | 子页面 | ✅ 完成 |
| `today-batches.html` | 今日批次 | 子页面 | ✅ 完成 |
| `production-batch-detail.html` | 批次详情 | 详情页 | ✅ 完成 |
| `material-batch.html` | 原材料批次 | 子页面 | ✅ 完成 |
| `batch-detail.html` | 批次详情 | 详情页 | ✅ 完成 |
| `create-plan.html` | 新建计划 | 表单页 | ✅ 完成 |
| `employee-list.html` | 员工列表 | 列表页 | ✅ 完成 |
| `equipment-list.html` | 设备列表 | 列表页 | ✅ 完成 |
| `equipment-detail.html` | 设备详情 | 详情页 | ✅ 完成 |
| `product-detail.html` | 产品详情 | 详情页 | ✅ 完成 |
| `supplier-detail.html` | 供应商详情 | 详情页 | ✅ 完成 |
| `qc-detail.html` | 质检详情 | 详情页 | ✅ 完成 |
| `quality-analysis.html` | 质检分析 | 子页面 | ✅ 完成 |
| `report-detail.html` | 报表详情 | 详情页 | ✅ 完成 |
| `system-settings.html` | 系统设置 | 子页面 | ✅ 完成 |
| `state-demo.html` | 状态演示 | 演示页 | ✅ 完成 |
| `personal-info.html` | 个人信息 | 子页面 | ✅ 完成 |
| `change-password.html` | 修改密码 | 子页面 | ✅ 完成 |
| `notification-settings.html` | 通知设置 | 子页面 | ✅ 完成 |
| `help-center.html` | 帮助中心 | 子页面 | ✅ 完成 |
| `about.html` | 关于我们 | 子页面 | ✅ 完成 |
| `styles.css` | 样式文件 | CSS | ✅ 完成 |

### 4.2 页面统计

- **总页面数**：29 个 HTML 页面
- **Tab 主页**：4 个
- **子页面**：25 个
- **样式文件**：1 个 (styles.css)

---

## 5. 功能边界说明

### 5.1 已实现功能

| 功能类别 | 已实现 |
|---------|--------|
| 首页概览 | 今日产量、批次、告警统计 |
| AI 分析 | 成本分析、4 维度筛选、AI 对话 |
| 数据报表 | 生产/库存/质量/财务报表 |
| 批次管理 | 生产批次列表、详情查看 |
| 告警管理 | 告警列表、分类筛选 |
| 人员管理 | 员工列表展示 |
| 设备管理 | 设备列表、详情查看 |
| 系统设置 | 设置界面展示 |

### 5.2 待实现功能 (原型中已有入口但功能未展开)

| 功能 | 说明 | 优先级 |
|------|------|--------|
| 部门管理 | 组织架构 CRUD | 中 |
| 考勤记录 | 员工考勤列表与统计 | 中 |
| 权限设置 | 角色权限配置界面 | 低 |
| 操作日志 | 系统操作审计日志 | 低 |

### 5.3 功能边界

#### 本角色可以做：

1. **生产管理**
   - 查看所有生产批次和进度
   - 创建新的生产计划
   - 监控生产效率和异常

2. **数据分析**
   - 使用 AI 进行成本分析
   - 查看各类业务报表
   - 与 AI 进行深度对话 (每日 10 次限制)

3. **人员管理**
   - 查看和管理本工厂员工
   - 查看员工考勤记录

4. **设备管理**
   - 查看设备状态和维护记录
   - 处理设备告警

5. **系统配置**
   - 配置工厂基础信息
   - 管理产品和原料类型
   - 设置通知偏好

#### 本角色不能做：

1. **跨工厂操作**
   - 不能查看其他工厂数据
   - 不能管理其他工厂人员

2. **平台级配置**
   - 不能创建新工厂
   - 不能管理平台级用户
   - 不能修改系统级配置

3. **财务审批**
   - 不能进行财务审批操作
   - 不能修改价格策略

---

## 6. 数据流与交互

### 6.1 主要数据流

```
┌─────────────────────────────────────────────────────────────┐
│                        首页 (index.html)                     │
│  ┌──────────────┬──────────────┬──────────────┬──────────┐  │
│  │  今日产量    │   今日批次   │   原料批次   │  今日告警 │  │
│  └──────┬───────┴──────┬───────┴──────┬───────┴────┬─────┘  │
└─────────┼──────────────┼──────────────┼────────────┼────────┘
          ▼              ▼              ▼            ▼
   today-production  today-batches  material-batch  ai-alerts
          │              │              │            │
          ▼              ▼              ▼            ▼
   生产统计详情       批次列表        原料列表      告警列表
                         │
                         ▼
               production-batch-detail
                    批次详情
```

### 6.2 AI 分析数据流

```
┌────────────────────────────────────────────────────────────┐
│                    AI 分析中心 (ai.html)                    │
│  ┌────────────────────────────────────────────────────┐   │
│  │              快速分析 (4维度入口)                    │   │
│  │  产品 ──→ ai-cost.html?dimension=product           │   │
│  │  时间 ──→ ai-cost.html?dimension=time              │   │
│  │  部门 ──→ ai-cost.html?dimension=department        │   │
│  │  批次 ──→ ai-cost.html?dimension=batch             │   │
│  └────────────────────────────────────────────────────┘   │
│  ┌────────────────────────────────────────────────────┐   │
│  │              分析功能列表                            │   │
│  │  AI成本分析 ──→ ai-cost.html                       │   │
│  │  数据报表 ──→ ai-report.html                       │   │
│  │  原材料批次 ──→ material-batch.html                │   │
│  │  质检分析 ──→ quality-analysis.html                │   │
│  └────────────────────────────────────────────────────┘   │
└────────────────────────────────────────────────────────────┘
          │                     │
          ▼                     ▼
    ai-cost.html          ai-report.html
          │                     │
          └──────┬──────────────┘
                 ▼
          ai-chat.html
         (AI 对话界面)
```

### 6.3 AI 对话配额机制

```
每日配额: 10 次
    │
    ▼
用户发起对话
    │
    ▼
检查剩余次数
    │
    ├── 次数 > 0 ──→ 允许对话 ──→ 扣减次数
    │
    └── 次数 = 0 ──→ 提示配额用完 ──→ 建议明日再试
```

---

## 附录

### A. 文件结构

```
factory-admin/
├── README.md              # 本文档
├── styles.css             # 角色专属样式
│
├── # Tab 主页面 (4个)
├── index.html             # 首页
├── ai.html                # AI 分析中心
├── management.html        # 管理中心
├── profile.html           # 个人中心
│
├── # AI 分析模块
├── ai-cost.html           # AI 成本分析
├── ai-report.html         # 数据报表
├── ai-alerts.html         # 告警中心
├── ai-chat.html           # AI 对话
│
├── # 生产管理模块
├── today-production.html  # 今日产量
├── today-batches.html     # 今日批次
├── production-batch-detail.html  # 生产批次详情
├── material-batch.html    # 原材料批次
├── batch-detail.html      # 批次详情
├── create-plan.html       # 新建计划
│
├── # 管理模块
├── employee-list.html     # 员工列表
├── equipment-list.html    # 设备列表
├── equipment-detail.html  # 设备详情
├── product-detail.html    # 产品详情
├── supplier-detail.html   # 供应商详情
├── qc-detail.html         # 质检详情
├── quality-analysis.html  # 质检分析
├── report-detail.html     # 报表详情
├── system-settings.html   # 系统设置
│
├── # 个人中心子页面
├── personal-info.html     # 个人信息
├── change-password.html   # 修改密码
├── notification-settings.html  # 通知设置
├── help-center.html       # 帮助中心
├── about.html             # 关于我们
└── state-demo.html        # 状态演示
```

### B. 设计规范

- **容器宽度**：375px (iPhone 尺寸)
- **主色调**：#1890ff (蓝色)
- **AI 渐变色**：#667eea → #764ba2 (紫色渐变)
- **成功色**：#52c41a (绿色)
- **警告色**：#fa8c16 (橙色)
- **错误色**：#ff4d4f (红色)

### C. 版本历史

| 版本 | 日期 | 变更说明 |
|------|------|---------|
| v1.0 | 2025-12-27 | 初始版本，完成所有基础页面和 AI 功能 |
| v1.1 | 2025-12-27 | 新增个人中心子页面：个人信息、修改密码、通知设置、帮助中心、关于我们 (共 29 页面) |

---

> 文档作者：Claude AI
> 如有问题请联系开发团队
