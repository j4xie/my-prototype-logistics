<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI调用详情 - 平台管理员</title>
    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="../components.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Header -->
    <header class="header header--platform">
        <button class="header__back" onclick="window.location.href='ai-audit-logs.html'">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path d="M15 18l-6-6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
        </button>
        <h1 class="header__title">AI调用详情</h1>
        <button class="header__action">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                <circle cx="12" cy="12" r="1" fill="currentColor"/>
                <circle cx="12" cy="5" r="1" fill="currentColor"/>
                <circle cx="12" cy="19" r="1" fill="currentColor"/>
            </svg>
        </button>
    </header>

    <!-- Status Banner -->
    <section class="status-banner status-banner--success">
        <div class="status-banner__icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                <path d="M9 12l2 2 4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
        </div>
        <div class="status-banner__content">
            <div class="status-banner__title">调用成功</div>
            <div class="status-banner__subtitle">2024-01-07 14:32:15</div>
        </div>
    </section>

    <!-- Basic Info -->
    <section class="content-section">
        <h2 class="section-title">基本信息</h2>
        <div class="info-grid">
            <div class="info-item">
                <span class="info-item__label">调用ID</span>
                <span class="info-item__value">AI-20240107-001247</span>
            </div>
            <div class="info-item">
                <span class="info-item__label">调用类型</span>
                <span class="info-item__value">
                    <span class="tag tag--primary">智能调度</span>
                </span>
            </div>
            <div class="info-item">
                <span class="info-item__label">工厂</span>
                <span class="info-item__value">F001-北京工厂</span>
            </div>
            <div class="info-item">
                <span class="info-item__label">调用用户</span>
                <span class="info-item__value">张三 (调度员)</span>
            </div>
            <div class="info-item">
                <span class="info-item__label">调用时间</span>
                <span class="info-item__value">2024-01-07 14:32:15</span>
            </div>
            <div class="info-item">
                <span class="info-item__label">总耗时</span>
                <span class="info-item__value">1.23s</span>
            </div>
        </div>
    </section>

    <!-- Token Usage -->
    <section class="content-section">
        <h2 class="section-title">Token消耗明细</h2>
        <div class="token-stats">
            <div class="token-stat">
                <div class="token-stat__icon token-stat__icon--input">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                        <path d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" stroke="currentColor" stroke-width="2"/>
                    </svg>
                </div>
                <div class="token-stat__content">
                    <div class="token-stat__label">输入Token</div>
                    <div class="token-stat__value">1,523</div>
                </div>
            </div>

            <div class="token-stat">
                <div class="token-stat__icon token-stat__icon--output">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                        <path d="M17 8l4 4m0 0l-4 4m4-4H3" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </div>
                <div class="token-stat__content">
                    <div class="token-stat__label">输出Token</div>
                    <div class="token-stat__value">933</div>
                </div>
            </div>

            <div class="token-stat">
                <div class="token-stat__icon token-stat__icon--total">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                        <path d="M12 2L2 7l10 5 10-5-10-5z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M2 17l10 5 10-5M2 12l10 5 10-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <div class="token-stat__content">
                    <div class="token-stat__label">总计Token</div>
                    <div class="token-stat__value">2,456</div>
                </div>
            </div>
        </div>

        <div class="cost-info">
            <div class="cost-info__label">预估成本</div>
            <div class="cost-info__value">¥0.12</div>
        </div>
    </section>

    <!-- Request Parameters -->
    <section class="content-section">
        <h2 class="section-title">请求参数</h2>
        <div class="code-block">
            <div class="code-block__header">
                <span class="code-block__title">Request Payload</span>
                <button class="code-block__copy">复制</button>
            </div>
            <pre class="code-block__content">{
  "task": "scheduling_optimization",
  "context": {
    "factoryId": "F001",
    "date": "2024-01-08",
    "productionLines": 5,
    "plannedOrders": 23,
    "availableWorkers": 45
  },
  "parameters": {
    "optimizationGoal": "minimize_cost",
    "constraintRules": [
      "worker_skill_match",
      "equipment_availability",
      "material_stock_level"
    ],
    "timeWindow": {
      "start": "08:00",
      "end": "20:00"
    }
  }
}</pre>
        </div>
    </section>

    <!-- AI Response -->
    <section class="content-section">
        <h2 class="section-title">AI响应内容</h2>
        <div class="code-block">
            <div class="code-block__header">
                <span class="code-block__title">Response Data</span>
                <button class="code-block__copy">复制</button>
            </div>
            <pre class="code-block__content">{
  "success": true,
  "data": {
    "optimizedSchedule": [
      {
        "lineId": "L001",
        "orderId": "ORD-20240108-001",
        "startTime": "08:00",
        "endTime": "12:30",
        "assignedWorkers": ["W001", "W012", "W023"],
        "estimatedOutput": 500,
        "confidence": 0.92
      },
      {
        "lineId": "L002",
        "orderId": "ORD-20240108-002",
        "startTime": "08:30",
        "endTime": "13:00",
        "assignedWorkers": ["W005", "W015", "W028"],
        "estimatedOutput": 450,
        "confidence": 0.88
      }
    ],
    "metrics": {
      "totalProductionTime": "48.5h",
      "resourceUtilization": 0.87,
      "estimatedCost": 35240.50,
      "costSaving": 2850.30
    },
    "recommendations": [
      "建议在L003产线预留2名备用人员",
      "订单ORD-20240108-015建议延后至次日处理"
    ]
  },
  "modelInfo": {
    "model": "deepseek-chat",
    "temperature": 0.3,
    "maxTokens": 2000
  }
}</pre>
        </div>
    </section>

    <!-- Performance Metrics -->
    <section class="content-section">
        <h2 class="section-title">性能指标</h2>
        <div class="metrics-grid">
            <div class="metric-card">
                <div class="metric-card__label">API延迟</div>
                <div class="metric-card__value">1.23s</div>
                <div class="metric-card__bar">
                    <div class="metric-card__bar-fill" style="width: 40%;"></div>
                </div>
            </div>

            <div class="metric-card">
                <div class="metric-card__label">模型推理时间</div>
                <div class="metric-card__value">0.98s</div>
                <div class="metric-card__bar">
                    <div class="metric-card__bar-fill" style="width: 32%;"></div>
                </div>
            </div>

            <div class="metric-card">
                <div class="metric-card__label">网络传输</div>
                <div class="metric-card__value">0.25s</div>
                <div class="metric-card__bar">
                    <div class="metric-card__bar-fill" style="width: 8%;"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Actions -->
    <section class="content-section">
        <div class="action-buttons">
            <button class="btn btn--outline btn--block">导出调用记录</button>
            <button class="btn btn--outline btn--block">重试此调用</button>
        </div>
    </section>

    <style>
        .status-banner {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 20px 16px;
            margin-bottom: 8px;
        }

        .status-banner--success {
            background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
        }

        .status-banner__icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #2e7d32;
        }

        .status-banner__title {
            font-size: 18px;
            font-weight: 600;
            color: #1b5e20;
            margin-bottom: 4px;
        }

        .status-banner__subtitle {
            font-size: 13px;
            color: #2e7d32;
        }

        .token-stats {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 16px;
        }

        .token-stat {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: #f9f9f9;
            border-radius: 8px;
        }

        .token-stat__icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .token-stat__icon--input {
            background: #e3f2fd;
            color: #1976d2;
        }

        .token-stat__icon--output {
            background: #f3e5f5;
            color: #7b1fa2;
        }

        .token-stat__icon--total {
            background: #fff3e0;
            color: #e65100;
        }

        .token-stat__label {
            font-size: 13px;
            color: #666;
            margin-bottom: 4px;
        }

        .token-stat__value {
            font-size: 20px;
            font-weight: 600;
            color: #333;
        }

        .cost-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px;
            background: #f0f4ff;
            border-radius: 8px;
            border-left: 4px solid #1976d2;
        }

        .cost-info__label {
            font-size: 14px;
            color: #666;
        }

        .cost-info__value {
            font-size: 20px;
            font-weight: 600;
            color: #1976d2;
        }

        .code-block {
            background: #1e1e1e;
            border-radius: 8px;
            overflow: hidden;
        }

        .code-block__header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 16px;
            background: #2d2d2d;
            border-bottom: 1px solid #404040;
        }

        .code-block__title {
            font-size: 13px;
            color: #9cdcfe;
            font-family: 'Courier New', monospace;
        }

        .code-block__copy {
            font-size: 12px;
            color: #fff;
            background: #404040;
            border: none;
            padding: 4px 12px;
            border-radius: 4px;
            cursor: pointer;
        }

        .code-block__content {
            padding: 16px;
            margin: 0;
            color: #d4d4d4;
            font-size: 12px;
            line-height: 1.6;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
        }

        .metrics-grid {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .metric-card {
            padding: 16px;
            background: #f9f9f9;
            border-radius: 8px;
        }

        .metric-card__label {
            font-size: 13px;
            color: #666;
            margin-bottom: 8px;
        }

        .metric-card__value {
            font-size: 24px;
            font-weight: 600;
            color: #333;
            margin-bottom: 12px;
        }

        .metric-card__bar {
            height: 6px;
            background: #e0e0e0;
            border-radius: 3px;
            overflow: hidden;
        }

        .metric-card__bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            border-radius: 3px;
            transition: width 0.3s;
        }

        .action-buttons {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .tag {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 600;
        }

        .tag--primary {
            background: #e3f2fd;
            color: #1976d2;
        }
    </style>
</body>
</html>
