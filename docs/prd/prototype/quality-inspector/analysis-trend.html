<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=375, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>质检员 - 趋势分析</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <a href="../index.html" class="back-to-index">← 返回角色选择</a>

  <div class="phone-container">
    <!-- 头部 -->
    <div class="subpage-header">
      <a href="analysis.html" class="back-btn">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="15,18 9,12 15,6"/>
        </svg>
      </a>
      <span class="title">合格率趋势</span>
      <select style="margin-left: auto; padding: 6px 10px; border: 1px solid #e5e5e5; border-radius: 8px; font-size: 13px;">
        <option>近7天</option>
        <option>近30天</option>
        <option>近90天</option>
      </select>
    </div>

    <!-- 主内容 -->
    <div class="main-content" style="padding-bottom: 20px;">
      <!-- 总览卡片 -->
      <div style="background: var(--qc-gradient); border-radius: 16px; padding: 20px; color: white; margin-bottom: 16px;">
        <div style="display: flex; justify-content: space-between; align-items: flex-start;">
          <div>
            <div style="font-size: 13px; opacity: 0.9;">7日平均合格率</div>
            <div style="font-size: 36px; font-weight: 700; margin: 8px 0;">87.3%</div>
            <div style="display: flex; align-items: center; gap: 6px; font-size: 13px;">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="23,6 13.5,15.5 8.5,10.5 1,18"/>
                <polyline points="17,6 23,6 23,12"/>
              </svg>
              较上周 +2.1%
            </div>
          </div>
          <div style="text-align: right;">
            <div style="font-size: 12px; opacity: 0.8;">目标</div>
            <div style="font-size: 24px; font-weight: 600;">≥90%</div>
            <div style="font-size: 12px; opacity: 0.8; margin-top: 4px;">差距 2.7%</div>
          </div>
        </div>
      </div>

      <!-- 趋势图表 -->
      <div class="chart-card">
        <div class="chart-header">
          <h3>每日合格率变化</h3>
        </div>
        <div style="height: 180px; background: linear-gradient(to top, #d1fae5 0%, #f0fdf4 100%); border-radius: 8px; position: relative; padding: 20px;">
          <!-- 模拟折线图 -->
          <svg width="100%" height="100%" viewBox="0 0 300 120" preserveAspectRatio="none">
            <!-- 网格线 -->
            <line x1="0" y1="30" x2="300" y2="30" stroke="#d1fae5" stroke-width="1" stroke-dasharray="5,5"/>
            <line x1="0" y1="60" x2="300" y2="60" stroke="#d1fae5" stroke-width="1" stroke-dasharray="5,5"/>
            <line x1="0" y1="90" x2="300" y2="90" stroke="#d1fae5" stroke-width="1" stroke-dasharray="5,5"/>
            <!-- 目标线 -->
            <line x1="0" y1="12" x2="300" y2="12" stroke="#f59e0b" stroke-width="2" stroke-dasharray="8,4"/>
            <!-- 折线 -->
            <polyline points="0,48 50,36 100,54 150,24 200,18 250,30 300,21" fill="none" stroke="var(--qc-primary)" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
            <!-- 数据点 -->
            <circle cx="0" cy="48" r="5" fill="var(--qc-primary)"/>
            <circle cx="50" cy="36" r="5" fill="var(--qc-primary)"/>
            <circle cx="100" cy="54" r="5" fill="var(--qc-primary)"/>
            <circle cx="150" cy="24" r="5" fill="var(--qc-primary)"/>
            <circle cx="200" cy="18" r="5" fill="var(--qc-primary)"/>
            <circle cx="250" cy="30" r="5" fill="var(--qc-primary)"/>
            <circle cx="300" cy="21" r="6" fill="var(--qc-primary-dark)" stroke="white" stroke-width="2"/>
          </svg>
          <!-- Y轴标签 -->
          <div style="position: absolute; left: -5px; top: 15px; font-size: 10px; color: #999;">95%</div>
          <div style="position: absolute; left: -5px; top: 45px; font-size: 10px; color: #999;">90%</div>
          <div style="position: absolute; left: -5px; top: 75px; font-size: 10px; color: #999;">85%</div>
          <div style="position: absolute; left: -5px; top: 105px; font-size: 10px; color: #999;">80%</div>
        </div>
        <!-- X轴标签 -->
        <div style="display: flex; justify-content: space-between; padding: 8px 16px; font-size: 11px; color: #999;">
          <span>12/22</span>
          <span>12/23</span>
          <span>12/24</span>
          <span>12/25</span>
          <span>12/26</span>
          <span>12/27</span>
          <span style="color: var(--qc-primary); font-weight: 600;">今日</span>
        </div>
      </div>

      <!-- 每日详情 -->
      <div class="section-title">每日明细</div>

      <div style="background: white; border-radius: 12px; padding: 12px 16px; margin-bottom: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.04);">
        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px;">
          <span style="font-size: 14px; font-weight: 500; color: #333;">今天 12/28</span>
          <span style="font-size: 18px; font-weight: 600; color: var(--qc-primary);">87.3%</span>
        </div>
        <div style="display: flex; gap: 16px; font-size: 12px; color: #666;">
          <span>检验: 15批</span>
          <span>通过: 13批</span>
          <span style="color: #ef4444;">未通过: 2批</span>
        </div>
      </div>

      <div style="background: white; border-radius: 12px; padding: 12px 16px; margin-bottom: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.04);">
        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px;">
          <span style="font-size: 14px; font-weight: 500; color: #333;">昨天 12/27</span>
          <span style="font-size: 18px; font-weight: 600; color: var(--qc-primary);">85.0%</span>
        </div>
        <div style="display: flex; gap: 16px; font-size: 12px; color: #666;">
          <span>检验: 20批</span>
          <span>通过: 17批</span>
          <span style="color: #ef4444;">未通过: 3批</span>
        </div>
      </div>

      <div style="background: white; border-radius: 12px; padding: 12px 16px; margin-bottom: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.04);">
        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px;">
          <span style="font-size: 14px; font-weight: 500; color: #333;">12/26</span>
          <span style="font-size: 18px; font-weight: 600; color: var(--qc-primary);">91.7%</span>
        </div>
        <div style="display: flex; gap: 16px; font-size: 12px; color: #666;">
          <span>检验: 12批</span>
          <span>通过: 11批</span>
          <span style="color: #ef4444;">未通过: 1批</span>
        </div>
      </div>

      <div style="background: white; border-radius: 12px; padding: 12px 16px; margin-bottom: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.04);">
        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px;">
          <span style="font-size: 14px; font-weight: 500; color: #333;">12/25</span>
          <span style="font-size: 18px; font-weight: 600; color: var(--qc-primary);">93.3%</span>
        </div>
        <div style="display: flex; gap: 16px; font-size: 12px; color: #666;">
          <span>检验: 15批</span>
          <span>通过: 14批</span>
          <span style="color: #ef4444;">未通过: 1批</span>
        </div>
      </div>

      <!-- AI洞察 -->
      <div class="ai-suggestion">
        <div class="ai-suggestion-header">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="var(--qc-primary)" stroke-width="2">
            <path d="M12 2a2 2 0 0 1 2 2c0 .74-.4 1.39-1 1.73V7h1a7 7 0 0 1 7 7h1a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v1a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-1H2a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h1a7 7 0 0 1 7-7h1V5.73c-.6-.34-1-.99-1-1.73a2 2 0 0 1 2-2z"/>
          </svg>
          <h4>AI趋势洞察</h4>
        </div>
        <p class="ai-suggestion-text">
          <strong>趋势分析:</strong> 7日合格率呈上升趋势(+2.1%)，但仍低于90%目标。<br><br>
          <strong>关键发现:</strong><br>
          • 带鱼片产品线拉低整体合格率约3%<br>
          • 周一、周四合格率相对较低(可能与新原料批次相关)<br>
          • 三文鱼排产品线持续保持95%+高合格率<br><br>
          <strong>建议措施:</strong><br>
          1. 重点关注带鱼片规格检查<br>
          2. 与采购沟通优化原料质量<br>
          3. 在高峰日增加抽检比例
        </p>
      </div>

      <!-- 对比分析 -->
      <div class="chart-card">
        <div class="chart-header">
          <h3>产品线对比</h3>
        </div>
        <div style="padding: 8px 0;">
          <div style="display: flex; align-items: center; margin-bottom: 16px;">
            <div style="width: 8px; height: 8px; background: var(--qc-primary); border-radius: 50%; margin-right: 8px;"></div>
            <span style="font-size: 13px; color: #666; flex: 1;">三文鱼排</span>
            <span style="font-size: 14px; font-weight: 600; color: var(--qc-primary);">95.2%</span>
            <span style="font-size: 11px; color: var(--qc-primary); margin-left: 8px;">↑ 1.3%</span>
          </div>
          <div style="display: flex; align-items: center; margin-bottom: 16px;">
            <div style="width: 8px; height: 8px; background: #3b82f6; border-radius: 50%; margin-right: 8px;"></div>
            <span style="font-size: 13px; color: #666; flex: 1;">鳕鱼块</span>
            <span style="font-size: 14px; font-weight: 600; color: #3b82f6;">91.5%</span>
            <span style="font-size: 11px; color: var(--qc-primary); margin-left: 8px;">↑ 2.1%</span>
          </div>
          <div style="display: flex; align-items: center; margin-bottom: 16px;">
            <div style="width: 8px; height: 8px; background: #f59e0b; border-radius: 50%; margin-right: 8px;"></div>
            <span style="font-size: 13px; color: #666; flex: 1;">虾仁</span>
            <span style="font-size: 14px; font-weight: 600; color: #f59e0b;">86.8%</span>
            <span style="font-size: 11px; color: #999; margin-left: 8px;">- 0.2%</span>
          </div>
          <div style="display: flex; align-items: center;">
            <div style="width: 8px; height: 8px; background: #ef4444; border-radius: 50%; margin-right: 8px;"></div>
            <span style="font-size: 13px; color: #666; flex: 1;">带鱼片</span>
            <span style="font-size: 14px; font-weight: 600; color: #ef4444;">82.3%</span>
            <span style="font-size: 11px; color: #ef4444; margin-left: 8px;">↓ 3.5%</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
