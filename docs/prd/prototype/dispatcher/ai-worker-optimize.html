<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>人员优化建议 - AI调度</title>
  <link rel="stylesheet" href="../styles.css">
  <link rel="stylesheet" href="../components.css">
  <link rel="stylesheet" href="styles.css">
  <style>
    /* AI 主题样式 */
    .ai-page-header {
      background: linear-gradient(135deg, #722ed1 0%, #a18cd1 100%);
      color: white;
      padding: 16px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .ai-page-title {
      font-size: 18px;
      font-weight: 500;
    }
    .ai-badge {
      background: rgba(255,255,255,0.2);
      padding: 4px 10px;
      border-radius: 12px;
      font-size: 11px;
    }

    /* 优化收益卡片 */
    .benefit-card {
      background: linear-gradient(135deg, #f6ffed 0%, #fff 100%);
      border: 1px solid #b7eb8f;
      margin: 16px;
      border-radius: 16px;
      padding: 20px;
      text-align: center;
    }
    .benefit-icon {
      width: 60px;
      height: 60px;
      background: linear-gradient(135deg, #52c41a 0%, #95de64 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 16px;
      font-size: 28px;
      color: white;
    }
    .benefit-title {
      font-size: 16px;
      color: #333;
      margin-bottom: 16px;
    }
    .benefit-stats {
      display: flex;
      justify-content: center;
      gap: 32px;
    }
    .benefit-stat {
      text-align: center;
    }
    .benefit-stat-value {
      font-size: 32px;
      font-weight: 700;
      color: #52c41a;
    }
    .benefit-stat-label {
      font-size: 12px;
      color: #666;
      margin-top: 4px;
    }
    .benefit-stat-change {
      font-size: 12px;
      color: #52c41a;
      margin-top: 2px;
    }

    /* 对比区域 */
    .compare-section {
      margin: 0 16px 16px;
    }
    .compare-title {
      font-size: 16px;
      font-weight: 500;
      color: #333;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .compare-row {
      display: flex;
      gap: 12px;
      margin-bottom: 12px;
    }
    .compare-card {
      flex: 1;
      background: white;
      border-radius: 12px;
      padding: 12px;
      border: 2px solid transparent;
    }
    .compare-card.before {
      border-color: #d9d9d9;
    }
    .compare-card.after {
      border-color: #722ed1;
      background: #f9f5ff;
    }
    .compare-card-header {
      font-size: 12px;
      color: #999;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .compare-card.after .compare-card-header {
      color: #722ed1;
    }
    .compare-workshop {
      font-size: 14px;
      font-weight: 500;
      color: #333;
      margin-bottom: 4px;
    }
    .compare-count {
      font-size: 24px;
      font-weight: 600;
      color: #333;
    }
    .compare-card.after .compare-count {
      color: #722ed1;
    }
    .compare-suffix {
      font-size: 14px;
      color: #999;
      margin-left: 2px;
    }

    /* 调整建议列表 */
    .adjustment-card {
      background: white;
      margin: 0 16px 16px;
      border-radius: 12px;
      overflow: hidden;
    }
    .adjustment-header {
      padding: 16px;
      border-bottom: 1px solid #f0f0f0;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .adjustment-title {
      font-size: 16px;
      font-weight: 500;
      color: #333;
    }
    .adjustment-count {
      background: #722ed1;
      color: white;
      padding: 2px 8px;
      border-radius: 10px;
      font-size: 12px;
    }

    .adjustment-item {
      padding: 14px 16px;
      border-bottom: 1px solid #f5f5f5;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .adjustment-item:last-child {
      border-bottom: none;
    }
    .adjustment-avatar {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      background: linear-gradient(135deg, #722ed1 0%, #a18cd1 100%);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
      flex-shrink: 0;
    }
    .adjustment-info {
      flex: 1;
    }
    .adjustment-name {
      font-size: 15px;
      font-weight: 500;
      color: #333;
      margin-bottom: 4px;
    }
    .adjustment-skill {
      font-size: 12px;
      color: #999;
    }
    .adjustment-skill .highlight {
      color: #722ed1;
      font-weight: 500;
    }
    .adjustment-arrow {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
      flex-shrink: 0;
    }
    .adjustment-from {
      font-size: 12px;
      color: #999;
      text-decoration: line-through;
    }
    .adjustment-arrow-icon {
      font-size: 18px;
      color: #722ed1;
    }
    .adjustment-to {
      font-size: 13px;
      color: #722ed1;
      font-weight: 500;
    }

    /* 车间分布对比图 */
    .distribution-card {
      background: white;
      margin: 0 16px 16px;
      border-radius: 12px;
      padding: 16px;
    }
    .distribution-title {
      font-size: 16px;
      font-weight: 500;
      color: #333;
      margin-bottom: 16px;
    }
    .distribution-chart {
      margin-bottom: 16px;
    }
    .distribution-row {
      display: flex;
      align-items: center;
      margin-bottom: 12px;
    }
    .distribution-label {
      width: 70px;
      font-size: 13px;
      color: #666;
      flex-shrink: 0;
    }
    .distribution-bars {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }
    .distribution-bar-row {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .distribution-bar {
      height: 16px;
      border-radius: 4px;
      transition: width 0.5s ease;
    }
    .distribution-bar.before {
      background: #d9d9d9;
    }
    .distribution-bar.after {
      background: linear-gradient(90deg, #722ed1, #a18cd1);
    }
    .distribution-value {
      font-size: 12px;
      color: #666;
      min-width: 30px;
    }
    .distribution-legend {
      display: flex;
      justify-content: center;
      gap: 24px;
      padding-top: 12px;
      border-top: 1px solid #f0f0f0;
    }
    .legend-item {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 12px;
      color: #666;
    }
    .legend-dot {
      width: 12px;
      height: 12px;
      border-radius: 2px;
    }
    .legend-dot.before {
      background: #d9d9d9;
    }
    .legend-dot.after {
      background: linear-gradient(90deg, #722ed1, #a18cd1);
    }

    /* AI 说明 */
    .ai-explanation {
      background: linear-gradient(135deg, #f9f5ff 0%, #fff 100%);
      border: 1px solid #d3adf7;
      margin: 0 16px 16px;
      border-radius: 12px;
      padding: 16px;
    }
    .ai-explanation-header {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 12px;
    }
    .ai-explanation-icon {
      font-size: 24px;
    }
    .ai-explanation-title {
      font-size: 14px;
      font-weight: 500;
      color: #722ed1;
    }
    .ai-explanation-content {
      font-size: 14px;
      color: #666;
      line-height: 1.8;
    }
    .ai-explanation-content strong {
      color: #722ed1;
    }

    /* 底部操作栏 */
    .action-bar {
      position: fixed;
      bottom: 56px;
      left: 50%;
      transform: translateX(-50%);
      width: 375px;
      background: white;
      padding: 12px 16px;
      box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
      display: flex;
      gap: 12px;
      z-index: 100;
    }
    .action-btn {
      flex: 1;
      padding: 14px;
      border-radius: 8px;
      font-size: 15px;
      text-align: center;
      cursor: pointer;
      border: none;
    }
    .action-btn.secondary {
      background: #f5f5f5;
      color: #666;
    }
    .action-btn.primary {
      background: linear-gradient(135deg, #722ed1 0%, #a18cd1 100%);
      color: white;
    }
  </style>
</head>
<body>
  <a href="../index.html" class="back-to-index">< 返回角色选择</a>

  <div class="mobile-container">
    <div class="status-bar">
      <span>9:41</span>
      <span></span>
    </div>

    <!-- Header -->
    <div class="ai-page-header">
      <div style="display: flex; align-items: center; gap: 12px;">
        <a href="ai-schedule.html" style="color: white; text-decoration: none; font-size: 20px;"><</a>
        <span class="ai-page-title">人员优化建议</span>
      </div>
      <span class="ai-badge">OR-Tools</span>
    </div>

    <div class="content" style="background: #f5f5f5; padding-bottom: 130px;">

      <!-- 优化收益 -->
      <div class="benefit-card">
        <div class="benefit-icon">&#128200;</div>
        <div class="benefit-title">应用 AI 优化方案后预计收益</div>
        <div class="benefit-stats">
          <div class="benefit-stat">
            <div class="benefit-stat-value">92%</div>
            <div class="benefit-stat-label">完成概率</div>
            <div class="benefit-stat-change">&#8593; +7%</div>
          </div>
          <div class="benefit-stat">
            <div class="benefit-stat-value">12%</div>
            <div class="benefit-stat-label">效率提升</div>
            <div class="benefit-stat-change">&#8593; 优化</div>
          </div>
          <div class="benefit-stat">
            <div class="benefit-stat-value">-2h</div>
            <div class="benefit-stat-label">预计节省</div>
            <div class="benefit-stat-change">&#8593; 提前</div>
          </div>
        </div>
      </div>

      <!-- 人员对比 -->
      <div class="compare-section">
        <div class="compare-title">
          <span>&#128101;</span>
          人员分配对比
        </div>
        <div class="compare-row">
          <div class="compare-card before">
            <div class="compare-card-header">
              <span>&#9898;</span> 当前分配
            </div>
            <div class="compare-workshop">切片A线</div>
            <div><span class="compare-count">4</span><span class="compare-suffix">人</span></div>
          </div>
          <div class="compare-card after">
            <div class="compare-card-header">
              <span>&#9989;</span> AI 优化后
            </div>
            <div class="compare-workshop">切片A线</div>
            <div><span class="compare-count">6</span><span class="compare-suffix">人</span></div>
          </div>
        </div>
        <div class="compare-row">
          <div class="compare-card before">
            <div class="compare-card-header">
              <span>&#9898;</span> 当前分配
            </div>
            <div class="compare-workshop">切片B线</div>
            <div><span class="compare-count">3</span><span class="compare-suffix">人</span></div>
          </div>
          <div class="compare-card after">
            <div class="compare-card-header">
              <span>&#9989;</span> AI 优化后
            </div>
            <div class="compare-workshop">切片B线</div>
            <div><span class="compare-count">4</span><span class="compare-suffix">人</span></div>
          </div>
        </div>
      </div>

      <!-- 调整建议列表 -->
      <div class="adjustment-card">
        <div class="adjustment-header">
          <span class="adjustment-title">人员调动建议</span>
          <span class="adjustment-count">3 人</span>
        </div>

        <div class="adjustment-item">
          <div class="adjustment-avatar">张</div>
          <div class="adjustment-info">
            <div class="adjustment-name">张小明</div>
            <div class="adjustment-skill">切片技能 <span class="highlight">Lv.3 (熟练)</span></div>
          </div>
          <div class="adjustment-arrow">
            <span class="adjustment-from">机动</span>
            <span class="adjustment-arrow-icon">&#8595;</span>
            <span class="adjustment-to">切片A线</span>
          </div>
        </div>

        <div class="adjustment-item">
          <div class="adjustment-avatar">李</div>
          <div class="adjustment-info">
            <div class="adjustment-name">李小红</div>
            <div class="adjustment-skill">切片技能 <span class="highlight">Lv.2 (会操作)</span></div>
          </div>
          <div class="adjustment-arrow">
            <span class="adjustment-from">包装</span>
            <span class="adjustment-arrow-icon">&#8595;</span>
            <span class="adjustment-to">切片A线</span>
          </div>
        </div>

        <div class="adjustment-item">
          <div class="adjustment-avatar">王</div>
          <div class="adjustment-info">
            <div class="adjustment-name">王大力</div>
            <div class="adjustment-skill">切片技能 <span class="highlight">Lv.2 (会操作)</span></div>
          </div>
          <div class="adjustment-arrow">
            <span class="adjustment-from">冷冻</span>
            <span class="adjustment-arrow-icon">&#8595;</span>
            <span class="adjustment-to">切片B线</span>
          </div>
        </div>
      </div>

      <!-- 车间分布图 -->
      <div class="distribution-card">
        <div class="distribution-title">各车间人员分布</div>
        <div class="distribution-chart">
          <div class="distribution-row">
            <div class="distribution-label">切片A线</div>
            <div class="distribution-bars">
              <div class="distribution-bar-row">
                <div class="distribution-bar before" style="width: 40%;"></div>
                <span class="distribution-value">4人</span>
              </div>
              <div class="distribution-bar-row">
                <div class="distribution-bar after" style="width: 60%;"></div>
                <span class="distribution-value">6人</span>
              </div>
            </div>
          </div>
          <div class="distribution-row">
            <div class="distribution-label">切片B线</div>
            <div class="distribution-bars">
              <div class="distribution-bar-row">
                <div class="distribution-bar before" style="width: 30%;"></div>
                <span class="distribution-value">3人</span>
              </div>
              <div class="distribution-bar-row">
                <div class="distribution-bar after" style="width: 40%;"></div>
                <span class="distribution-value">4人</span>
              </div>
            </div>
          </div>
          <div class="distribution-row">
            <div class="distribution-label">包装A线</div>
            <div class="distribution-bars">
              <div class="distribution-bar-row">
                <div class="distribution-bar before" style="width: 50%;"></div>
                <span class="distribution-value">5人</span>
              </div>
              <div class="distribution-bar-row">
                <div class="distribution-bar after" style="width: 40%;"></div>
                <span class="distribution-value">4人</span>
              </div>
            </div>
          </div>
          <div class="distribution-row">
            <div class="distribution-label">冷冻车间</div>
            <div class="distribution-bars">
              <div class="distribution-bar-row">
                <div class="distribution-bar before" style="width: 30%;"></div>
                <span class="distribution-value">3人</span>
              </div>
              <div class="distribution-bar-row">
                <div class="distribution-bar after" style="width: 20%;"></div>
                <span class="distribution-value">2人</span>
              </div>
            </div>
          </div>
          <div class="distribution-row">
            <div class="distribution-label">机动人员</div>
            <div class="distribution-bars">
              <div class="distribution-bar-row">
                <div class="distribution-bar before" style="width: 40%;"></div>
                <span class="distribution-value">4人</span>
              </div>
              <div class="distribution-bar-row">
                <div class="distribution-bar after" style="width: 30%;"></div>
                <span class="distribution-value">3人</span>
              </div>
            </div>
          </div>
        </div>
        <div class="distribution-legend">
          <div class="legend-item">
            <div class="legend-dot before"></div>
            <span>优化前</span>
          </div>
          <div class="legend-item">
            <div class="legend-dot after"></div>
            <span>优化后</span>
          </div>
        </div>
      </div>

      <!-- AI 说明 -->
      <div class="ai-explanation">
        <div class="ai-explanation-header">
          <span class="ai-explanation-icon">&#129302;</span>
          <span class="ai-explanation-title">优化算法说明</span>
        </div>
        <div class="ai-explanation-content">
          本次优化使用 <strong>OR-Tools 约束规划</strong> 算法，综合考虑以下因素：
          <br><br>
          &#10003; 员工技能等级与岗位匹配度<br>
          &#10003; 各产线最低/最高人数约束<br>
          &#10003; 批次优先级与交期紧迫度<br>
          &#10003; 人员调动成本最小化<br>
          <br>
          在 <strong>0.8秒</strong> 内完成求解，找到全局最优解。
        </div>
      </div>

    </div>

    <!-- 底部操作栏 -->
    <div class="action-bar">
      <button class="action-btn secondary" onclick="location.href='personnel-transfer.html'">手动调整</button>
      <button class="action-btn primary" onclick="applyOptimization()">应用优化方案</button>
    </div>

    <!-- 底部导航 -->
    <nav class="bottom-nav">
      <a href="index.html" class="nav-item"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg><span>首页</span></a>
      <a href="plan-list.html" class="nav-item"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/></svg><span>计划</span></a>
      <a href="ai-schedule.html" class="nav-item ai-nav active"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M21 10.12h-6.78l2.74-2.82c-2.73-2.7-7.15-2.8-9.88-.1-2.73 2.71-2.73 7.08 0 9.79s7.15 2.71 9.88 0C18.32 15.65 19 14.08 19 12.1h2c0 1.98-.88 4.55-2.64 6.29-3.51 3.48-9.21 3.48-12.72 0-3.5-3.47-3.53-9.11-.02-12.58s9.14-3.47 12.65 0L21 3v7.12z"/></svg><span>AI调度</span></a>
      <a href="personnel-list.html" class="nav-item"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg><span>人员</span></a>
      <a href="profile.html" class="nav-item"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg><span>我的</span></a>
    </nav>
  </div>

  <script>
    function applyOptimization() {
      alert('人员优化方案已应用！\n\n已提交 3 个人员调动申请，等待审批。\n预计完成概率提升至 92%。');
      location.href = 'personnel-transfer.html';
    }
  </script>
</body>
</html>
