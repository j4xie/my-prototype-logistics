<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>编辑任务分配 - 调度员</title>
  <link rel="stylesheet" href="../styles.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      background: #f5f5f5;
      min-height: 100vh;
    }

    .mobile-container {
      max-width: 375px;
      margin: 0 auto;
      background: #fff;
      min-height: 100vh;
      position: relative;
      padding-bottom: 70px;
    }

    /* Header */
    .header {
      background: linear-gradient(135deg, #a18cd1 0%, #fbc2eb 100%);
      padding: 48px 16px 20px;
      color: #fff;
    }

    .header-content {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .back-btn {
      width: 32px;
      height: 32px;
      border-radius: 8px;
      background: rgba(255,255,255,0.2);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }

    .back-btn svg {
      width: 20px;
      height: 20px;
      fill: #fff;
    }

    .header h1 {
      font-size: 18px;
      font-weight: 600;
    }

    /* Task Info Card */
    .task-info-card {
      margin: 16px;
      background: #f9f9f9;
      border-radius: 12px;
      padding: 16px;
    }

    .task-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 12px;
    }

    .task-id {
      font-size: 14px;
      font-weight: 600;
      color: #333;
    }

    .task-type {
      padding: 4px 10px;
      border-radius: 12px;
      font-size: 12px;
      background: #f6ffed;
      color: #52c41a;
    }

    .task-info-row {
      display: flex;
      justify-content: space-between;
      font-size: 13px;
      color: #666;
      margin-bottom: 6px;
    }

    .task-info-row:last-child {
      margin-bottom: 0;
    }

    /* Section */
    .section {
      padding: 0 16px;
      margin-bottom: 20px;
    }

    .section-title {
      font-size: 14px;
      font-weight: 600;
      color: #333;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .section-title::before {
      content: '';
      width: 3px;
      height: 14px;
      background: linear-gradient(135deg, #a18cd1 0%, #fbc2eb 100%);
      border-radius: 2px;
    }

    /* Current Workers */
    .current-workers {
      margin-bottom: 16px;
    }

    .worker-list {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .worker-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px;
      background: #fff;
      border: 1px solid #f0f0f0;
      border-radius: 10px;
    }

    .worker-left {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .worker-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: linear-gradient(135deg, #a18cd1 0%, #fbc2eb 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      font-size: 14px;
      font-weight: 500;
    }

    .worker-info {
      display: flex;
      flex-direction: column;
    }

    .worker-name {
      font-size: 14px;
      font-weight: 500;
      color: #333;
    }

    .worker-skill {
      font-size: 12px;
      color: #999;
    }

    .worker-actions {
      display: flex;
      gap: 8px;
    }

    .action-icon {
      width: 32px;
      height: 32px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }

    .action-icon.swap {
      background: #e6f7ff;
    }

    .action-icon.swap svg {
      fill: #1890ff;
    }

    .action-icon.remove {
      background: #fff2f0;
    }

    .action-icon.remove svg {
      fill: #ff4d4f;
    }

    /* Available Workers */
    .available-workers {
      background: #f9f9f9;
      border-radius: 12px;
      padding: 12px;
    }

    .search-bar {
      display: flex;
      align-items: center;
      background: #fff;
      border-radius: 8px;
      padding: 8px 12px;
      margin-bottom: 12px;
      border: 1px solid #e8e8e8;
    }

    .search-bar svg {
      width: 18px;
      height: 18px;
      fill: #999;
      margin-right: 8px;
    }

    .search-bar input {
      flex: 1;
      border: none;
      outline: none;
      font-size: 14px;
    }

    .filter-tags {
      display: flex;
      gap: 8px;
      margin-bottom: 12px;
      overflow-x: auto;
      padding-bottom: 4px;
    }

    .filter-tag {
      padding: 6px 12px;
      background: #fff;
      border-radius: 14px;
      font-size: 12px;
      color: #666;
      white-space: nowrap;
      cursor: pointer;
      border: 1px solid #e8e8e8;
    }

    .filter-tag.active {
      background: #a18cd1;
      color: #fff;
      border-color: #a18cd1;
    }

    .available-list {
      max-height: 200px;
      overflow-y: auto;
    }

    .available-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px;
      background: #fff;
      border-radius: 8px;
      margin-bottom: 8px;
    }

    .available-item:last-child {
      margin-bottom: 0;
    }

    .available-left {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .available-avatar {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: #e6f7ff;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #1890ff;
      font-size: 12px;
      font-weight: 500;
    }

    .available-name {
      font-size: 13px;
      color: #333;
    }

    .available-status {
      font-size: 11px;
      color: #52c41a;
    }

    .add-btn {
      padding: 6px 12px;
      background: linear-gradient(135deg, #a18cd1 0%, #fbc2eb 100%);
      color: #fff;
      border: none;
      border-radius: 6px;
      font-size: 12px;
      cursor: pointer;
    }

    /* AI Recommendation */
    .ai-recommendation {
      margin: 16px;
      background: linear-gradient(135deg, #722ed1 0%, #a18cd1 50%, #fbc2eb 100%);
      border-radius: 12px;
      padding: 14px;
      color: #fff;
    }

    .ai-header {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 10px;
    }

    .ai-icon {
      width: 24px;
      height: 24px;
    }

    .ai-title {
      font-size: 14px;
      font-weight: 600;
    }

    .ai-content {
      font-size: 13px;
      opacity: 0.95;
      margin-bottom: 12px;
      line-height: 1.5;
    }

    .ai-suggestion-list {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .ai-suggestion-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 8px 10px;
      background: rgba(255,255,255,0.15);
      border-radius: 8px;
    }

    .suggestion-left {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .suggestion-avatar {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      background: rgba(255,255,255,0.3);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
    }

    .suggestion-info {
      font-size: 12px;
    }

    .suggestion-score {
      font-size: 12px;
      padding: 2px 8px;
      background: rgba(255,255,255,0.2);
      border-radius: 10px;
    }

    .apply-suggestion-btn {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      margin-top: 8px;
      padding: 8px 14px;
      background: rgba(255,255,255,0.2);
      border-radius: 6px;
      font-size: 13px;
      cursor: pointer;
    }

    /* Shift Assignment */
    .shift-section {
      padding: 0 16px;
      margin-bottom: 16px;
    }

    .shift-options {
      display: flex;
      gap: 10px;
    }

    .shift-option {
      flex: 1;
      padding: 12px;
      text-align: center;
      background: #f9f9f9;
      border: 2px solid transparent;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s;
    }

    .shift-option.active {
      background: #f9f0ff;
      border-color: #a18cd1;
    }

    .shift-time {
      font-size: 12px;
      color: #999;
      margin-bottom: 4px;
    }

    .shift-name {
      font-size: 14px;
      font-weight: 500;
      color: #333;
    }

    /* Action Buttons */
    .action-buttons {
      padding: 16px;
      display: flex;
      gap: 12px;
    }

    .btn {
      flex: 1;
      padding: 14px;
      border-radius: 10px;
      font-size: 15px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s;
      border: none;
      text-align: center;
    }

    .btn-secondary {
      background: #f5f5f5;
      color: #666;
    }

    .btn-primary {
      background: linear-gradient(135deg, #a18cd1 0%, #fbc2eb 100%);
      color: #fff;
    }

    /* Bottom Navigation */
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 100%;
      max-width: 375px;
      background: #fff;
      display: flex;
      justify-content: space-around;
      padding: 8px 0;
      box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
      z-index: 100;
    }

    .nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
      text-decoration: none;
      color: #999;
      font-size: 10px;
      position: relative;
    }

    .nav-item.active {
      color: #a18cd1;
    }

    .nav-item svg {
      width: 24px;
      height: 24px;
      fill: currentColor;
    }

    .nav-item.ai-nav {
      color: #fff;
    }

    .nav-item.ai-nav::before {
      content: '';
      position: absolute;
      top: -8px;
      left: 50%;
      transform: translateX(-50%);
      width: 48px;
      height: 48px;
      background: linear-gradient(135deg, #722ed1 0%, #a18cd1 100%);
      border-radius: 50%;
      z-index: -1;
      box-shadow: 0 4px 12px rgba(114, 46, 209, 0.3);
    }

    .nav-item.ai-nav svg {
      fill: #fff;
      position: relative;
      top: 4px;
    }

    .nav-item.ai-nav span {
      position: relative;
      top: 4px;
      color: #722ed1;
    }
  </style>
</head>
<body>
  <div class="mobile-container">
    <!-- Header -->
    <div class="header">
      <div class="header-content">
        <div class="back-btn" onclick="history.back()">
          <svg viewBox="0 0 24 24"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>
        </div>
        <h1>编辑任务分配</h1>
      </div>
    </div>

    <!-- Task Info Card -->
    <div class="task-info-card">
      <div class="task-header">
        <div class="task-id">批次 PB-2024-0128-A01</div>
        <div class="task-type">切片</div>
      </div>
      <div class="task-info-row">
        <span>产品</span>
        <span>带鱼切片</span>
      </div>
      <div class="task-info-row">
        <span>目标产量</span>
        <span>500 kg</span>
      </div>
      <div class="task-info-row">
        <span>预计时间</span>
        <span>12/28 08:00 - 12:00</span>
      </div>
    </div>

    <!-- Current Workers -->
    <div class="section">
      <div class="section-title">当前分配人员 (3人)</div>
      <div class="current-workers">
        <div class="worker-list">
          <div class="worker-item">
            <div class="worker-left">
              <div class="worker-avatar">张伟</div>
              <div class="worker-info">
                <span class="worker-name">张伟</span>
                <span class="worker-skill">高级切片工 · 效率 98%</span>
              </div>
            </div>
            <div class="worker-actions">
              <div class="action-icon swap">
                <svg width="16" height="16" viewBox="0 0 24 24"><path d="M6.99 11L3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z"/></svg>
              </div>
              <div class="action-icon remove">
                <svg width="16" height="16" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
              </div>
            </div>
          </div>

          <div class="worker-item">
            <div class="worker-left">
              <div class="worker-avatar">李娜</div>
              <div class="worker-info">
                <span class="worker-name">李娜</span>
                <span class="worker-skill">中级切片工 · 效率 92%</span>
              </div>
            </div>
            <div class="worker-actions">
              <div class="action-icon swap">
                <svg width="16" height="16" viewBox="0 0 24 24"><path d="M6.99 11L3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z"/></svg>
              </div>
              <div class="action-icon remove">
                <svg width="16" height="16" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
              </div>
            </div>
          </div>

          <div class="worker-item">
            <div class="worker-left">
              <div class="worker-avatar">王刚</div>
              <div class="worker-info">
                <span class="worker-name">王刚</span>
                <span class="worker-skill">初级切片工 · 效率 85%</span>
              </div>
            </div>
            <div class="worker-actions">
              <div class="action-icon swap">
                <svg width="16" height="16" viewBox="0 0 24 24"><path d="M6.99 11L3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z"/></svg>
              </div>
              <div class="action-icon remove">
                <svg width="16" height="16" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Available Workers -->
    <div class="section">
      <div class="section-title">可选人员</div>
      <div class="available-workers">
        <div class="search-bar">
          <svg viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
          <input type="text" placeholder="搜索人员...">
        </div>

        <div class="filter-tags">
          <div class="filter-tag active">全部</div>
          <div class="filter-tag">高级工</div>
          <div class="filter-tag">中级工</div>
          <div class="filter-tag">切片组</div>
          <div class="filter-tag">包装组</div>
        </div>

        <div class="available-list">
          <div class="available-item">
            <div class="available-left">
              <div class="available-avatar">赵六</div>
              <div>
                <div class="available-name">赵六 · 高级切片工</div>
                <div class="available-status">空闲中</div>
              </div>
            </div>
            <button class="add-btn">添加</button>
          </div>

          <div class="available-item">
            <div class="available-left">
              <div class="available-avatar">钱七</div>
              <div>
                <div class="available-name">钱七 · 中级包装工</div>
                <div class="available-status">空闲中</div>
              </div>
            </div>
            <button class="add-btn">添加</button>
          </div>

          <div class="available-item">
            <div class="available-left">
              <div class="available-avatar">孙八</div>
              <div>
                <div class="available-name">孙八 · 初级切片工</div>
                <div class="available-status">空闲中</div>
              </div>
            </div>
            <button class="add-btn">添加</button>
          </div>
        </div>
      </div>
    </div>

    <!-- AI Recommendation -->
    <div class="ai-recommendation">
      <div class="ai-header">
        <svg class="ai-icon" viewBox="0 0 24 24" fill="#fff">
          <path d="M21 10.12h-6.78l2.74-2.82c-2.73-2.7-7.15-2.8-9.88-.1-2.73 2.71-2.73 7.08 0 9.79s7.15 2.71 9.88 0C18.32 15.65 19 14.08 19 12.1h2c0 1.98-.88 4.55-2.64 6.29-3.51 3.48-9.21 3.48-12.72 0-3.5-3.47-3.53-9.11-.02-12.58s9.14-3.47 12.65 0L21 3v7.12z"/>
        </svg>
        <span class="ai-title">AI 人员优化建议</span>
      </div>
      <div class="ai-content">
        基于历史效率和技能匹配度分析，建议替换王刚为赵六，可提升整体效率 8%。
      </div>
      <div class="ai-suggestion-list">
        <div class="ai-suggestion-item">
          <div class="suggestion-left">
            <div class="suggestion-avatar">赵六</div>
            <span class="suggestion-info">赵六 · 匹配度 95%</span>
          </div>
          <span class="suggestion-score">推荐</span>
        </div>
        <div class="ai-suggestion-item">
          <div class="suggestion-left">
            <div class="suggestion-avatar">周九</div>
            <span class="suggestion-info">周九 · 匹配度 88%</span>
          </div>
          <span class="suggestion-score">备选</span>
        </div>
      </div>
      <div class="apply-suggestion-btn">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="#fff"><path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"/></svg>
        一键应用建议
      </div>
    </div>

    <!-- Shift Assignment -->
    <div class="shift-section">
      <div class="section-title">工作班次</div>
      <div class="shift-options">
        <div class="shift-option active">
          <div class="shift-time">08:00-12:00</div>
          <div class="shift-name">早班</div>
        </div>
        <div class="shift-option">
          <div class="shift-time">12:00-18:00</div>
          <div class="shift-name">午班</div>
        </div>
        <div class="shift-option">
          <div class="shift-time">18:00-22:00</div>
          <div class="shift-name">晚班</div>
        </div>
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="action-buttons">
      <button class="btn btn-secondary" onclick="history.back()">取消</button>
      <button class="btn btn-primary">保存分配</button>
    </div>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
      <a href="index.html" class="nav-item">
        <svg viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
        <span>首页</span>
      </a>
      <a href="plan-list.html" class="nav-item">
        <svg viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/></svg>
        <span>计划</span>
      </a>
      <a href="ai-schedule.html" class="nav-item ai-nav">
        <svg viewBox="0 0 24 24"><path d="M21 10.12h-6.78l2.74-2.82c-2.73-2.7-7.15-2.8-9.88-.1-2.73 2.71-2.73 7.08 0 9.79s7.15 2.71 9.88 0C18.32 15.65 19 14.08 19 12.1h2c0 1.98-.88 4.55-2.64 6.29-3.51 3.48-9.21 3.48-12.72 0-3.5-3.47-3.53-9.11-.02-12.58s9.14-3.47 12.65 0L21 3v7.12z"/></svg>
        <span>AI调度</span>
      </a>
      <a href="personnel-list.html" class="nav-item active">
        <svg viewBox="0 0 24 24"><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg>
        <span>人员</span>
      </a>
      <a href="profile.html" class="nav-item">
        <svg viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
        <span>我的</span>
      </a>
    </nav>
  </div>

  <script>
    // Filter tag selection
    document.querySelectorAll('.filter-tag').forEach(tag => {
      tag.addEventListener('click', function() {
        document.querySelectorAll('.filter-tag').forEach(t => t.classList.remove('active'));
        this.classList.add('active');
      });
    });

    // Shift option selection
    document.querySelectorAll('.shift-option').forEach(option => {
      option.addEventListener('click', function() {
        document.querySelectorAll('.shift-option').forEach(o => o.classList.remove('active'));
        this.classList.add('active');
      });
    });
  </script>
</body>
</html>
