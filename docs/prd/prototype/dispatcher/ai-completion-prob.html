<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>完成概率分析 - AI调度</title>
  <link rel="stylesheet" href="../styles.css">
  <link rel="stylesheet" href="../components.css">
  <link rel="stylesheet" href="styles.css">
  <style>
    /* AI 主题样式 */
    .ai-page-header {
      background: linear-gradient(135deg, #722ed1 0%, #a18cd1 100%);
      color: white;
      padding: 16px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .ai-page-title {
      font-size: 18px;
      font-weight: 500;
    }
    .ai-badge {
      background: rgba(255,255,255,0.2);
      padding: 4px 10px;
      border-radius: 12px;
      font-size: 11px;
    }

    /* 大仪表盘 */
    .big-gauge {
      text-align: center;
      padding: 30px 20px;
      background: white;
      margin: 16px;
      border-radius: 16px;
      box-shadow: 0 4px 16px rgba(114, 46, 209, 0.1);
    }
    .big-gauge-circle {
      width: 180px;
      height: 180px;
      border-radius: 50%;
      background: conic-gradient(#52c41a 0% 85%, #f0f0f0 85% 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 20px;
      position: relative;
      box-shadow: 0 4px 20px rgba(82, 196, 26, 0.2);
    }
    .big-gauge-inner {
      width: 150px;
      height: 150px;
      border-radius: 50%;
      background: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }
    .big-gauge-value {
      font-size: 48px;
      font-weight: 700;
      color: #52c41a;
    }
    .big-gauge-label {
      font-size: 14px;
      color: #999;
      margin-top: 4px;
    }
    .big-gauge-desc {
      font-size: 14px;
      color: #666;
      line-height: 1.6;
    }
    .big-gauge-desc strong {
      color: #722ed1;
    }

    /* 概率统计 */
    .prob-stats {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
      margin: 0 16px 16px;
    }
    .prob-stat-item {
      background: white;
      border-radius: 12px;
      padding: 16px 12px;
      text-align: center;
    }
    .prob-stat-value {
      font-size: 24px;
      font-weight: 600;
    }
    .prob-stat-value.green { color: #52c41a; }
    .prob-stat-value.orange { color: #fa8c16; }
    .prob-stat-value.red { color: #ff4d4f; }
    .prob-stat-label {
      font-size: 12px;
      color: #999;
      margin-top: 4px;
    }

    /* 批次概率列表 */
    .batch-prob-card {
      background: white;
      margin: 0 16px 16px;
      border-radius: 12px;
      overflow: hidden;
    }
    .batch-prob-header {
      padding: 16px;
      border-bottom: 1px solid #f0f0f0;
      font-size: 16px;
      font-weight: 500;
      color: #333;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .batch-prob-item {
      padding: 14px 16px;
      border-bottom: 1px solid #f5f5f5;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .batch-prob-item:last-child {
      border-bottom: none;
    }
    .batch-prob-left {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .batch-prob-indicator {
      width: 12px;
      height: 12px;
      border-radius: 50%;
    }
    .batch-prob-indicator.high { background: #52c41a; }
    .batch-prob-indicator.medium { background: #fa8c16; }
    .batch-prob-indicator.low { background: #ff4d4f; }
    .batch-prob-name {
      font-size: 14px;
      color: #333;
      font-weight: 500;
    }
    .batch-prob-meta {
      font-size: 12px;
      color: #999;
      margin-top: 2px;
    }
    .batch-prob-value {
      font-size: 20px;
      font-weight: 600;
    }
    .batch-prob-value.high { color: #52c41a; }
    .batch-prob-value.medium { color: #fa8c16; }
    .batch-prob-value.low { color: #ff4d4f; }

    /* 影响因素 */
    .factors-card {
      background: white;
      margin: 0 16px 16px;
      border-radius: 12px;
      padding: 16px;
    }
    .factors-title {
      font-size: 16px;
      font-weight: 500;
      color: #333;
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .factor-item {
      margin-bottom: 16px;
    }
    .factor-item:last-child {
      margin-bottom: 0;
    }
    .factor-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 6px;
    }
    .factor-name {
      font-size: 14px;
      color: #666;
    }
    .factor-value {
      font-size: 14px;
      font-weight: 500;
    }
    .factor-bar {
      height: 8px;
      background: #f0f0f0;
      border-radius: 4px;
      overflow: hidden;
    }
    .factor-bar-fill {
      height: 100%;
      border-radius: 4px;
      transition: width 0.3s;
    }
    .factor-bar-fill.positive { background: linear-gradient(90deg, #52c41a, #95de64); }
    .factor-bar-fill.neutral { background: linear-gradient(90deg, #1890ff, #69c0ff); }
    .factor-bar-fill.negative { background: linear-gradient(90deg, #ff4d4f, #ff7875); }

    /* AI 洞察 */
    .ai-insight {
      background: linear-gradient(135deg, #f9f5ff 0%, #fff 100%);
      border: 1px solid #d3adf7;
      margin: 0 16px 16px;
      border-radius: 12px;
      padding: 16px;
    }
    .ai-insight-header {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 12px;
    }
    .ai-insight-icon {
      width: 32px;
      height: 32px;
      background: linear-gradient(135deg, #722ed1 0%, #a18cd1 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 16px;
    }
    .ai-insight-title {
      font-size: 14px;
      font-weight: 500;
      color: #722ed1;
    }
    .ai-insight-content {
      font-size: 14px;
      color: #666;
      line-height: 1.8;
    }
    .ai-insight-content p {
      margin: 0 0 8px;
    }
    .ai-insight-content p:last-child {
      margin-bottom: 0;
    }
    .ai-highlight {
      background: rgba(114, 46, 209, 0.1);
      padding: 2px 6px;
      border-radius: 4px;
      color: #722ed1;
      font-weight: 500;
    }

    /* 风险提示 */
    .risk-alert {
      background: #fff2f0;
      border: 1px solid #ffccc7;
      margin: 0 16px 16px;
      border-radius: 12px;
      padding: 14px 16px;
    }
    .risk-alert-header {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 8px;
    }
    .risk-alert-icon {
      color: #ff4d4f;
      font-size: 20px;
    }
    .risk-alert-title {
      font-size: 14px;
      font-weight: 500;
      color: #ff4d4f;
    }
    .risk-alert-content {
      font-size: 13px;
      color: #666;
      line-height: 1.6;
    }
    .risk-alert-action {
      display: inline-block;
      margin-top: 10px;
      padding: 8px 16px;
      background: #ff4d4f;
      color: white;
      border-radius: 6px;
      font-size: 13px;
      text-decoration: none;
    }

    /* 置信区间说明 */
    .confidence-card {
      background: white;
      margin: 0 16px 100px;
      border-radius: 12px;
      padding: 16px;
    }
    .confidence-title {
      font-size: 16px;
      font-weight: 500;
      color: #333;
      margin-bottom: 12px;
    }
    .confidence-row {
      display: flex;
      justify-content: space-between;
      padding: 8px 0;
      border-bottom: 1px solid #f5f5f5;
      font-size: 14px;
    }
    .confidence-row:last-child {
      border-bottom: none;
    }
    .confidence-label {
      color: #666;
    }
    .confidence-value {
      color: #333;
      font-weight: 500;
    }
  </style>
</head>
<body>
  <a href="../index.html" class="back-to-index">< 返回角色选择</a>

  <div class="mobile-container">
    <div class="status-bar">
      <span>9:41</span>
      <span></span>
    </div>

    <!-- Header -->
    <div class="ai-page-header">
      <div style="display: flex; align-items: center; gap: 12px;">
        <a href="ai-schedule.html" style="color: white; text-decoration: none; font-size: 20px;"><</a>
        <span class="ai-page-title">完成概率分析</span>
      </div>
      <span class="ai-badge">Monte Carlo</span>
    </div>

    <div class="content" style="background: #f5f5f5; padding: 0;">

      <!-- 大仪表盘 -->
      <div class="big-gauge">
        <div class="big-gauge-circle">
          <div class="big-gauge-inner">
            <div class="big-gauge-value">85%</div>
            <div class="big-gauge-label">按时完成概率</div>
          </div>
        </div>
        <div class="big-gauge-desc">
          基于 <strong>Monte Carlo 模拟 10,000 次</strong><br>
          考虑效率波动、人员变动、设备状态等因素
        </div>
      </div>

      <!-- 概率统计 -->
      <div class="prob-stats">
        <div class="prob-stat-item">
          <div class="prob-stat-value green">3</div>
          <div class="prob-stat-label">高概率(>80%)</div>
        </div>
        <div class="prob-stat-item">
          <div class="prob-stat-value orange">1</div>
          <div class="prob-stat-label">中等(60-80%)</div>
        </div>
        <div class="prob-stat-item">
          <div class="prob-stat-value red">1</div>
          <div class="prob-stat-label">需关注(<60%)</div>
        </div>
      </div>

      <!-- 风险提示 -->
      <div class="risk-alert">
        <div class="risk-alert-header">
          <span class="risk-alert-icon">&#9888;</span>
          <span class="risk-alert-title">1 个批次存在风险</span>
        </div>
        <div class="risk-alert-content">
          <strong>带鱼片 100kg</strong> 完成概率仅 58%，交期紧张。建议增派人员或调整优先级。
        </div>
        <a href="ai-worker-optimize.html" class="risk-alert-action">查看优化建议</a>
      </div>

      <!-- 批次概率列表 -->
      <div class="batch-prob-card">
        <div class="batch-prob-header">
          <span>各批次完成概率</span>
          <span style="color: #999; font-size: 12px;">2025-12-28</span>
        </div>

        <div class="batch-prob-item" style="background: #fff2f0;">
          <div class="batch-prob-left">
            <div class="batch-prob-indicator low"></div>
            <div>
              <div class="batch-prob-name">带鱼片 100kg &#128680;</div>
              <div class="batch-prob-meta">交期: 12-28 18:00 | 剩余 6h</div>
            </div>
          </div>
          <div class="batch-prob-value low">58%</div>
        </div>

        <div class="batch-prob-item">
          <div class="batch-prob-left">
            <div class="batch-prob-indicator medium"></div>
            <div>
              <div class="batch-prob-name">黄鱼片 80kg</div>
              <div class="batch-prob-meta">交期: 12-28 20:00 | 剩余 8h</div>
            </div>
          </div>
          <div class="batch-prob-value medium">72%</div>
        </div>

        <div class="batch-prob-item">
          <div class="batch-prob-left">
            <div class="batch-prob-indicator high"></div>
            <div>
              <div class="batch-prob-name">鱿鱼圈 60kg</div>
              <div class="batch-prob-meta">交期: 12-29 12:00 | 剩余 24h</div>
            </div>
          </div>
          <div class="batch-prob-value high">91%</div>
        </div>

        <div class="batch-prob-item">
          <div class="batch-prob-left">
            <div class="batch-prob-indicator high"></div>
            <div>
              <div class="batch-prob-name">虾仁 120kg</div>
              <div class="batch-prob-meta">交期: 12-29 18:00 | 剩余 30h</div>
            </div>
          </div>
          <div class="batch-prob-value high">95%</div>
        </div>

        <div class="batch-prob-item">
          <div class="batch-prob-left">
            <div class="batch-prob-indicator high"></div>
            <div>
              <div class="batch-prob-name">墨鱼仔 50kg</div>
              <div class="batch-prob-meta">交期: 12-30 12:00 | 剩余 48h</div>
            </div>
          </div>
          <div class="batch-prob-value high">98%</div>
        </div>
      </div>

      <!-- 影响因素分析 -->
      <div class="factors-card">
        <div class="factors-title">
          <span>&#128202;</span>
          影响因素分析
        </div>

        <div class="factor-item">
          <div class="factor-header">
            <span class="factor-name">人员配置充足度</span>
            <span class="factor-value" style="color: #52c41a;">良好 +15%</span>
          </div>
          <div class="factor-bar">
            <div class="factor-bar-fill positive" style="width: 85%;"></div>
          </div>
        </div>

        <div class="factor-item">
          <div class="factor-header">
            <span class="factor-name">设备可用率</span>
            <span class="factor-value" style="color: #1890ff;">正常 +5%</span>
          </div>
          <div class="factor-bar">
            <div class="factor-bar-fill neutral" style="width: 78%;"></div>
          </div>
        </div>

        <div class="factor-item">
          <div class="factor-header">
            <span class="factor-name">原料匹配度</span>
            <span class="factor-value" style="color: #52c41a;">优秀 +20%</span>
          </div>
          <div class="factor-bar">
            <div class="factor-bar-fill positive" style="width: 95%;"></div>
          </div>
        </div>

        <div class="factor-item">
          <div class="factor-header">
            <span class="factor-name">时间紧迫度</span>
            <span class="factor-value" style="color: #ff4d4f;">紧张 -25%</span>
          </div>
          <div class="factor-bar">
            <div class="factor-bar-fill negative" style="width: 35%;"></div>
          </div>
        </div>
      </div>

      <!-- AI 洞察 -->
      <div class="ai-insight">
        <div class="ai-insight-header">
          <div class="ai-insight-icon">&#129302;</div>
          <span class="ai-insight-title">AI 分析洞察</span>
        </div>
        <div class="ai-insight-content">
          <p>&#128161; <span class="ai-highlight">带鱼片 100kg</span> 是当前瓶颈，建议采取以下措施：</p>
          <p>1. 从机动人员中抽调 <span class="ai-highlight">2名熟练工</span> 支援切片A线</p>
          <p>2. 将 <span class="ai-highlight">黄鱼片</span> 延后30分钟开始，优先保证带鱼片交期</p>
          <p>3. 若采纳建议，整体完成概率可提升至 <span class="ai-highlight">92%</span></p>
        </div>
      </div>

      <!-- 置信区间说明 -->
      <div class="confidence-card">
        <div class="confidence-title">模拟参数说明</div>
        <div class="confidence-row">
          <span class="confidence-label">模拟次数</span>
          <span class="confidence-value">10,000 次</span>
        </div>
        <div class="confidence-row">
          <span class="confidence-label">置信区间</span>
          <span class="confidence-value">95%</span>
        </div>
        <div class="confidence-row">
          <span class="confidence-label">效率标准差</span>
          <span class="confidence-value">±15%</span>
        </div>
        <div class="confidence-row">
          <span class="confidence-label">预计完成时间</span>
          <span class="confidence-value">17:30 ± 45min</span>
        </div>
        <div class="confidence-row">
          <span class="confidence-label">最坏情况</span>
          <span class="confidence-value">19:15 (90%分位)</span>
        </div>
      </div>

    </div>

    <!-- 底部导航 -->
    <nav class="bottom-nav">
      <a href="index.html" class="nav-item"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg><span>首页</span></a>
      <a href="plan-list.html" class="nav-item"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/></svg><span>计划</span></a>
      <a href="ai-schedule.html" class="nav-item ai-nav active"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M21 10.12h-6.78l2.74-2.82c-2.73-2.7-7.15-2.8-9.88-.1-2.73 2.71-2.73 7.08 0 9.79s7.15 2.71 9.88 0C18.32 15.65 19 14.08 19 12.1h2c0 1.98-.88 4.55-2.64 6.29-3.51 3.48-9.21 3.48-12.72 0-3.5-3.47-3.53-9.11-.02-12.58s9.14-3.47 12.65 0L21 3v7.12z"/></svg><span>AI调度</span></a>
      <a href="personnel-list.html" class="nav-item"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg><span>人员</span></a>
      <a href="profile.html" class="nav-item"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg><span>我的</span></a>
    </nav>
  </div>
</body>
</html>
