<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>调度统计 - 调度员</title>
  <link rel="stylesheet" href="../styles.css">
  <link rel="stylesheet" href="../components.css">
  <link rel="stylesheet" href="styles.css">
  <style>
    /* KPI 卡片 */
    .kpi-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
      padding: 0 16px;
      margin-bottom: 16px;
    }

    .kpi-card {
      background: white;
      border-radius: 12px;
      padding: 16px;
      text-align: center;
    }

    .kpi-value {
      font-size: 28px;
      font-weight: 700;
      color: #333;
      margin-bottom: 4px;
    }

    .kpi-value.up {
      color: #52c41a;
    }

    .kpi-value.down {
      color: #ff4d4f;
    }

    .kpi-label {
      font-size: 12px;
      color: #999;
      margin-bottom: 8px;
    }

    .kpi-trend {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 4px;
      font-size: 12px;
    }

    .kpi-trend.up {
      color: #52c41a;
    }

    .kpi-trend.down {
      color: #ff4d4f;
    }

    /* 趋势图 */
    .trend-chart {
      background: white;
      border-radius: 12px;
      padding: 16px;
      margin: 0 16px 16px;
    }

    .trend-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }

    .trend-title {
      font-size: 15px;
      font-weight: 600;
      color: #333;
    }

    .trend-legend {
      display: flex;
      gap: 12px;
      font-size: 12px;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .legend-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
    }

    .legend-dot.purple {
      background: #722ed1;
    }

    .legend-dot.pink {
      background: #fbc2eb;
    }

    .chart-area {
      height: 120px;
      position: relative;
      border-bottom: 1px solid #f0f0f0;
    }

    .chart-line {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 100%;
    }

    .chart-svg {
      width: 100%;
      height: 100%;
    }

    .chart-labels {
      display: flex;
      justify-content: space-between;
      margin-top: 8px;
      font-size: 11px;
      color: #999;
    }

    /* AI 洞察 */
    .ai-insights {
      background: linear-gradient(135deg, #722ed1 0%, #a18cd1 50%, #fbc2eb 100%);
      border-radius: 12px;
      padding: 16px;
      margin: 0 16px 16px;
      color: white;
    }

    .ai-insights-header {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 12px;
    }

    .ai-insights-icon {
      width: 32px;
      height: 32px;
      background: rgba(255,255,255,0.2);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .ai-insights-title {
      font-size: 15px;
      font-weight: 600;
    }

    .ai-insight-item {
      background: rgba(255,255,255,0.15);
      border-radius: 8px;
      padding: 12px;
      margin-bottom: 8px;
      font-size: 13px;
      line-height: 1.5;
    }

    .ai-insight-item:last-child {
      margin-bottom: 0;
    }

    .ai-insight-highlight {
      font-weight: 600;
      color: #fff;
    }

    /* 车间对比 */
    .workshop-compare {
      background: white;
      border-radius: 12px;
      padding: 16px;
      margin: 0 16px 16px;
    }

    .workshop-row {
      margin-bottom: 16px;
    }

    .workshop-row:last-child {
      margin-bottom: 0;
    }

    .workshop-row-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }

    .workshop-name {
      font-size: 14px;
      font-weight: 500;
      color: #333;
    }

    .workshop-percentage {
      font-size: 14px;
      font-weight: 600;
    }

    .workshop-bar {
      height: 8px;
      background: #f0f0f0;
      border-radius: 4px;
      overflow: hidden;
      position: relative;
    }

    .workshop-bar-fill {
      height: 100%;
      border-radius: 4px;
      transition: width 0.3s;
    }

    .workshop-bar-fill.excellent {
      background: linear-gradient(90deg, #52c41a, #95de64);
    }

    .workshop-bar-fill.good {
      background: linear-gradient(90deg, #1890ff, #69c0ff);
    }

    .workshop-bar-fill.warning {
      background: linear-gradient(90deg, #fa8c16, #ffc069);
    }

    .workshop-meta {
      display: flex;
      justify-content: space-between;
      margin-top: 4px;
      font-size: 11px;
      color: #999;
    }

    /* 效率指标 */
    .efficiency-section {
      background: white;
      border-radius: 12px;
      padding: 16px;
      margin: 0 16px 16px;
    }

    .efficiency-row {
      display: flex;
      align-items: center;
      padding: 12px 0;
      border-bottom: 1px solid #f0f0f0;
    }

    .efficiency-row:last-child {
      border-bottom: none;
    }

    .efficiency-icon {
      width: 40px;
      height: 40px;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 12px;
    }

    .efficiency-icon.otd {
      background: #e6f4ff;
      color: #1890ff;
    }

    .efficiency-icon.wip {
      background: #fff7e6;
      color: #fa8c16;
    }

    .efficiency-icon.utilization {
      background: #f6ffed;
      color: #52c41a;
    }

    .efficiency-icon.cost {
      background: #f9f0ff;
      color: #722ed1;
    }

    .efficiency-info {
      flex: 1;
    }

    .efficiency-label {
      font-size: 14px;
      color: #333;
    }

    .efficiency-desc {
      font-size: 12px;
      color: #999;
      margin-top: 2px;
    }

    .efficiency-value {
      text-align: right;
    }

    .efficiency-main {
      font-size: 18px;
      font-weight: 600;
      color: #333;
    }

    .efficiency-change {
      font-size: 12px;
      display: flex;
      align-items: center;
      gap: 2px;
    }

    .efficiency-change.up {
      color: #52c41a;
    }

    .efficiency-change.down {
      color: #ff4d4f;
    }

    /* 导出按钮 */
    .export-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      background: white;
      border: 1px solid #d9d9d9;
      border-radius: 12px;
      padding: 14px;
      margin: 0 16px 100px;
      font-size: 14px;
      color: #666;
      text-decoration: none;
    }

    /* AI 底部导航 */
    .bottom-nav .nav-item.ai-nav {
      position: relative;
    }

    .bottom-nav .nav-item.ai-nav::before {
      content: '';
      position: absolute;
      top: -8px;
      left: 50%;
      transform: translateX(-50%);
      width: 48px;
      height: 48px;
      background: linear-gradient(135deg, #722ed1 0%, #a18cd1 100%);
      border-radius: 50%;
      z-index: -1;
      box-shadow: 0 4px 12px rgba(114, 46, 209, 0.3);
    }

    .bottom-nav .nav-item.ai-nav svg,
    .bottom-nav .nav-item.ai-nav span {
      color: white;
    }
  </style>
</head>
<body>
  <a href="../index.html" class="back-to-index">< 返回角色选择</a>

  <div class="mobile-container">
    <div class="status-bar">
      <span>9:41</span>
      <span></span>
    </div>

    <div class="subpage-header">
      <a href="profile.html" class="back-btn" style="text-decoration: none; color: inherit;"><</a>
      <span class="title">调度统计</span>
      <a href="report-export.html" style="color: #722ed1; font-size: 14px; text-decoration: none;">导出</a>
    </div>

    <div class="content" style="background: #f5f5f5; padding-top: 0;">
      <!-- 时间筛选 -->
      <div class="filter-chips" style="padding: 16px 16px 0;">
        <button class="filter-chip">今日</button>
        <button class="filter-chip active">本周</button>
        <button class="filter-chip">本月</button>
        <button class="filter-chip">自定义</button>
      </div>

      <!-- KPI 卡片 -->
      <div class="kpi-grid" style="margin-top: 16px;">
        <div class="kpi-card">
          <div class="kpi-value up">87%</div>
          <div class="kpi-label">计划完成率</div>
          <div class="kpi-trend up">
            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="18 15 12 9 6 15"/>
            </svg>
            +5% vs上周
          </div>
        </div>
        <div class="kpi-card">
          <div class="kpi-value" style="color: #1890ff;">94%</div>
          <div class="kpi-label">准时交付率(OTD)</div>
          <div class="kpi-trend up">
            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="18 15 12 9 6 15"/>
            </svg>
            +2% vs上周
          </div>
        </div>
        <div class="kpi-card">
          <div class="kpi-value" style="color: #722ed1;">82%</div>
          <div class="kpi-label">设备利用率</div>
          <div class="kpi-trend down">
            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="6 9 12 15 18 9"/>
            </svg>
            -3% vs上周
          </div>
        </div>
        <div class="kpi-card">
          <div class="kpi-value" style="color: #fa8c16;">98%</div>
          <div class="kpi-label">出勤率</div>
          <div class="kpi-trend up">
            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="18 15 12 9 6 15"/>
            </svg>
            +1% vs上周
          </div>
        </div>
      </div>

      <!-- 趋势图 -->
      <div class="trend-chart">
        <div class="trend-header">
          <span class="trend-title">本周产能趋势</span>
          <div class="trend-legend">
            <span class="legend-item">
              <span class="legend-dot purple"></span>
              计划
            </span>
            <span class="legend-item">
              <span class="legend-dot pink"></span>
              实际
            </span>
          </div>
        </div>
        <div class="chart-area">
          <svg class="chart-svg" viewBox="0 0 300 100" preserveAspectRatio="none">
            <!-- 计划线 -->
            <polyline fill="none" stroke="#722ed1" stroke-width="2"
              points="0,30 50,35 100,25 150,30 200,20 250,25 300,20"/>
            <!-- 实际线 -->
            <polyline fill="none" stroke="#fbc2eb" stroke-width="2"
              points="0,40 50,38 100,35 150,32 200,30 250,35 300,28"/>
            <!-- 填充区域 -->
            <polygon fill="url(#chartGradient)" opacity="0.3"
              points="0,40 50,38 100,35 150,32 200,30 250,35 300,28 300,100 0,100"/>
            <defs>
              <linearGradient id="chartGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                <stop offset="0%" style="stop-color:#a18cd1;stop-opacity:0.5"/>
                <stop offset="100%" style="stop-color:#fbc2eb;stop-opacity:0"/>
              </linearGradient>
            </defs>
          </svg>
        </div>
        <div class="chart-labels">
          <span>周一</span>
          <span>周二</span>
          <span>周三</span>
          <span>周四</span>
          <span>周五</span>
          <span>周六</span>
          <span>周日</span>
        </div>
      </div>

      <!-- AI 洞察 -->
      <div class="ai-insights">
        <div class="ai-insights-header">
          <div class="ai-insights-icon">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 2a4 4 0 014 4v1h2a2 2 0 012 2v10a2 2 0 01-2 2H6a2 2 0 01-2-2V9a2 2 0 012-2h2V6a4 4 0 014-4z"/>
              <circle cx="9" cy="13" r="1" fill="currentColor"/>
              <circle cx="15" cy="13" r="1" fill="currentColor"/>
            </svg>
          </div>
          <span class="ai-insights-title">AI 数据洞察</span>
        </div>
        <div class="ai-insight-item">
          <span class="ai-insight-highlight">切片车间</span> 本周效率提升 <span class="ai-insight-highlight">12%</span>，主要得益于周三的人员优化调整。建议将此模式推广到其他车间。
        </div>
        <div class="ai-insight-item">
          检测到 <span class="ai-insight-highlight">冷冻车间</span> 周二存在产能瓶颈，建议增加 <span class="ai-insight-highlight">2名</span> 机动人员支援。
        </div>
      </div>

      <!-- 车间对比 -->
      <div class="workshop-compare">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
          <span style="font-size: 15px; font-weight: 600; color: #333;">各车间完成率对比</span>
          <span style="font-size: 12px; color: #999;">本周数据</span>
        </div>

        <div class="workshop-row">
          <div class="workshop-row-header">
            <span class="workshop-name">切片车间</span>
            <span class="workshop-percentage" style="color: #52c41a;">92%</span>
          </div>
          <div class="workshop-bar">
            <div class="workshop-bar-fill excellent" style="width: 92%;"></div>
          </div>
          <div class="workshop-meta">
            <span>计划 18 / 完成 17</span>
            <span>+5% vs上周</span>
          </div>
        </div>

        <div class="workshop-row">
          <div class="workshop-row-header">
            <span class="workshop-name">包装车间</span>
            <span class="workshop-percentage" style="color: #1890ff;">85%</span>
          </div>
          <div class="workshop-bar">
            <div class="workshop-bar-fill good" style="width: 85%;"></div>
          </div>
          <div class="workshop-meta">
            <span>计划 14 / 完成 12</span>
            <span>+3% vs上周</span>
          </div>
        </div>

        <div class="workshop-row">
          <div class="workshop-row-header">
            <span class="workshop-name">冷冻车间</span>
            <span class="workshop-percentage" style="color: #fa8c16;">78%</span>
          </div>
          <div class="workshop-bar">
            <div class="workshop-bar-fill warning" style="width: 78%;"></div>
          </div>
          <div class="workshop-meta">
            <span>计划 10 / 完成 8</span>
            <span>-2% vs上周</span>
          </div>
        </div>
      </div>

      <!-- 效率指标 -->
      <div class="efficiency-section">
        <div style="font-size: 15px; font-weight: 600; color: #333; margin-bottom: 12px;">效率指标</div>

        <div class="efficiency-row">
          <div class="efficiency-icon otd">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/>
              <polyline points="12 6 12 12 16 14"/>
            </svg>
          </div>
          <div class="efficiency-info">
            <div class="efficiency-label">平均交付周期</div>
            <div class="efficiency-desc">从接单到交付</div>
          </div>
          <div class="efficiency-value">
            <div class="efficiency-main">2.4天</div>
            <div class="efficiency-change up">
              <svg width="10" height="10" viewBox="0 0 24 24" fill="currentColor"><path d="M12 4l-8 8h6v8h4v-8h6z"/></svg>
              -0.3天
            </div>
          </div>
        </div>

        <div class="efficiency-row">
          <div class="efficiency-icon wip">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
            </svg>
          </div>
          <div class="efficiency-info">
            <div class="efficiency-label">在制品数量(WIP)</div>
            <div class="efficiency-desc">当前进行中批次</div>
          </div>
          <div class="efficiency-value">
            <div class="efficiency-main">8个</div>
            <div class="efficiency-change down">
              <svg width="10" height="10" viewBox="0 0 24 24" fill="currentColor"><path d="M12 20l8-8h-6V4H10v8H4z"/></svg>
              +2个
            </div>
          </div>
        </div>

        <div class="efficiency-row">
          <div class="efficiency-icon utilization">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/>
              <circle cx="9" cy="7" r="4"/>
              <path d="M23 21v-2a4 4 0 00-3-3.87"/>
              <path d="M16 3.13a4 4 0 010 7.75"/>
            </svg>
          </div>
          <div class="efficiency-info">
            <div class="efficiency-label">人均产出</div>
            <div class="efficiency-desc">本周人均完成量</div>
          </div>
          <div class="efficiency-value">
            <div class="efficiency-main">85kg</div>
            <div class="efficiency-change up">
              <svg width="10" height="10" viewBox="0 0 24 24" fill="currentColor"><path d="M12 4l-8 8h6v8h4v-8h6z"/></svg>
              +8kg
            </div>
          </div>
        </div>

        <div class="efficiency-row">
          <div class="efficiency-icon cost">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="12" y1="1" x2="12" y2="23"/>
              <path d="M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6"/>
            </svg>
          </div>
          <div class="efficiency-info">
            <div class="efficiency-label">加班成本</div>
            <div class="efficiency-desc">本周加班费用</div>
          </div>
          <div class="efficiency-value">
            <div class="efficiency-main">1,280</div>
            <div class="efficiency-change down">
              <svg width="10" height="10" viewBox="0 0 24 24" fill="currentColor"><path d="M12 20l8-8h-6V4H10v8H4z"/></svg>
              +15%
            </div>
          </div>
        </div>
      </div>

      <!-- 导出按钮 -->
      <a href="report-export.html" class="export-btn">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
          <polyline points="7 10 12 15 17 10"/>
          <line x1="12" y1="15" x2="12" y2="3"/>
        </svg>
        导出统计报表
      </a>
    </div>

    <!-- 底部导航 -->
    <nav class="bottom-nav">
      <a href="index.html" class="nav-item">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/>
          <polyline points="9,22 9,12 15,12 15,22"/>
        </svg>
        <span>首页</span>
      </a>
      <a href="plan-list.html" class="nav-item">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
          <line x1="16" y1="2" x2="16" y2="6"/>
          <line x1="8" y1="2" x2="8" y2="6"/>
          <line x1="3" y1="10" x2="21" y2="10"/>
        </svg>
        <span>计划</span>
      </a>
      <a href="ai-schedule.html" class="nav-item ai-nav">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M12 2a4 4 0 014 4v1h2a2 2 0 012 2v10a2 2 0 01-2 2H6a2 2 0 01-2-2V9a2 2 0 012-2h2V6a4 4 0 014-4z"/>
          <circle cx="9" cy="13" r="1" fill="currentColor"/>
          <circle cx="15" cy="13" r="1" fill="currentColor"/>
          <path d="M9 17h6"/>
        </svg>
        <span>AI调度</span>
      </a>
      <a href="personnel-list.html" class="nav-item">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/>
          <circle cx="9" cy="7" r="4"/>
          <path d="M23 21v-2a4 4 0 00-3-3.87"/>
          <path d="M16 3.13a4 4 0 010 7.75"/>
        </svg>
        <span>人员</span>
      </a>
      <a href="profile.html" class="nav-item active">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/>
          <circle cx="12" cy="7" r="4"/>
        </svg>
        <span>我的</span>
      </a>
    </nav>
  </div>
</body>
</html>
