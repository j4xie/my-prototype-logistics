# 白垩纪食品溯源系统 - 角色权限和页面访问速查表

**文档版本**: v2.0
**更新日期**: 2025-01-05

---

## 📊 快速参考

### 角色总览

| 角色代码 | 角色名称 | 用户类型 | 权限级别 | 数据范围 | 典型用户 |
|---------|---------|---------|---------|----------|----------|
| **platform_admin** | 平台管理员 | platform | 0 | 所有工厂所有数据 | 平台运营人员 |
| **factory_super_admin** | 工厂超级管理员 | factory | 0 | 本工厂所有数据 | 工厂厂长 |
| **permission_admin** | 权限管理员 | factory | 5 | 本工厂所有数据（只读+权限管理） | HR主管 |
| **department_admin** | 部门管理员 | factory | 10 | 本部门所有数据 | 部门主管 |
| **operator** | 操作员 | factory | 30 | 本人创建的数据 | 一线员工 |
| **viewer** | 查看者 | factory | 50 | 授权数据（只读） | 访客、实习生 |
| **unactivated** | 未激活 | factory | 99 | 无 | 待激活新用户 |

---

## 🔐 测试账号 ⚠️ **已更新 (2025-10-06)**

| 用户名 | 密码 | 角色 | 所属工厂 | 部门 | 打卡签到 | 工作报告 |
|--------|------|------|----------|------|---------|---------|
| **platform_admin** | 123456 | platform_admin | - | - | ❌ | ❌ |
| **super_admin** | 123456 | factory_super_admin | CRETAS_2024_001 | management | ✅ **需要** | ✅ **需要** |
| **dept_admin** | 123456 | department_admin | CRETAS_2024_001 | processing | ✅ **需要** | ✅ **需要** |
| **operator1** | 123456 | operator | CRETAS_2024_001 | processing | ✅ **需要** | ✅ **需要** |

**⚠️ 重要变更**:
- 系统已精简为4个核心账号
- 所有工厂账号(包括管理员)都需要打卡签到和工作报告
- 统一密码: `123456`

---

## 📱 登录后跳转规则

### 快速查找表

| 角色 | 登录后跳转 | Tab显示 | 首页内容 |
|-----|-----------|---------|----------|
| **platform_admin** | 平台仪表板 | 首页、平台、加工、物流、管理 | 所有工厂概览 |
| **factory_super_admin** | 工厂首页 | 首页、加工、物流、溯源、管理 | 本工厂概览 |
| **permission_admin** | 用户管理页 | 首页、管理 | 用户列表 |
| **department_admin (加工)** | 加工仪表板 | 首页、加工、管理 | 加工部门数据 |
| **department_admin (养殖)** | 养殖仪表板 | 首页、养殖、管理 | 养殖部门数据 |
| **department_admin (物流)** | 物流仪表板 | 首页、物流、管理 | 物流部门数据 |
| **operator** | 打卡页面 | 首页、打卡 | 打卡界面 |
| **viewer** | 工厂首页 | 首页 | 只读概览 |

---

## 📄 页面访问权限矩阵

### 平台管理模块

| 页面 | platform_admin | 其他角色 |
|-----|----------------|---------|
| 平台仪表板 | ✅ 读写 | ❌ |
| 工厂列表 | ✅ 读写 | ❌ |
| 工厂详情 | ✅ 读写 | ❌ |
| 创建工厂 | ✅ | ❌ |
| 工厂配置 | ✅ | ❌ |
| 所有用户列表 | ✅ | ❌ |
| 跨工厂报表 | ✅ | ❌ |

### 工厂首页

| 页面 | platform_admin | factory_super_admin | permission_admin | department_admin | operator | viewer |
|-----|----------------|---------------------|------------------|------------------|----------|--------|
| 首页概览 | ✅ (所有工厂) | ✅ (本工厂) | ✅ (本工厂) | ✅ (本部门) | ✅ (个人) | 👁️ |

### 加工模块

| 页面 | platform_admin | factory_super_admin | department_admin (加工) | operator | viewer |
|-----|----------------|---------------------|------------------------|----------|--------|
| 加工仪表板 | ✅ | ✅ | ✅ | 👁️ | 👁️ |
| 批次列表 | ✅ | ✅ | ✅ | 👁️ (本人) | 👁️ |
| 批次详情 | ✅ | ✅ | ✅ | 👁️ | 👁️ |
| 创建批次 | ✅ | ✅ | ✅ | ❌ | ❌ |
| 编辑批次 | ✅ | ✅ | ✅ | ❌ | ❌ |
| 删除批次 | ✅ | ✅ | ✅ | ❌ | ❌ |
| 质检记录 | ✅ | ✅ | ✅ | ✅ (提交) | 👁️ |
| 质检审批 | ✅ | ✅ | ✅ | ❌ | ❌ |
| 成本分析 | ✅ | ✅ | ✅ | ❌ | ❌ |
| DeepSeek分析 | ✅ | ✅ | ✅ | ❌ | ❌ |
| 设备监控 | ✅ | ✅ | ✅ | 👁️ | 👁️ |
| 数据导出 | ✅ | ✅ | ✅ | ❌ | ❌ |

### 生产计划管理模块 ⭐ **已完成 (2025-10-06)**

| 页面 | platform_admin | factory_super_admin | department_admin | operator | viewer |
|-----|----------------|---------------------|------------------|----------|--------|
| **生产计划管理** | 👁️ **只读** | ✅ 完全 | ✅ 完全 | ❌ | ❌ |

**权限说明**:
- **platform_admin**: 可以访问,但只读,不能创建/修改/删除
- **factory_super_admin**: 完全权限,可以创建和管理生产计划
- **department_admin**: 完全权限,目前与超级管理员相同
- **operator**: 不访问,主要用于打卡和工作报告
- **viewer**: 无权访问

**完成状态**: ✅ 100% (前端839行 + 后端738行 + 3个API客户端)

---

### 员工打卡模块 ⚠️ **权限已更新**

| 页面 | platform_admin | factory_super_admin | department_admin | operator | viewer |
|-----|----------------|---------------------|------------------|----------|--------|
| 打卡页面 | ❌ | ✅ **需要** | ✅ **需要** | ✅ **需要** | ❌ |
| 打卡记录 | ✅ (所有) | ✅ (本工厂) | ✅ (本部门) | ✅ (本人) | ❌ |
| 工时统计 | ✅ (所有) | ✅ (本工厂) | ✅ (本部门) | ✅ (本人) | ❌ |
| 工作记录 | ✅ (所有) | ✅ (本工厂) | ✅ (本部门) | ✅ (本人) | ❌ |

**⚠️ 重要变更**:
- 所有工厂账号(包括管理员)都需要打卡签到
- 所有工厂账号(包括管理员)都需要工作报告

### 管理模块

| 页面 | platform_admin | factory_super_admin | permission_admin | department_admin | operator | viewer |
|-----|----------------|---------------------|------------------|------------------|----------|--------|
| 用户管理 | ✅ (所有用户) | ✅ (本工厂) | ✅ (本工厂) | ❌ | ❌ | ❌ |
| 创建用户 | ✅ | ✅ | ❌ | ❌ | ❌ | ❌ |
| 删除用户 | ✅ | ✅ | ❌ | ❌ | ❌ | ❌ |
| 角色分配 | ✅ | ✅ | ✅ | ❌ | ❌ | ❌ |
| 白名单管理 | ✅ (所有工厂) | ✅ (本工厂) | ❌ | ❌ | ❌ | ❌ |
| 权限配置 | ✅ | ✅ | 👁️ | ❌ | ❌ | ❌ |

**图例**: ✅ 完全访问（读+写） | 👁️ 只读访问 | ❌ 无权访问

---

## 🎯 按角色查看

### platform_admin (平台管理员)

**可访问Tab**:
- ✅ 首页
- ✅ 平台
- ✅ 加工
- ✅ 养殖
- ✅ 物流
- ✅ 溯源
- ✅ 管理

**可访问页面** (30+):
- 平台管理: 仪表板、工厂列表、工厂详情、平台配置
- 工厂管理: 所有工厂的所有业务页面
- 用户管理: 所有工厂的所有用户
- 数据分析: 跨工厂报表、平台级分析
- 系统管理: 系统配置、日志审计

**登录后流程**:
```
登录 → 平台仪表板
     ↓
显示所有工厂卡片
     ↓
可选操作:
  - 查看工厂详情
  - 管理用户
  - 查看跨工厂报表
  - 配置平台设置
```

**典型操作流程**:
```
1. 查看工厂列表
2. 选择某个工厂
3. 查看工厂详细数据
4. 管理工厂用户
5. 查看工厂生产报表
```

---

### factory_super_admin (工厂超级管理员)

**可访问Tab**:
- ✅ 首页
- ✅ 加工
- ✅ 养殖
- ✅ 物流
- ✅ 溯源
- ✅ 管理

**可访问页面** (25+):
- 工厂首页: 工厂概览、今日数据
- 加工模块: 所有加工相关页面
- 员工管理: 本工厂所有员工
- 用户管理: 本工厂用户CRUD
- 数据分析: 本工厂报表

**登录后流程**:
```
登录 → 工厂首页
     ↓
显示本工厂概览:
  - 今日生产数据
  - 员工出勤
  - 设备状态
  - 最近告警
     ↓
可选操作:
  - 切换到各业务模块
  - 管理员工
  - 查看报表
  - 配置工厂设置
```

**典型操作流程**:
```
1. 查看工厂今日概览
2. 点击"加工"Tab
3. 查看进行中的批次
4. 点击某批次查看详情
5. 审批质检结果
```

---

### permission_admin (权限管理员)

**可访问Tab**:
- ✅ 首页
- ✅ 管理

**可访问页面** (10+):
- 首页: 工厂概览（只读）
- 用户管理: 查看用户、分配角色
- 权限管理: 查看权限配置

**登录后流程**:
```
登录 → 用户管理页
     ↓
显示本工厂用户列表
     ↓
可选操作:
  - 查看用户详情
  - 分配/修改用户角色
  - 查看权限配置
  - 查看角色变更历史
```

**权限限制**:
- ❌ 不能创建/删除用户
- ✅ 可以修改用户角色
- ✅ 可以查看所有业务数据（只读）
- ❌ 不能修改业务数据

---

### department_admin (部门管理员)

**可访问Tab** (以加工部为例):
- ✅ 首页
- ✅ 加工
- ❌ 养殖 (非本部门)
- ❌ 物流 (非本部门)

**可访问页面** (15+):
- 首页: 工厂概览
- 加工仪表板: 本部门数据
- 批次管理: 创建、编辑、查看本部门批次
- 质检管理: 提交、审批本部门质检
- 成本分析: 本部门成本数据
- 设备监控: 本部门设备
- 员工管理: 本部门员工工时

**登录后流程**:
```
登录 → 加工仪表板 (如果是加工部门管理员)
     ↓
显示本部门今日数据:
  - 进行中批次: 3个
  - 待质检: 2个
  - 员工出勤: 15/20
  - 设备运行: 正常
     ↓
可选操作:
  - 创建新批次
  - 查看批次详情
  - 提交质检
  - 查看成本分析
```

**数据隔离**:
```
加工部门管理员:
  ✅ 可见: 加工部门的所有批次
  ❌ 不可见: 养殖部门的批次
  ❌ 不可见: 物流部门的数据
```

---

### operator (操作员)

**可访问Tab**:
- ✅ 首页
- ✅ 打卡
- ✅ 加工 (如果分配了加工部门)

**可访问页面** (5+):
- 打卡页面: 上班/下班打卡
- 打卡记录: 查看本人打卡记录
- 工时统计: 查看本人工时
- 批次列表: 查看本人参与的批次（只读）
- 质检提交: 提交质检记录

**登录后流程**:
```
登录 → 打卡页面
     ↓
显示大号打卡按钮:
  ┌─────────────────┐
  │   [上班打卡]     │
  │   08:30 AM      │
  └─────────────────┘
     ↓
今日工时: 0.0小时
本周工时: 24.5小时
     ↓
可选操作:
  - 上班打卡
  - 下班打卡
  - 查看打卡记录
  - 查看工时统计
```

**操作流程**:
```
场景1: 上班打卡
  1. 到达工厂
  2. 打开App
  3. 点击"上班打卡"
  4. 系统获取GPS
  5. 拍摄照片（可选）
  6. 提交打卡
  7. 显示"打卡成功"

场景2: 提交质检
  1. 完成产品检验
  2. 进入加工模块
  3. 选择对应批次
  4. 点击"提交质检"
  5. 填写质检结果
  6. 上传照片
  7. 提交记录
```

---

## 🗺️ 完整页面地图

### 认证流程

```
Login (登录页)
  ├─→ RegisterPhaseOne (注册第一步)
  │    └─→ RegisterPhaseTwo (注册第二步)
  │         └─→ Login (返回登录)
  │
  └─→ Main (主应用)
```

### 主应用导航树

```
Main (主应用)
│
├─ HomeTab (首页)
│  └─ HomeScreen
│     ├─→ UserProfile (个人资料)
│     └─→ Notifications (通知)
│
├─ PlatformTab (平台) [仅 platform_admin]
│  ├─ PlatformDashboard (仪表板)
│  ├─ FactoryList (工厂列表)
│  │  └─→ FactoryDetail (工厂详情)
│  │       ├─→ FactoryUsers (工厂用户)
│  │       ├─→ FactorySettings (工厂配置)
│  │       └─→ FactoryReports (工厂报表)
│  └─ PlatformSettings (平台配置)
│
├─ ProcessingTab (加工) [有加工权限的角色]
│  ├─ ProcessingDashboard (仪表板)
│  │  ├─→ CreateBatch (快捷创建批次)
│  │  └─→ BatchList (查看所有批次)
│  ├─ BatchList (批次列表)
│  │  ├─→ BatchDetail (批次详情)
│  │  │    ├─→ QualityInspection (质检)
│  │  │    ├─→ CostAnalysis (成本分析)
│  │  │    └─→ BatchTimeline (批次时间线)
│  │  └─→ CreateBatch (创建批次)
│  │       └─→ BatchDetail (创建后跳转)
│  ├─ CostAnalysis (成本分析总览)
│  │  ├─→ BatchCostDetail (批次成本详情)
│  │  └─→ DeepSeekAnalysis (AI分析)
│  └─ EquipmentMonitoring (设备监控)
│     └─→ EquipmentDetail (设备详情)
│
├─ TimeClockTab (打卡) [仅 operator]
│  ├─ TimeClockScreen (打卡页)
│  │  └─→ ClockConfirmation (打卡确认)
│  ├─ ClockHistory (打卡记录)
│  │  └─→ ClockDetail (打卡详情)
│  └─ TimeStatistics (工时统计)
│     ├─→ DailyStats (日统计)
│     ├─→ WeeklyStats (周统计)
│     └─→ MonthlyStats (月统计)
│
└─ AdminTab (管理) [管理员级别]
   ├─ UserManagement (用户管理)
   │  ├─→ UserDetail (用户详情)
   │  │    ├─→ EditUser (编辑用户)
   │  │    └─→ UserRoleHistory (角色历史)
   │  └─→ CreateUser (创建用户)
   ├─ WhitelistManagement (白名单管理)
   │  ├─→ AddToWhitelist (添加白名单)
   │  └─→ WhitelistDetail (白名单详情)
   └─ PermissionManagement (权限管理)
      ├─→ RolePermissions (角色权限)
      └─→ PermissionSettings (权限配置)
```

---

## 🔄 页面跳转场景

### 场景1: platform_admin 查看工厂详情

```
平台仪表板
  ↓ (点击工厂卡片)
工厂详情页
  ├─→ 查看工厂用户
  ├─→ 查看工厂生产数据
  ├─→ 查看工厂设备
  └─→ 编辑工厂配置
  ↓ (点击"查看生产数据")
加工仪表板 (该工厂)
  ↓ (点击某批次)
批次详情
  ├─→ 查看成本分析
  ├─→ 查看质检记录
  └─→ 返回工厂详情
```

### 场景2: department_admin 创建批次

```
加工仪表板
  ↓ (点击"创建批次")
创建批次页面
  ├─ 填写批次信息
  │   - 产品类型
  │   - 原料信息
  │   - 目标产量
  ├─ 上传原料照片
  └─ 提交
  ↓ (创建成功)
批次详情页 (新建批次)
  ↓ (显示成功消息)
可继续操作:
  - 开始加工
  - 添加质检
  - 查看成本
```

### 场景3: operator 打卡流程

```
打开App
  ↓ (自动登录成功)
打卡页面
  ↓ (点击"上班打卡")
获取GPS位置
  ├─ 在工厂范围内 → 允许打卡
  └─ 不在范围内 → 提示错误
  ↓
拍摄打卡照片 (可选)
  ↓
提交打卡
  ↓
打卡成功
  ↓
显示当前状态:
  - 已上班
  - 工作时长: 0小时0分
  ↓
...工作中...
  ↓
点击"下班打卡"
  ↓
计算工时: 8.5小时
  ↓
记录工作记录
  ↓
显示下班成功
```

### 场景4: 从通知跳转

```
收到推送通知:
  "批次 BATCH-2025-001 质检不合格"
  ↓ (点击通知)
App启动
  ↓
检查登录状态
  ├─ 已登录 → 直接跳转
  └─ 未登录 → 先登录
  ↓
导航到批次详情:
  Main → ProcessingTab → BatchDetail
  ↓
高亮显示质检不合格信息
```

---

## 🛡️ 权限控制实现

### 在页面级控制

```typescript
// ProcessingDashboardScreen.tsx
const ProcessingDashboardScreen = ({ navigation }) => {
  const { user } = useAuthStore();

  // 页面加载时检查权限
  useEffect(() => {
    if (!hasModuleAccess(user, 'processing_access')) {
      Alert.alert('无权访问', '您没有权限访问加工模块', [
        {
          text: '返回',
          onPress: () => navigation.goBack()
        }
      ]);
    }
  }, []);

  return (
    <View>
      {/* 仪表板内容 */}

      {/* 创建批次按钮 - 仅部门管理员及以上 */}
      <PermissionGuard requiredPermissions={['processing_batch_create']}>
        <Button
          title="创建批次"
          onPress={() => navigation.navigate('CreateBatch')}
        />
      </PermissionGuard>
    </View>
  );
};
```

### 在组件级控制

```typescript
// BatchListItem.tsx
const BatchListItem = ({ batch }) => {
  const { user } = useAuthStore();

  return (
    <View>
      <Text>{batch.batchNumber}</Text>

      {/* 编辑按钮 - 仅有编辑权限的用户可见 */}
      {hasPermission(user, 'processing_batch_edit') && (
        <Button title="编辑" onPress={() => editBatch(batch.id)} />
      )}

      {/* 删除按钮 - 仅工厂超管可见 */}
      {user.role === 'factory_super_admin' && (
        <Button title="删除" onPress={() => deleteBatch(batch.id)} />
      )}

      {/* 查看按钮 - 所有人可见 */}
      <Button title="查看" onPress={() => viewBatch(batch.id)} />
    </View>
  );
};
```

---

## 📊 数据访问范围

### 按角色的数据可见性

**platform_admin**:
```sql
-- 可以查询所有工厂的所有数据
SELECT * FROM processing_batches;
SELECT * FROM users;
SELECT * FROM factories;
```

**factory_super_admin**:
```sql
-- 只能查询本工厂的数据
SELECT * FROM processing_batches
WHERE factory_id = 'TEST_2024_001';

SELECT * FROM users
WHERE factory_id = 'TEST_2024_001';
```

**department_admin (加工部)**:
```sql
-- 只能查询本部门的数据
SELECT * FROM processing_batches
WHERE factory_id = 'TEST_2024_001'
  AND department = 'processing';

SELECT * FROM users
WHERE factory_id = 'TEST_2024_001'
  AND department = 'processing';
```

**operator**:
```sql
-- 只能查询本人创建的数据
SELECT * FROM processing_batches
WHERE factory_id = 'TEST_2024_001'
  AND supervisor_id = 123;  -- 本人ID

SELECT * FROM employee_time_clocks
WHERE employee_id = 123;  -- 本人ID
```

---

## 🎨 UI 显示差异

### 同一页面不同角色看到的UI

**批次详情页面**:

**platform_admin / factory_super_admin 看到的**:
```
┌─────────────────────────────────┐
│ 批次详情 BATCH-2025-001          │
├─────────────────────────────────┤
│ 产品类型: 冻鱼片                 │
│ 原料数量: 1000 kg                │
│ 实际产量: 850 kg                 │
│ 单位成本: ¥12.5/kg               │
│ 总成本: ¥10,625                  │
├─────────────────────────────────┤
│ [编辑] [删除] [导出] [分析]       │  ← 所有操作按钮
└─────────────────────────────────┘
```

**department_admin 看到的**:
```
┌─────────────────────────────────┐
│ 批次详情 BATCH-2025-001          │
├─────────────────────────────────┤
│ 产品类型: 冻鱼片                 │
│ 原料数量: 1000 kg                │
│ 实际产量: 850 kg                 │
│ 单位成本: ¥12.5/kg               │
│ 总成本: ¥10,625                  │
├─────────────────────────────────┤
│ [编辑] [导出] [分析]              │  ← 无删除按钮
└─────────────────────────────────┘
```

**operator 看到的**:
```
┌─────────────────────────────────┐
│ 批次详情 BATCH-2025-001          │
├─────────────────────────────────┤
│ 产品类型: 冻鱼片                 │
│ 原料数量: 1000 kg                │
│ 实际产量: 850 kg                 │
│ 单位成本: *** (隐藏)             │  ← 成本信息隐藏
│ 总成本: *** (隐藏)               │
├─────────────────────────────────┤
│ [查看质检]                       │  ← 只有查看按钮
└─────────────────────────────────┘
```

**viewer 看到的**:
```
┌─────────────────────────────────┐
│ 批次详情 BATCH-2025-001          │
├─────────────────────────────────┤
│ 产品类型: 冻鱼片                 │
│ 原料数量: 1000 kg                │
│ 实际产量: 850 kg                 │
│ 单位成本: *** (隐藏)             │
│ 总成本: *** (隐藏)               │
├─────────────────────────────────┤
│ (无操作按钮)                     │  ← 纯只读
└─────────────────────────────────┘
```

---

## 🚀 导航优化建议

### 1. 预加载常用页面

```typescript
// 在Tab切换时预加载下一个Tab的数据
const ProcessingTab = () => {
  const prefetchData = async () => {
    // 预加载批次列表
    await fetchBatches();
  };

  useFocusEffect(() => {
    prefetchData();
  });
};
```

### 2. 智能返回栈

```typescript
// 避免返回栈过深
if (navigation.canGoBack()) {
  navigation.goBack();
} else {
  // 无法返回时，跳转到首页
  navigation.navigate('HomeTab');
}
```

### 3. 防重复导航

```typescript
// 避免重复导航到同一页面
const navigateToBatch = (batchId: string) => {
  const currentRoute = navigation.getState().routes[navigation.getState().index];

  if (currentRoute.name === 'BatchDetail' && currentRoute.params?.batchId === batchId) {
    // 已在目标页面，无需导航
    return;
  }

  navigation.navigate('BatchDetail', { batchId });
};
```

---

## 📱 实际使用示例

### 示例1: platform_admin 的一天

```
08:00 - 登录App
      → 自动跳转到平台仪表板
      → 查看昨日各工厂生产数据

08:15 - 点击"工厂列表"
      → 查看所有工厂状态
      → 发现某工厂生产异常

08:20 - 点击该工厂
      → 进入工厂详情页
      → 查看该工厂加工批次

08:25 - 点击异常批次
      → 查看批次详情
      → 发现成本超标30%

08:30 - 点击"成本分析"
      → 查看成本明细
      → 点击"AI分析"
      → 获得优化建议

09:00 - 返回平台仪表板
      → 查看其他工厂
```

### 示例2: department_admin (加工部) 的一天

```
07:30 - 登录App
      → 自动跳转到加工仪表板
      → 查看今日生产计划

07:40 - 点击"创建批次"
      → 填写批次信息
      → 提交创建

08:00 - 批次创建成功
      → 自动跳转到批次详情
      → 通知操作员开始加工

12:00 - 收到质检通知
      → 点击通知
      → 跳转到质检页面
      → 审批质检结果

17:00 - 查看今日完成批次
      → 查看成本分析
      → 导出日报表
```

### 示例3: operator 的一天

```
07:55 - 到达工厂，打开App
      → 自动登录
      → 自动跳转到打卡页面

08:00 - 点击"上班打卡"
      → GPS定位成功
      → 打卡成功
      → 显示"已上班，开始工作"

08:10 - 切换到"加工"Tab
      → 查看今日分配的批次
      → 点击批次详情
      → 开始加工操作

12:00 - 午休打卡
      → 返回打卡页
      → 点击"下班打卡"
      → 工时: 4小时

17:30 - 完成工作
      → 提交质检记录
      → 返回打卡页
      → 点击"下班打卡"
      → 今日总工时: 8.5小时
```

---

## 附录

### A. 路由命名规范

| 类型 | 命名规则 | 示例 |
|-----|---------|------|
| **Tab** | `XxxTab` | `HomeTab`, `ProcessingTab` |
| **Stack** | `XxxStack` | `ProcessingStack`, `AdminStack` |
| **Screen** | `XxxScreen` | `BatchDetailScreen`, `LoginScreen` |
| **Modal** | `XxxModal` | `UserProfileModal`, `SettingsModal` |

### B. 参数传递规范

```typescript
// ✅ 推荐：传递ID
navigation.navigate('BatchDetail', { batchId: 'batch_123' });

// ❌ 不推荐：传递整个对象（会序列化，可能失败）
navigation.navigate('BatchDetail', { batch: batchObject });

// ✅ 可选参数使用 ?
navigation.navigate('BatchList', { status: 'in_progress' });

// ✅ 复杂场景使用嵌套
navigation.navigate('Main', {
  screen: 'ProcessingTab',
  params: {
    screen: 'BatchDetail',
    params: { batchId: 'batch_123', highlight: 'cost' }
  }
});
```

### C. 返回处理规范

```typescript
// ✅ 推荐：使用 goBack()
navigation.goBack();

// ✅ 指定返回到某页面
navigation.navigate('ProcessingDashboard');

// ✅ 重置整个栈
navigation.reset({
  index: 0,
  routes: [{ name: 'ProcessingDashboard' }],
});

// ❌ 不推荐：使用 pop()（仅在特殊情况使用）
navigation.pop();
```

---

**文档结束**

*本速查表提供了快速查找角色权限和页面访问规则的参考*
