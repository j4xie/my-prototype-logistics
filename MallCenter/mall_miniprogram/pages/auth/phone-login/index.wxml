<!--
  手机号验证码登录页面
-->
<view class="container">
  <!-- Logo -->
  <view class="logo-section">
    <image class="logo" src="/images/logo.png" mode="aspectFit"></image>
    <text class="title">手机号登录</text>
  </view>

  <!-- 表单 -->
  <view class="form-section">
    <!-- 手机号输入 -->
    <view class="input-group">
      <text class="input-label">手机号</text>
      <view class="input-wrapper">
        <text class="prefix">+86</text>
        <input
          class="input"
          type="number"
          maxlength="11"
          placeholder="请输入手机号"
          value="{{phone}}"
          bindinput="onPhoneInput"
        />
        <text class="clear-btn" wx:if="{{phone}}" bindtap="clearPhone">×</text>
      </view>
    </view>

    <!-- 验证码输入 -->
    <view class="input-group">
      <text class="input-label">验证码</text>
      <view class="input-wrapper code-wrapper">
        <input
          class="input code-input"
          type="number"
          maxlength="6"
          placeholder="请输入验证码"
          value="{{code}}"
          bindinput="onCodeInput"
        />
        <button
          class="send-code-btn {{canSendCode ? '' : 'disabled'}}"
          disabled="{{!canSendCode || countdown > 0}}"
          bindtap="sendCode"
        >
          {{countdown > 0 ? countdown + 's' : '获取验证码'}}
        </button>
      </view>
    </view>

    <!-- 登录按钮 -->
    <button
      class="login-btn {{canLogin ? '' : 'disabled'}}"
      disabled="{{!canLogin || loading}}"
      bindtap="doLogin"
    >
      {{loading ? '登录中...' : '登录'}}
    </button>
  </view>

  <!-- 其他登录方式 -->
  <view class="other-login">
    <view class="divider">
      <view class="line"></view>
      <text class="text">其他登录方式</text>
      <view class="line"></view>
    </view>

    <view class="login-methods">
      <view class="method-item" bindtap="goWechatLogin">
        <image class="method-icon" src="/images/icons/wechat.png" mode="aspectFit"></image>
        <text class="method-text">微信登录</text>
      </view>
    </view>
  </view>

  <!-- 用户协议 -->
  <view class="agreement-section">
    <checkbox-group bindchange="onAgreementChange">
      <label class="agreement-label">
        <checkbox value="agreed" checked="{{agreed}}" color="#07c160"/>
        <text class="agreement-text">
          我已阅读并同意
          <text class="link" bindtap="showUserAgreement">《用户协议》</text>
          和
          <text class="link" bindtap="showPrivacyPolicy">《隐私政策》</text>
        </text>
      </label>
    </checkbox-group>
  </view>
</view>
