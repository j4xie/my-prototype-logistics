import{c as V}from"./main.vue_vue_type_style_index_0_scoped_25ddb73a_lang-CRgDsjTq.js";import{W as N,g as A}from"./wxfreepublish-ncAXMMh-.js";import{U as C,_ as E,B as F,d as R,C as U,D as J,F as q,e as h,I as G,c as r,k as S,o as i,J as O,h as m,l as t,L as D,M as T,f as s,A as H,i as p,n as x,t as K,v as Q}from"./index-DxyzpFVi.js";const X={dialogDrag:!0,border:!0,index:!0,indexLabel:"序号",indexWidth:70,stripe:!0,menuAlign:"center",align:"center",editBtn:!1,delBtn:!1,addBtn:!1,viewBtn:!0,searchMenuSpan:6,column:[{label:"media_id",prop:"mediaId"},{label:"名称",prop:"name"},{label:"更新时间",prop:"updateTime"}]},Y={dialogDrag:!0,border:!0,index:!0,indexLabel:"序号",indexWidth:70,stripe:!0,menuAlign:"center",align:"center",editBtn:!1,delBtn:!1,addBtn:!1,viewBtn:!0,searchMenuSpan:6,column:[{label:"media_id",prop:"mediaId"},{label:"名称",prop:"name"},{label:"更新时间",prop:"updateTime"}]};function Z(n){return C({url:"/wxdraft/page",method:"get",params:n})}function ke(n){return C({url:"/wxdraft",method:"post",data:n})}function we(n){return C({url:"/wxdraft",method:"delete",params:n})}function Se(n){return C({url:"/wxdraft",method:"put",data:n})}function xe(n){return C({url:"/wxdraft/publish/"+n,method:"post"})}const M=n=>(K("data-v-25ddb73a"),n=n(),Q(),n),ee={key:0},te={class:"waterfall"},ae=["src"],ne={class:"item-name"},oe={key:0,class:"el-table__empty-block"},se=M(()=>m("span",{class:"el-table__empty-text"},"暂无数据",-1)),le=[se],re={class:"dialog-footer"},ie={key:1},ce={key:2},de={key:3},pe={class:"waterfall"},ue={key:0,class:"waterfall-item"},ge={key:0,class:"el-table__empty-block"},_e=M(()=>m("span",{class:"el-table__empty-text"},"暂无数据",-1)),fe=[_e],be={class:"dialog-footer"},he=F({name:"WxMaterialSelect"}),me=Object.assign(he,{props:{objData:{type:Object},newsType:{type:String,default:"1"}},setup(n){const{proxy:y}=R(),v=n,e=U({tableLoading:!1,tableData:[],page:{total:0,currentPage:1,pageSize:20,ascs:[],descs:[]}}),{tableData:_,tableLoading:f,page:d}=J(e);function W(){b(e.page)}W(),q(()=>{});function z(a){y.$emit("selectMaterial",a)}function b(a,u){e.tableLoading=!0,v.objData.repType=="news"?v.newsType=="1"?A(Object.assign({current:a.currentPage,size:a.pageSize,appId:y.appId},u)).then(c=>{let g=c.data.items;g.forEach(l=>{l.mediaId=l.articleId,l.content.articles=l.content.newsItem}),e.tableData=g,e.page.total=c.data.totalCount,e.page.currentPage=a.currentPage,e.page.pageSize=a.pageSize,e.tableLoading=!1}):v.newsType=="2"&&Z(Object.assign({current:a.currentPage,size:a.pageSize,appId:y.appId},u)).then(c=>{let g=c.data.items;g.forEach(l=>{l.mediaId=l.mediaId,l.content.articles=l.content.newsItem}),e.tableData=g,e.page.total=c.data.totalCount,e.page.currentPage=a.currentPage,e.page.pageSize=a.pageSize,e.tableLoading=!1}):V(Object.assign({current:a.currentPage,size:a.pageSize,appId:y.appId,type:v.objData.repType},u)).then(c=>{e.tableData=c.data.items,e.page.total=c.data.totalCount,e.page.currentPage=a.currentPage,e.page.pageSize=a.pageSize,e.tableLoading=!1})}function k(a){e.page.currentPage=1,e.page.pageSize=a,b(e.page)}function $(a){e.page.currentPage=a,b(e.page)}function P(a){b(e.page)}return(a,u)=>{const c=h("CircleCheck"),g=h("el-icon"),l=h("el-button"),I=h("el-row"),j=h("el-pagination"),B=h("avue-crud"),L=G("loading");return n.objData.repType=="image"?(i(),r("div",ee,[O((i(),r("div",te,[(i(!0),r(D,null,T(t(_),o=>(i(),r("div",{class:"waterfall-item",key:o.mediaId},[m("img",{class:"material-img",src:o.url},null,8,ae),m("p",ne,H(o.name),1),s(I,{class:"ope-row"},{default:p(()=>[s(l,{size:"small",type:"success",onClick:w=>z(o)},{default:p(()=>[x("选择"),s(g,{class:"el-icon--right"},{default:p(()=>[s(c)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]))),128))])),[[L,t(f)]]),t(_).length<=0&&!t(f)?(i(),r("div",oe,le)):S("",!0),m("span",re,[s(j,{onSizeChange:k,onCurrentChange:$,"current-page":t(d).currentPage,"onUpdate:currentPage":u[0]||(u[0]=o=>t(d).currentPage=o),"page-sizes":[10,20],"page-size":t(d).pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t(d).total,class:"pagination"},null,8,["current-page","page-size","total"])])])):n.objData.repType=="voice"?(i(),r("div",ie,[s(B,{ref:"crud",page:t(d),data:t(_),"table-loading":t(f),option:t(X),onOnLoad:b,onSizeChange:k,onRefreshChange:P},{menu:p(o=>[s(l,{link:"",icon:"CircleCheck",type:"success",onClick:w=>z(o.row)},{default:p(()=>[x("选择")]),_:2},1032,["onClick"])]),_:1},8,["page","data","table-loading","option"])])):n.objData.repType=="video"?(i(),r("div",ce,[s(B,{ref:"crud",page:t(d),data:t(_),"table-loading":t(f),option:t(Y),onOnLoad:b,onSizeChange:k,onRefreshChange:P},{menu:p(o=>[s(l,{link:"",icon:"CircleCheck",type:"success",onClick:w=>z(o.row)},{default:p(()=>[x("选择")]),_:2},1032,["onClick"])]),_:1},8,["page","data","table-loading","option"])])):n.objData.repType=="news"?(i(),r("div",de,[O((i(),r("div",pe,[(i(!0),r(D,null,T(t(_),(o,w)=>(i(),r(D,{key:w},[o.content&&o.content.articles?(i(),r("div",ue,[s(N,{objData:o.content.articles},null,8,["objData"]),s(I,{class:"ope-row"},{default:p(()=>[s(l,{size:"small",type:"success",onClick:Ce=>z(o)},{default:p(()=>[x("选择"),s(g,{class:"el-icon--right"},{default:p(()=>[s(c)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)])):S("",!0)],64))),128))])),[[L,t(f)]]),t(_).length<=0&&!t(f)?(i(),r("div",ge,fe)):S("",!0),m("span",be,[s(j,{style:{"margin-top":"20px"},onSizeChange:k,"current-page":t(d).currentPage,"onUpdate:currentPage":u[1]||(u[1]=o=>t(d).currentPage=o),"page-sizes":[10,20],"page-size":t(d).pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t(d).total,class:"pagination"},null,8,["current-page","page-size","total"])])])):S("",!0)}}}),De=E(me,[["__scopeId","data-v-25ddb73a"]]);export{De as W,ke as a,xe as b,we as d,Z as g,Se as p};
