import{W as O}from"./main-rttH6h2b.js";import{d as j,a as y,p as L,g as U}from"./wxusertags-CjEFZ3CX.js";import{c as i}from"./permission-CtopeLks.js";import{B as v,d as D,C as V,D as k,y as R,e as g,c as I,o as d,f as p,l as o,i as M,j as $,k as P,G as T}from"./index-DxyzpFVi.js";import"./main-DtlCLU_N.js";import"./main.vue_vue_type_style_index_0_scoped_25ddb73a_lang-CRgDsjTq.js";import"./wxfreepublish-ncAXMMh-.js";/* empty css                                                             */import"./main-dgY30BGH.js";const W={dialogDrag:!0,border:!0,index:!1,stripe:!0,menuAlign:"center",align:"center",viewBtn:!0,searchShow:!1,menuWidth:350,menuType:"text",searchMenuSpan:6,column:[{label:"名称",prop:"name",rules:[{required:!0,message:"请输入名称",trigger:"blur"}]}]},A=v({name:"WxMpUserTags"}),Q=Object.assign(A,{setup(N){const{proxy:r}=D(),e=V({tableData:[],page:{total:0,currentPage:1,pageSize:20,ascs:[],descs:"subscribe_time"},paramsSearch:{},tableLoading:!1,dialogMsgVisible:!1,wxUserId:""}),{page:u,tableData:m,tableLoading:f,dialogMsgVisible:c,wxUserId:h}=k(e);R(()=>({addBtn:i(["wxmp:wxusertags:add"]),delBtn:i(["wxmp:wxusertags:del"]),editBtn:i(["wxmp:wxusertags:edit"]),viewBtn:i(["wxmp:wxusertags:get"])}));function b(a,t){a=r.filterForm(a),e.paramsSearch=a,e.page.currentPage=1,n(e.page,a),t()}function w(a){let t=a.prop?a.prop.replace(/([A-Z])/g,"_$1").toLowerCase():"";a.order=="ascending"?(e.page.descs=[],e.page.ascs=t):a.order=="descending"?(e.page.ascs=[],e.page.descs=t):(e.page.ascs=[],e.page.descs=[]),n(e.page)}function n(a,t){e.tableLoading=!0,U(Object.assign({},t,e.paramsSearch)).then(s=>{e.tableData=s.data,e.tableLoading=!1}).catch(()=>{e.tableLoading=!1})}function x(a,t){r.$confirm("是否确认删除","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return j({id:a.id})}).then(()=>{r.$message({showClose:!0,message:"删除成功",type:"success"}),n(e.page)}).catch(function(s){})}function _(a,t,s,l){L(Object.assign({},a)).then(()=>{r.$message({showClose:!0,message:"修改成功",type:"success"}),s(),n(e.page)}).catch(()=>{l()})}function C(a,t,s){y(Object.assign({},a)).then(()=>{r.$message({showClose:!0,message:"添加成功",type:"success"}),t(),n(e.page)}).catch(()=>{s()})}function B(a){n(e.page)}return(a,t)=>{const s=g("avue-crud"),l=g("el-dialog");return d(),I("div",null,[p(s,{ref:"crud",page:o(u),data:o(m),"table-loading":o(f),option:o(W),onOnLoad:n,onRefreshChange:B,onRowUpdate:_,onRowSave:C,onRowDel:x,onSortChange:w,onSearchChange:b},null,8,["page","data","table-loading","option"]),p(l,{title:"用户消息",modelValue:o(c),"onUpdate:modelValue":t[0]||(t[0]=S=>T(c)?c.value=S:null),width:"40%"},{default:M(()=>[o(c)?(d(),$(O,{key:0,wxUserId:o(h)},null,8,["wxUserId"])):P("",!0)]),_:1},8,["modelValue"])])}}});export{Q as default};
