import{c as i}from"./permission-CtopeLks.js";import{U as c,B as T,d as v,C as L,D as P,y as O,e as u,c as z,o as $,f as g,i as f,n as j,A as k,l as o}from"./index-DxyzpFVi.js";function R(r){return c({url:"/wxuser/page",method:"get",params:r})}function U(r){return c({url:"/wxuser",method:"post",data:r})}function A(r){return c({url:"/wxuser/"+r,method:"delete"})}function I(r){return c({url:"/wxuser",method:"put",data:r})}let N=[{label:"未知",value:"0"},{label:"男",value:"1"},{label:"女",value:"2"}];const W={dialogDrag:!0,border:!0,index:!1,indexLabel:"序号",stripe:!0,menuAlign:"center",align:"center",editBtn:!1,delBtn:!1,addBtn:!1,excelBtn:!0,printBtn:!0,viewBtn:!0,searchShow:!1,menuWidth:150,menuType:"text",searchMenuSpan:6,defaultSort:{prop:"createTime",order:"descending"},column:[{label:"用户标识",prop:"openId",editDisplay:!1},{label:"头像",prop:"headimgUrl",dataType:"string",fileType:"img",type:"upload",minWidth:83,listType:"picture-img",editDisplay:!1},{label:"昵称",prop:"nickName",width:100,sortable:!0,search:!0,editDisplay:!1},{label:"性别",prop:"sex",width:80,type:"select",sortable:!0,search:!0,editDisplay:!1,slot:!0,dicData:N},{label:"所在国家",prop:"country",sortable:!0,search:!0,editDisplay:!1},{label:"所在省份",prop:"province",sortable:!0,editDisplay:!1},{label:"所在城市",prop:"city",sortable:!0,search:!0,editDisplay:!1},{label:"用户语言",prop:"language",sortable:!0,editDisplay:!1},{label:"用户备注",prop:"remark",hide:!0},{label:"union_id",prop:"unionId",hide:!0,editDisplay:!1},{label:"创建时间",prop:"createTime",type:"datetime",sortable:!0,editDisplay:!1},{label:"更新时间",prop:"updateTime",type:"datetime",sortable:!0,hide:!0,editDisplay:!1}]},F=T({name:"WxMaUser"}),E=Object.assign(F,{setup(r){const{proxy:l}=v(),e=L({tableData:[],page:{total:0,currentPage:1,pageSize:20,ascs:[],descs:"create_time"},paramsSearch:{},tableLoading:!1,selectionData:[],dialogTagging:!1}),{page:h,tableData:m,tableLoading:b}=P(e),x=O(()=>({addBtn:i(["wxma:wxuser:add"]),delBtn:i(["wxma:wxuser:del"]),editBtn:i(["wxma:wxuser:edit"]),viewBtn:i(["wxma:wxuser:get"])}));function y(a){e.selectionData=a}function w(a,t){a=l.filterForm(a),e.paramsSearch=a,e.page.currentPage=1,n(e.page,a),t()}function D(a){let t=a.prop?a.prop.replace(/([A-Z])/g,"_$1").toLowerCase():"";a.order=="ascending"?(e.page.descs=[],e.page.ascs=t):a.order=="descending"?(e.page.ascs=[],e.page.descs=t):(e.page.ascs=[],e.page.descs=[]),n(e.page)}function n(a,t){e.tableLoading=!0,R(Object.assign({current:a.currentPage,size:a.pageSize,descs:e.page.descs,ascs:e.page.ascs,appType:"1"},t,e.paramsSearch)).then(s=>{e.tableData=s.data.records,e.page.total=s.data.total,e.page.currentPage=a.currentPage,e.page.pageSize=a.pageSize,e.tableLoading=!1}).catch(()=>{e.tableLoading=!1})}function _(a,t){l.$confirm("是否确认删除","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return A(a.id)}).then(()=>{l.$message({showClose:!0,message:"删除成功",type:"success"}),n(e.page)}).catch(function(s){})}function C(a,t,s,p){I(a).then(()=>{l.$message({showClose:!0,message:"修改成功",type:"success"}),s(),n(e.page)}).catch(()=>{p()})}function S(a,t,s){U(a).then(()=>{l.$message({showClose:!0,message:"添加成功",type:"success"}),t(),n(e.page)}).catch(()=>{s()})}function B(a){n(e.page)}return(a,t)=>{const s=u("el-tag"),p=u("avue-crud");return $(),z("div",null,[g(p,{ref:"crud",page:o(h),data:o(m),"table-loading":o(b),option:o(W),permission:o(x),onOnLoad:n,onRefreshChange:B,onRowUpdate:C,onRowSave:S,onRowDel:_,onSortChange:D,onSearchChange:w,onSelectionChange:y},{sex:f(d=>[g(s,{size:"small",effect:"light",type:d.row.sex=="1"?"success":d.row.sex=="2"?"danger":"warning"},{default:f(()=>[j(k(d.row.$sex||"未知"),1)]),_:2},1032,["type"])]),_:1},8,["page","data","table-loading","option","permission"])])}}});export{E as default};
