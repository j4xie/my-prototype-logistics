import{U as T,_ as de,B as _e,d as re,C as pe,D as me,y as be,F as he,e as r,I as fe,c,o as u,J as ve,l as t,h as i,k as d,A as V,L as x,M,N as W,f as a,i as _,n as O,j as A,G as D,H as B,t as ge,v as ye}from"./index-DxyzpFVi.js";import{W as we}from"./main-DtlCLU_N.js";import{W as xe}from"./wxfreepublish-ncAXMMh-.js";import{W as ke}from"./main-dgY30BGH.js";import"./main.vue_vue_type_style_index_0_scoped_25ddb73a_lang-CRgDsjTq.js";/* empty css                                                             */function Ce(m){return T({url:"/wxmenu/release",method:"post",data:m})}function Se(m){return T({url:"/wxmenu/list",method:"get",params:m})}const b=m=>(ge("data-v-74dbbbd5"),m=m(),ye(),m),je={class:"app-container"},Ve={class:"public-account-management clearfix"},Me={class:"left"},Oe={class:"weixin-hd"},Re={class:"weixin-title"},Fe={class:"weixin-menu menu_main clearfix"},Ne=["onClick"],We={key:0,class:"submenu"},Ae={key:0,class:"subtitle menu_bottom"},De=["onClick"],Be=["onClick"],Te={class:"save_div"},Le={key:0,class:"right"},$e={class:"configure_page"},Ie={class:"delete_btn"},Ue=b(()=>i("span",null,"菜单名称：",-1)),ze={key:0},Ke={class:"menu_content"},Je=b(()=>i("span",null,"菜单内容：",-1)),Pe={key:0,class:"configur_content"},Ee=b(()=>i("span",null,"跳转链接：",-1)),Ge={key:1,class:"configur_content"},He={class:"applet"},qe=b(()=>i("span",null,"小程序的appid：",-1)),Qe={class:"applet"},Xe=b(()=>i("span",null,"小程序的页面路径：",-1)),Ye={class:"applet"},Ze=b(()=>i("span",null,"备用网页：",-1)),et=b(()=>i("p",{class:"blue"}," tips:需要和公众号进行关联才可以把小程序绑定带微信菜单上哟！ ",-1)),tt={key:2,class:"configur_content"},nt={key:0,class:"select-item"},lt={key:1},st={key:3,class:"configur_content"},ot={key:1,class:"right"},at=b(()=>i("p",null,"请选择菜单配置",-1)),ut=[at],it=_e({name:"WxMpMenuDetail"}),ct=Object.assign(it,{setup(m){const{proxy:f}=re(),e=pe({showRightFlag:!1,menu:{button:[]},isActive:-1,isSubMenuActive:-1,isSubMenuFlag:-1,tempObj:{},tempSelfObj:{},visible2:!1,tableData:[],menuName:"",showConfigurContent:!0,nameMaxlength:0,menuOptions:[{value:"view",label:"跳转网页"},{value:"miniprogram",label:"跳转小程序"},{value:"click",label:"点击回复"},{value:"article_view_limited",label:"跳转图文消息"},{value:"scancode_push",label:"扫码直接返回结果"},{value:"scancode_waitmsg",label:"扫码回复"},{value:"pic_sysphoto",label:"系统拍照发图"},{value:"pic_photo_or_album",label:"拍照或者相册"},{value:"pic_weixin",label:"微信相册"},{value:"location_select",label:"选择地理位置"}],dialogNewsVisible:!1,saveLoading:!1,hackResetWxReplySelect:!1}),{showRightFlag:R,menu:L,isActive:$,isSubMenuActive:I,isSubMenuFlag:U,tempObj:s,tempSelfObj:dt,menuName:z,showConfigurContent:K,nameMaxlength:J,menuOptions:P,dialogNewsVisible:k,saveLoading:E,hackResetWxReplySelect:G}=me(e),C=be(()=>e.menu.button.length);function H(){Y()}H(),he(()=>{});function q(){}function Q(){e.dialogNewsVisible=!0}function X(o){o.content.articles.length>1&&f.$alert("您选择的是多图文，将默认跳转第一篇","提示",{confirmButtonText:"确定"}),e.dialogNewsVisible=!1,e.tempObj.article_id=o.articleId,e.tempObj.mediaName=o.name,e.tempObj.url=o.url,o.mediaType=e.tempObj.mediaType,o.content.articles=o.content.articles.slice(0,1),e.tempObj.content=o.content}function Y(){Se().then(o=>{e.menu.button=JSON.parse(o.msg).button})}function Z(){f.$confirm("确定要保证并发布该菜单吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{e.saveLoading=!0,Ce({strWxMenu:e.menu}).then(o=>{e.saveLoading=!1,o.code==200?f.$message({showClose:!0,message:"发布成功",type:"success"}):f.$message.error(o.data.msg)}).catch(()=>{e.saveLoading=!1})}).catch(()=>{})}function F(o,n){e.hackResetWxReplySelect=!1,B(()=>{e.hackResetWxReplySelect=!0}),e.showRightFlag=!0,e.tempObj=n,e.tempSelfObj.grand="1",e.tempSelfObj.index=o,e.isActive=o,e.isSubMenuFlag=o,e.isSubMenuActive=-1,e.nameMaxlength=4,n.sub_button&&n.sub_button.length>0?e.showConfigurContent=!1:e.showConfigurContent=!0}function N(o,n,p){e.hackResetWxReplySelect=!1,B(()=>{e.hackResetWxReplySelect=!0}),e.showRightFlag=!0,e.tempObj=o,e.tempSelfObj.grand="2",e.tempSelfObj.index=n,e.tempSelfObj.secondIndex=p,e.isSubMenuActive=n+""+p,e.isActive=-1,e.showConfigurContent=!0,e.nameMaxlength=7}function ee(){let o=C.value,n={name:"菜单名称",sub_button:[]};e.menu.button[o]=n,F(C.value-1,n)}function te(o,n){(!n.sub_button||n.sub_button.length<=0)&&(n.sub_button=[],e.showConfigurContent=!1);let p=n.sub_button.length,v={name:"子菜单名称"};n.sub_button[p]=v,N(n.sub_button[p],o,p)}function ne(o){f.$confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{le(),e.tempObj={},e.showRightFlag=!1,e.isActive=-1,e.isSubMenuActive=-1}).catch(()=>{})}function le(){e.tempSelfObj.grand=="1"&&e.menu.button.splice(e.tempSelfObj.index,1),e.tempSelfObj.grand=="2"&&e.menu.button[e.tempSelfObj.index].sub_button.splice(e.tempSelfObj.secondIndex,1),f.$message({type:"success",message:"删除成功!"})}return(o,n)=>{const p=r("Plus"),v=r("el-icon"),y=r("el-button"),g=r("el-input"),se=r("el-option"),oe=r("el-select"),S=r("el-row"),ae=r("CircleCheck"),ue=r("el-col"),ie=r("el-dialog"),ce=fe("loading");return u(),c("div",je,[ve((u(),c("div",Ve,[i("div",Me,[i("div",Oe,[i("div",Re,V(t(z)),1)]),i("div",Fe,[(u(!0),c(x,null,M(t(L).button,(l,h)=>(u(),c("div",{class:"menu_bottom",key:h},[i("div",{onClick:w=>F(h,l),class:W(["menu_item el-icon-s-fold",{active:t($)==h}])},V(l.name),11,Ne),t(U)==h?(u(),c("div",We,[(u(!0),c(x,null,M(l.sub_button,(w,j)=>(u(),c(x,{key:j},[l.sub_button?(u(),c("div",Ae,[i("div",{class:W(["menu_subItem",{active:t(I)==h+""+j}]),onClick:_t=>N(w,h,j)},V(w.name),11,De)])):d("",!0)],64))),128)),!l.sub_button||l.sub_button.length<5?(u(),c("div",{key:0,class:"menu_bottom menu_addicon",onClick:w=>te(h,l)},[a(v,null,{default:_(()=>[a(p)]),_:1})],8,Be)):d("",!0)])):d("",!0)]))),128)),C.value<3?(u(),c("div",{key:0,class:"menu_bottom menu_addicon",onClick:ee},[a(v,null,{default:_(()=>[a(p)]),_:1})])):d("",!0)]),i("div",Te,[a(y,{class:"save_btn",type:"success",size:"small",onClick:Z},{default:_(()=>[O("保存并发布菜单")]),_:1})])]),t(R)?(u(),c("div",Le,[i("div",$e,[i("div",Ie,[a(y,{size:"small",type:"danger",icon:"el-icon-delete",onClick:n[0]||(n[0]=l=>ne(t(s)))},{default:_(()=>[O("删除当前菜单")]),_:1})]),i("div",null,[Ue,a(g,{class:"input_width",modelValue:t(s).name,"onUpdate:modelValue":n[1]||(n[1]=l=>t(s).name=l),placeholder:"请输入菜单名称",maxlength:t(J),clearable:""},null,8,["modelValue","maxlength"])]),t(K)?(u(),c("div",ze,[i("div",Ke,[Je,a(oe,{modelValue:t(s).type,"onUpdate:modelValue":n[2]||(n[2]=l=>t(s).type=l),clearable:"",placeholder:"请选择",class:"menu_option"},{default:_(()=>[(u(!0),c(x,null,M(t(P),l=>(u(),A(se,{label:l.label,value:l.value,key:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),t(s).type=="view"?(u(),c("div",Pe,[Ee,a(g,{class:"input_width",modelValue:t(s).url,"onUpdate:modelValue":n[3]||(n[3]=l=>t(s).url=l),placeholder:"请输入链接",clearable:""},null,8,["modelValue"])])):d("",!0),t(s).type=="miniprogram"?(u(),c("div",Ge,[i("div",He,[qe,a(g,{class:"input_width",modelValue:t(s).appid,"onUpdate:modelValue":n[4]||(n[4]=l=>t(s).appid=l),placeholder:"请输入小程序的appid",clearable:""},null,8,["modelValue"])]),i("div",Qe,[Xe,a(g,{class:"input_width",modelValue:t(s).pagepath,"onUpdate:modelValue":n[5]||(n[5]=l=>t(s).pagepath=l),placeholder:"请输入小程序的页面路径，如：pages/index",clearable:""},null,8,["modelValue"])]),i("div",Ye,[Ze,a(g,{class:"input_width",modelValue:t(s).url,"onUpdate:modelValue":n[6]||(n[6]=l=>t(s).url=l),placeholder:"不支持小程序的老版本客户端将打开本网页",clearable:""},null,8,["modelValue"])]),et])):d("",!0),t(s).type=="article_view_limited"?(u(),c("div",tt,[a(S,null,{default:_(()=>[t(s)&&t(s).content&&t(s).content.articles?(u(),c("div",nt,[a(xe,{objData:t(s).content.articles},null,8,["objData"]),a(S,{class:"ope-row"},{default:_(()=>[a(y,{type:"danger",icon:"el-icon-delete",circle:"",onClick:q})]),_:1})])):d("",!0),!t(s).content||!t(s).content.articles?(u(),c("div",lt,[a(S,null,{default:_(()=>[a(ue,{span:24,style:{"text-align":"center"}},{default:_(()=>[a(y,{type:"success",onClick:Q},{default:_(()=>[O("素材库选择"),a(v,{class:"el-icon--right"},{default:_(()=>[a(ae)]),_:1})]),_:1})]),_:1})]),_:1})])):d("",!0),a(ie,{title:"选择图文",modelValue:t(k),"onUpdate:modelValue":n[7]||(n[7]=l=>D(k)?k.value=l:null),width:"90%"},{default:_(()=>[a(ke,{objData:{repType:"news"},onSelectMaterial:X})]),_:1},8,["modelValue"])]),_:1})])):d("",!0),t(s).type=="click"||t(s).type=="scancode_waitmsg"?(u(),c("div",st,[t(G)?(u(),A(we,{key:0,objData:t(s),"onUpdate:objData":n[8]||(n[8]=l=>D(s)?s.value=l:null)},null,8,["objData"])):d("",!0)])):d("",!0)])):d("",!0)])])):d("",!0),t(R)?d("",!0):(u(),c("div",ot,ut))])),[[ce,t(E)]])])}}}),vt=de(ct,[["__scopeId","data-v-74dbbbd5"]]);export{vt as default};
