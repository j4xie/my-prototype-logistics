import{g as L,W as k,d as y}from"./wxfreepublish-ncAXMMh-.js";import{_ as D,B as S,d as j,r as B,C as I,$ as F,D as M,w as T,F as $,e as p,I as N,c as r,o as s,J as O,k as f,f as l,l as a,L as m,M as W,i as V}from"./index-DxyzpFVi.js";/* empty css                                                             */const A={class:"app-container"},E={class:"waterfall"},J={key:0,class:"waterfall-item"},R={key:0,class:"el-table__empty-block"},U=S({name:"WxMpFreePublish"}),q=Object.assign(U,{setup(G){const{proxy:u}=j(),b=B(null),e=I({tableData:[],page:{total:0,currentPage:1,pageSize:10},page1:{total:0,currentPage:1,pageSize:10},tableLoading:!1,headers:{Authorization:"Bearer "+F()}}),{tableData:d,tableLoading:_,page:c,page1:H,headers:K}=M(e);T(()=>u.filterText,t=>{b.value.filter(t)}),$(()=>{i(e.page)});function i(t,n){e.tableData=[],e.tableLoading=!0,L(Object.assign({current:t.currentPage,size:t.pageSize},n)).then(g=>{e.tableData=g.data.items,e.page.total=g.data.totalCount,e.page.currentPage=t.currentPage,e.page.pageSize=t.pageSize,e.tableLoading=!1}).catch(()=>{e.tableLoading=!1})}function h(t){e.page.currentPage=1,e.page.pageSize=t,i(e.page)}function z(t){e.page.currentPage=t,i(e.page)}function v(t){u.$confirm("删除后用户将无法访问此页面，确定删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{e.tableLoading=!0,y({id:t.articleId}).then(n=>{e.tableLoading=!1,n.code==200?i(e.page):(e.tableLoading=!1,u.$message.error("删除出错："+n.msg))}).catch(()=>{e.tableLoading=!1})})}return(t,n)=>{const g=p("el-button"),C=p("el-row"),w=p("el-empty"),x=p("el-pagination"),P=N("loading");return s(),r("div",A,[O((s(),r("div",E,[(s(!0),r(m,null,W(a(d),o=>(s(),r(m,{key:o.id},[o.content&&o.content.newsItem?(s(),r("div",J,[l(k,{objData:o.content.newsItem},null,8,["objData"]),l(C,{class:"ope-row flex-c"},{default:V(()=>[l(g,{type:"danger",icon:"el-icon-delete",circle:"",onClick:Q=>v(o)},null,8,["onClick"])]),_:2},1024)])):f("",!0)],64))),128))])),[[P,a(_)]]),a(d).length<=0&&!a(_)?(s(),r("div",R,[l(w)])):f("",!0),l(x,{onSizeChange:h,onCurrentChange:z,"current-page":a(c).currentPage,"onUpdate:currentPage":n[0]||(n[0]=o=>a(c).currentPage=o),"page-sizes":[10,20],"page-size":a(c).pageSize,layout:"total, sizes, prev, pager, next, jumper",total:a(c).total,class:"pagination"},null,8,["current-page","page-size","total"])])}}}),ee=D(q,[["__scopeId","data-v-7c6ada43"]]);export{ee as default};
