<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.joolun.mall.mapper.MerchantReviewMapper">
    <resultMap id="reviewMap" type="com.joolun.mall.entity.MerchantReview">
        <id property="id" column="id"/>
        <result property="merchantId" column="merchant_id"/>
        <result property="reviewerId" column="reviewer_id"/>
        <result property="reviewerName" column="reviewer_name"/>
        <result property="action" column="action"/>
        <result property="remark" column="remark"/>
        <result property="createTime" column="create_time"/>
    </resultMap>

    <sql id="reviewSql">
        mr.id,
        mr.merchant_id,
        mr.reviewer_id,
        mr.reviewer_name,
        mr.action,
        mr.remark,
        mr.create_time
    </sql>

    <select id="selectByMerchantId" resultMap="reviewMap">
        SELECT
        <include refid="reviewSql"/>
        FROM merchant_review mr
        WHERE mr.merchant_id = #{merchantId}
        ORDER BY mr.create_time DESC
    </select>
</mapper>
