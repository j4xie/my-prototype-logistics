<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.joolun.mall.mapper.TraceabilityRawMaterialMapper">
    <resultMap id="materialMap" type="com.joolun.mall.entity.TraceabilityRawMaterial">
        <id property="id" column="id"/>
        <result property="batchId" column="batch_id"/>
        <result property="materialName" column="material_name"/>
        <result property="supplier" column="supplier"/>
        <result property="supplierId" column="supplier_id"/>
        <result property="origin" column="origin"/>
        <result property="materialBatchNo" column="material_batch_no"/>
        <result property="productionDate" column="production_date"/>
        <result property="expiryDate" column="expiry_date"/>
        <result property="quantity" column="quantity"/>
        <result property="unit" column="unit"/>
        <result property="verified" column="verified"/>
        <result property="verifyTime" column="verify_time"/>
        <result property="createTime" column="create_time"/>
    </resultMap>

    <sql id="materialSql">
        trm.`id`,
        trm.`batch_id`,
        trm.`material_name`,
        trm.`supplier`,
        trm.`supplier_id`,
        trm.`origin`,
        trm.`material_batch_no`,
        trm.`production_date`,
        trm.`expiry_date`,
        trm.`quantity`,
        trm.`unit`,
        trm.`verified`,
        trm.`verify_time`,
        trm.`create_time`
    </sql>

    <select id="selectByBatchId" resultMap="materialMap">
        SELECT
        <include refid="materialSql"/>
        FROM traceability_raw_material trm
        WHERE trm.`batch_id` = #{batchId}
        ORDER BY trm.`create_time` ASC
    </select>
</mapper>
